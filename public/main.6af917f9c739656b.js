"use strict";var hb=Object.defineProperty,fb=Object.defineProperties,pb=Object.getOwnPropertyDescriptors,Lw=Object.getOwnPropertySymbols,gb=Object.prototype.hasOwnProperty,mb=Object.prototype.propertyIsEnumerable,Uw=(Rt,Ve,V)=>Ve in Rt?hb(Rt,Ve,{enumerable:!0,configurable:!0,writable:!0,value:V}):Rt[Ve]=V,Bw=(Rt,Ve)=>{for(var V in Ve||(Ve={}))gb.call(Ve,V)&&Uw(Rt,V,Ve[V]);if(Lw)for(var V of Lw(Ve))mb.call(Ve,V)&&Uw(Rt,V,Ve[V]);return Rt},Vw=(Rt,Ve)=>fb(Rt,pb(Ve));(self.webpackChunkCupoExpress=self.webpackChunkCupoExpress||[]).push([[179],{440:(Rt,Ve,V)=>{V.d(Ve,{nm:()=>Yr});var S=V(5813);V(5e3),V(5867);var Xe=V(5861),Ke=V(9681),je=V(4859),Je=V(2090),yt=V(1877);const X=new Map,ze={activated:!1,tokenObservers:[]},ue={initialized:!1,enabled:!1};function Se(Te){return X.get(Te)||ze}function Ae(Te,pe){X.set(Te,pe)}function Ge(){return ue}class cn{constructor(pe,He,ot,Ct,Pt){if(this.operation=pe,this.retryPolicy=He,this.getWaitDuration=ot,this.lowerBound=Ct,this.upperBound=Pt,this.pending=null,this.nextErrorWaitInterval=Ct,Ct>Pt)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(pe){var He=this;return(0,Xe.Z)(function*(){He.stop();try{He.pending=new Je.BH,yield function Yt(Te){return new Promise(pe=>{setTimeout(pe,Te)})}(He.getNextRun(pe)),He.pending.resolve(),yield He.pending.promise,He.pending=new Je.BH,yield He.operation(),He.pending.resolve(),yield He.pending.promise,He.process(!0).catch(()=>{})}catch(ot){He.retryPolicy(ot)?He.process(!1).catch(()=>{}):He.stop()}})()}getNextRun(pe){if(pe)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const He=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),He}}}const $t=new Je.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function sn(Te){if(!Se(Te).activated)throw $t.create("use-before-activation",{appName:Te.name})}function cr(Te,pe){return zn.apply(this,arguments)}function zn(){return(zn=(0,Xe.Z)(function*({url:Te,body:pe},He){var ot,Ct;const Pt={"Content-Type":"application/json"},or=He.getImmediate({optional:!0});if(or){const Vi=yield or.getHeartbeatsHeader();Vi&&(Pt["X-Firebase-Client"]=Vi)}const Vn={method:"POST",body:JSON.stringify(pe),headers:Pt};let tr,Bi;try{tr=yield fetch(Te,Vn)}catch(Vi){throw $t.create("fetch-network-error",{originalErrorMessage:null===(ot=Vi)||void 0===ot?void 0:ot.message})}if(200!==tr.status)throw $t.create("fetch-status-error",{httpStatus:tr.status});try{Bi=yield tr.json()}catch(Vi){throw $t.create("fetch-parse-error",{originalErrorMessage:null===(Ct=Vi)||void 0===Ct?void 0:Ct.message})}const lo=Bi.ttl.match(/^([\d.]+)(s)$/);if(!lo||!lo[2]||isNaN(Number(lo[1])))throw $t.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Bi.ttl}`});const Ns=1e3*Number(lo[1]),co=Date.now();return{token:Bi.token,expireTimeMillis:co+Ns,issuedAtTimeMillis:co}})).apply(this,arguments)}function wr(Te,pe){const{projectId:He,appId:ot,apiKey:Ct}=Te.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${He}/apps/${ot}:exchangeDebugToken?key=${Ct}`,body:{debug_token:pe}}}const xn="firebase-app-check-store";let Pn=null;function Yi(){return Pn||(Pn=new Promise((Te,pe)=>{var He;try{const ot=indexedDB.open("firebase-app-check-database",1);ot.onsuccess=Ct=>{Te(Ct.target.result)},ot.onerror=Ct=>{var Pt;pe($t.create("storage-open",{originalErrorMessage:null===(Pt=Ct.target.error)||void 0===Pt?void 0:Pt.message}))},ot.onupgradeneeded=Ct=>{0===Ct.oldVersion&&Ct.target.result.createObjectStore(xn,{keyPath:"compositeKey"})}}catch(ot){pe($t.create("storage-open",{originalErrorMessage:null===(He=ot)||void 0===He?void 0:He.message}))}}),Pn)}function ke(){return(ke=(0,Xe.Z)(function*(Te,pe){const ot=(yield Yi()).transaction(xn,"readwrite"),Pt=ot.objectStore(xn).put({compositeKey:Te,value:pe});return new Promise((or,Vn)=>{Pt.onsuccess=tr=>{or()},ot.onerror=tr=>{var Bi;Vn($t.create("storage-set",{originalErrorMessage:null===(Bi=tr.target.error)||void 0===Bi?void 0:Bi.message}))}})})).apply(this,arguments)}const on=new yt.Yd("@firebase/app-check");function Er(Te,pe){return(0,Je.hl)()?function tt(Te,pe){return function dt(Te,pe){return ke.apply(this,arguments)}(function Sn(Te){return`${Te.options.appId}-${Te.name}`}(Te),pe)}(Te,pe).catch(He=>{on.warn(`Failed to write token to IndexedDB. Error: ${He}`)}):Promise.resolve()}function he(){return Ge().enabled}function ye(){return st.apply(this,arguments)}function st(){return(st=(0,Xe.Z)(function*(){const Te=Ge();if(Te.enabled&&Te.token)return Te.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Re={error:"UNKNOWN_ERROR"};function it(Te){return Je.US.encodeString(JSON.stringify(Te),!1)}function Ot(Te){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,Xe.Z)(function*(Te,pe=!1){const He=Te.app;sn(He);const ot=Se(He);let Pt,Ct=ot.token;if(!Ct){const tr=yield ot.cachedTokenPromise;tr&&Ms(tr)&&(Ct=tr)}if(!pe&&Ct&&Ms(Ct))return{token:Ct.token};let Vn,or=!1;if(he()){ot.exchangeTokenPromise||(ot.exchangeTokenPromise=cr(wr(He,yield ye()),Te.heartbeatServiceProvider).then(Bi=>(ot.exchangeTokenPromise=void 0,Bi)),or=!0);const tr=yield ot.exchangeTokenPromise;return yield Er(He,tr),Ae(He,Object.assign(Object.assign({},ot),{token:tr})),{token:tr.token}}try{ot.exchangeTokenPromise||(ot.exchangeTokenPromise=ot.provider.getToken().then(tr=>(ot.exchangeTokenPromise=void 0,tr)),or=!0),Ct=yield ot.exchangeTokenPromise}catch(tr){"appCheck/throttled"===tr.code?on.warn(tr.message):on.error(tr),Pt=tr}return Ct?(Vn={token:Ct.token},Ae(He,Object.assign(Object.assign({},ot),{token:Ct})),yield Er(He,Ct)):Vn=yi(Pt),or&&Hr(He,Vn),Vn})).apply(this,arguments)}function yr(Te,pe){const He=Se(Te),ot=He.tokenObservers.filter(Ct=>Ct.next!==pe);0===ot.length&&He.tokenRefresher&&He.tokenRefresher.isRunning()&&He.tokenRefresher.stop(),Ae(Te,Object.assign(Object.assign({},He),{tokenObservers:ot}))}function dn(Te){const{app:pe}=Te,He=Se(pe);let ot=He.tokenRefresher;ot||(ot=function Fr(Te){const{app:pe}=Te;return new cn((0,Xe.Z)(function*(){let ot;if(ot=Se(pe).token?yield Ot(Te,!0):yield Ot(Te),ot.error)throw ot.error}),()=>!0,()=>{const He=Se(pe);if(He.token){let ot=He.token.issuedAtTimeMillis+.5*(He.token.expireTimeMillis-He.token.issuedAtTimeMillis)+3e5;return ot=Math.min(ot,He.token.expireTimeMillis-3e5),Math.max(0,ot-Date.now())}return 0},3e4,96e4)}(Te),Ae(pe,Object.assign(Object.assign({},He),{tokenRefresher:ot}))),!ot.isRunning()&&He.isTokenAutoRefreshEnabled&&ot.start()}function Hr(Te,pe){const He=Se(Te).tokenObservers;for(const ot of He)try{"EXTERNAL"===ot.type&&null!=pe.error?ot.error(pe.error):ot.next(pe)}catch(Ct){}}function Ms(Te){return Te.expireTimeMillis-Date.now()>0}function yi(Te){return{token:it(Re),error:Te}}class Qi{constructor(pe,He){this.app=pe,this.heartbeatServiceProvider=He}_delete(){const{tokenObservers:pe}=Se(this.app);for(const He of pe)yr(this.app,He.next);return Promise.resolve()}}const te="app-check-internal";!function hr(){(0,Ke._registerComponent)(new je.wA("app-check",Te=>function vn(Te,pe){return new Qi(Te,pe)}(Te.getProvider("app").getImmediate(),Te.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Te,pe,He)=>{Te.getProvider(te).initialize()})),(0,Ke._registerComponent)(new je.wA(te,Te=>function br(Te){return{getToken:pe=>Ot(Te,pe),addTokenListener:pe=>function tn(Te,pe,He,ot){const{app:Ct}=Te,Pt=Se(Ct),or={next:He,error:ot,type:pe};if(Ae(Ct,Object.assign(Object.assign({},Pt),{tokenObservers:[...Pt.tokenObservers,or]})),Pt.token&&Ms(Pt.token)){const Vn=Pt.token;Promise.resolve().then(()=>{He({token:Vn.token}),dn(Te)}).catch(()=>{})}Pt.cachedTokenPromise.then(()=>dn(Te))}(Te,"INTERNAL",pe),removeTokenListener:pe=>yr(Te.app,pe)}}(Te.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ke.registerVersion)("@firebase/app-check","0.5.9")}();class Yr{constructor(){return(0,S.vb)("app-check")}}"undefined"!=typeof window&&window},1205:(Rt,Ve,V)=>{V.d(Ve,{zQ:()=>$e,ww:()=>mt,rT:()=>ue,f7:()=>Ae,L6:()=>X,_Q:()=>ze,lh:()=>Se,Qv:()=>yt,nw:()=>Ge});var S=V(5e3),v=V(7579),J=V(9646),Ce=V(8306),Ee=V(8996),ve=V(6451),Me=V(6063);class xe extends v.x{constructor(xt=1/0,Lt=1/0,ut=Me.l){super(),this._bufferSize=xt,this._windowTime=Lt,this._timestampProvider=ut,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Lt===1/0,this._bufferSize=Math.max(1,xt),this._windowTime=Math.max(1,Lt)}next(xt){const{isStopped:Lt,_buffer:ut,_infiniteTimeWindow:cn,_timestampProvider:Yt,_windowTime:Wt}=this;Lt||(ut.push(xt),!cn&&ut.push(Yt.now()+Wt)),this._trimBuffer(),super.next(xt)}_subscribe(xt){this._throwIfClosed(),this._trimBuffer();const Lt=this._innerSubscribe(xt),{_infiniteTimeWindow:ut,_buffer:cn}=this,Yt=cn.slice();for(let Wt=0;Wt<Yt.length&&!xt.closed;Wt+=ut?1:2)xt.next(Yt[Wt]);return this._checkFinalizedStatuses(xt),Lt}_trimBuffer(){const{_bufferSize:xt,_timestampProvider:Lt,_buffer:ut,_infiniteTimeWindow:cn}=this,Yt=(cn?1:2)*xt;if(xt<1/0&&Yt<ut.length&&ut.splice(0,ut.length-Yt),!cn){const Wt=Lt.now();let $t=0;for(let mn=1;mn<ut.length&&ut[mn]<=Wt;mn+=2)$t=mn;$t&&ut.splice(0,$t+1)}}}var Oe=V(3099);function le(Tt,xt,Lt){let ut,cn=!1;return Tt&&"object"==typeof Tt?({bufferSize:ut=1/0,windowTime:xt=1/0,refCount:cn=!1,scheduler:Lt}=Tt):ut=null!=Tt?Tt:1/0,(0,Oe.B)({connector:()=>new xe(ut,xt,Lt),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:cn})}var ae=V(3900),De=V(576);function It(Tt,xt){return(0,De.m)(xt)?(0,ae.w)(()=>Tt,xt):(0,ae.w)(()=>Tt)}var nt=V(5363),at=V(4004),bt=V(590),Ze=V(9468),rt=V(9300),Ie=V(5813),At=V(2011),Xe=V(9808),Ke=V(440),je=V(127);const yt=new S.OlP("angularfire2.auth.use-emulator"),X=new S.OlP("angularfire2.auth.settings"),ze=new S.OlP("angularfire2.auth.tenant-id"),ue=new S.OlP("angularfire2.auth.langugage-code"),Se=new S.OlP("angularfire2.auth.use-device-language"),Ae=new S.OlP("angularfire.auth.persistence"),Ge=(Tt,xt,Lt,ut,cn,Yt,Wt,$t)=>(0,At.cc)(`${Tt.name}.auth`,"AngularFireAuth",Tt.name,()=>{const mn=xt.runOutsideAngular(()=>Tt.auth());if(Lt&&mn.useEmulator(...Lt),ut&&(mn.tenantId=ut),mn.languageCode=cn,Yt&&mn.useDeviceLanguage(),Wt)for(const[sn,_n]of Object.entries(Wt))mn.settings[sn]=_n;return $t&&mn.setPersistence($t),mn},[Lt,ut,cn,Yt,Wt,$t]);let $e=(()=>{class Tt{constructor(Lt,ut,cn,Yt,Wt,$t,mn,sn,_n,mr,er,cr){const zn=new v.x,Mr=(0,J.of)(void 0).pipe((0,nt.Q)(Wt.outsideAngular),(0,ae.w)(()=>Yt.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,9916)))),(0,at.U)(()=>(0,At.on)(Lt,Yt,ut)),(0,at.U)(Kn=>Ge(Kn,Yt,$t,sn,_n,mr,mn,er)),le({bufferSize:1,refCount:!1}));if((0,Xe.PM)(cn))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,J.of)(null);else{Mr.pipe((0,bt.P)()).subscribe();const wr=Mr.pipe((0,ae.w)(xn=>xn.getRedirectResult().then(Mn=>Mn,()=>null)),Ie.iC,le({bufferSize:1,refCount:!1})),Yn=Mr.pipe((0,ae.w)(xn=>new Ce.y(Mn=>({unsubscribe:Yt.runOutsideAngular(()=>xn.onAuthStateChanged(Pn=>Mn.next(Pn),Pn=>Mn.error(Pn),()=>Mn.complete()))})))),Qt=Mr.pipe((0,ae.w)(xn=>new Ce.y(Mn=>({unsubscribe:Yt.runOutsideAngular(()=>xn.onIdTokenChanged(Pn=>Mn.next(Pn),Pn=>Mn.error(Pn),()=>Mn.complete()))}))));this.authState=wr.pipe(It(Yn),(0,Ze.R)(Wt.outsideAngular),(0,nt.Q)(Wt.insideAngular)),this.user=wr.pipe(It(Qt),(0,Ze.R)(Wt.outsideAngular),(0,nt.Q)(Wt.insideAngular)),this.idToken=this.user.pipe((0,ae.w)(xn=>xn?(0,Ee.D)(xn.getIdToken()):(0,J.of)(null))),this.idTokenResult=this.user.pipe((0,ae.w)(xn=>xn?(0,Ee.D)(xn.getIdTokenResult()):(0,J.of)(null))),this.credential=(0,ve.T)(wr,zn,this.authState.pipe((0,rt.h)(xn=>!xn))).pipe((0,at.U)(xn=>(null==xn?void 0:xn.user)?xn:null),(0,Ze.R)(Wt.outsideAngular),(0,nt.Q)(Wt.insideAngular))}return(0,At.pX)(this,Mr,Yt,{spy:{apply:(Kn,wr,Yn)=>{(Kn.startsWith("signIn")||Kn.startsWith("createUser"))&&Yn.then(Qt=>zn.next(Qt))}}})}}return Tt.\u0275fac=function(Lt){return new(Lt||Tt)(S.LFG(At.Dh),S.LFG(At.xv,8),S.LFG(S.Lbi),S.LFG(S.R0b),S.LFG(Ie.HU),S.LFG(yt,8),S.LFG(X,8),S.LFG(ze,8),S.LFG(ue,8),S.LFG(Se,8),S.LFG(Ae,8),S.LFG(Ke.nm,8))},Tt.\u0275prov=S.Yz7({token:Tt,factory:Tt.\u0275fac,providedIn:"any"}),Tt})(),mt=(()=>{class Tt{constructor(){je.Z.registerVersion("angularfire",Ie.q4.full,"auth-compat")}}return Tt.\u0275fac=function(Lt){return new(Lt||Tt)},Tt.\u0275mod=S.oAB({type:Tt}),Tt.\u0275inj=S.cJS({providers:[$e]}),Tt})()},7407:(Rt,Ve,V)=>{V.d(Ve,{ST:()=>O_,yb:()=>k_});var S=V(5e3),v=V(4986),J=V(8306),Ce=V(8996),Ee=V(9646),ve=V(5813),Me=V(4482),xe=V(5403);function Oe(){return(0,Me.e)((i,e)=>{let t,s=!1;i.subscribe((0,xe.x)(e,d=>{const g=t;t=d,s&&e.next([g,d]),s=!0}))})}var X,le=V(8675),ae=V(4004),De=V(5026),It=V(1884),nt=V(9300),at=V(2011),bt=V(9808),rt=(V(9916),V(3942)),Ie=V(5861),At=V(9681),Xe=V(4859),Ke=V(1877),je=V(2090),Je="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},yt={},ze=ze||{},ue=Je||self;function Se(){}function Ae(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Ge(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var mt="closure_uid_"+(1e9*Math.random()>>>0),Tt=0;function xt(i,e,t){return i.call.apply(i.bind,arguments)}function Lt(i,e,t){if(!i)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(d,s),i.apply(e,d)}}return function(){return i.apply(e,arguments)}}function ut(i,e,t){return(ut=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?xt:Lt).apply(null,arguments)}function cn(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),i.apply(this,s)}}function Yt(i,e){function t(){}t.prototype=e.prototype,i.Z=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Vb=function(s,d,g){for(var w=Array(arguments.length-2),R=2;R<arguments.length;R++)w[R-2]=arguments[R];return e.prototype[d].apply(s,w)}}function Wt(){this.s=this.s,this.o=this.o}var mn={};Wt.prototype.s=!1,Wt.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function $e(i){return Object.prototype.hasOwnProperty.call(i,mt)&&i[mt]||(i[mt]=++Tt)}(this);delete mn[i]}},Wt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const sn=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1},_n=Array.prototype.forEach?function(i,e,t){Array.prototype.forEach.call(i,e,t)}:function(i,e,t){const s=i.length,d="string"==typeof i?i.split(""):i;for(let g=0;g<s;g++)g in d&&e.call(t,d[g],g,i)};function er(i){return Array.prototype.concat.apply([],arguments)}function cr(i){const e=i.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=i[s];return t}return[]}function zn(i){return/^[\s\xa0]*$/.test(i)}var Yn,Mr=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function Kn(i,e){return-1!=i.indexOf(e)}function wr(i,e){return i<e?-1:i>e?1:0}e:{var Qt=ue.navigator;if(Qt){var xn=Qt.userAgent;if(xn){Yn=xn;break e}}Yn=""}function Mn(i,e,t){for(const s in i)e.call(t,i[s],s,i)}function Pn(i){const e={};for(const t in i)e[t]=i[t];return e}var Yi="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function mi(i,e){let t,s;for(let d=1;d<arguments.length;d++){for(t in s=arguments[d],s)i[t]=s[t];for(let g=0;g<Yi.length;g++)t=Yi[g],Object.prototype.hasOwnProperty.call(s,t)&&(i[t]=s[t])}}function tt(i){return tt[" "](i),i}tt[" "]=Se;var en,i,we=Kn(Yn,"Opera"),dt=Kn(Yn,"Trident")||Kn(Yn,"MSIE"),ke=Kn(Yn,"Edge"),ft=ke||dt,Dt=Kn(Yn,"Gecko")&&!(Kn(Yn.toLowerCase(),"webkit")&&!Kn(Yn,"Edge"))&&!(Kn(Yn,"Trident")||Kn(Yn,"MSIE"))&&!Kn(Yn,"Edge"),Sn=Kn(Yn.toLowerCase(),"webkit")&&!Kn(Yn,"Edge");function on(){var i=ue.document;return i?i.documentMode:void 0}e:{var zr="",Er=(i=Yn,Dt?/rv:([^\);]+)(\)|;)/.exec(i):ke?/Edge\/([\d\.]+)/.exec(i):dt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Sn?/WebKit\/(\S+)/.exec(i):we?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Er&&(zr=Er?Er[1]:""),dt){var Nn=on();if(null!=Nn&&Nn>parseFloat(zr)){en=String(Nn);break e}}en=zr}var se={};var ce=ue.document&&dt&&(on()||parseInt(en,10))||void 0,Re=function(){if(!ue.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{ue.addEventListener("test",Se,e),ue.removeEventListener("test",Se,e)}catch(t){}return i}();function it(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}function Ot(i,e){if(it.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,s=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Dt){e:{try{tt(e.nodeName);var d=!0;break e}catch(g){}d=!1}d||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Jt[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Ot.Z.h.call(this)}}it.prototype.h=function(){this.defaultPrevented=!0},Yt(Ot,it);var Jt={2:"touch",3:"pen",4:"mouse"};Ot.prototype.h=function(){Ot.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var tn="closure_listenable_"+(1e6*Math.random()|0),yr=0;function dn(i,e,t,s,d){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.ia=d,this.key=++yr,this.ca=this.fa=!1}function Fr(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function Hr(i){this.src=i,this.g={},this.h=0}function Ms(i,e){var t=e.type;if(t in i.g){var g,s=i.g[t],d=sn(s,e);(g=0<=d)&&Array.prototype.splice.call(s,d,1),g&&(Fr(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function yi(i,e,t,s){for(var d=0;d<i.length;++d){var g=i[d];if(!g.ca&&g.listener==e&&g.capture==!!t&&g.ia==s)return d}return-1}Hr.prototype.add=function(i,e,t,s,d){var g=i.toString();(i=this.g[g])||(i=this.g[g]=[],this.h++);var w=yi(i,e,s,d);return-1<w?(e=i[w],t||(e.fa=!1)):((e=new dn(e,this.src,g,!!s,d)).fa=t,i.push(e)),e};var Qi="closure_lm_"+(1e6*Math.random()|0),vn={};function br(i,e,t,s,d){if(s&&s.once)return $r(i,e,t,s,d);if(Array.isArray(e)){for(var g=0;g<e.length;g++)br(i,e[g],t,s,d);return null}return t=Si(t),i&&i[tn]?i.N(e,t,Ge(s)?!!s.capture:!!s,d):ai(i,e,t,!1,s,d)}function ai(i,e,t,s,d,g){if(!e)throw Error("Invalid event type");var w=Ge(d)?!!d.capture:!!d,R=wi(i);if(R||(i[Qi]=R=new Hr(i)),(t=R.add(e,t,s,w,g)).proxy)return t;if(s=function _i(){var e=ls;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=s,s.src=i,s.listener=t,i.addEventListener)Re||(d=w),void 0===d&&(d=!1),i.addEventListener(e.toString(),s,d);else if(i.attachEvent)i.attachEvent(Ps(e.toString()),s);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(s)}return t}function $r(i,e,t,s,d){if(Array.isArray(e)){for(var g=0;g<e.length;g++)$r(i,e[g],t,s,d);return null}return t=Si(t),i&&i[tn]?i.O(e,t,Ge(s)?!!s.capture:!!s,d):ai(i,e,t,!0,s,d)}function vi(i,e,t,s,d){if(Array.isArray(e))for(var g=0;g<e.length;g++)vi(i,e[g],t,s,d);else s=Ge(s)?!!s.capture:!!s,t=Si(t),i&&i[tn]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=yi(g=i.g[e],t,s,d))&&(Fr(g[t]),Array.prototype.splice.call(g,t,1),0==g.length&&(delete i.g[e],i.h--))):i&&(i=wi(i))&&(e=i.g[e.toString()],i=-1,e&&(i=yi(e,t,s,d)),(t=-1<i?e[i]:null)&&Bo(t))}function Bo(i){if("number"!=typeof i&&i&&!i.ca){var e=i.src;if(e&&e[tn])Ms(e.i,i);else{var t=i.type,s=i.proxy;e.removeEventListener?e.removeEventListener(t,s,i.capture):e.detachEvent?e.detachEvent(Ps(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=wi(e))?(Ms(t,i),0==t.h&&(t.src=null,e[Qi]=null)):Fr(i)}}}function Ps(i){return i in vn?vn[i]:vn[i]="on"+i}function ls(i,e){if(i.ca)i=!0;else{e=new Ot(e,this);var t=i.listener,s=i.ia||i.src;i.fa&&Bo(i),i=t.call(s,e)}return i}function wi(i){return(i=i[Qi])instanceof Hr?i:null}var Lr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Si(i){return"function"==typeof i?i:(i[Lr]||(i[Lr]=function(e){return i.handleEvent(e)}),i[Lr])}function Tn(){Wt.call(this),this.i=new Hr(this),this.P=this,this.I=null}function _t(i,e){var t,s=i.I;if(s)for(t=[];s;s=s.I)t.push(s);if(i=i.P,s=e.type||e,"string"==typeof e)e=new it(e,i);else if(e instanceof it)e.target=e.target||i;else{var d=e;mi(e=new it(s,i),d)}if(d=!0,t)for(var g=t.length-1;0<=g;g--){var w=e.g=t[g];d=Ht(w,s,!0,e)&&d}if(d=Ht(w=e.g=i,s,!0,e)&&d,d=Ht(w,s,!1,e)&&d,t)for(g=0;g<t.length;g++)d=Ht(w=e.g=t[g],s,!1,e)&&d}function Ht(i,e,t,s){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var d=!0,g=0;g<e.length;++g){var w=e[g];if(w&&!w.ca&&w.capture==t){var R=w.listener,B=w.ia||w.src;w.fa&&Ms(i.i,w),d=!1!==R.call(B,s)&&d}}return d&&!s.defaultPrevented}Yt(Tn,Wt),Tn.prototype[tn]=!0,Tn.prototype.removeEventListener=function(i,e,t,s){vi(this,i,e,t,s)},Tn.prototype.M=function(){if(Tn.Z.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],s=0;s<t.length;s++)Fr(t[s]);delete i.g[e],i.h--}}this.I=null},Tn.prototype.N=function(i,e,t,s){return this.i.add(String(i),e,!1,t,s)},Tn.prototype.O=function(i,e,t,s){return this.i.add(String(i),e,!0,t,s)};var Bn=ue.JSON.stringify;function Kr(){var i=Xi;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Tr,Cr=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new Ai,i=>i.reset());class Ai{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function dr(i){ue.setTimeout(()=>{throw i},0)}function Zr(i,e){Tr||function Xt(){var i=ue.Promise.resolve(void 0);Tr=function(){i.then(es)}}(),ws||(Tr(),ws=!0),Xi.add(i,e)}var ws=!1,Xi=new class Ji{constructor(){this.h=this.g=null}add(e,t){const s=Cr.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function es(){for(var i;i=Kr();){try{i.h.call(i.g)}catch(t){dr(t)}var e=Cr;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}ws=!1}function te(i,e){Tn.call(this),this.h=i||1,this.g=e||ue,this.j=ut(this.kb,this),this.l=Date.now()}function hr(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function Gr(i,e,t){if("function"==typeof i)t&&(i=ut(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=ut(i.handleEvent,i)}return 2147483647<Number(e)?-1:ue.setTimeout(i,e||0)}function ii(i){i.g=Gr(()=>{i.g=null,i.i&&(i.i=!1,ii(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}Yt(te,Tn),(X=te.prototype).da=!1,X.S=null,X.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),_t(this,"tick"),this.da&&(hr(this),this.start()))}},X.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},X.M=function(){te.Z.M.call(this),hr(this),delete this.g};class Yr extends Wt{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ii(this)}M(){super.M(),this.g&&(ue.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qn(i){Wt.call(this),this.h=i,this.g={}}Yt(Qn,Wt);var sr=[];function ts(i,e,t,s){Array.isArray(t)||(t&&(sr[0]=t.toString()),t=sr);for(var d=0;d<t.length;d++){var g=br(e,t[d],s||i.handleEvent,!1,i.h||i);if(!g)break;i.g[g.key]=g}}function si(i){Mn(i.g,function(e,t){this.g.hasOwnProperty(t)&&Bo(e)},i),i.g={}}function ns(){this.g=!0}function ui(i,e,t,s){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Io(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var s=t[i];if(!(2>s.length)){var d=s[1];if(Array.isArray(d)&&!(1>d.length)){var g=d[0];if("noop"!=g&&"stop"!=g&&"close"!=g)for(var w=1;w<d.length;w++)d[w]=""}}}return Bn(t)}catch(R){return e}}(i,t)+(s?" "+s:"")})}Qn.prototype.M=function(){Qn.Z.M.call(this),si(this)},Qn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ns.prototype.Aa=function(){this.g=!1},ns.prototype.info=function(){};var Ks={},eu=null;function Pr(){return eu=eu||new Tn}function Ys(i){it.call(this,Ks.Ma,i)}function bo(i){const e=Pr();_t(e,new Ys(e,i))}function Te(i,e){it.call(this,Ks.STAT_EVENT,i),this.stat=e}function pe(i){const e=Pr();_t(e,new Te(e,i))}function He(i,e){it.call(this,Ks.Na,i),this.size=e}function ot(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return ue.setTimeout(function(){i()},e)}Ks.Ma="serverreachability",Yt(Ys,it),Ks.STAT_EVENT="statevent",Yt(Te,it),Ks.Na="timingevent",Yt(He,it);var Ct={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Pt={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function or(){}function tr(){}or.prototype.h=null;var co,Bi={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function lo(){it.call(this,"d")}function Ns(){it.call(this,"c")}function Vi(){}function cs(i,e,t,s){this.l=i,this.j=e,this.m=t,this.X=s||1,this.V=new Qn(this),this.P=Oa,this.W=new te(i=ft?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new tu}function tu(){this.i=null,this.g="",this.h=!1}Yt(lo,it),Yt(Ns,it),Yt(Vi,or),Vi.prototype.g=function(){return new XMLHttpRequest},Vi.prototype.i=function(){return{}},co=new Vi;var Oa=45e3,Qr={},li={};function ds(i,e,t){i.K=1,i.v=We(jn(e)),i.s=t,i.U=!0,rs(i,null)}function rs(i,e){i.F=Date.now(),Ei(i),i.A=jn(i.v);var t=i.A,s=i.X;Array.isArray(s)||(s=[String(s)]),jo(t.h,"t",s),i.C=0,t=i.l.H,i.h=new tu,i.g=yl(i.l,t?e:null,!i.s),0<i.O&&(i.L=new Yr(ut(i.Ia,i,i.g),i.O)),ts(i.V,i.g,"readystatechange",i.gb),e=i.H?Pn(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,e)):(i.u="GET",i.g.ea(i.A,i.u,null,e)),bo(1),function uo(i,e,t,s,d,g){i.info(function(){if(i.g)if(g)for(var w="",R=g.split("&"),B=0;B<R.length;B++){var G=R[B].split("=");if(1<G.length){var ee=G[0];G=G[1];var fe=ee.split("_");w=2<=fe.length&&"type"==fe[1]?w+(ee+"=")+G+"&":w+(ee+"=redacted&")}}else w=null;else w=g;return"XMLHTTP REQ ("+s+") [attempt "+d+"]: "+e+"\n"+t+"\n"+w})}(i.j,i.u,i.A,i.m,i.X,i.s)}function ka(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function Is(i,e,t){let d,s=!0;for(;!i.I&&i.C<t.length;){if(d=Zu(i,t),d==li){4==e&&(i.o=4,pe(14),s=!1),ui(i.j,i.m,null,"[Incomplete Response]");break}if(d==Qr){i.o=4,pe(15),ui(i.j,i.m,t,"[Invalid Chunk]"),s=!1;break}ui(i.j,i.m,d,null),Os(i,d)}ka(i)&&d!=li&&d!=Qr&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,pe(16),s=!1),i.i=i.i&&s,s?0<t.length&&!i.aa&&(i.aa=!0,(e=i.l).g==i&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Bs(e),e.L=!0,pe(11))):(ui(i.j,i.m,t,"[Invalid Chunked Response]"),Jr(i),ta(i))}function Zu(i,e){var t=i.C,s=e.indexOf("\n",t);return-1==s?li:(t=Number(e.substring(t,s)),isNaN(t)?Qr:(s+=1)+t>e.length?li:(e=e.substr(s,t),i.C=s+t,e))}function Ei(i){i.Y=Date.now()+i.P,Vo(i,i.P)}function Vo(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=ot(ut(i.eb,i),e)}function Ii(i){i.B&&(ue.clearTimeout(i.B),i.B=null)}function ta(i){0==i.l.G||i.I||Cu(i.l,i)}function Jr(i){Ii(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,hr(i.W),si(i.V),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function Os(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||Qs(t.i,i)))if(t.I=i.N,!i.J&&Qs(t.i,i)&&3==t.G){try{var s=t.Ca.g.parse(e)}catch(G){s=null}if(Array.isArray(s)&&3==s.length){var d=s;if(0==d[0])e:if(t.u)t.ta=d[1],0<t.ta-t.U&&37500>d[2]&&t.N&&0==t.A&&!t.v&&(t.v=ot(ut(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<i.F))break e;Zn(t),Mi(t)}Go(t),pe(18)}if(1>=Dn(t.i)&&t.ka){try{t.ka()}catch(G){}t.ka=void 0}}else Hi(t,11)}else if((i.J||t.g==i)&&Zn(t),!zn(e))for(d=t.Ca.g.parse(e),e=0;e<d.length;e++){let G=d[e];if(t.U=G[0],G=G[1],2==t.G)if("c"==G[0]){t.J=G[1],t.la=G[2];const ee=G[3];null!=ee&&(t.ma=ee,t.h.info("VER="+t.ma));const fe=G[4];null!=fe&&(t.za=fe,t.h.info("SVER="+t.za));const qe=G[5];null!=qe&&"number"==typeof qe&&0<qe&&(t.K=s=1.5*qe,t.h.info("backChannelRequestTimeoutMs_="+s)),s=t;const ct=i.g;if(ct){const Et=ct.g?ct.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Et){var g=s.i;!g.g&&(Kn(Et,"spdy")||Kn(Et,"quic")||Kn(Et,"h2"))&&(g.j=g.l,g.g=new Set,g.h&&(Ur(g,g.h),g.h=null))}if(s.D){const zt=ct.g?ct.g.getResponseHeader("X-HTTP-Session-Id"):null;zt&&(s.sa=zt,de(s.F,s.D,zt))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-i.F,t.h.info("Handshake RTT: "+t.O+"ms"));var w=i;if((s=t).oa=Vs(s,s.H?s.la:null,s.W),w.J){Ho(s.i,w);var R=w,B=s.K;B&&R.setTimeout(B),R.B&&(Ii(R),Ei(R)),s.g=w}else Lc(s);0<t.l.length&&Zo(t)}else"stop"!=G[0]&&"close"!=G[0]||Hi(t,7);else 3==t.G&&("stop"==G[0]||"close"==G[0]?"stop"==G[0]?Hi(t,7):ua(t):"noop"!=G[0]&&t.j&&t.j.wa(G),t.A=0)}bo(4)}catch(G){}}function Fa(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Ae(i)||"string"==typeof i)_n(i,e,void 0);else{if(i.T&&"function"==typeof i.T)var t=i.T();else if(i.R&&"function"==typeof i.R)t=void 0;else if(Ae(i)||"string"==typeof i){t=[];for(var s=i.length,d=0;d<s;d++)t.push(d)}else for(d in t=[],s=0,i)t[s++]=d;s=function xi(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(Ae(i)){for(var e=[],t=i.length,s=0;s<t;s++)e.push(i[s]);return e}for(s in e=[],t=0,i)e[t++]=i[s];return e}(i),d=s.length;for(var g=0;g<d;g++)e.call(void 0,s[g],t&&t[g],i)}}function Nr(i,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var s=0;s<t;s+=2)this.set(arguments[s],arguments[s+1])}else if(i)if(i instanceof Nr)for(t=i.T(),s=0;s<t.length;s++)this.set(t[s],i.get(t[s]));else for(s in i)this.set(s,i[s])}function ho(i){if(i.i!=i.g.length){for(var e=0,t=0;e<i.g.length;){var s=i.g[e];is(i.h,s)&&(i.g[t++]=s),e++}i.g.length=t}if(i.i!=i.g.length){var d={};for(t=e=0;e<i.g.length;)is(d,s=i.g[e])||(i.g[t++]=s,d[s]=1),e++;i.g.length=t}}function is(i,e){return Object.prototype.hasOwnProperty.call(i,e)}(X=cs.prototype).setTimeout=function(i){this.P=i},X.gb=function(i){i=i.target;const e=this.L;e&&3==Do(i)?e.l():this.Ia(i)},X.Ia=function(i){try{if(i==this.g)e:{const ee=Do(this.g);var e=this.g.Da();const fe=this.g.ba();if(!(3>ee)&&(3!=ee||ft||this.g&&(this.h.h||this.g.ga()||aa(this.g)))){this.I||4!=ee||7==e||bo(8==e||0>=fe?3:2),Ii(this);var t=this.g.ba();this.N=t;t:if(ka(this)){var s=aa(this.g);i="";var d=s.length,g=4==Do(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Jr(this),ta(this);var w="";break t}this.h.i=new ue.TextDecoder}for(e=0;e<d;e++)this.h.h=!0,i+=this.h.i.decode(s[e],{stream:g&&e==d-1});s.splice(0,d),this.h.g+=i,this.C=0,w=this.h.g}else w=this.g.ga();if(this.i=200==t,function Na(i,e,t,s,d,g,w){i.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+d+"]: "+e+"\n"+t+"\n"+g+" "+w})}(this.j,this.u,this.A,this.m,this.X,ee,t),this.i){if(this.$&&!this.J){t:{if(this.g){var R,B=this.g;if((R=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!zn(R)){var G=R;break t}}G=null}if(!(t=G)){this.i=!1,this.o=3,pe(12),Jr(this),ta(this);break e}ui(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Os(this,t)}this.U?(Is(this,ee,w),ft&&this.i&&3==ee&&(ts(this.V,this.W,"tick",this.fb),this.W.start())):(ui(this.j,this.m,w,null),Os(this,w)),4==ee&&Jr(this),this.i&&!this.I&&(4==ee?Cu(this.l,this):(this.i=!1,Ei(this)))}else 400==t&&0<w.indexOf("Unknown SID")?(this.o=3,pe(12)):(this.o=0,pe(13)),Jr(this),ta(this)}}}catch(ee){}},X.fb=function(){if(this.g){var i=Do(this.g),e=this.g.ga();this.C<e.length&&(Ii(this),Is(this,i,e),this.i&&4!=i&&Ei(this))}},X.cancel=function(){this.I=!0,Jr(this)},X.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function Es(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(bo(3),pe(17)),Jr(this),this.o=2,ta(this)):Vo(this,this.Y-i)},(X=Nr.prototype).R=function(){ho(this);for(var i=[],e=0;e<this.g.length;e++)i.push(this.h[this.g[e]]);return i},X.T=function(){return ho(this),this.g.concat()},X.get=function(i,e){return is(this.h,i)?this.h[i]:e},X.set=function(i,e){is(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=e},X.forEach=function(i,e){for(var t=this.T(),s=0;s<t.length;s++){var d=t[s],g=this.get(d);i.call(e,g,d,this)}};var na=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Co(i,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof Co){this.g=void 0!==e?e:i.g,L(this,i.j),this.s=i.s,q(this,i.i),F(this,i.m),this.l=i.l,e=i.h;var t=new Ri;t.i=e.i,e.g&&(t.g=new Nr(e.g),t.h=e.h),Q(this,t),this.o=i.o}else i&&(t=String(i).match(na))?(this.g=!!e,L(this,t[1]||"",!0),this.s=hn(t[2]||""),q(this,t[3]||"",!0),F(this,t[4]),this.l=hn(t[5]||"",!0),Q(this,t[6]||"",!0),this.o=hn(t[7]||"")):(this.g=!!e,this.h=new Ri(null,this.g))}function jn(i){return new Co(i)}function L(i,e,t){i.j=t?hn(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function q(i,e,t){i.i=t?hn(e,!0):e}function F(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Q(i,e,t){e instanceof Ri?(i.h=e,function fs(i,e){e&&!i.j&&(Kt(i),i.i=null,i.g.forEach(function(t,s){var d=s.toLowerCase();s!=d&&(hs(this,s),jo(this,d,t))},i)),i.j=e}(i.h,i.g)):(t||(e=fn(e,Dr)),i.h=new Ri(e,i.g))}function de(i,e,t){i.h.set(e,t)}function We(i){return de(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function hn(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function fn(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,En),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function En(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Co.prototype.toString=function(){var i=[],e=this.j;e&&i.push(fn(e,On,!0),":");var t=this.i;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(fn(e,On,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&i.push("/"),i.push(fn(t,"/"==t.charAt(0)?lr:Ir,!0))),(t=this.h.toString())&&i.push("?",t),(t=this.o)&&i.push("#",fn(t,ji)),i.join("")};var On=/[#\/\?@]/g,Ir=/[#\?:]/g,lr=/[#\?]/g,Dr=/[#\?@]/g,ji=/#/g;function Ri(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Kt(i){i.g||(i.g=new Nr,i.h=0,i.i&&function ks(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var s=i[t].indexOf("="),d=null;if(0<=s){var g=i[t].substring(0,s);d=i[t].substring(s+1)}else g=i[t];e(g,d?decodeURIComponent(d.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function hs(i,e){Kt(i),e=fo(i,e),is(i.g.h,e)&&(i.i=null,i.h-=i.g.get(e).length,is((i=i.g).h,e)&&(delete i.h[e],i.i--,i.g.length>2*i.i&&ho(i)))}function La(i,e){return Kt(i),e=fo(i,e),is(i.g.h,e)}function jo(i,e,t){hs(i,e),0<t.length&&(i.i=null,i.g.set(fo(i,e),cr(t)),i.h+=t.length)}function fo(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function ra(i){this.l=i||nu,i=ue.PerformanceNavigationTiming?0<(i=ue.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(ue.g&&ue.g.Ea&&ue.g.Ea()&&ue.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(X=Ri.prototype).add=function(i,e){Kt(this),this.i=null,i=fo(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},X.forEach=function(i,e){Kt(this),this.g.forEach(function(t,s){_n(t,function(d){i.call(e,d,s,this)},this)},this)},X.T=function(){Kt(this);for(var i=this.g.R(),e=this.g.T(),t=[],s=0;s<e.length;s++)for(var d=i[s],g=0;g<d.length;g++)t.push(e[s]);return t},X.R=function(i){Kt(this);var e=[];if("string"==typeof i)La(this,i)&&(e=er(e,this.g.get(fo(this,i))));else{i=this.g.R();for(var t=0;t<i.length;t++)e=er(e,i[t])}return e},X.set=function(i,e){return Kt(this),this.i=null,La(this,i=fo(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},X.get=function(i,e){return i&&0<(i=this.R(i)).length?String(i[0]):e},X.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],e=this.g.T(),t=0;t<e.length;t++){var s=e[t],d=encodeURIComponent(String(s));s=this.R(s);for(var g=0;g<s.length;g++){var w=d;""!==s[g]&&(w+="="+encodeURIComponent(String(s[g]))),i.push(w)}}return this.i=i.join("&")};var nu=10;function gt(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Dn(i){return i.h?1:i.g?i.g.size:0}function Qs(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function Ur(i,e){i.g?i.g.add(e):i.h=e}function Ho(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function ia(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return cr(i.i)}function bs(){}function Ua(){this.g=new bs}function pl(i,e,t){const s=t||"";try{Fa(i,function(d,g){let w=d;Ge(d)&&(w=Bn(d)),e.push(s+g+"="+encodeURIComponent(w))})}catch(d){throw e.push(s+"type="+encodeURIComponent("_badmap")),d}}function ru(i,e,t,s,d){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,d(s)}catch(g){}}function Iu(i){this.l=i.$b||null,this.j=i.ib||!1}function Cs(i,e){Tn.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=bi,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ra.prototype.cancel=function(){if(this.i=ia(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},bs.prototype.stringify=function(i){return ue.JSON.stringify(i,void 0)},bs.prototype.parse=function(i){return ue.JSON.parse(i,void 0)},Yt(Iu,or),Iu.prototype.g=function(){return new Cs(this.l,this.j)},Iu.prototype.i=function(i){return function(){return i}}({}),Yt(Cs,Tn);var bi=0;function Ls(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function sa(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Us(i)}function Us(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(X=Cs.prototype).open=function(i,e){if(this.readyState!=bi)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Us(this)},X.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||ue).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},X.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,sa(this)),this.readyState=bi},X.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Us(this)),this.g&&(this.readyState=3,Us(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==ue.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ls(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},X.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?sa(this):Us(this),3==this.readyState&&Ls(this)}},X.Ua=function(i){this.g&&(this.response=this.responseText=i,sa(this))},X.Ta=function(i){this.g&&(this.response=i,sa(this))},X.ha=function(){this.g&&sa(this)},X.setRequestHeader=function(i,e){this.v.append(i,e)},X.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},X.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(Cs.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Js=ue.JSON.parse;function Xr(i){Tn.call(this),this.headers=new Nr,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ci,this.K=this.L=!1}Yt(Xr,Tn);var Ci="",iu=/^https?$/i,gl=["POST","PUT"];function Ba(i){return"content-type"==i.toLowerCase()}function Gu(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,bu(i),oa(i)}function bu(i){i.D||(i.D=!0,_t(i,"complete"),_t(i,"error"))}function ps(i){if(i.h&&void 0!==ze&&(!i.C[1]||4!=Do(i)||2!=i.ba()))if(i.v&&4==Do(i))Gr(i.Fa,0,i);else if(_t(i,"readystatechange"),4==Do(i)){i.h=!1;try{const R=i.ba();e:switch(R){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===R){var d=String(i.H).match(na)[1]||null;if(!d&&ue.self&&ue.self.location){var g=ue.self.location.protocol;d=g.substr(0,g.length-1)}s=!iu.test(d?d.toLowerCase():"")}t=s}if(t)_t(i,"complete"),_t(i,"success");else{i.m=6;try{var w=2<Do(i)?i.g.statusText:""}catch(B){w=""}i.j=w+" ["+i.ba()+"]",bu(i)}}finally{oa(i)}}}function oa(i,e){if(i.g){$o(i);const t=i.g,s=i.C[0]?Se:null;i.g=null,i.C=null,e||_t(i,"ready");try{t.onreadystatechange=s}catch(d){}}}function $o(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(ue.clearTimeout(i.A),i.A=null)}function Do(i){return i.g?i.g.readyState:0}function aa(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case Ci:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function po(i,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=function qu(i){let e="";return Mn(i,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):de(i,e,t))}function go(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function Hl(i){this.za=0,this.l=[],this.h=new ns,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=go("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=go("baseRetryDelayMs",5e3,i),this.$a=go("retryDelaySeedMs",1e4,i),this.Ya=go("forwardChannelMaxRetries",2,i),this.ra=go("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new ra(i&&i.concurrentRequestLimit),this.Ca=new Ua,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function ua(i){if(Va(i),3==i.G){var e=i.V++,t=jn(i.F);de(t,"SID",i.J),de(t,"RID",e),de(t,"TYPE","terminate"),ja(i,t),(e=new cs(i,i.h,e,void 0)).K=2,e.v=We(jn(t)),t=!1,ue.navigator&&ue.navigator.sendBeacon&&(t=ue.navigator.sendBeacon(e.v.toString(),"")),!t&&ue.Image&&((new Image).src=e.v,t=!0),t||(e.g=yl(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Ei(e)}mo(i)}function Mi(i){i.g&&(Bs(i),i.g.cancel(),i.g=null)}function Va(i){Mi(i),i.u&&(ue.clearTimeout(i.u),i.u=null),Zn(i),i.i.cancel(),i.m&&("number"==typeof i.m&&ue.clearTimeout(i.m),i.m=null)}function ei(i,e){i.l.push(new class{constructor(i,e){this.h=i,this.g=e}}(i.Za++,e)),3==i.G&&Zo(i)}function Zo(i){gt(i.i)||i.m||(i.m=!0,Zr(i.Ha,i),i.C=0)}function Zl(i,e){var t;t=e?e.m:i.V++;const s=jn(i.F);de(s,"SID",i.J),de(s,"RID",t),de(s,"AID",i.U),ja(i,s),i.o&&i.s&&po(s,i.o,i.s),t=new cs(i,i.h,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.l=e.D.concat(i.l)),e=Fc(i,t,1e3),t.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),Ur(i.i,t),ds(t,s,e)}function ja(i,e){i.j&&Fa({},function(t,s){de(e,s,t)})}function Fc(i,e,t){t=Math.min(i.l.length,t);var s=i.j?ut(i.j.Oa,i.j,i):null;e:{var d=i.l;let g=-1;for(;;){const w=["count="+t];-1==g?0<t?(g=d[0].h,w.push("ofs="+g)):g=0:w.push("ofs="+g);let R=!0;for(let B=0;B<t;B++){let G=d[B].h;const ee=d[B].g;if(G-=g,0>G)g=Math.max(0,d[B].h-100),R=!1;else try{pl(ee,w,"req"+G+"_")}catch(fe){s&&s(ee)}}if(R){s=w.join("&");break e}}}return i=i.l.splice(0,t),e.D=i,s}function Lc(i){i.g||i.u||(i.Y=1,Zr(i.Ga,i),i.A=0)}function Go(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=ot(ut(i.Ga,i),ml(i,i.A)),i.A++,0))}function Bs(i){null!=i.B&&(ue.clearTimeout(i.B),i.B=null)}function la(i){i.g=new cs(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var e=jn(i.oa);de(e,"RID","rpc"),de(e,"SID",i.J),de(e,"CI",i.N?"0":"1"),de(e,"AID",i.U),ja(i,e),de(e,"TYPE","xmlhttp"),i.o&&i.s&&po(e,i.o,i.s),i.K&&i.g.setTimeout(i.K);var t=i.g;i=i.la,t.K=1,t.v=We(jn(e)),t.s=null,t.U=!0,rs(t,i)}function Zn(i){null!=i.v&&(ue.clearTimeout(i.v),i.v=null)}function Cu(i,e){var t=null;if(i.g==e){Zn(i),Bs(i),i.g=null;var s=2}else{if(!Qs(i.i,e))return;t=e.D,Ho(i.i,e),s=1}if(i.I=e.N,0!=i.G)if(e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.F;var d=i.C;_t(s=Pr(),new He(s,t,e,d)),Zo(i)}else Lc(i);else if(3==(d=e.o)||0==d&&0<i.I||!(1==s&&function $l(i,e){return!(Dn(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=e.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=ot(ut(i.Ha,i,e),ml(i,i.C)),i.C++,0)))}(i,e)||2==s&&Go(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),d){case 1:Hi(i,5);break;case 4:Hi(i,10);break;case 3:Hi(i,6);break;default:Hi(i,2)}}function ml(i,e){let t=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(t*=2),t*e}function Hi(i,e){if(i.h.info("Error code "+e),2==e){var t=null;i.j&&(t=null);var s=ut(i.jb,i);t||(t=new Co("//www.google.com/images/cleardot.gif"),ue.location&&"http"==ue.location.protocol||L(t,"https"),We(t)),function jl(i,e){const t=new ns;if(ue.Image){const s=new Image;s.onload=cn(ru,t,s,"TestLoadImage: loaded",!0,e),s.onerror=cn(ru,t,s,"TestLoadImage: error",!1,e),s.onabort=cn(ru,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=cn(ru,t,s,"TestLoadImage: timeout",!1,e),ue.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i}else e(!1)}(t.toString(),s)}else pe(2);i.G=0,i.j&&i.j.va(e),mo(i),Va(i)}function mo(i){i.G=0,i.I=-1,i.j&&((0!=ia(i.i).length||0!=i.l.length)&&(i.i.i.length=0,cr(i.l),i.l.length=0),i.j.ua())}function Vs(i,e,t){let s=function ht(i){return i instanceof Co?jn(i):new Co(i,void 0)}(t);if(""!=s.i)e&&q(s,e+"."+s.i),F(s,s.m);else{const d=ue.location;s=function Gt(i,e,t,s){var d=new Co(null,void 0);return i&&L(d,i),e&&q(d,e),t&&F(d,t),s&&(d.l=s),d}(d.protocol,e?e+"."+d.hostname:d.hostname,+d.port,t)}return i.aa&&Mn(i.aa,function(d,g){de(s,g,d)}),t=i.sa,(e=i.D)&&t&&de(s,e,t),de(s,"VER",i.ma),ja(i,s),s}function yl(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Xr(t&&i.Ba&&!i.qa?new Iu({ib:!0}):i.qa)).L=i.H,e}function Xs(){}function qo(){if(dt&&!(10<=Number(ce)))throw Error("Environmental error: no available transport.")}function eo(i,e){Tn.call(this),this.g=new Hl(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.P=i,(i=e&&e.httpHeadersOverwriteParam)&&!zn(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!zn(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new Pi(this)}function Gl(i){lo.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Uc(){Ns.call(this),this.status=1}function Pi(i){this.g=i}(X=Xr.prototype).ea=function(i,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():co.g(),this.C=function Vn(i){return i.h||(i.h=i.i())}(this.u?this.u:co),this.g.onreadystatechange=ut(this.Fa,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(g){return void Gu(this,g)}i=t||"";const d=new Nr(this.headers);s&&Fa(s,function(g,w){d.set(w,g)}),s=function mr(i){e:{var e=Ba;const t=i.length,s="string"==typeof i?i.split(""):i;for(let d=0;d<t;d++)if(d in s&&e.call(void 0,s[d],d,i)){e=d;break e}e=-1}return 0>e?null:"string"==typeof i?i.charAt(e):i[e]}(d.T()),t=ue.FormData&&i instanceof ue.FormData,!(0<=sn(gl,e))||s||t||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),d.forEach(function(g,w){this.g.setRequestHeader(w,g)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{$o(this),0<this.B&&((this.K=function To(i){return dt&&function he(){return function me(i){var e=se;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=Mr(String(en)).split("."),t=Mr("9").split("."),s=Math.max(e.length,t.length);for(let w=0;0==i&&w<s;w++){var d=e[w]||"",g=t[w]||"";do{if(d=/(\d*)(\D*)(.*)/.exec(d)||["","","",""],g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""],0==d[0].length&&0==g[0].length)break;i=wr(0==d[1].length?0:parseInt(d[1],10),0==g[1].length?0:parseInt(g[1],10))||wr(0==d[2].length,0==g[2].length)||wr(d[2],g[2]),d=d[3],g=g[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ut(this.pa,this)):this.A=Gr(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(g){Gu(this,g)}},X.pa=function(){void 0!==ze&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,_t(this,"timeout"),this.abort(8))},X.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,_t(this,"complete"),_t(this,"abort"),oa(this))},X.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),oa(this,!0)),Xr.Z.M.call(this)},X.Fa=function(){this.s||(this.F||this.v||this.l?ps(this):this.cb())},X.cb=function(){ps(this)},X.ba=function(){try{return 2<Do(this)?this.g.status:-1}catch(i){return-1}},X.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},X.Qa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Js(e)}},X.Da=function(){return this.m},X.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(X=Hl.prototype).ma=8,X.G=1,X.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(e){}},X.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const d=new cs(this,this.h,i,void 0);let g=this.s;if(this.P&&(g?(g=Pn(g),mi(g,this.P)):g=this.P),null===this.o&&(d.H=g),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var s=this.l[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Fc(this,d,e),de(t=jn(this.F),"RID",i),de(t,"CVER",22),this.D&&de(t,"X-HTTP-Session-Id",this.D),ja(this,t),this.o&&g&&po(t,this.o,g),Ur(this.i,d),this.Ra&&de(t,"TYPE","init"),this.ja?(de(t,"$req",e),de(t,"SID","null"),d.$=!0,ds(d,t,null)):ds(d,t,e),this.G=2}}else 3==this.G&&(i?Zl(this,i):0==this.l.length||gt(this.i)||Zl(this))},X.Ga=function(){if(this.u=null,la(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=ot(ut(this.bb,this),i)}},X.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,pe(10),Mi(this),la(this))},X.ab=function(){null!=this.v&&(this.v=null,Mi(this),Go(this),pe(19))},X.jb=function(i){i?(this.h.info("Successfully pinged google.com"),pe(2)):(this.h.info("Failed to ping google.com"),pe(1))},(X=Xs.prototype).xa=function(){},X.wa=function(){},X.va=function(){},X.ua=function(){},X.Oa=function(){},qo.prototype.g=function(i,e){return new eo(i,e)},Yt(eo,Tn),eo.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),Zr(ut(i.hb,i,e))),pe(0),i.W=e,i.aa=t||{},i.N=i.X,i.F=Vs(i,null,i.W),Zo(i)},eo.prototype.close=function(){ua(this.g)},eo.prototype.u=function(i){if("string"==typeof i){var e={};e.__data__=i,ei(this.g,e)}else this.v?((e={}).__data__=Bn(i),ei(this.g,e)):ei(this.g,i)},eo.prototype.M=function(){this.g.j=null,delete this.j,ua(this.g),delete this.g,eo.Z.M.call(this)},Yt(Gl,lo),Yt(Uc,Ns),Yt(Pi,Xs),Pi.prototype.xa=function(){_t(this.g,"a")},Pi.prototype.wa=function(i){_t(this.g,new Gl(i))},Pi.prototype.va=function(i){_t(this.g,new Uc(i))},Pi.prototype.ua=function(){_t(this.g,"b")},qo.prototype.createWebChannel=qo.prototype.g,eo.prototype.send=eo.prototype.u,eo.prototype.open=eo.prototype.m,eo.prototype.close=eo.prototype.close,Ct.NO_ERROR=0,Ct.TIMEOUT=8,Ct.HTTP_ERROR=6,Pt.COMPLETE="complete",tr.EventType=Bi,Bi.OPEN="a",Bi.CLOSE="b",Bi.ERROR="c",Bi.MESSAGE="d",Tn.prototype.listen=Tn.prototype.N,Xr.prototype.listenOnce=Xr.prototype.O,Xr.prototype.getLastError=Xr.prototype.La,Xr.prototype.getLastErrorCode=Xr.prototype.Da,Xr.prototype.getStatus=Xr.prototype.ba,Xr.prototype.getResponseJson=Xr.prototype.Qa,Xr.prototype.getResponseText=Xr.prototype.ga,Xr.prototype.send=Xr.prototype.ea;var su=yt.createWebChannelTransport=function(){return new qo},Ha=yt.getStatEventTarget=function(){return Pr()},js=yt.ErrorCode=Ct,Tu=yt.EventType=Pt,ql=yt.Event=Ks,$a=yt.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Wo=yt.FetchXmlHttpFactory=Iu,ti=yt.WebChannel=tr,Za=yt.XhrIo=Xr;const ca="@firebase/firestore";class ni{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ni.UNAUTHENTICATED=new ni(null),ni.GOOGLE_CREDENTIALS=new ni("google-credentials-uid"),ni.FIRST_PARTY=new ni("first-party-uid"),ni.MOCK_USER=new ni("mock-user");let ou="9.8.3";const zo=new Ke.Yd("@firebase/firestore");function au(){return zo.logLevel}function wt(i,...e){if(zo.logLevel<=Ke.in.DEBUG){const t=e.map(Ko);zo.debug(`Firestore (${ou}): ${i}`,...t)}}function _r(i,...e){if(zo.logLevel<=Ke.in.ERROR){const t=e.map(Ko);zo.error(`Firestore (${ou}): ${i}`,...t)}}function Ni(i,...e){if(zo.logLevel<=Ke.in.WARN){const t=e.map(Ko);zo.warn(`Firestore (${ou}): ${i}`,...t)}}function Ko(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(t){return i}}function A(i="Unexpected state"){const e=`FIRESTORE (${ou}) INTERNAL ASSERTION FAILED: `+i;throw _r(e),new Error(e)}function T(i,e){i||A()}function P(i,e){return i}const N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class j extends je.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class re{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class ge{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class et{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ni.UNAUTHENTICATED))}shutdown(){}}class Ft{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class In{constructor(e){this.t=e,this.currentUser=ni.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let d=this.i;const g=G=>this.i!==d?(d=this.i,t(G)):Promise.resolve();let w=new re;this.o=()=>{this.i++,this.currentUser=this.u(),w.resolve(),w=new re,e.enqueueRetryable(()=>g(this.currentUser))};const R=()=>{const G=w;e.enqueueRetryable((0,Ie.Z)(function*(){yield G.promise,yield g(s.currentUser)}))},B=G=>{wt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=G,this.auth.addAuthTokenListener(this.o),R()};this.t.onInit(G=>B(G)),setTimeout(()=>{if(!this.auth){const G=this.t.getImmediate({optional:!0});G?B(G):(wt("FirebaseAuthCredentialsProvider","Auth not yet detected"),w.resolve(),w=new re)}},0),R()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(wt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(T("string"==typeof s.accessToken),new ge(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return T(null===e||"string"==typeof e),new ni(e)}}class qt{constructor(e,t,s){this.type="FirstParty",this.user=ni.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const d=e.auth.getAuthHeaderValueForFirstParty([]);d&&this.headers.set("Authorization",d),s&&this.headers.set("X-Goog-Iam-Authorization-Token",s)}}class ar{constructor(e,t,s){this.h=e,this.l=t,this.m=s}getToken(){return Promise.resolve(new qt(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ni.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ur{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $i{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const s=g=>{null!=g.error&&wt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${g.error.message}`);const w=g.token!==this.p;return this.p=g.token,wt("FirebaseAppCheckTokenProvider",`Received ${w?"new":"existing"} token.`),w?t(g.token):Promise.resolve()};this.o=g=>{e.enqueueRetryable(()=>s(g))};const d=g=>{wt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=g,this.appCheck.addTokenListener(this.o)};this.g.onInit(g=>d(g)),setTimeout(()=>{if(!this.appCheck){const g=this.g.getImmediate({optional:!0});g?d(g):wt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(T("string"==typeof t.token),this.p=t.token,new ur(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function uu(i){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}class lu{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const d=uu(40);for(let g=0;g<d.length;++g)s.length<20&&d[g]<t&&(s+=e.charAt(d[g]%e.length))}return s}}function ln(i,e){return i<e?-1:i>e?1:0}function yo(i,e,t){return i.length===e.length&&i.every((s,d)=>t(s,e[d]))}function da(i){return i+"\0"}class Or{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new j(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new j(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new j(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new j(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Or.fromMillis(Date.now())}static fromDate(e){return Or.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new Or(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ln(this.nanoseconds,e.nanoseconds):ln(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class yn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new yn(e)}static min(){return new yn(new Or(0,0))}static max(){return new yn(new Or(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ha{constructor(e,t,s){void 0===t?t=0:t>e.length&&A(),void 0===s?s=e.length-t:s>e.length-t&&A(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===ha.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ha?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let d=0;d<s;d++){const g=e.get(d),w=t.get(d);if(g<w)return-1;if(g>w)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class nr extends ha{construct(e,t,s){return new nr(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new j(N.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(d=>d.length>0))}return new nr(t)}static emptyPath(){return new nr([])}}const Rd=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kn extends ha{construct(e,t,s){return new kn(e,t,s)}static isValidIdentifier(e){return Rd.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new kn(["__name__"])}static fromServerFormat(e){const t=[];let s="",d=0;const g=()=>{if(0===s.length)throw new j(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let w=!1;for(;d<e.length;){const R=e[d];if("\\"===R){if(d+1===e.length)throw new j(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const B=e[d+1];if("\\"!==B&&"."!==B&&"`"!==B)throw new j(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=B,d+=2}else"`"===R?(w=!w,d++):"."!==R||w?(s+=R,d++):(g(),d++)}if(g(),w)throw new j(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kn(t)}static emptyPath(){return new kn([])}}class kt{constructor(e){this.path=e}static fromPath(e){return new kt(nr.fromString(e))}static fromName(e){return new kt(nr.fromString(e).popFirst(5))}static empty(){return new kt(nr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===nr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return nr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new kt(new nr(e.slice()))}}class Md{constructor(e,t,s,d){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=d}}function Pd(i){return i.fields.find(e=>2===e.kind)}function Wu(i){return i.fields.filter(e=>2!==e.kind)}Md.UNKNOWN_ID=-1;class Su{constructor(e,t){this.fieldPath=e,this.kind=t}}class _l{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new _l(0,Hs.min())}}function Nd(i,e){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,d=yn.fromTimestamp(1e9===s?new Or(t+1,0):new Or(t,s));return new Hs(d,kt.empty(),e)}function cu(i){return new Hs(i.readTime,i.key,-1)}class Hs{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Hs(yn.min(),kt.empty(),-1)}static max(){return new Hs(yn.max(),kt.empty(),-1)}}function Ti(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=kt.comparator(i.documentKey,e.documentKey),0!==t?t:ln(i.largestBatchId,e.largestBatchId))}const zu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ku{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function $s(i){return vl.apply(this,arguments)}function vl(){return vl=(0,Ie.Z)(function*(i){if(i.code!==N.FAILED_PRECONDITION||i.message!==zu)throw i;wt("LocalStore","Unexpectedly lost primary lease")}),vl.apply(this,arguments)}class Ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&A(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ue((s,d)=>{this.nextCallback=g=>{this.wrapSuccess(e,g).next(s,d)},this.catchCallback=g=>{this.wrapFailure(t,g).next(s,d)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ue?t:Ue.resolve(t)}catch(t){return Ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ue.reject(t)}static resolve(e){return new Ue((t,s)=>{t(e)})}static reject(e){return new Ue((t,s)=>{s(e)})}static waitFor(e){return new Ue((t,s)=>{let d=0,g=0,w=!1;e.forEach(R=>{++d,R.next(()=>{++g,w&&g===d&&t()},B=>s(B))}),w=!0,g===d&&t()})}static or(e){let t=Ue.resolve(!1);for(const s of e)t=t.next(d=>d?Ue.resolve(d):s());return t}static forEach(e,t){const s=[];return e.forEach((d,g)=>{s.push(t.call(this,d,g))}),this.waitFor(s)}static mapArray(e,t){return new Ue((s,d)=>{const g=e.length,w=new Array(g);let R=0;for(let B=0;B<g;B++){const G=B;t(e[G]).next(ee=>{w[G]=ee,++R,R===g&&s(w)},ee=>d(ee))}})}static doWhile(e,t){return new Ue((s,d)=>{const g=()=>{!0===e()?t().next(()=>{g()},d):s()};g()})}}class gs{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new re,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new Zi(e,t.error)):this.T.resolve()},this.transaction.onerror=s=>{const d=Yu(s.target.error);this.T.reject(new Zi(e,d))}}static open(e,t,s,d){try{return new gs(t,e.transaction(d,s))}catch(g){throw new Zi(t,g)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(wt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new pa(t)}}class Zs{constructor(e,t,s){this.name=e,this.version=t,this.P=s,12.2===Zs.v((0,je.z$)())&&_r("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return wt("SimpleDb","Removing database:",e),Rr(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,je.hl)())return!1;if(Zs.S())return!0;const e=(0,je.z$)(),t=Zs.v(e),s=0<t&&t<10,d=Zs.D(e),g=0<d&&d<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||g)}static S(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static D(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}k(e){var t=this;return(0,Ie.Z)(function*(){return t.db||(wt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,d)=>{const g=indexedDB.open(t.name,t.version);g.onsuccess=w=>{s(w.target.result)},g.onblocked=()=>{d(new Zi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},g.onerror=w=>{const R=w.target.error;d("VersionError"===R.name?new j(N.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===R.name?new j(N.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+R):new Zi(e,R))},g.onupgradeneeded=w=>{wt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',w.oldVersion),t.P.O(w.target.result,g.transaction,w.oldVersion,t.version).next(()=>{wt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.M&&(t.db.onversionchange=s=>t.M(s)),t.db})()}F(e){this.M=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,d){var g=this;return(0,Ie.Z)(function*(){const w="readonly"===t;let R=0;for(;;){++R;try{g.db=yield g.k(e);const B=gs.open(g.db,e,w?"readonly":"readwrite",s),G=d(B).next(ee=>(B.R(),ee)).catch(ee=>(B.abort(ee),Ue.reject(ee))).toPromise();return G.catch(()=>{}),yield B.A,G}catch(B){const G="FirebaseError"!==B.name&&R<3;if(wt("SimpleDb","Transaction failed with error:",B.message,"Retrying:",G),g.close(),!G)return Promise.reject(B)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class fa{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return Rr(this.$.delete())}}class Zi extends j{constructor(e,t){super(N.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ts(i){return"IndexedDbTransactionError"===i.name}class pa{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(wt("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(wt("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),Rr(s)}add(e){return wt("SimpleDb","ADD",this.store.name,e,e),Rr(this.store.add(e))}get(e){return Rr(this.store.get(e)).next(t=>(void 0===t&&(t=null),wt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return wt("SimpleDb","DELETE",this.store.name,e),Rr(this.store.delete(e))}count(){return wt("SimpleDb","COUNT",this.store.name),Rr(this.store.count())}K(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const d=this.cursor(s),g=[];return this.G(d,(w,R)=>{g.push(R)}).next(()=>g)}{const d=this.store.getAll(s.range);return new Ue((g,w)=>{d.onerror=R=>{w(R.target.error)},d.onsuccess=R=>{g(R.target.result)}})}}j(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new Ue((d,g)=>{s.onerror=w=>{g(w.target.error)},s.onsuccess=w=>{d(w.target.result)}})}W(e,t){wt("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.H=!1;const d=this.cursor(s);return this.G(d,(g,w,R)=>R.delete())}J(e,t){let s;t?s=e:(s={},t=e);const d=this.cursor(s);return this.G(d,t)}Y(e){const t=this.cursor({});return new Ue((s,d)=>{t.onerror=g=>{const w=Yu(g.target.error);d(w)},t.onsuccess=g=>{const w=g.target.result;w?e(w.primaryKey,w.value).next(R=>{R?w.continue():s()}):s()}})}G(e,t){const s=[];return new Ue((d,g)=>{e.onerror=w=>{g(w.target.error)},e.onsuccess=w=>{const R=w.target.result;if(!R)return void d();const B=new fa(R),G=t(R.primaryKey,R.value,B);if(G instanceof Ue){const ee=G.catch(fe=>(B.done(),Ue.reject(fe)));s.push(ee)}B.isDone?d():null===B.U?R.continue():R.continue(B.U)}}).next(()=>Ue.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.H?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Rr(i){return new Ue((e,t)=>{i.onsuccess=s=>{e(s.target.result)},i.onerror=s=>{const d=Yu(s.target.error);t(d)}})}let Au=!1;function Yu(i){const e=Zs.v((0,je.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const s=new j("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Au||(Au=!0,setTimeout(()=>{throw s},0)),s}}return i}class ga{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;wt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ie.Z)(function*(){t.task=null;try{wt("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(s){Ts(s)?wt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield $s(s)}yield t.Z(1)}))}}class Sr{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,Ie.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.et(s,e))})()}et(e,t){const s=new Set;let d=t,g=!0;return Ue.doWhile(()=>!0===g&&d>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(w=>{if(null!==w&&!s.has(w))return wt("IndexBackiller",`Processing collection: ${w}`),this.nt(e,w,d).next(R=>{d-=R,s.add(w)});g=!1})).next(()=>t-d)}nt(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(d=>this.localStore.localDocuments.getNextDocuments(e,t,d,s).next(g=>{const w=g.changes;return this.localStore.indexManager.updateIndexEntries(e,w).next(()=>this.st(d,g)).next(R=>(wt("IndexBackiller",`Updating offset: ${R}`),this.localStore.indexManager.updateCollectionGroup(e,t,R))).next(()=>w.size)}))}st(e,t){let s=e;return t.changes.forEach((d,g)=>{const w=cu(g);Ti(w,s)>0&&(s=w)}),new Hs(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ds{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.it(s),this.rt=s=>t.writeSequenceNumber(s))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function ma(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Qu(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function ss(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}Ds.ot=-1;class fr{constructor(e,t){this.comparator=e,this.root=t||ms.EMPTY}insert(e,t){return new fr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ms.BLACK,null,null))}remove(e){return new fr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ms.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const d=this.comparator(e,s.key);if(0===d)return t+s.left.size;d<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new So(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new So(this.root,e,this.comparator,!1)}getReverseIterator(){return new So(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new So(this.root,e,this.comparator,!0)}}class So{constructor(e,t,s,d){this.isReverse=d,this.nodeStack=[];let g=1;for(;!e.isEmpty();)if(g=t?s(e.key,t):1,t&&d&&(g*=-1),g<0)e=this.isReverse?e.left:e.right;else{if(0===g){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ms{constructor(e,t,s,d,g){this.key=e,this.value=t,this.color=null!=s?s:ms.RED,this.left=null!=d?d:ms.EMPTY,this.right=null!=g?g:ms.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,d,g){return new ms(null!=e?e:this.key,null!=t?t:this.value,null!=s?s:this.color,null!=d?d:this.left,null!=g?g:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let d=this;const g=s(e,d.key);return d=g<0?d.copy(null,null,null,d.left.insert(e,t,s),null):0===g?d.copy(null,t,null,null,null):d.copy(null,null,null,null,d.right.insert(e,t,s)),d.fixUp()}removeMin(){if(this.left.isEmpty())return ms.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,d=this;if(t(e,d.key)<0)d.left.isEmpty()||d.left.isRed()||d.left.left.isRed()||(d=d.moveRedLeft()),d=d.copy(null,null,null,d.left.remove(e,t),null);else{if(d.left.isRed()&&(d=d.rotateRight()),d.right.isEmpty()||d.right.isRed()||d.right.left.isRed()||(d=d.moveRedRight()),0===t(e,d.key)){if(d.right.isEmpty())return ms.EMPTY;s=d.right.min(),d=d.copy(s.key,s.value,null,null,d.right.removeMin())}d=d.copy(null,null,null,null,d.right.remove(e,t))}return d.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ms.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ms.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw A();const e=this.left.check();if(e!==this.right.check())throw A();return e+(this.isRed()?0:1)}}ms.EMPTY=null,ms.RED=!0,ms.BLACK=!1,ms.EMPTY=new class{constructor(){this.size=0}get key(){throw A()}get value(){throw A()}get color(){throw A()}get left(){throw A()}get right(){throw A()}copy(i,e,t,s,d){return this}insert(i,e,t){return new ms(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ln{constructor(e){this.comparator=e,this.data=new fr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const d=s.getNext();if(this.comparator(d.key,e[1])>=0)return;t(d.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ju(this.data.getIterator())}getIteratorFrom(e){return new Ju(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Ln)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const d=t.getNext().key,g=s.getNext().key;if(0!==this.comparator(d,g))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ln(this.comparator);return t.data=e,t}}class Ju{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function to(i){return i.hasNext()?i.getNext():void 0}class Jn{constructor(e){this.fields=e,e.sort(kn.comparator)}static empty(){return new Jn([])}unionWith(e){let t=new Ln(kn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Jn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return yo(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class Gi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Gi(t)}static fromUint8Array(e){const t=function(s){let d="";for(let g=0;g<s.length;++g)d+=String.fromCharCode(s[g]);return d}(e);return new Gi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ln(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gi.EMPTY_BYTE_STRING=new Gi("");const xu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ao(i){if(T(!!i),"string"==typeof i){let e=0;const t=xu.exec(i);if(T(!!t),t[1]){let d=t[1];d=(d+"000000000").substr(0,9),e=Number(d)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Br(i.seconds),nanos:Br(i.nanos)}}function Br(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function k(i){return"string"==typeof i?Gi.fromBase64String(i):Gi.fromUint8Array(i)}function U(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function K(i){const e=i.mapValue.fields.__previous_value__;return U(e)?K(e):e}function oe(i){const e=Ao(i.mapValue.fields.__local_write_time__.timestampValue);return new Or(e.seconds,e.nanos)}class Pe{constructor(e,t,s,d,g,w,R,B){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=d,this.ssl=g,this.forceLongPolling=w,this.autoDetectLongPolling=R,this.useFetchStreams=B}}class Le{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Le("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Le&&e.projectId===this.projectId&&e.database===this.database}}function pt(i){return null==i}function Bt(i){return 0===i&&1/i==-1/0}function Zt(i){return"number"==typeof i&&Number.isInteger(i)&&!Bt(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const wn={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},rr={nullValue:"NULL_VALUE"};function an(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?U(i)?4:zl(i)?9007199254740991:10:A()}function Ar(i,e){if(i===e)return!0;const t=an(i);if(t!==an(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return oe(i).isEqual(oe(e));case 3:return function(s,d){if("string"==typeof s.timestampValue&&"string"==typeof d.timestampValue&&s.timestampValue.length===d.timestampValue.length)return s.timestampValue===d.timestampValue;const g=Ao(s.timestampValue),w=Ao(d.timestampValue);return g.seconds===w.seconds&&g.nanos===w.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return d=e,k(i.bytesValue).isEqual(k(d.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(s,d){return Br(s.geoPointValue.latitude)===Br(d.geoPointValue.latitude)&&Br(s.geoPointValue.longitude)===Br(d.geoPointValue.longitude)}(i,e);case 2:return function(s,d){if("integerValue"in s&&"integerValue"in d)return Br(s.integerValue)===Br(d.integerValue);if("doubleValue"in s&&"doubleValue"in d){const g=Br(s.doubleValue),w=Br(d.doubleValue);return g===w?Bt(g)===Bt(w):isNaN(g)&&isNaN(w)}return!1}(i,e);case 9:return yo(i.arrayValue.values||[],e.arrayValue.values||[],Ar);case 10:return function(s,d){const g=s.mapValue.fields||{},w=d.mapValue.fields||{};if(ma(g)!==ma(w))return!1;for(const R in g)if(g.hasOwnProperty(R)&&(void 0===w[R]||!Ar(g[R],w[R])))return!1;return!0}(i,e);default:return A()}var d}function os(i,e){return void 0!==(i.values||[]).find(t=>Ar(t,e))}function no(i,e){if(i===e)return 0;const t=an(i),s=an(e);if(t!==s)return ln(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return ln(i.booleanValue,e.booleanValue);case 2:return function(d,g){const w=Br(d.integerValue||d.doubleValue),R=Br(g.integerValue||g.doubleValue);return w<R?-1:w>R?1:w===R?0:isNaN(w)?isNaN(R)?0:-1:1}(i,e);case 3:return ya(i.timestampValue,e.timestampValue);case 4:return ya(oe(i),oe(e));case 5:return ln(i.stringValue,e.stringValue);case 6:return function(d,g){const w=k(d),R=k(g);return w.compareTo(R)}(i.bytesValue,e.bytesValue);case 7:return function(d,g){const w=d.split("/"),R=g.split("/");for(let B=0;B<w.length&&B<R.length;B++){const G=ln(w[B],R[B]);if(0!==G)return G}return ln(w.length,R.length)}(i.referenceValue,e.referenceValue);case 8:return function(d,g){const w=ln(Br(d.latitude),Br(g.latitude));return 0!==w?w:ln(Br(d.longitude),Br(g.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(d,g){const w=d.values||[],R=g.values||[];for(let B=0;B<w.length&&B<R.length;++B){const G=no(w[B],R[B]);if(G)return G}return ln(w.length,R.length)}(i.arrayValue,e.arrayValue);case 10:return function(d,g){if(d===wn.mapValue&&g===wn.mapValue)return 0;if(d===wn.mapValue)return 1;if(g===wn.mapValue)return-1;const w=d.fields||{},R=Object.keys(w),B=g.fields||{},G=Object.keys(B);R.sort(),G.sort();for(let ee=0;ee<R.length&&ee<G.length;++ee){const fe=ln(R[ee],G[ee]);if(0!==fe)return fe;const qe=no(w[R[ee]],B[G[ee]]);if(0!==qe)return qe}return ln(R.length,G.length)}(i.mapValue,e.mapValue);default:throw A()}}function ya(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return ln(i,e);const t=Ao(i),s=Ao(e),d=ln(t.seconds,s.seconds);return 0!==d?d:ln(t.nanos,s.nanos)}function ys(i){return _a(i)}function _a(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(s){const d=Ao(s);return`time(${d.seconds},${d.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?k(i.bytesValue).toBase64():"referenceValue"in i?kt.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(s){let d="[",g=!0;for(const w of s.values||[])g?g=!1:d+=",",d+=_a(w);return d+"]"}(i.arrayValue):"mapValue"in i?function(s){const d=Object.keys(s.fields||{}).sort();let g="{",w=!0;for(const R of d)w?w=!1:g+=",",g+=`${R}:${_a(s.fields[R])}`;return g+"}"}(i.mapValue):A();var e}function _o(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function xo(i){return!!i&&"integerValue"in i}function ro(i){return!!i&&"arrayValue"in i}function Ga(i){return!!i&&"nullValue"in i}function Ru(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function wl(i){return!!i&&"mapValue"in i}function Mu(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Qu(i.mapValue.fields,(t,s)=>e.mapValue.fields[t]=Mu(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Mu(i.arrayValue.values[t]);return e}return Object.assign({},i)}function zl(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function bh(i){return"nullValue"in i?rr:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?_o(Le.empty(),kt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:A()}function Kl(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?_o(Le.empty(),kt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?wn:A()}function Yl(i,e){const t=no(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Bc(i,e){const t=no(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class io{constructor(e){this.value=e}static empty(){return new io({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!wl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Mu(t)}setAll(e){let t=kn.emptyPath(),s={},d=[];e.forEach((w,R)=>{if(!t.isImmediateParentOf(R)){const B=this.getFieldsMap(t);this.applyChanges(B,s,d),s={},d=[],t=R.popLast()}w?s[R.lastSegment()]=Mu(w):d.push(R.lastSegment())});const g=this.getFieldsMap(t);this.applyChanges(g,s,d)}delete(e){const t=this.field(e.popLast());wl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ar(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let d=t.mapValue.fields[e.get(s)];wl(d)&&d.mapValue.fields||(d={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=d),t=d}return t.mapValue.fields}applyChanges(e,t,s){Qu(t,(d,g)=>e[d]=g);for(const d of s)delete e[d]}clone(){return new io(Mu(this.value))}}function Ch(i){const e=[];return Qu(i.fields,(t,s)=>{const d=new kn([t]);if(wl(s)){const g=Ch(s.mapValue).fields;if(0===g.length)e.push(d);else for(const w of g)e.push(d.child(w))}else e.push(d)}),new Jn(e)}class qr{constructor(e,t,s,d,g,w){this.key=e,this.documentType=t,this.version=s,this.readTime=d,this.data=g,this.documentState=w}static newInvalidDocument(e){return new qr(e,0,yn.min(),yn.min(),io.empty(),0)}static newFoundDocument(e,t,s){return new qr(e,1,t,yn.min(),s,0)}static newNoDocument(e,t){return new qr(e,2,t,yn.min(),io.empty(),0)}static newUnknownDocument(e,t){return new qr(e,3,t,yn.min(),io.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=io.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=io.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=yn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof qr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Vp{constructor(e,t=null,s=[],d=[],g=null,w=null,R=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=d,this.limit=g,this.startAt=w,this.endAt=R,this.ut=null}}function Ql(i,e=null,t=[],s=[],d=null,g=null,w=null){return new Vp(i,e,t,s,d,g,w)}function Xu(i){const e=P(i);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>{return(d=s).field.canonicalString()+d.op.toString()+ys(d.value);var d}).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(d=s).field.canonicalString()+d.dir;var d}).join(","),pt(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>ys(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>ys(s)).join(",")),e.ut=t}return e.ut}function el(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let d=0;d<i.orderBy.length;d++)if(!Hp(i.orderBy[d],e.orderBy[d]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let d=0;d<i.filters.length;d++)if((t=i.filters[d]).op!==(s=e.filters[d]).op||!t.field.isEqual(s.field)||!Ar(t.value,s.value))return!1;var t,s;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!ec(i.startAt,e.startAt)&&ec(i.endAt,e.endAt)}function Jl(i){return kt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function Pu(i,e){return i.filters.filter(t=>t instanceof Gs&&t.field.isEqual(e))}function Cf(i,e,t){let s=rr,d=!0;for(const g of Pu(i,e)){let w=rr,R=!0;switch(g.op){case"<":case"<=":w=bh(g.value);break;case"==":case"in":case">=":w=g.value;break;case">":w=g.value,R=!1;break;case"!=":case"not-in":w=rr}Yl({value:s,inclusive:d},{value:w,inclusive:R})<0&&(s=w,d=R)}if(null!==t)for(let g=0;g<i.orderBy.length;++g)if(i.orderBy[g].field.isEqual(e)){const w=t.position[g];Yl({value:s,inclusive:d},{value:w,inclusive:t.inclusive})<0&&(s=w,d=t.inclusive);break}return{value:s,inclusive:d}}function Th(i,e,t){let s=wn,d=!0;for(const g of Pu(i,e)){let w=wn,R=!0;switch(g.op){case">=":case">":w=Kl(g.value),R=!1;break;case"==":case"in":case"<=":w=g.value;break;case"<":w=g.value,R=!1;break;case"!=":case"not-in":w=wn}Bc({value:s,inclusive:d},{value:w,inclusive:R})>0&&(s=w,d=R)}if(null!==t)for(let g=0;g<i.orderBy.length;++g)if(i.orderBy[g].field.isEqual(e)){const w=t.position[g];Bc({value:s,inclusive:d},{value:w,inclusive:t.inclusive})>0&&(s=w,d=t.inclusive);break}return{value:s,inclusive:d}}class Gs extends class{}{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,s):new Xl(e,t,s):"array-contains"===t?new Od(e,s):"in"===t?new Df(e,s):"not-in"===t?new Sf(e,s):"array-contains-any"===t?new kd(e,s):new Gs(e,t,s)}static ct(e,t,s){return"in"===t?new Dh(e,s):new Tf(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(no(t,this.value)):null!==t&&an(this.value)===an(t)&&this.at(no(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return A()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Xl extends Gs{constructor(e,t,s){super(e,t,s),this.key=kt.fromName(s.referenceValue)}matches(e){const t=kt.comparator(e.key,this.key);return this.at(t)}}class Dh extends Gs{constructor(e,t){super(e,"in",t),this.keys=du(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Tf extends Gs{constructor(e,t){super(e,"not-in",t),this.keys=du(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function du(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>kt.fromName(s.referenceValue))}class Od extends Gs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ro(t)&&os(t.arrayValue,this.value)}}class Df extends Gs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&os(this.value.arrayValue,t)}}class Sf extends Gs{constructor(e,t){super(e,"not-in",t)}matches(e){if(os(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!os(this.value.arrayValue,t)}}class kd extends Gs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ro(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>os(this.value.arrayValue,s))}}class Qo{constructor(e,t){this.position=e,this.inclusive=t}}class El{constructor(e,t="asc"){this.field=e,this.dir=t}}function Hp(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function qa(i,e,t){let s=0;for(let d=0;d<i.position.length;d++){const g=e[d],w=i.position[d];if(s=g.field.isKeyField()?kt.comparator(kt.fromName(w.referenceValue),t.key):no(w,t.data.field(g.field)),"desc"===g.dir&&(s*=-1),0!==s)break}return s}function ec(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Ar(i.position[t],e.position[t]))return!1;return!0}class Wa{constructor(e,t=null,s=[],d=[],g=null,w="F",R=null,B=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=d,this.limit=g,this.limitType=w,this.startAt=R,this.endAt=B,this.lt=null,this.ft=null}}function Sh(i,e,t,s,d,g,w,R){return new Wa(i,e,t,s,d,g,w,R)}function Il(i){return new Wa(i)}function Vc(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function Af(i){for(const e of i.filters)if(e.ht())return e.field;return null}function tc(i){return null!==i.collectionGroup}function tl(i){const e=P(i);if(null===e.lt){e.lt=[];const t=Af(e),s=Vc(e);if(null!==t&&null===s)t.isKeyField()||e.lt.push(new El(t)),e.lt.push(new El(kn.keyField(),"asc"));else{let d=!1;for(const g of e.explicitOrderBy)e.lt.push(g),g.field.isKeyField()&&(d=!0);if(!d){const g=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new El(kn.keyField(),g))}}}return e.lt}function Jo(i){const e=P(i);if(!e.ft)if("F"===e.limitType)e.ft=Ql(e.path,e.collectionGroup,tl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const g of tl(e))t.push(new El(g.field,"desc"===g.dir?"asc":"desc"));const s=e.endAt?new Qo(e.endAt.position,e.endAt.inclusive):null,d=e.startAt?new Qo(e.startAt.position,e.startAt.inclusive):null;e.ft=Ql(e.path,e.collectionGroup,t,e.filters,e.limit,s,d)}return e.ft}function Ah(i,e,t){return new Wa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function jc(i,e){return el(Jo(i),Jo(e))&&i.limitType===e.limitType}function $p(i){return`${Xu(Jo(i))}|lt:${i.limitType}`}function hu(i){return`Query(target=${function jp(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(s=t).field.canonicalString()} ${s.op} ${ys(s.value)}`;var s}).join(", ")}]`),pt(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(s=t).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>ys(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>ys(t)).join(",")),`Target(${e})`}(Jo(i))}; limitType=${i.limitType})`}function bl(i,e){return e.isFoundDocument()&&function(t,s){const d=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(d):kt.isDocumentKey(t.path)?t.path.isEqual(d):t.path.isImmediateParentOf(d)}(i,e)&&function(t,s){for(const d of t.explicitOrderBy)if(!d.field.isKeyField()&&null===s.data.field(d.field))return!1;return!0}(i,e)&&function(t,s){for(const d of t.filters)if(!d.matches(s))return!1;return!0}(i,e)&&(s=e,!((t=i).startAt&&!function(d,g,w){const R=qa(d,g,w);return d.inclusive?R<=0:R<0}(t.startAt,tl(t),s)||t.endAt&&!function(d,g,w){const R=qa(d,g,w);return d.inclusive?R>=0:R>0}(t.endAt,tl(t),s)));var t,s}function nc(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Ro(i){return(e,t)=>{let s=!1;for(const d of tl(i)){const g=rc(d,e,t);if(0!==g)return g;s=s||d.field.isKeyField()}return 0}}function rc(i,e,t){const s=i.field.isKeyField()?kt.comparator(e.key,t.key):function(d,g,w){const R=g.data.field(d),B=w.data.field(d);return null!==R&&null!==B?no(R,B):A()}(i.field,e,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return A()}}function pr(i,e){if(i.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bt(e)?"-0":e}}function gr(i){return{integerValue:""+i}}function Hn(i,e){return Zt(e)?gr(e):pr(i,e)}class va{constructor(){this._=void 0}}function ri(i,e,t){return i instanceof wa?function(s,d){const g={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return d&&(g.fields.__previous_value__=d),{mapValue:g}}(t,e):i instanceof fu?ci(i,e):i instanceof Rn?qs(i,e):function(s,d){const g=ic(s,d),w=sc(g)+sc(s._t);return xo(g)&&xo(s._t)?gr(w):pr(s.wt,w)}(i,e)}function xf(i,e,t){return i instanceof fu?ci(i,e):i instanceof Rn?qs(i,e):t}function ic(i,e){return i instanceof Cl?xo(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class wa extends va{}class fu extends va{constructor(e){super(),this.elements=e}}function ci(i,e){const t=Xo(e);for(const s of i.elements)t.some(d=>Ar(d,s))||t.push(s);return{arrayValue:{values:t}}}class Rn extends va{constructor(e){super(),this.elements=e}}function qs(i,e){let t=Xo(e);for(const s of i.elements)t=t.filter(d=>!Ar(d,s));return{arrayValue:{values:t}}}class Cl extends va{constructor(e,t){super(),this.wt=e,this._t=t}}function sc(i){return Br(i.integerValue||i.doubleValue)}function Xo(i){return ro(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Hc{constructor(e,t){this.field=e,this.transform=t}}class oc{constructor(e,t){this.version=e,this.transformResults=t}}class di{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new di}static exists(e){return new di(void 0,e)}static updateTime(e){return new di(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ea(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class Nu{}function oi(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new ku(i.key,di.none()):new ac(i.key,i.data,di.none());{const t=i.data,s=io.empty();let d=new Ln(kn.comparator);for(let g of e.fields)if(!d.has(g)){let w=t.field(g);null===w&&g.length>1&&(g=g.popLast(),w=t.field(g)),null===w?s.delete(g):s.set(g,w),d=d.add(g)}return new Ou(i.key,s,new Jn(d.toArray()),di.none())}}function Zp(i,e,t){i instanceof ac?function(s,d,g){const w=s.value.clone(),R=Ia(s.fieldTransforms,d,g.transformResults);w.setAll(R),d.convertToFoundDocument(g.version,w).setHasCommittedMutations()}(i,e,t):i instanceof Ou?function(s,d,g){if(!Ea(s.precondition,d))return void d.convertToUnknownDocument(g.version);const w=Ia(s.fieldTransforms,d,g.transformResults),R=d.data;R.setAll(Rh(s)),R.setAll(w),d.convertToFoundDocument(g.version,R).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function $c(i,e,t,s){return i instanceof ac?function(d,g,w,R){if(!Ea(d.precondition,g))return w;const B=d.value.clone(),G=Gn(d.fieldTransforms,R,g);return B.setAll(G),g.convertToFoundDocument(g.version,B).setHasLocalMutations(),null}(i,e,t,s):i instanceof Ou?function(d,g,w,R){if(!Ea(d.precondition,g))return w;const B=Gn(d.fieldTransforms,R,g),G=g.data;return G.setAll(Rh(d)),G.setAll(B),g.convertToFoundDocument(g.version,G).setHasLocalMutations(),null===w?null:w.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map(ee=>ee.field))}(i,e,t,s):(w=t,Ea(i.precondition,g=e)?(g.convertToNoDocument(g.version).setHasLocalMutations(),null):w);var g,w}function Zc(i,e){let t=null;for(const s of i.fieldTransforms){const d=e.data.field(s.field),g=ic(s.transform,d||null);null!=g&&(null===t&&(t=io.empty()),t.set(s.field,g))}return t||null}function xh(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===s||t&&s&&yo(t,s,(d,g)=>function Fd(i,e){return i.field.isEqual(e.field)&&(s=e.transform,(t=i.transform)instanceof fu&&s instanceof fu||t instanceof Rn&&s instanceof Rn?yo(t.elements,s.elements,Ar):t instanceof Cl&&s instanceof Cl?Ar(t._t,s._t):t instanceof wa&&s instanceof wa);var t,s}(d,g))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,s}class ac extends Nu{constructor(e,t,s,d=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=d,this.type=0}getFieldMask(){return null}}class Ou extends Nu{constructor(e,t,s,d,g=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=d,this.fieldTransforms=g,this.type=1}getFieldMask(){return this.fieldMask}}function Rh(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=i.data.field(t);e.set(t,s)}}),e}function Ia(i,e,t){const s=new Map;T(i.length===t.length);for(let d=0;d<t.length;d++){const g=i[d],w=g.transform,R=e.data.field(g.field);s.set(g.field,xf(w,R,t[d]))}return s}function Gn(i,e,t){const s=new Map;for(const d of i){const g=d.transform,w=t.data.field(d.field);s.set(d.field,ri(g,w,e))}return s}class ku extends Nu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Gc extends Nu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class uc{constructor(e){this.count=e}}var Fn,qn;function Mo(i){switch(i){default:return A();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function qc(i){if(void 0===i)return _r("GRPC error has no .code"),N.UNKNOWN;switch(i){case Fn.OK:return N.OK;case Fn.CANCELLED:return N.CANCELLED;case Fn.UNKNOWN:return N.UNKNOWN;case Fn.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case Fn.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case Fn.INTERNAL:return N.INTERNAL;case Fn.UNAVAILABLE:return N.UNAVAILABLE;case Fn.UNAUTHENTICATED:return N.UNAUTHENTICATED;case Fn.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case Fn.NOT_FOUND:return N.NOT_FOUND;case Fn.ALREADY_EXISTS:return N.ALREADY_EXISTS;case Fn.PERMISSION_DENIED:return N.PERMISSION_DENIED;case Fn.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case Fn.ABORTED:return N.ABORTED;case Fn.OUT_OF_RANGE:return N.OUT_OF_RANGE;case Fn.UNIMPLEMENTED:return N.UNIMPLEMENTED;case Fn.DATA_LOSS:return N.DATA_LOSS;default:return A()}}(qn=Fn||(Fn={}))[qn.OK=0]="OK",qn[qn.CANCELLED=1]="CANCELLED",qn[qn.UNKNOWN=2]="UNKNOWN",qn[qn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qn[qn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qn[qn.NOT_FOUND=5]="NOT_FOUND",qn[qn.ALREADY_EXISTS=6]="ALREADY_EXISTS",qn[qn.PERMISSION_DENIED=7]="PERMISSION_DENIED",qn[qn.UNAUTHENTICATED=16]="UNAUTHENTICATED",qn[qn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qn[qn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qn[qn.ABORTED=10]="ABORTED",qn[qn.OUT_OF_RANGE=11]="OUT_OF_RANGE",qn[qn.UNIMPLEMENTED=12]="UNIMPLEMENTED",qn[qn.INTERNAL=13]="INTERNAL",qn[qn.UNAVAILABLE=14]="UNAVAILABLE",qn[qn.DATA_LOSS=15]="DATA_LOSS";class Xn{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[d,g]of s)if(this.equalsFn(d,e))return g}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),d=this.inner[s];if(void 0===d)return this.inner[s]=[[e,t]],void this.innerSize++;for(let g=0;g<d.length;g++)if(this.equalsFn(d[g][0],e))return void(d[g]=[e,t]);d.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let d=0;d<s.length;d++)if(this.equalsFn(s[d][0],e))return 1===s.length?delete this.inner[t]:s.splice(d,1),this.innerSize--,!0;return!1}forEach(e){Qu(this.inner,(t,s)=>{for(const[d,g]of s)e(d,g)})}isEmpty(){return ss(this.inner)}size(){return this.innerSize}}const lc=new fr(kt.comparator);function Ss(){return lc}const cc=new fr(kt.comparator);function Wc(...i){let e=cc;for(const t of i)e=e.insert(t.key,t);return e}function so(i){let e=cc;return i.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function vo(){return pu()}function zc(){return pu()}function pu(){return new Xn(i=>i.toString(),(i,e)=>i.isEqual(e))}const Kc=new fr(kt.comparator),Ld=new Ln(kt.comparator);function $n(...i){let e=Ld;for(const t of i)e=e.add(t);return e}const Ud=new Ln(ln);function Bd(){return Ud}class ir{constructor(e,t,s,d,g){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=d,this.resolvedLimboDocuments=g}static createSynthesizedRemoteEventForCurrentChange(e,t){const s=new Map;return s.set(e,nl.createSynthesizedTargetChangeForCurrentChange(e,t)),new ir(yn.min(),s,Bd(),Ss(),$n())}}class nl{constructor(e,t,s,d,g){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=d,this.removedDocuments=g}static createSynthesizedTargetChangeForCurrentChange(e,t){return new nl(Gi.EMPTY_BYTE_STRING,t,$n(),$n(),$n())}}class Vd{constructor(e,t,s,d){this.gt=e,this.removedTargetIds=t,this.key=s,this.yt=d}}class Yc{constructor(e,t){this.targetId=e,this.It=t}}class Tl{constructor(e,t,s=Gi.EMPTY_BYTE_STRING,d=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=d}}class rl{constructor(){this.Tt=0,this.Et=An(),this.At=Gi.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=$n(),t=$n(),s=$n();return this.Et.forEach((d,g)=>{switch(g){case 0:e=e.add(d);break;case 2:t=t.add(d);break;case 1:s=s.add(d);break;default:A()}}),new nl(this.At,this.Rt,e,t,s)}Dt(){this.bt=!1,this.Et=An()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class Oi{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=Ss(),this.Bt=il(),this.Lt=new Ln(ln)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const s=this.Qt(t);switch(e.state){case 0:this.jt(t)&&s.Vt(e.resumeToken);break;case 1:s.kt(),s.Pt||s.Dt(),s.Vt(e.resumeToken);break;case 2:s.kt(),s.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(s.Ot(),s.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),s.Vt(e.resumeToken));break;default:A()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((s,d)=>{this.jt(d)&&t(d)})}zt(e){const t=e.targetId,s=e.It.count,d=this.Ht(t);if(d){const g=d.target;if(Jl(g))if(0===s){const w=new kt(g.path);this.Kt(t,w,qr.newNoDocument(w,yn.min()))}else T(1===s);else this.Jt(t)!==s&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((g,w)=>{const R=this.Ht(w);if(R){if(g.current&&Jl(R.target)){const B=new kt(R.target.path);null!==this.$t.get(B)||this.Xt(w,B)||this.Kt(w,B,qr.newNoDocument(B,e))}g.vt&&(t.set(w,g.St()),g.Dt())}});let s=$n();this.Bt.forEach((g,w)=>{let R=!0;w.forEachWhile(B=>{const G=this.Ht(B);return!G||2===G.purpose||(R=!1,!1)}),R&&(s=s.add(g))}),this.$t.forEach((g,w)=>w.setReadTime(e));const d=new ir(e,t,this.Lt,this.$t,s);return this.$t=Ss(),this.Bt=il(),this.Lt=new Ln(ln),d}qt(e,t){if(!this.jt(e))return;const s=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,s),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,s){if(!this.jt(e))return;const d=this.Qt(e);this.Xt(e,t)?d.Ct(t,1):d.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),s&&(this.$t=this.$t.insert(t,s))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new rl,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new Ln(ln),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||wt("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new rl),this.Mt.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}function il(){return new fr(kt.comparator)}function An(){return new fr(kt.comparator)}const Gp={asc:"ASCENDING",desc:"DESCENDING"},Po={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Qc{constructor(e,t){this.databaseId=e,this.dt=t}}function Vr(i,e){return i.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Jc(i,e){return i.dt?e.toBase64():e.toUint8Array()}function qp(i,e){return Vr(i,e.toTimestamp())}function ki(i){return T(!!i),yn.fromTimestamp(function(e){const t=Ao(e);return new Or(t.seconds,t.nanos)}(i))}function sl(i,e){return(t=i,new nr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function jd(i){const e=nr.fromString(i);return T(Ph(e)),e}function dc(i,e){return sl(i.databaseId,e.path)}function oo(i,e){const t=jd(e);if(t.get(1)!==i.databaseId.projectId)throw new j(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new j(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new kt(D(t))}function E(i,e){return sl(i.databaseId,e)}function p(i){const e=jd(i);return 4===e.length?nr.emptyPath():D(e)}function m(i){return new nr(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function D(i){return T(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function H(i,e,t){return{name:dc(i,e),fields:t.value.mapValue.fields}}function Y(i,e,t){const s=oo(i,e.name),d=ki(e.updateTime),g=new io({mapValue:{fields:e.fields}}),w=qr.newFoundDocument(s,d,g);return t&&w.setHasCommittedMutations(),t?w.setHasCommittedMutations():w}function St(i,e){let t;if(e instanceof ac)t={update:H(i,e.key,e.value)};else if(e instanceof ku)t={delete:dc(i,e.key)};else if(e instanceof Ou)t={update:H(i,e.key,e.data),updateMask:pc(e.fieldMask)};else{if(!(e instanceof Gc))return A();t={verify:dc(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(d,g){const w=g.transform;if(w instanceof wa)return{fieldPath:g.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(w instanceof fu)return{fieldPath:g.field.canonicalString(),appendMissingElements:{values:w.elements}};if(w instanceof Rn)return{fieldPath:g.field.canonicalString(),removeAllFromArray:{values:w.elements}};if(w instanceof Cl)return{fieldPath:g.field.canonicalString(),increment:w._t};throw A()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(d=e.precondition).updateTime?{updateTime:qp(i,d.updateTime)}:void 0!==d.exists?{exists:d.exists}:A()),t;var d}function Ut(i,e){const t=e.currentDocument?void 0!==(d=e.currentDocument).updateTime?di.updateTime(ki(d.updateTime)):void 0!==d.exists?di.exists(d.exists):di.none():di.none(),s=e.updateTransforms?e.updateTransforms.map(d=>function(g,w){let R=null;"setToServerValue"in w?(T("REQUEST_TIME"===w.setToServerValue),R=new wa):"appendMissingElements"in w?R=new fu(w.appendMissingElements.values||[]):"removeAllFromArray"in w?R=new Rn(w.removeAllFromArray.values||[]):"increment"in w?R=new Cl(g,w.increment):A();const B=kn.fromServerFormat(w.fieldPath);return new Hc(B,R)}(i,d)):[];var d;if(e.update){const d=oo(i,e.update.name),g=new io({mapValue:{fields:e.update.fields}});if(e.updateMask){const w=new Jn((e.updateMask.fieldPaths||[]).map(G=>kn.fromServerFormat(G)));return new Ou(d,g,w,t,s)}return new ac(d,g,t,s)}if(e.delete){const d=oo(i,e.delete);return new ku(d,t)}if(e.verify){const d=oo(i,e.verify);return new Gc(d,t)}return A()}function nn(i,e){return{documents:[E(i,e.path)]}}function qi(i,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=E(i,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=E(i,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const d=function(B){if(0===B.length)return;const G=B.map(ee=>function(fe){if("=="===fe.op){if(Ru(fe.value))return{unaryFilter:{field:Lu(fe.field),op:"IS_NAN"}};if(Ga(fe.value))return{unaryFilter:{field:Lu(fe.field),op:"IS_NULL"}}}else if("!="===fe.op){if(Ru(fe.value))return{unaryFilter:{field:Lu(fe.field),op:"IS_NOT_NAN"}};if(Ga(fe.value))return{unaryFilter:{field:Lu(fe.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lu(fe.field),op:Fu(fe.op),value:fe.value}}}(ee));return 1===G.length?G[0]:{compositeFilter:{op:"AND",filters:G}}}(e.filters);d&&(t.structuredQuery.where=d);const g=function(B){if(0!==B.length)return B.map(G=>{return{field:Lu((ee=G).field),direction:Rf(ee.dir)};var ee})}(e.orderBy);g&&(t.structuredQuery.orderBy=g);const w=(G=e.limit,i.dt||pt(G)?G:{value:G});var G,R,B;return null!==w&&(t.structuredQuery.limit=w),e.startAt&&(t.structuredQuery.startAt={before:(R=e.startAt).inclusive,values:R.position}),e.endAt&&(t.structuredQuery.endAt={before:!(B=e.endAt).inclusive,values:B.position}),t}function No(i){let e=p(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let d=null;if(s>0){T(1===s);const ee=t.from[0];ee.allDescendants?d=ee.collectionId:e=e.child(ee.collectionId)}let g=[];t.where&&(g=fc(t.where));let w=[];t.orderBy&&(w=t.orderBy.map(ee=>{return new El(ba((fe=ee).field),function(qe){switch(qe){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(fe.direction));var fe}));let R=null;t.limit&&(R=function(ee){let fe;return fe="object"==typeof ee?ee.value:ee,pt(fe)?null:fe}(t.limit));let B=null;var ee;t.startAt&&(B=new Qo((ee=t.startAt).values||[],!!ee.before));let G=null;return t.endAt&&(G=function(ee){return new Qo(ee.values||[],!ee.before)}(t.endAt)),Sh(e,d,w,g,R,"F",B,G)}function fc(i){return i?void 0!==i.unaryFilter?[Xc(i)]:void 0!==i.fieldFilter?[Mh(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>fc(e)).reduce((e,t)=>e.concat(t)):A():[]}function Rf(i){return Gp[i]}function Fu(i){return Po[i]}function Lu(i){return{fieldPath:i.canonicalString()}}function ba(i){return kn.fromServerFormat(i.fieldPath)}function Mh(i){return Gs.create(ba(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return A()}}(i.fieldFilter.op),i.fieldFilter.value)}function Xc(i){switch(i.unaryFilter.op){case"IS_NAN":const e=ba(i.unaryFilter.field);return Gs.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=ba(i.unaryFilter.field);return Gs.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ba(i.unaryFilter.field);return Gs.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=ba(i.unaryFilter.field);return Gs.create(d,"!=",{nullValue:"NULL_VALUE"});default:return A()}}function pc(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Ph(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function As(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=Hd(e)),e=ol(i.get(t),e);return Hd(e)}function ol(i,e){let t=e;const s=i.length;for(let d=0;d<s;d++){const g=i.charAt(d);switch(g){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=g}}return t}function Hd(i){return i+"\x01\x01"}function gu(i){const e=i.length;if(T(e>=2),2===e)return T("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),nr.emptyPath();const t=e-2,s=[];let d="";for(let g=0;g<e;){const w=i.indexOf("\x01",g);switch((w<0||w>t)&&A(),i.charAt(w+1)){case"\x01":const R=i.substring(g,w);let B;0===d.length?B=R:(d+=R,B=d,d=""),s.push(B);break;case"\x10":d+=i.substring(g,w),d+="\0";break;case"\x11":d+=i.substring(g,w+1);break;default:A()}g=w+2}return new nr(s)}const Wp=["userId","batchId"];function $d(i,e){return[i,As(e)]}function Mf(i,e,t){return[i,As(e),t]}const zp={},oy=["prefixPath","collectionGroup","readTime","documentId"],ay=["prefixPath","collectionGroup","documentId"],za=["collectionGroup","readTime","prefixPath","documentId"],Pf=["canonicalId","targetId"],Dl=["targetId","path"],Nf=["path","targetId"],Nh=["collectionId","parent"],Oh=["indexId","uid"],al=["uid","sequenceNumber"],Zd=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Sl=["indexId","uid","orderedDocumentKey"],Wg=["userId","collectionPath","documentId"],zg=["userId","collectionPath","largestBatchId"],ed=["userId","collectionGroup","largestBatchId"],Kp=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Of=[...Kp,"documentOverlays"],gc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],td=gc,kf=[...td,"indexConfiguration","indexState","indexEntries"];class nd extends Ku{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function hi(i,e){const t=P(i);return Zs.N(t.ee,e)}class Al{constructor(e,t,s,d){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=d}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let d=0;d<this.mutations.length;d++){const g=this.mutations[d];g.key.isEqual(e.key)&&Zp(g,e,s[d])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=$c(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=$c(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=zc();return this.mutations.forEach(d=>{const g=e.get(d.key),w=g.overlayedDocument;let R=this.applyToLocalView(w,g.mutatedFields);R=t.has(d.key)?null:R;const B=oi(w,R);null!==B&&s.set(d.key,B),w.isValidDocument()||w.convertToNoDocument(yn.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),$n())}isEqual(e){return this.batchId===e.batchId&&yo(this.mutations,e.mutations,(t,s)=>xh(t,s))&&yo(this.baseMutations,e.baseMutations,(t,s)=>xh(t,s))}}class Yp{constructor(e,t,s,d){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=d}static from(e,t,s){T(e.mutations.length===s.length);let d=Kc;const g=e.mutations;for(let w=0;w<g.length;w++)d=d.insert(g[w].key,s[w].version);return new Yp(e,t,s,d)}}class Wr{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ao{constructor(e,t,s,d,g=yn.min(),w=yn.min(),R=Gi.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=d,this.snapshotVersion=g,this.lastLimboFreeSnapshotVersion=w,this.resumeToken=R}withSequenceNumber(e){return new ao(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new ao(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ao(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Gd{constructor(e){this.ne=e}}function kh(i,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:rd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:dc(d=i.ne,(g=e).key),fields:g.data.value.mapValue.fields,updateTime:Vr(d,g.version.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:mu(e.version)};else{if(!e.isUnknownDocument())return A();s.unknownDocument={path:t.path.toArray(),version:mu(e.version)}}var d,g;return s}function rd(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function mu(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function xl(i){const e=new Or(i.seconds,i.nanoseconds);return yn.fromTimestamp(e)}function Ca(i,e){const t=(e.baseMutations||[]).map(g=>Ut(i.ne,g));for(let g=0;g<e.mutations.length-1;++g){const w=e.mutations[g];g+1<e.mutations.length&&void 0!==e.mutations[g+1].transform&&(w.updateTransforms=e.mutations[g+1].transform.fieldTransforms,e.mutations.splice(g+1,1),++g)}const s=e.mutations.map(g=>Ut(i.ne,g)),d=Or.fromMillis(e.localWriteTimeMs);return new Al(e.batchId,d,t,s)}function mc(i){const e=xl(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?xl(i.lastLimboFreeSnapshotVersion):yn.min();let s;var d;return void 0!==i.query.documents?(T(1===(d=i.query).documents.length),s=Jo(Il(p(d.documents[0])))):s=Jo(No(i.query)),new ao(s,i.targetId,0,i.lastListenSequenceNumber,e,t,Gi.fromBase64String(i.resumeToken))}function id(i,e){const t=mu(e.snapshotVersion),s=mu(e.lastLimboFreeSnapshotVersion);let d;d=Jl(e.target)?nn(i.ne,e.target):qi(i.ne,e.target);const g=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Xu(e.target),readTime:t,resumeToken:g,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:d}}function Lf(i){const e=No({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?Ah(e,e.limit,"L"):e}function Oo(i,e){return new Wr(e.largestBatchId,Ut(i.ne,e.overlayMutation))}function Kg(i,e){const t=e.path.lastSegment();return[i,As(e.path.popLast()),t]}function Qp(i,e,t,s){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:mu(s.readTime),documentKey:As(s.documentKey.path),largestBatchId:s.largestBatchId}}class uy{getBundleMetadata(e,t){return Yg(e).get(t).next(s=>{if(s)return{id:(d=s).bundleId,createTime:xl(d.createTime),version:d.version};var d})}saveBundleMetadata(e,t){return Yg(e).put({bundleId:(s=t).id,createTime:mu(ki(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return Qg(e).get(t).next(s=>{if(s)return{name:(d=s).name,query:Lf(d.bundledQuery),readTime:xl(d.readTime)};var d})}saveNamedQuery(e,t){return Qg(e).put({name:(s=t).name,readTime:mu(ki(s.readTime)),bundledQuery:s.bundledQuery});var s}}function Yg(i){return hi(i,"bundles")}function Qg(i){return hi(i,"namedQueries")}class Uf{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new Uf(e,t.uid||"")}getOverlay(e,t){return qd(e).get(Kg(this.userId,t)).next(s=>s?Oo(this.wt,s):null)}getOverlays(e,t){const s=vo();return Ue.forEach(t,d=>this.getOverlay(e,d).next(g=>{null!==g&&s.set(d,g)})).next(()=>s)}saveOverlays(e,t,s){const d=[];return s.forEach((g,w)=>{const R=new Wr(t,w);d.push(this.ie(e,R))}),Ue.waitFor(d)}removeOverlaysForBatchId(e,t,s){const d=new Set;t.forEach(w=>d.add(As(w.getCollectionPath())));const g=[];return d.forEach(w=>{const R=IDBKeyRange.bound([this.userId,w,s],[this.userId,w,s+1],!1,!0);g.push(qd(e).W("collectionPathOverlayIndex",R))}),Ue.waitFor(g)}getOverlaysForCollection(e,t,s){const d=vo(),g=As(t),w=IDBKeyRange.bound([this.userId,g,s],[this.userId,g,Number.POSITIVE_INFINITY],!0);return qd(e).K("collectionPathOverlayIndex",w).next(R=>{for(const B of R){const G=Oo(this.wt,B);d.set(G.getKey(),G)}return d})}getOverlaysForCollectionGroup(e,t,s,d){const g=vo();let w;const R=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return qd(e).J({index:"collectionGroupOverlayIndex",range:R},(B,G,ee)=>{const fe=Oo(this.wt,G);g.size()<d||fe.largestBatchId===w?(g.set(fe.getKey(),fe),w=fe.largestBatchId):ee.done()}).next(()=>g)}ie(e,t){return qd(e).put(function(s,d,g){const[w,R,B]=Kg(d,g.mutation.key);return{userId:d,collectionPath:R,documentId:B,collectionGroup:g.mutation.key.getCollectionGroup(),largestBatchId:g.largestBatchId,overlayMutation:St(s.ne,g.mutation)}}(this.wt,this.userId,t))}}function qd(i){return hi(i,"documentOverlays")}class yc{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(Br(e.integerValue));else if("doubleValue"in e){const s=Br(e.doubleValue);isNaN(s)?this.ce(t,13):(this.ce(t,15),Bt(s)?t.ae(0):t.ae(s))}else if("timestampValue"in e){const s=e.timestampValue;this.ce(t,20),"string"==typeof s?t.he(s):(t.he(`${s.seconds||""}`),t.ae(s.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(k(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.ce(t,45),t.ae(s.latitude||0),t.ae(s.longitude||0)}else"mapValue"in e?zl(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):A()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const s=e.fields||{};this.ce(t,55);for(const d of Object.keys(s))this.le(d,t),this.oe(s[d],t)}me(e,t){const s=e.values||[];this.ce(t,50);for(const d of s)this.oe(d,t)}_e(e,t){this.ce(t,37),kt.fromName(e).path.forEach(s=>{this.ce(t,60),this.ge(s,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function Jg(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Xg(i){const e=64-function(t){let s=0;for(let d=0;d<8;++d){const g=Jg(255&t[d]);if(s+=g,8!==g)break}return s}(i);return Math.ceil(e/8)}yc.ye=new yc;class Un{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ie(s.value),s=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ae(s.value),s=t.next();this.Re()}be(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ie(s);else if(s<2048)this.Ie(960|s>>>6),this.Ie(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|s>>>12),this.Ie(128|63&s>>>6),this.Ie(128|63&s);else{const d=t.codePointAt(0);this.Ie(240|d>>>18),this.Ie(128|63&d>>>12),this.Ie(128|63&d>>>6),this.Ie(128|63&d)}}this.Te()}Pe(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ae(s);else if(s<2048)this.Ae(960|s>>>6),this.Ae(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|s>>>12),this.Ae(128|63&s>>>6),this.Ae(128|63&s);else{const d=t.codePointAt(0);this.Ae(240|d>>>18),this.Ae(128|63&d>>>12),this.Ae(128|63&d>>>6),this.Ae(128|63&d)}}this.Re()}ve(e){const t=this.Ve(e),s=Xg(t);this.Se(1+s),this.buffer[this.position++]=255&s;for(let d=t.length-s;d<t.length;++d)this.buffer[this.position++]=255&t[d]}De(e){const t=this.Ve(e),s=Xg(t);this.Se(1+s),this.buffer[this.position++]=~(255&s);for(let d=t.length-s;d<t.length;++d)this.buffer[this.position++]=~(255&t[d])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Oe(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(d){const g=new DataView(new ArrayBuffer(8));return g.setFloat64(0,d,!1),new Uint8Array(g.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let d=1;d<t.length;++d)t[d]^=s?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const d=new Uint8Array(s);d.set(this.buffer),this.buffer=d}}class em{constructor(e){this.Me=e}de(e){this.Me.pe(e)}he(e){this.Me.be(e)}ae(e){this.Me.ve(e)}ue(){this.Me.Ce()}}class tm{constructor(e){this.Me=e}de(e){this.Me.Ee(e)}he(e){this.Me.Pe(e)}ae(e){this.Me.De(e)}ue(){this.Me.Ne()}}class Wd{constructor(){this.Me=new Un,this.Fe=new em(this.Me),this.$e=new tm(this.Me)}seed(e){this.Me.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}class ul{constructor(e,t,s,d){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=d}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new ul(this.indexId,this.documentKey,this.arrayValue,s)}}function xs(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=Fh(i.arrayValue,e.arrayValue),0!==t?t:(t=Fh(i.directionalValue,e.directionalValue),0!==t?t:kt.comparator(i.documentKey,e.documentKey)))}function Fh(i,e){for(let t=0;t<i.length&&t<e.length;++t){const s=i[t]-e[t];if(0!==s)return s}return i.length-e.length}class nm{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const s=t;s.ht()?this.Ke=s:this.qe.push(s)}}Ge(e){const t=Pd(e);if(void 0!==t&&!this.Qe(t))return!1;const s=Wu(e);let d=0,g=0;for(;d<s.length&&this.Qe(s[d]);++d);if(d===s.length)return!0;if(void 0!==this.Ke){const w=s[d];if(!this.je(this.Ke,w)||!this.We(this.Ue[g++],w))return!1;++d}for(;d<s.length;++d){const w=s[d];if(g>=this.Ue.length||!this.We(this.Ue[g++],w))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class zd{constructor(){this.ze=new Uu}addToCollectionParentIndex(e,t){return this.ze.add(t),Ue.resolve()}getCollectionParents(e,t){return Ue.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return Ue.resolve()}deleteFieldIndex(e,t){return Ue.resolve()}getDocumentsMatchingTarget(e,t){return Ue.resolve(null)}getIndexType(e,t){return Ue.resolve(0)}getFieldIndexes(e,t){return Ue.resolve([])}getNextCollectionGroupToUpdate(e){return Ue.resolve(null)}getMinOffset(e,t){return Ue.resolve(Hs.min())}getMinOffsetFromCollectionGroup(e,t){return Ue.resolve(Hs.min())}updateCollectionGroup(e,t,s){return Ue.resolve()}updateIndexEntries(e,t){return Ue.resolve()}}class Uu{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),d=this.index[t]||new Ln(nr.comparator),g=!d.has(s);return this.index[t]=d.add(s),g}has(e){const t=e.lastSegment(),s=e.popLast(),d=this.index[t];return d&&d.has(s)}getEntries(e){return(this.index[e]||new Ln(nr.comparator)).toArray()}}const _c=new Uint8Array(0);class Jp{constructor(e,t){this.user=e,this.databaseId=t,this.He=new Uu,this.Je=new Xn(s=>Xu(s),(s,d)=>el(s,d)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const s=t.lastSegment(),d=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const g={collectionId:s,parent:As(d)};return Lh(e).put(g)}return Ue.resolve()}getCollectionParents(e,t){const s=[],d=IDBKeyRange.bound([t,""],[da(t),""],!1,!0);return Lh(e).K(d).next(g=>{for(const w of g){if(w.collectionId!==t)break;s.push(gu(w.parent))}return s})}addFieldIndex(e,t){const s=Uh(e),d={indexId:(w=t).indexId,collectionGroup:w.collectionGroup,fields:w.fields.map(R=>[R.fieldPath.canonicalString(),R.kind])};var w;delete d.indexId;const g=s.add(d);if(t.indexState){const w=Bh(e);return g.next(R=>{w.put(Qp(R,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return g.next()}deleteFieldIndex(e,t){const s=Uh(e),d=Bh(e),g=Bf(e);return s.delete(t.indexId).next(()=>d.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>g.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=Bf(e);let d=!0;const g=new Map;return Ue.forEach(this.Ye(t),w=>this.Xe(e,w).next(R=>{d&&(d=!!R),g.set(w,R)})).next(()=>{if(d){let w=$n();const R=[];return Ue.forEach(g,(B,G)=>{var ee;wt("IndexedDbIndexManager",`Using index ${ee=B,`id=${ee.indexId}|cg=${ee.collectionGroup}|f=${ee.fields.map(pi=>`${pi.fieldPath}:${pi.kind}`).join(",")}`} to execute ${Xu(t)}`);const fe=function(pi,zi){const Ki=Pd(zi);if(void 0===Ki)return null;for(const us of Pu(pi,Ki.fieldPath))switch(us.op){case"array-contains-any":return us.value.arrayValue.values||[];case"array-contains":return[us.value]}return null}(G,B),qe=function(pi,zi){const Ki=new Map;for(const us of Wu(zi))for(const Pa of Pu(pi,us.fieldPath))switch(Pa.op){case"==":case"in":Ki.set(us.fieldPath.canonicalString(),Pa.value);break;case"not-in":case"!=":return Ki.set(us.fieldPath.canonicalString(),Pa.value),Array.from(Ki.values())}return null}(G,B),ct=function(pi,zi){const Ki=[];let us=!0;for(const Pa of Wu(zi)){const Bp=0===Pa.kind?Cf(pi,Pa.fieldPath,pi.startAt):Th(pi,Pa.fieldPath,pi.startAt);Ki.push(Bp.value),us&&(us=Bp.inclusive)}return new Qo(Ki,us)}(G,B),Et=function(pi,zi){const Ki=[];let us=!0;for(const Pa of Wu(zi)){const Bp=0===Pa.kind?Th(pi,Pa.fieldPath,pi.endAt):Cf(pi,Pa.fieldPath,pi.endAt);Ki.push(Bp.value),us&&(us=Bp.inclusive)}return new Qo(Ki,us)}(G,B),zt=this.Ze(B,G,ct),gn=this.Ze(B,G,Et),jr=this.tn(B,G,qe),Wi=this.en(B.indexId,fe,zt,ct.inclusive,gn,Et.inclusive,jr);return Ue.forEach(Wi,pi=>s.j(pi,t.limit).next(zi=>{zi.forEach(Ki=>{const us=kt.fromSegments(Ki.documentKey);w.has(us)||(w=w.add(us),R.push(us))})}))}).next(()=>R)}return Ue.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,s,d,g,w,R){const B=(null!=t?t.length:1)*Math.max(s.length,g.length),G=B/(null!=t?t.length:1),ee=[];for(let fe=0;fe<B;++fe){const qe=t?this.nn(t[fe/G]):_c,ct=this.sn(e,qe,s[fe%G],d),Et=this.rn(e,qe,g[fe%G],w),zt=R.map(gn=>this.sn(e,qe,gn,!0));ee.push(...this.createRange(ct,Et,zt))}return ee}sn(e,t,s,d){const g=new ul(e,kt.empty(),t,s);return d?g:g.Le()}rn(e,t,s,d){const g=new ul(e,kt.empty(),t,s);return d?g.Le():g}Xe(e,t){const s=new nm(t),d=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,d).next(g=>{let w=null;for(const R of g)s.Ge(R)&&(!w||R.fields.length>w.fields.length)&&(w=R);return w})}getIndexType(e,t){let s=2;return Ue.forEach(this.Ye(t),d=>this.Xe(e,d).next(g=>{g?0!==s&&g.fields.length<function(w){let R=new Ln(kn.comparator),B=!1;for(const G of w.filters){const ee=G;ee.field.isKeyField()||("array-contains"===ee.op||"array-contains-any"===ee.op?B=!0:R=R.add(ee.field))}for(const G of w.orderBy)G.field.isKeyField()||(R=R.add(G.field));return R.size+(B?1:0)}(d)&&(s=1):s=0})).next(()=>s)}on(e,t){const s=new Wd;for(const d of Wu(e)){const g=t.data.field(d.fieldPath);if(null==g)return null;const w=s.Be(d.kind);yc.ye.re(g,w)}return s.Oe()}nn(e){const t=new Wd;return yc.ye.re(e,t.Be(0)),t.Oe()}un(e,t){const s=new Wd;return yc.ye.re(_o(this.databaseId,t),s.Be(function(d){const g=Wu(d);return 0===g.length?0:g[g.length-1].kind}(e))),s.Oe()}tn(e,t,s){if(null===s)return[];let d=[];d.push(new Wd);let g=0;for(const w of Wu(e)){const R=s[g++];for(const B of d)if(this.cn(t,w.fieldPath)&&ro(R))d=this.an(d,w,R);else{const G=B.Be(w.kind);yc.ye.re(R,G)}}return this.hn(d)}Ze(e,t,s){return this.tn(e,t,s.position)}hn(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Oe();return t}an(e,t,s){const d=[...e],g=[];for(const w of s.arrayValue.values||[])for(const R of d){const B=new Wd;B.seed(R.Oe()),yc.ye.re(w,B.Be(t.kind)),g.push(B)}return g}cn(e,t){return!!e.filters.find(s=>s instanceof Gs&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=Uh(e),d=Bh(e);return(t?s.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.K()).next(g=>{const w=[];return Ue.forEach(g,R=>d.get([R.indexId,this.uid]).next(B=>{w.push(function(G,ee){const fe=ee?new _l(ee.sequenceNumber,new Hs(xl(ee.readTime),new kt(gu(ee.documentKey)),ee.largestBatchId)):_l.empty(),qe=G.fields.map(([ct,Et])=>new Su(kn.fromServerFormat(ct),Et));return new Md(G.indexId,G.collectionGroup,qe,fe)}(R,B))})).next(()=>w)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,d)=>{const g=s.indexState.sequenceNumber-d.indexState.sequenceNumber;return 0!==g?g:ln(s.collectionGroup,d.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const d=Uh(e),g=Bh(e);return this.ln(e).next(w=>d.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(R=>Ue.forEach(R,B=>g.put(Qp(B.indexId,this.user,w,s)))))}updateIndexEntries(e,t){const s=new Map;return Ue.forEach(t,(d,g)=>{const w=s.get(d.collectionGroup);return(w?Ue.resolve(w):this.getFieldIndexes(e,d.collectionGroup)).next(R=>(s.set(d.collectionGroup,R),Ue.forEach(R,B=>this.fn(e,d,B).next(G=>{const ee=this.dn(g,B);return G.isEqual(ee)?Ue.resolve():this._n(e,g,B,G,ee)}))))})}wn(e,t,s,d){return Bf(e).put({indexId:d.indexId,uid:this.uid,arrayValue:d.arrayValue,directionalValue:d.directionalValue,orderedDocumentKey:this.un(s,t.key),documentKey:t.key.path.toArray()})}mn(e,t,s,d){return Bf(e).delete([d.indexId,this.uid,d.arrayValue,d.directionalValue,this.un(s,t.key),t.key.path.toArray()])}fn(e,t,s){const d=Bf(e);let g=new Ln(xs);return d.J({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.un(s,t)])},(w,R)=>{g=g.add(new ul(s.indexId,t,R.arrayValue,R.directionalValue))}).next(()=>g)}dn(e,t){let s=new Ln(xs);const d=this.on(t,e);if(null==d)return s;const g=Pd(t);if(null!=g){const w=e.data.field(g.fieldPath);if(ro(w))for(const R of w.arrayValue.values||[])s=s.add(new ul(t.indexId,e.key,this.nn(R),d))}else s=s.add(new ul(t.indexId,e.key,_c,d));return s}_n(e,t,s,d,g){wt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const w=[];return function(R,B,G,ee,fe){const qe=R.getIterator(),ct=B.getIterator();let Et=to(qe),zt=to(ct);for(;Et||zt;){let gn=!1,jr=!1;if(Et&&zt){const Wi=G(Et,zt);Wi<0?jr=!0:Wi>0&&(gn=!0)}else null!=Et?jr=!0:gn=!0;gn?(ee(zt),zt=to(ct)):jr?(fe(Et),Et=to(qe)):(Et=to(qe),zt=to(ct))}}(d,g,xs,R=>{w.push(this.wn(e,t,s,R))},R=>{w.push(this.mn(e,t,s,R))}),Ue.waitFor(w)}ln(e){let t=1;return Bh(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,d,g)=>{g.done(),t=d.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((w,R)=>xs(w,R)).filter((w,R,B)=>!R||0!==xs(w,B[R-1]));const d=[];d.push(e);for(const w of s){const R=xs(w,e),B=xs(w,t);if(0===R)d[0]=e.Le();else if(R>0&&B<0)d.push(w),d.push(w.Le());else if(B>0)break}d.push(t);const g=[];for(let w=0;w<d.length;w+=2)g.push(IDBKeyRange.bound([d[w].indexId,this.uid,d[w].arrayValue,d[w].directionalValue,_c,[]],[d[w+1].indexId,this.uid,d[w+1].arrayValue,d[w+1].directionalValue,_c,[]]));return g}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(sd)}getMinOffset(e,t){return Ue.mapArray(this.Ye(t),s=>this.Xe(e,s).next(d=>d||A())).next(sd)}}function Lh(i){return hi(i,"collectionParents")}function Bf(i){return hi(i,"indexEntries")}function Uh(i){return hi(i,"indexConfiguration")}function Bh(i){return hi(i,"indexState")}function sd(i){T(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<i.length;s++){const d=i[s].indexState.offset;Ti(d,e)<0&&(e=d),t<d.largestBatchId&&(t=d.largestBatchId)}return new Hs(e.readTime,e.documentKey,t)}const Vh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ko{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new ko(e,ko.DEFAULT_COLLECTION_PERCENTILE,ko.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Vf(i,e,t){const s=i.store("mutations"),d=i.store("documentMutations"),g=[],w=IDBKeyRange.only(t.batchId);let R=0;const B=s.J({range:w},(ee,fe,qe)=>(R++,qe.delete()));g.push(B.next(()=>{T(1===R)}));const G=[];for(const ee of t.mutations){const fe=Mf(e,ee.key.path,t.batchId);g.push(d.delete(fe)),G.push(ee.key)}return Ue.waitFor(g).next(()=>G)}function Kd(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw A();e=i.noDocument}return JSON.stringify(e).length}ko.DEFAULT_COLLECTION_PERCENTILE=10,ko.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ko.DEFAULT=new ko(41943040,ko.DEFAULT_COLLECTION_PERCENTILE,ko.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ko.DISABLED=new ko(-1,0,0);class jf{constructor(e,t,s,d){this.userId=e,this.wt=t,this.indexManager=s,this.referenceDelegate=d,this.gn={}}static se(e,t,s,d){T(""!==e.uid);const g=e.isAuthenticated()?e.uid:"";return new jf(g,t,s,d)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ll(e).J({index:"userMutationsIndex",range:s},(d,g,w)=>{t=!1,w.done()}).next(()=>t)}addMutationBatch(e,t,s,d){const g=od(e),w=ll(e);return w.add({}).next(R=>{T("number"==typeof R);const B=new Al(R,t,s,d),G=function(qe,ct,Et){const zt=Et.baseMutations.map(jr=>St(qe.ne,jr)),gn=Et.mutations.map(jr=>St(qe.ne,jr));return{userId:ct,batchId:Et.batchId,localWriteTimeMs:Et.localWriteTime.toMillis(),baseMutations:zt,mutations:gn}}(this.wt,this.userId,B),ee=[];let fe=new Ln((qe,ct)=>ln(qe.canonicalString(),ct.canonicalString()));for(const qe of d){const ct=Mf(this.userId,qe.key.path,R);fe=fe.add(qe.key.path.popLast()),ee.push(w.put(G)),ee.push(g.put(ct,zp))}return fe.forEach(qe=>{ee.push(this.indexManager.addToCollectionParentIndex(e,qe))}),e.addOnCommittedListener(()=>{this.gn[R]=B.keys()}),Ue.waitFor(ee).next(()=>B)})}lookupMutationBatch(e,t){return ll(e).get(t).next(s=>s?(T(s.userId===this.userId),Ca(this.wt,s)):null)}yn(e,t){return this.gn[t]?Ue.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const d=s.keys();return this.gn[t]=d,d}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,d=IDBKeyRange.lowerBound([this.userId,s]);let g=null;return ll(e).J({index:"userMutationsIndex",range:d},(w,R,B)=>{R.userId===this.userId&&(T(R.batchId>=s),g=Ca(this.wt,R)),B.done()}).next(()=>g)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return ll(e).J({index:"userMutationsIndex",range:t,reverse:!0},(d,g,w)=>{s=g.batchId,w.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ll(e).K("userMutationsIndex",t).next(s=>s.map(d=>Ca(this.wt,d)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=$d(this.userId,t.path),d=IDBKeyRange.lowerBound(s),g=[];return od(e).J({range:d},(w,R,B)=>{const[G,ee,fe]=w,qe=gu(ee);if(G===this.userId&&t.path.isEqual(qe))return ll(e).get(fe).next(ct=>{if(!ct)throw A();T(ct.userId===this.userId),g.push(Ca(this.wt,ct))});B.done()}).next(()=>g)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Ln(ln);const d=[];return t.forEach(g=>{const w=$d(this.userId,g.path),R=IDBKeyRange.lowerBound(w),B=od(e).J({range:R},(G,ee,fe)=>{const[qe,ct,Et]=G,zt=gu(ct);qe===this.userId&&g.path.isEqual(zt)?s=s.add(Et):fe.done()});d.push(B)}),Ue.waitFor(d).next(()=>this.pn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,d=s.length+1,g=$d(this.userId,s),w=IDBKeyRange.lowerBound(g);let R=new Ln(ln);return od(e).J({range:w},(B,G,ee)=>{const[fe,qe,ct]=B,Et=gu(qe);fe===this.userId&&s.isPrefixOf(Et)?Et.length===d&&(R=R.add(ct)):ee.done()}).next(()=>this.pn(e,R))}pn(e,t){const s=[],d=[];return t.forEach(g=>{d.push(ll(e).get(g).next(w=>{if(null===w)throw A();T(w.userId===this.userId),s.push(Ca(this.wt,w))}))}),Ue.waitFor(d).next(()=>s)}removeMutationBatch(e,t){return Vf(e.ee,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),Ue.forEach(s,d=>this.referenceDelegate.markPotentiallyOrphaned(e,d))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Ue.resolve();const s=IDBKeyRange.lowerBound([this.userId]),d=[];return od(e).J({range:s},(g,w,R)=>{if(g[0]===this.userId){const B=gu(g[1]);d.push(B)}else R.done()}).next(()=>{T(0===d.length)})})}containsKey(e,t){return jh(e,this.userId,t)}Tn(e){return rm(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function jh(i,e,t){const s=$d(e,t.path),d=s[1],g=IDBKeyRange.lowerBound(s);let w=!1;return od(i).J({range:g,H:!0},(R,B,G)=>{const[ee,fe,qe]=R;ee===e&&fe===d&&(w=!0),G.done()}).next(()=>w)}function ll(i){return hi(i,"mutations")}function od(i){return hi(i,"documentMutations")}function rm(i){return hi(i,"mutationQueues")}class Rl{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new Rl(0)}static Rn(){return new Rl(-1)}}class im{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const s=new Rl(t.highestTargetId);return t.highestTargetId=s.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>yn.fromTimestamp(new Or(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.bn(e).next(d=>(d.highestListenSequenceNumber=t,s&&(d.lastRemoteSnapshotVersion=s.toTimestamp()),t>d.highestListenSequenceNumber&&(d.highestListenSequenceNumber=t),this.Pn(e,d)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(s=>(s.targetCount+=1,this.Vn(t,s),this.Pn(e,s))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Yd(e).delete(t.targetId)).next(()=>this.bn(e)).next(s=>(T(s.targetCount>0),s.targetCount-=1,this.Pn(e,s)))}removeTargets(e,t,s){let d=0;const g=[];return Yd(e).J((w,R)=>{const B=mc(R);B.sequenceNumber<=t&&null===s.get(B.targetId)&&(d++,g.push(this.removeTargetData(e,B)))}).next(()=>Ue.waitFor(g)).next(()=>d)}forEachTarget(e,t){return Yd(e).J((s,d)=>{const g=mc(d);t(g)})}bn(e){return ly(e).get("targetGlobalKey").next(t=>(T(null!==t),t))}Pn(e,t){return ly(e).put("targetGlobalKey",t)}vn(e,t){return Yd(e).put(id(this.wt,t))}Vn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const s=Xu(t),d=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let g=null;return Yd(e).J({range:d,index:"queryTargetsIndex"},(w,R,B)=>{const G=mc(R);el(t,G.target)&&(g=G,B.done())}).next(()=>g)}addMatchingKeys(e,t,s){const d=[],g=Ml(e);return t.forEach(w=>{const R=As(w.path);d.push(g.put({targetId:s,path:R})),d.push(this.referenceDelegate.addReference(e,s,w))}),Ue.waitFor(d)}removeMatchingKeys(e,t,s){const d=Ml(e);return Ue.forEach(t,g=>{const w=As(g.path);return Ue.waitFor([d.delete([s,w]),this.referenceDelegate.removeReference(e,s,g)])})}removeMatchingKeysForTargetId(e,t){const s=Ml(e),d=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(d)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),d=Ml(e);let g=$n();return d.J({range:s,H:!0},(w,R,B)=>{const G=gu(w[1]),ee=new kt(G);g=g.add(ee)}).next(()=>g)}containsKey(e,t){const s=As(t.path),d=IDBKeyRange.bound([s],[da(s)],!1,!0);let g=0;return Ml(e).J({index:"documentTargetsIndex",H:!0,range:d},([w,R],B,G)=>{0!==w&&(g++,G.done())}).next(()=>g>0)}te(e,t){return Yd(e).get(t).next(s=>s?mc(s):null)}}function Yd(i){return hi(i,"targets")}function ly(i){return hi(i,"targetGlobal")}function Ml(i){return hi(i,"targetDocuments")}function Xp([i,e],[t,s]){const d=ln(i,t);return 0===d?ln(e,s):d}class cy{constructor(e){this.Sn=e,this.buffer=new Ln(Xp),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Xp(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class eg{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;wt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ie.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){Ts(s)?wt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield $s(s)}yield t.kn(3e5)}))}}class n_{constructor(e,t){this.On=e,this.params=t}calculateTargetCount(e,t){return this.On.Mn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return Ue.resolve(Ds.ot);const s=new cy(t);return this.On.forEachTarget(e,d=>s.xn(d.sequenceNumber)).next(()=>this.On.Fn(e,d=>s.xn(d))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.On.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.On.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(wt("LruGarbageCollector","Garbage collection skipped; disabled"),Ue.resolve(Vh)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(wt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Vh):this.$n(e,t))}getCacheSize(e){return this.On.getCacheSize(e)}$n(e,t){let s,d,g,w,R,B,G;const ee=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(fe=>(fe>this.params.maximumSequenceNumbersToCollect?(wt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${fe}`),d=this.params.maximumSequenceNumbersToCollect):d=fe,w=Date.now(),this.nthSequenceNumber(e,d))).next(fe=>(s=fe,R=Date.now(),this.removeTargets(e,s,t))).next(fe=>(g=fe,B=Date.now(),this.removeOrphanedDocuments(e,s))).next(fe=>(G=Date.now(),au()<=Ke.in.DEBUG&&wt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${w-ee}ms\n\tDetermined least recently used ${d} in `+(R-w)+`ms\n\tRemoved ${g} targets in `+(B-R)+`ms\n\tRemoved ${fe} documents in `+(G-B)+`ms\nTotal Duration: ${G-ee}ms`),Ue.resolve({didRun:!0,sequenceNumbersCollected:d,targetsRemoved:g,documentsRemoved:fe})))}}class dy{constructor(e,t){this.db=e,this.garbageCollector=new n_(this,t)}Mn(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(d=>s+d))}Bn(e){let t=0;return this.Fn(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(s,d)=>t(d))}addReference(e,t,s){return tg(e,s)}removeReference(e,t,s){return tg(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return tg(e,t)}Un(e,t){return function(s,d){let g=!1;return rm(s).Y(w=>jh(s,w,d).next(R=>(R&&(g=!0),Ue.resolve(!R)))).next(()=>g)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),d=[];let g=0;return this.Ln(e,(w,R)=>{if(R<=t){const B=this.Un(e,w).next(G=>{if(!G)return g++,s.getEntry(e,w).next(()=>(s.removeEntry(w,yn.min()),Ml(e).delete([0,As(w.path)])))});d.push(B)}}).next(()=>Ue.waitFor(d)).next(()=>s.apply(e)).next(()=>g)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return tg(e,t)}Ln(e,t){const s=Ml(e);let d,g=Ds.ot;return s.J({index:"documentTargetsIndex"},([w,R],{path:B,sequenceNumber:G})=>{0===w?(g!==Ds.ot&&t(new kt(gu(d)),g),g=G,d=B):g=Ds.ot}).next(()=>{g!==Ds.ot&&t(new kt(gu(d)),g)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function tg(i,e){return Ml(i).put((s=i.currentSequenceNumber,{targetId:0,path:As(e.path),sequenceNumber:s}));var s}class sm{constructor(){this.changes=new Xn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,qr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?Ue.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class hy{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return ad(e).put(s)}removeEntry(e,t,s){return ad(e).delete(function(d,g){const w=d.path.toArray();return[w.slice(0,w.length-2),w[w.length-2],rd(g),w[w.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.qn(e,s)))}getEntry(e,t){let s=qr.newInvalidDocument(t);return ad(e).J({index:"documentKeyIndex",range:IDBKeyRange.only($f(t))},(d,g)=>{s=this.Kn(t,g)}).next(()=>s)}Gn(e,t){let s={size:0,document:qr.newInvalidDocument(t)};return ad(e).J({index:"documentKeyIndex",range:IDBKeyRange.only($f(t))},(d,g)=>{s={document:this.Kn(t,g),size:Kd(g)}}).next(()=>s)}getEntries(e,t){let s=Ss();return this.Qn(e,t,(d,g)=>{const w=this.Kn(d,g);s=s.insert(d,w)}).next(()=>s)}jn(e,t){let s=Ss(),d=new fr(kt.comparator);return this.Qn(e,t,(g,w)=>{const R=this.Kn(g,w);s=s.insert(g,R),d=d.insert(g,Kd(w))}).next(()=>({documents:s,Wn:d}))}Qn(e,t,s){if(t.isEmpty())return Ue.resolve();let d=new Ln(Zf);t.forEach(B=>d=d.add(B));const g=IDBKeyRange.bound($f(d.first()),$f(d.last())),w=d.getIterator();let R=w.getNext();return ad(e).J({index:"documentKeyIndex",range:g},(B,G,ee)=>{const fe=kt.fromSegments([...G.prefixPath,G.collectionGroup,G.documentId]);for(;R&&Zf(R,fe)<0;)s(R,null),R=w.getNext();R&&R.isEqual(fe)&&(s(R,G),R=w.hasNext()?w.getNext():null),R?ee.q($f(R)):ee.done()}).next(()=>{for(;R;)s(R,null),R=w.hasNext()?w.getNext():null})}getAllFromCollection(e,t,s){const d=[t.popLast().toArray(),t.lastSegment(),rd(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],g=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ad(e).K(IDBKeyRange.bound(d,g,!0)).next(w=>{let R=Ss();for(const B of w){const G=this.Kn(kt.fromSegments(B.prefixPath.concat(B.collectionGroup,B.documentId)),B);R=R.insert(G.key,G)}return R})}getAllFromCollectionGroup(e,t,s,d){let g=Ss();const w=Pl(t,s),R=Pl(t,Hs.max());return ad(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(w,R,!0)},(B,G,ee)=>{const fe=this.Kn(kt.fromSegments(G.prefixPath.concat(G.collectionGroup,G.documentId)),G);g=g.insert(fe.key,fe),g.size===d&&ee.done()}).next(()=>g)}newChangeBuffer(e){return new py(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Hf(e).get("remoteDocumentGlobalKey").next(t=>(T(!!t),t))}qn(e,t){return Hf(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const s=function Ff(i,e){let t;if(e.document)t=Y(i.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=kt.fromSegments(e.noDocument.path),d=xl(e.noDocument.readTime);t=qr.newNoDocument(s,d),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return A();{const s=kt.fromSegments(e.unknownDocument.path),d=xl(e.unknownDocument.version);t=qr.newUnknownDocument(s,d)}}return e.readTime&&t.setReadTime(function(s){const d=new Or(s[0],s[1]);return yn.fromTimestamp(d)}(e.readTime)),t}(this.wt,t);if(!s.isNoDocument()||!s.version.isEqual(yn.min()))return s}return qr.newInvalidDocument(e)}}function fy(i){return new hy(i)}class py extends sm{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new Xn(s=>s.toString(),(s,d)=>s.isEqual(d))}applyChanges(e){const t=[];let s=0,d=new Ln((g,w)=>ln(g.canonicalString(),w.canonicalString()));return this.changes.forEach((g,w)=>{const R=this.Hn.get(g);if(t.push(this.zn.removeEntry(e,g,R.readTime)),w.isValidDocument()){const B=kh(this.zn.wt,w);d=d.add(g.path.popLast()),s+=Kd(B)-R.size,t.push(this.zn.addEntry(e,g,B))}else if(s-=R.size,this.trackRemovals){const B=kh(this.zn.wt,w.convertToNoDocument(yn.min()));t.push(this.zn.addEntry(e,g,B))}}),d.forEach(g=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,g))}),t.push(this.zn.updateMetadata(e,s)),Ue.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(s=>(this.Hn.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:s,Wn:d})=>(d.forEach((g,w)=>{this.Hn.set(g,{size:w,readTime:s.get(g).readTime})}),s))}}function Hf(i){return hi(i,"remoteDocumentGlobal")}function ad(i){return hi(i,"remoteDocumentsV14")}function $f(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Pl(i,e){const t=e.documentKey.path.toArray();return[i,rd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Zf(i,e){const t=i.path.toArray(),s=e.path.toArray();let d=0;for(let g=0;g<t.length-2&&g<s.length-2;++g)if(d=ln(t[g],s[g]),d)return d;return d=ln(t.length,s.length),d||(d=ln(t[t.length-2],s[s.length-2]),d||ln(t[t.length-1],s[s.length-1]))}class ng{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Gf{constructor(e,t,s,d){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=d}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(d=>(s=d,this.getBaseDocument(e,t,s))).next(d=>(null!==s&&$c(s.mutation,d,Jn.empty(),Or.now()),d))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,$n()).next(()=>s))}getLocalViewOfDocuments(e,t,s=$n()){const d=vo();return this.populateOverlays(e,d,t).next(()=>this.computeViews(e,t,d,s).next(g=>{let w=Wc();return g.forEach((R,B)=>{w=w.insert(R,B.overlayedDocument)}),w}))}getOverlayedDocuments(e,t){const s=vo();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,$n()))}populateOverlays(e,t,s){const d=[];return s.forEach(g=>{t.has(g)||d.push(g)}),this.documentOverlayCache.getOverlays(e,d).next(g=>{g.forEach((w,R)=>{t.set(w,R)})})}computeViews(e,t,s,d){let g=Ss();const w=pu(),R=pu();return t.forEach((B,G)=>{const ee=s.get(G.key);d.has(G.key)&&(void 0===ee||ee.mutation instanceof Ou)?g=g.insert(G.key,G):void 0!==ee&&(w.set(G.key,ee.mutation.getFieldMask()),$c(ee.mutation,G,ee.mutation.getFieldMask(),Or.now()))}),this.recalculateAndSaveOverlays(e,g).next(B=>(B.forEach((G,ee)=>w.set(G,ee)),t.forEach((G,ee)=>{var fe;return R.set(G,new ng(ee,null!==(fe=w.get(G))&&void 0!==fe?fe:null))}),R))}recalculateAndSaveOverlays(e,t){const s=pu();let d=new fr((w,R)=>w-R),g=$n();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(w=>{for(const R of w)R.keys().forEach(B=>{const G=t.get(B);if(null===G)return;let ee=s.get(B)||Jn.empty();ee=R.applyToLocalView(G,ee),s.set(B,ee);const fe=(d.get(R.batchId)||$n()).add(B);d=d.insert(R.batchId,fe)})}).next(()=>{const w=[],R=d.getReverseIterator();for(;R.hasNext();){const B=R.getNext(),G=B.key,ee=B.value,fe=zc();ee.forEach(qe=>{if(!g.has(qe)){const ct=oi(t.get(qe),s.get(qe));null!==ct&&fe.set(qe,ct),g=g.add(qe)}}),w.push(this.documentOverlayCache.saveOverlays(e,G,fe))}return Ue.waitFor(w)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return kt.isDocumentKey((d=t).path)&&null===d.collectionGroup&&0===d.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):tc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var d}getNextDocuments(e,t,s,d){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,d).next(g=>{const w=d-g.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,d-g.size):Ue.resolve(vo());let R=-1,B=g;return w.next(G=>Ue.forEach(G,(ee,fe)=>(R<fe.largestBatchId&&(R=fe.largestBatchId),g.get(ee)?Ue.resolve():this.getBaseDocument(e,ee,fe).next(qe=>{B=B.insert(ee,qe)}))).next(()=>this.populateOverlays(e,G,g)).next(()=>this.computeViews(e,B,G,$n())).next(ee=>({batchId:R,changes:so(ee)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new kt(t)).next(s=>{let d=Wc();return s.isFoundDocument()&&(d=d.insert(s.key,s)),d})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const d=t.collectionGroup;let g=Wc();return this.indexManager.getCollectionParents(e,d).next(w=>Ue.forEach(w,R=>{const B=(G=t,ee=R.child(d),new Wa(ee,null,G.explicitOrderBy.slice(),G.filters.slice(),G.limit,G.limitType,G.startAt,G.endAt));var G,ee;return this.getDocumentsMatchingCollectionQuery(e,B,s).next(G=>{G.forEach((ee,fe)=>{g=g.insert(ee,fe)})})}).next(()=>g))}getDocumentsMatchingCollectionQuery(e,t,s){let d;return this.remoteDocumentCache.getAllFromCollection(e,t.path,s).next(g=>(d=g,this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId))).next(g=>{g.forEach((R,B)=>{const G=B.getKey();null===d.get(G)&&(d=d.insert(G,qr.newInvalidDocument(G)))});let w=Wc();return d.forEach((R,B)=>{const G=g.get(R);void 0!==G&&$c(G.mutation,B,Jn.empty(),Or.now()),bl(t,B)&&(w=w.insert(R,B))}),w})}getBaseDocument(e,t,s){return null===s||1===s.mutation.type?this.remoteDocumentCache.getEntry(e,t):Ue.resolve(qr.newInvalidDocument(t))}}class rg{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return Ue.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var s;return this.Jn.set(t.id,{id:(s=t).id,version:s.version,createTime:ki(s.createTime)}),Ue.resolve()}getNamedQuery(e,t){return Ue.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(s=t).name,query:Lf(s.bundledQuery),readTime:ki(s.readTime)}),Ue.resolve();var s}}class om{constructor(){this.overlays=new fr(kt.comparator),this.Xn=new Map}getOverlay(e,t){return Ue.resolve(this.overlays.get(t))}getOverlays(e,t){const s=vo();return Ue.forEach(t,d=>this.getOverlay(e,d).next(g=>{null!==g&&s.set(d,g)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((d,g)=>{this.ie(e,t,g)}),Ue.resolve()}removeOverlaysForBatchId(e,t,s){const d=this.Xn.get(s);return void 0!==d&&(d.forEach(g=>this.overlays=this.overlays.remove(g)),this.Xn.delete(s)),Ue.resolve()}getOverlaysForCollection(e,t,s){const d=vo(),g=t.length+1,w=new kt(t.child("")),R=this.overlays.getIteratorFrom(w);for(;R.hasNext();){const B=R.getNext().value,G=B.getKey();if(!t.isPrefixOf(G.path))break;G.path.length===g&&B.largestBatchId>s&&d.set(B.getKey(),B)}return Ue.resolve(d)}getOverlaysForCollectionGroup(e,t,s,d){let g=new fr((G,ee)=>G-ee);const w=this.overlays.getIterator();for(;w.hasNext();){const G=w.getNext().value;if(G.getKey().getCollectionGroup()===t&&G.largestBatchId>s){let ee=g.get(G.largestBatchId);null===ee&&(ee=vo(),g=g.insert(G.largestBatchId,ee)),ee.set(G.getKey(),G)}}const R=vo(),B=g.getIterator();for(;B.hasNext()&&(B.getNext().value.forEach((G,ee)=>R.set(G,ee)),!(R.size()>=d)););return Ue.resolve(R)}ie(e,t,s){const d=this.overlays.get(s.key);if(null!==d){const w=this.Xn.get(d.largestBatchId).delete(s.key);this.Xn.set(d.largestBatchId,w)}this.overlays=this.overlays.insert(s.key,new Wr(t,s));let g=this.Xn.get(t);void 0===g&&(g=$n(),this.Xn.set(t,g)),this.Xn.set(t,g.add(s.key))}}class Qd{constructor(){this.Zn=new Ln(Di.ts),this.es=new Ln(Di.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const s=new Di(e,t);this.Zn=this.Zn.add(s),this.es=this.es.add(s)}ss(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.rs(new Di(e,t))}os(e,t){e.forEach(s=>this.removeReference(s,t))}us(e){const t=new kt(new nr([])),s=new Di(t,e),d=new Di(t,e+1),g=[];return this.es.forEachInRange([s,d],w=>{this.rs(w),g.push(w.key)}),g}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new kt(new nr([])),s=new Di(t,e),d=new Di(t,e+1);let g=$n();return this.es.forEachInRange([s,d],w=>{g=g.add(w.key)}),g}containsKey(e){const t=new Di(e,0),s=this.Zn.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class Di{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return kt.comparator(e.key,t.key)||ln(e.ls,t.ls)}static ns(e,t){return ln(e.ls,t.ls)||kt.comparator(e.key,t.key)}}class Nl{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new Ln(Di.ts)}checkEmpty(e){return Ue.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,d){const g=this.fs;this.fs++;const w=new Al(g,t,s,d);this.mutationQueue.push(w);for(const R of d)this.ds=this.ds.add(new Di(R.key,g)),this.indexManager.addToCollectionParentIndex(e,R.key.path.popLast());return Ue.resolve(w)}lookupMutationBatch(e,t){return Ue.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const d=this.ws(t+1),g=d<0?0:d;return Ue.resolve(this.mutationQueue.length>g?this.mutationQueue[g]:null)}getHighestUnacknowledgedBatchId(){return Ue.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return Ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Di(t,0),d=new Di(t,Number.POSITIVE_INFINITY),g=[];return this.ds.forEachInRange([s,d],w=>{const R=this._s(w.ls);g.push(R)}),Ue.resolve(g)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Ln(ln);return t.forEach(d=>{const g=new Di(d,0),w=new Di(d,Number.POSITIVE_INFINITY);this.ds.forEachInRange([g,w],R=>{s=s.add(R.ls)})}),Ue.resolve(this.gs(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,d=s.length+1;let g=s;kt.isDocumentKey(g)||(g=g.child(""));const w=new Di(new kt(g),0);let R=new Ln(ln);return this.ds.forEachWhile(B=>{const G=B.key.path;return!!s.isPrefixOf(G)&&(G.length===d&&(R=R.add(B.ls)),!0)},w),Ue.resolve(this.gs(R))}gs(e){const t=[];return e.forEach(s=>{const d=this._s(s);null!==d&&t.push(d)}),t}removeMutationBatch(e,t){T(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let s=this.ds;return Ue.forEach(t.mutations,d=>{const g=new Di(d.key,t.batchId);return s=s.delete(g),this.referenceDelegate.markPotentiallyOrphaned(e,d.key)}).next(()=>{this.ds=s})}In(e){}containsKey(e,t){const s=new Di(t,0),d=this.ds.firstAfterOrEqual(s);return Ue.resolve(t.isEqual(d&&d.key))}performConsistencyCheck(e){return Ue.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ig{constructor(e){this.ps=e,this.docs=new fr(kt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,d=this.docs.get(s),g=d?d.size:0,w=this.ps(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:w}),this.size+=w-g,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Ue.resolve(s?s.document.mutableCopy():qr.newInvalidDocument(t))}getEntries(e,t){let s=Ss();return t.forEach(d=>{const g=this.docs.get(d);s=s.insert(d,g?g.document.mutableCopy():qr.newInvalidDocument(d))}),Ue.resolve(s)}getAllFromCollection(e,t,s){let d=Ss();const g=new kt(t.child("")),w=this.docs.getIteratorFrom(g);for(;w.hasNext();){const{key:R,value:{document:B}}=w.getNext();if(!t.isPrefixOf(R.path))break;R.path.length>t.length+1||Ti(cu(B),s)<=0||(d=d.insert(B.key,B.mutableCopy()))}return Ue.resolve(d)}getAllFromCollectionGroup(e,t,s,d){A()}Is(e,t){return Ue.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new vc(this)}getSize(e){return Ue.resolve(this.size)}}class vc extends sm{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((s,d)=>{d.isValidDocument()?t.push(this.zn.addEntry(e,d)):this.zn.removeEntry(s)}),Ue.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class Jd{constructor(e){this.persistence=e,this.Ts=new Xn(t=>Xu(t),el),this.lastRemoteSnapshotVersion=yn.min(),this.highestTargetId=0,this.Es=0,this.As=new Qd,this.targetCount=0,this.Rs=Rl.An()}forEachTarget(e,t){return this.Ts.forEach((s,d)=>t(d)),Ue.resolve()}getLastRemoteSnapshotVersion(e){return Ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ue.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),Ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.Es&&(this.Es=t),Ue.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new Rl(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,Ue.resolve()}updateTargetData(e,t){return this.vn(t),Ue.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,Ue.resolve()}removeTargets(e,t,s){let d=0;const g=[];return this.Ts.forEach((w,R)=>{R.sequenceNumber<=t&&null===s.get(R.targetId)&&(this.Ts.delete(w),g.push(this.removeMatchingKeysForTargetId(e,R.targetId)),d++)}),Ue.waitFor(g).next(()=>d)}getTargetCount(e){return Ue.resolve(this.targetCount)}getTargetData(e,t){const s=this.Ts.get(t)||null;return Ue.resolve(s)}addMatchingKeys(e,t,s){return this.As.ss(t,s),Ue.resolve()}removeMatchingKeys(e,t,s){this.As.os(t,s);const d=this.persistence.referenceDelegate,g=[];return d&&t.forEach(w=>{g.push(d.markPotentiallyOrphaned(e,w))}),Ue.waitFor(g)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),Ue.resolve()}getMatchingKeysForTargetId(e,t){const s=this.As.hs(t);return Ue.resolve(s)}containsKey(e,t){return Ue.resolve(this.As.containsKey(t))}}class Hh{constructor(e,t){this.bs={},this.overlays={},this.Ps=new Ds(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new Jd(this),this.indexManager=new zd,this.remoteDocumentCache=new ig(s=>this.referenceDelegate.Ss(s)),this.wt=new Gd(t),this.Ds=new rg(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new om,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.bs[e.toKey()];return s||(s=new Nl(t,this.referenceDelegate),this.bs[e.toKey()]=s),s}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,s){wt("MemoryPersistence","Starting transaction:",e);const d=new am(this.Ps.next());return this.referenceDelegate.Cs(),s(d).next(g=>this.referenceDelegate.xs(d).next(()=>g)).toPromise().then(g=>(d.raiseOnCommittedEvent(),g))}Ns(e,t){return Ue.or(Object.values(this.bs).map(s=>()=>s.containsKey(e,t)))}}class am extends Ku{constructor(e){super(),this.currentSequenceNumber=e}}class qf{constructor(e){this.persistence=e,this.ks=new Qd,this.Os=null}static Ms(e){return new qf(e)}get Fs(){if(this.Os)return this.Os;throw A()}addReference(e,t,s){return this.ks.addReference(s,t),this.Fs.delete(s.toString()),Ue.resolve()}removeReference(e,t,s){return this.ks.removeReference(s,t),this.Fs.add(s.toString()),Ue.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),Ue.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(d=>this.Fs.add(d.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(d=>{d.forEach(g=>this.Fs.add(g.toString()))}).next(()=>s.removeTargetData(e,t))}Cs(){this.Os=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ue.forEach(this.Fs,s=>{const d=kt.fromPath(s);return this.$s(e,d).next(g=>{g||t.removeEntry(d,yn.min())})}).next(()=>(this.Os=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(s=>{s?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return Ue.or([()=>Ue.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class gy{constructor(e){this.wt=e}O(e,t,s,d){const g=new gs("createOrUpgrade",t);var R;s<1&&d>=1&&(e.createObjectStore("owner"),(R=e).createObjectStore("mutationQueues",{keyPath:"userId"}),R.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Wp,{unique:!0}),R.createObjectStore("documentMutations"),ud(e),function(R){R.createObjectStore("remoteDocuments")}(e));let w=Ue.resolve();return s<3&&d>=3&&(0!==s&&(function(R){R.deleteObjectStore("targetDocuments"),R.deleteObjectStore("targets"),R.deleteObjectStore("targetGlobal")}(e),ud(e)),w=w.next(()=>function(R){const B=R.store("targetGlobal"),G={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:yn.min().toTimestamp(),targetCount:0};return B.put("targetGlobalKey",G)}(g))),s<4&&d>=4&&(0!==s&&(w=w.next(()=>function(R,B){return B.store("mutations").K().next(G=>{R.deleteObjectStore("mutations"),R.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Wp,{unique:!0});const ee=B.store("mutations"),fe=G.map(qe=>ee.put(qe));return Ue.waitFor(fe)})}(e,g))),w=w.next(()=>{!function(R){R.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&d>=5&&(w=w.next(()=>this.Bs(g))),s<6&&d>=6&&(w=w.next(()=>(function(R){R.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(g)))),s<7&&d>=7&&(w=w.next(()=>this.Us(g))),s<8&&d>=8&&(w=w.next(()=>this.qs(e,g))),s<9&&d>=9&&(w=w.next(()=>{!function(R){R.objectStoreNames.contains("remoteDocumentChanges")&&R.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&d>=10&&(w=w.next(()=>this.Ks(g))),s<11&&d>=11&&(w=w.next(()=>{(function(R){R.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(R){R.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&d>=12&&(w=w.next(()=>{!function(R){const B=R.createObjectStore("documentOverlays",{keyPath:Wg});B.createIndex("collectionPathOverlayIndex",zg,{unique:!1}),B.createIndex("collectionGroupOverlayIndex",ed,{unique:!1})}(e)})),s<13&&d>=13&&(w=w.next(()=>function(R){const B=R.createObjectStore("remoteDocumentsV14",{keyPath:oy});B.createIndex("documentKeyIndex",ay),B.createIndex("collectionGroupIndex",za)}(e)).next(()=>this.Gs(e,g)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&d>=14&&(w=w.next(()=>this.Qs(e,g))),s<15&&d>=15&&(w=w.next(()=>function(R){R.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),R.createObjectStore("indexState",{keyPath:Oh}).createIndex("sequenceNumberIndex",al,{unique:!1}),R.createObjectStore("indexEntries",{keyPath:Zd}).createIndex("documentKeyIndex",Sl,{unique:!1})}(e))),w}Ls(e){let t=0;return e.store("remoteDocuments").J((s,d)=>{t+=Kd(d)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Bs(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.K().next(d=>Ue.forEach(d,g=>{const w=IDBKeyRange.bound([g.userId,-1],[g.userId,g.lastAcknowledgedBatchId]);return s.K("userMutationsIndex",w).next(R=>Ue.forEach(R,B=>{T(B.userId===g.userId);const G=Ca(this.wt,B);return Vf(e,g.userId,G).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(d=>{const g=[];return s.J((w,R)=>{const B=new nr(w),G=[0,As(B)];g.push(t.get(G).next(ee=>ee?Ue.resolve():t.put({targetId:0,path:As(B),sequenceNumber:d.highestListenSequenceNumber})))}).next(()=>Ue.waitFor(g))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:Nh});const s=t.store("collectionParents"),d=new Uu,g=w=>{if(d.add(w)){const R=w.lastSegment(),B=w.popLast();return s.put({collectionId:R,parent:As(B)})}};return t.store("remoteDocuments").J({H:!0},(w,R)=>{const B=new nr(w);return g(B.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([w,R,B],G)=>{const ee=gu(R);return g(ee.popLast())}))}Ks(e){const t=e.store("targets");return t.J((s,d)=>{const g=mc(d),w=id(this.wt,g);return t.put(w)})}Gs(e,t){const s=t.store("remoteDocuments"),d=[];return s.J((g,w)=>{const R=t.store("remoteDocumentsV14"),B=(G=w,G.document?new kt(nr.fromString(G.document.name).popFirst(5)):G.noDocument?kt.fromSegments(G.noDocument.path):G.unknownDocument?kt.fromSegments(G.unknownDocument.path):A()).path.toArray();var G;const ee={prefixPath:B.slice(0,B.length-2),collectionGroup:B[B.length-2],documentId:B[B.length-1],readTime:w.readTime||[0,0],unknownDocument:w.unknownDocument,noDocument:w.noDocument,document:w.document,hasCommittedMutations:!!w.hasCommittedMutations};d.push(R.put(ee))}).next(()=>Ue.waitFor(d))}Qs(e,t){const s=t.store("mutations"),d=fy(this.wt),g=new Hh(qf.Ms,this.wt.ne);return s.K().next(w=>{const R=new Map;return w.forEach(B=>{var G;let ee=null!==(G=R.get(B.userId))&&void 0!==G?G:$n();Ca(this.wt,B).keys().forEach(fe=>ee=ee.add(fe)),R.set(B.userId,ee)}),Ue.forEach(R,(B,G)=>{const ee=new ni(G),fe=Uf.se(this.wt,ee),qe=g.getIndexManager(ee),ct=jf.se(ee,this.wt,qe,g.referenceDelegate);return new Gf(d,ct,fe,qe).recalculateAndSaveOverlaysForDocumentKeys(new nd(t,Ds.ot),B).next()})})}}function ud(i){i.createObjectStore("targetDocuments",{keyPath:Dl}).createIndex("documentTargetsIndex",Nf,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Pf,{unique:!0}),i.createObjectStore("targetGlobal")}const cl="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class $h{constructor(e,t,s,d,g,w,R,B,G,ee,fe=14){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.js=g,this.window=w,this.document=R,this.Ws=G,this.zs=ee,this.Hs=fe,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=qe=>Promise.resolve(),!$h.V())throw new j(N.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new dy(this,d),this.ei=t+"main",this.wt=new Gd(B),this.ni=new Zs(this.ei,this.Hs,new gy(this.wt)),this.Vs=new im(this.referenceDelegate,this.wt),this.remoteDocumentCache=fy(this.wt),this.Ds=new uy,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===ee&&_r("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new j(N.FAILED_PRECONDITION,cl);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new Ds(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var s=(0,Ie.Z)(function*(d){if(t.started)return e(d)});return function(d){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,Ie.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,Ie.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>yu(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(Ts(e))return wt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return wt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return wo(e).get("owner").next(t=>Ue.resolve(this.di(t)))}_i(e){return yu(e).delete(this.clientId)}wi(){var e=this;return(0,Ie.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const d=hi(s,"clientMetadata");return d.K().next(g=>{const w=e.gi(g,18e5),R=g.filter(B=>-1===w.indexOf(B));return Ue.forEach(R,B=>d.delete(B.clientId)).next(()=>R)})}).catch(()=>[]);if(e.si)for(const s of t)e.si.removeItem(e.yi(s.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?Ue.resolve(!0):wo(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new j(N.FAILED_PRECONDITION,cl);return!1}}return!(!this.networkEnabled||!this.inForeground)||yu(e).K().next(s=>void 0===this.gi(s,5e3).find(d=>{if(this.clientId!==d.clientId){const w=!this.inForeground&&d.inForeground,R=this.networkEnabled===d.networkEnabled;if(!this.networkEnabled&&d.networkEnabled||w&&R)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&wt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ie.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new nd(t,Ds.ot);return e.li(s).next(()=>e._i(s))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(s=>this.mi(s.updateTimeMs,t)&&!this.pi(s.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>yu(e).K().next(t=>this.gi(t,18e5).map(s=>s.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return jf.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Jp(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return Uf.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,s){wt("IndexedDbPersistence","Starting transaction:",e);const d="readonly"===t?"readonly":"readwrite",g=15===(w=this.Hs)?kf:14===w?td:13===w?gc:12===w?Of:11===w?Kp:void A();var w;let R;return this.ni.runTransaction(e,d,g,B=>(R=new nd(B,this.Ps?this.Ps.next():Ds.ot),"readwrite-primary"===t?this.ai(R).next(G=>!!G||this.hi(R)).next(G=>{if(!G)throw _r(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new j(N.FAILED_PRECONDITION,zu);return s(R)}).next(G=>this.fi(R).next(()=>G)):this.bi(R).next(()=>s(R)))).then(B=>(R.raiseOnCommittedEvent(),B))}bi(e){return wo(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new j(N.FAILED_PRECONDITION,cl)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return wo(e).put("owner",t)}static V(){return Zs.V()}li(e){const t=wo(e);return t.get("owner").next(s=>this.di(s)?(wt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Ue.resolve())}mi(e,t){const s=Date.now();return!(e<s-t||e>s&&(_r(`Detected an update time that is in the future: ${e} > ${s}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,je.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const s=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return wt("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return _r("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){_r("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(e){}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function wo(i){return hi(i,"owner")}function yu(i){return hi(i,"clientMetadata")}function wc(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class sg{constructor(e,t,s,d){this.targetId=e,this.fromCache=t,this.Pi=s,this.vi=d}static Vi(e,t){let s=$n(),d=$n();for(const g of t.docChanges)switch(g.type){case 0:s=s.add(g.doc.key);break;case 1:d=d.add(g.doc.key)}return new sg(e,t.fromCache,s,d)}}class og{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,s,d){return this.Ci(e,t).next(g=>g||this.xi(e,t,d,s)).next(g=>g||this.Ni(e,t))}Ci(e,t){return Ue.resolve(null)}xi(e,t,s,d){return function qg(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}(t)||d.isEqual(yn.min())?this.Ni(e,t):this.Di.getDocuments(e,s).next(g=>{const w=this.ki(t,g);return this.Oi(t,w,s,d)?this.Ni(e,t):(au()<=Ke.in.DEBUG&&wt("QueryEngine","Re-using previous result from %s to execute query: %s",d.toString(),hu(t)),this.Mi(e,w,t,Nd(d,-1)))})}ki(e,t){let s=new Ln(Ro(e));return t.forEach((d,g)=>{bl(e,g)&&(s=s.add(g))}),s}Oi(e,t,s,d){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const g="F"===e.limitType?t.last():t.first();return!!g&&(g.hasPendingWrites||g.version.compareTo(d)>0)}Ni(e,t){return au()<=Ke.in.DEBUG&&wt("QueryEngine","Using full collection scan to execute query:",hu(t)),this.Di.getDocumentsMatchingQuery(e,t,Hs.min())}Mi(e,t,s,d){return this.Di.getDocumentsMatchingQuery(e,s,d).next(g=>(t.forEach(w=>{g=g.insert(w.key,w)}),g))}}class Wf{constructor(e,t,s,d){this.persistence=e,this.Fi=t,this.wt=d,this.$i=new fr(ln),this.Bi=new Xn(g=>Xu(g),el),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(s)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Gf(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function zf(i,e,t,s){return new Wf(i,e,t,s)}function Kf(i,e){return Zh.apply(this,arguments)}function Zh(){return Zh=(0,Ie.Z)(function*(i,e){const t=P(i);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let d;return t.mutationQueue.getAllMutationBatches(s).next(g=>(d=g,t.qi(e),t.mutationQueue.getAllMutationBatches(s))).next(g=>{const w=[],R=[];let B=$n();for(const G of d){w.push(G.batchId);for(const ee of G.mutations)B=B.add(ee.key)}for(const G of g){R.push(G.batchId);for(const ee of G.mutations)B=B.add(ee.key)}return t.localDocuments.getDocuments(s,B).next(G=>({Ki:G,removedBatchIds:w,addedBatchIds:R}))})})}),Zh.apply(this,arguments)}function ld(i,e){const t=P(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const d=e.batch.keys(),g=t.Ui.newChangeBuffer({trackRemovals:!0});return function(w,R,B,G){const ee=B.batch,fe=ee.keys();let qe=Ue.resolve();return fe.forEach(ct=>{qe=qe.next(()=>G.getEntry(R,ct)).next(Et=>{const zt=B.docVersions.get(ct);T(null!==zt),Et.version.compareTo(zt)<0&&(ee.applyToRemoteDocument(Et,B),Et.isValidDocument()&&(Et.setReadTime(B.commitVersion),G.addEntry(Et)))})}),qe.next(()=>w.mutationQueue.removeMutationBatch(R,ee))}(t,s,e,g).next(()=>g.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,d,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(w){let R=$n();for(let B=0;B<w.mutationResults.length;++B)w.mutationResults[B].transformResults.length>0&&(R=R.add(w.batch.mutations[B].key));return R}(e))).next(()=>t.localDocuments.getDocuments(s,d))})}function um(i){const e=P(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function cd(i,e){const t=P(i),s=e.snapshotVersion;let d=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",g=>{const w=t.Ui.newChangeBuffer({trackRemovals:!0});d=t.$i;const R=[];e.targetChanges.forEach((ee,fe)=>{const qe=d.get(fe);if(!qe)return;R.push(t.Vs.removeMatchingKeys(g,ee.removedDocuments,fe).next(()=>t.Vs.addMatchingKeys(g,ee.addedDocuments,fe)));let ct=qe.withSequenceNumber(g.currentSequenceNumber);var Et,zt,gn;e.targetMismatches.has(fe)?ct=ct.withResumeToken(Gi.EMPTY_BYTE_STRING,yn.min()).withLastLimboFreeSnapshotVersion(yn.min()):ee.resumeToken.approximateByteSize()>0&&(ct=ct.withResumeToken(ee.resumeToken,s)),d=d.insert(fe,ct),zt=ct,gn=ee,(0===(Et=qe).resumeToken.approximateByteSize()||zt.snapshotVersion.toMicroseconds()-Et.snapshotVersion.toMicroseconds()>=3e8||gn.addedDocuments.size+gn.modifiedDocuments.size+gn.removedDocuments.size>0)&&R.push(t.Vs.updateTargetData(g,ct))});let B=Ss(),G=$n();if(e.documentUpdates.forEach(ee=>{e.resolvedLimboDocuments.has(ee)&&R.push(t.persistence.referenceDelegate.updateLimboDocument(g,ee))}),R.push(lm(g,w,e.documentUpdates).next(ee=>{B=ee.Gi,G=ee.Qi})),!s.isEqual(yn.min())){const ee=t.Vs.getLastRemoteSnapshotVersion(g).next(fe=>t.Vs.setTargetsMetadata(g,g.currentSequenceNumber,s));R.push(ee)}return Ue.waitFor(R).next(()=>w.apply(g)).next(()=>t.localDocuments.getLocalViewOfDocuments(g,B,G)).next(()=>B)}).then(g=>(t.$i=d,g))}function lm(i,e,t){let s=$n(),d=$n();return t.forEach(g=>s=s.add(g)),e.getEntries(i,s).next(g=>{let w=Ss();return t.forEach((R,B)=>{const G=g.get(R);B.isFoundDocument()!==G.isFoundDocument()&&(d=d.add(R)),B.isNoDocument()&&B.version.isEqual(yn.min())?(e.removeEntry(R,B.readTime),w=w.insert(R,B)):!G.isValidDocument()||B.version.compareTo(G.version)>0||0===B.version.compareTo(G.version)&&G.hasPendingWrites?(e.addEntry(B),w=w.insert(R,B)):wt("LocalStore","Ignoring outdated watch update for ",R,". Current version:",G.version," Watch version:",B.version)}),{Gi:w,Qi:d}})}function ag(i,e){const t=P(i);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function Ec(i,e){const t=P(i);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let d;return t.Vs.getTargetData(s,e).next(g=>g?(d=g,Ue.resolve(d)):t.Vs.allocateTargetId(s).next(w=>(d=new ao(e,w,0,s.currentSequenceNumber),t.Vs.addTargetData(s,d).next(()=>d))))}).then(s=>{const d=t.$i.get(s.targetId);return(null===d||s.snapshotVersion.compareTo(d.snapshotVersion)>0)&&(t.$i=t.$i.insert(s.targetId,s),t.Bi.set(e,s.targetId)),s})}function Ol(i,e,t){return dd.apply(this,arguments)}function dd(){return dd=(0,Ie.Z)(function*(i,e,t){const s=P(i),d=s.$i.get(e),g=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",g,w=>s.persistence.referenceDelegate.removeTarget(w,d)))}catch(w){if(!Ts(w))throw w;wt("LocalStore",`Failed to update sequence numbers for target ${e}: ${w}`)}s.$i=s.$i.remove(e),s.Bi.delete(d.target)}),dd.apply(this,arguments)}function Xd(i,e,t){const s=P(i);let d=yn.min(),g=$n();return s.persistence.runTransaction("Execute query","readonly",w=>function(R,B,G){const ee=P(R),fe=ee.Bi.get(G);return void 0!==fe?Ue.resolve(ee.$i.get(fe)):ee.Vs.getTargetData(B,G)}(s,w,Jo(e)).next(R=>{if(R)return d=R.lastLimboFreeSnapshotVersion,s.Vs.getMatchingKeysForTargetId(w,R.targetId).next(B=>{g=B})}).next(()=>s.Fi.getDocumentsMatchingQuery(w,e,t?d:yn.min(),t?g:$n())).next(R=>(cm(s,nc(e),R),{documents:R,ji:g})))}function Yf(i,e){const t=P(i),s=P(t.Vs),d=t.$i.get(e);return d?Promise.resolve(d.target):t.persistence.runTransaction("Get target data","readonly",g=>s.te(g,e).next(w=>w?w.target:null))}function Fo(i,e){const t=P(i),s=t.Li.get(e)||yn.min();return t.persistence.runTransaction("Get new document changes","readonly",d=>t.Ui.getAllFromCollectionGroup(d,e,Nd(s,-1),Number.MAX_SAFE_INTEGER)).then(d=>(cm(t,e,d),d))}function cm(i,e,t){let s=yn.min();t.forEach((d,g)=>{g.readTime.compareTo(s)>0&&(s=g.readTime)}),i.Li.set(e,s)}function dm(){return dm=(0,Ie.Z)(function*(i,e,t,s){const d=P(i);let g=$n(),w=Ss();for(const G of t){const ee=e.Wi(G.metadata.name);G.document&&(g=g.add(ee));const fe=e.zi(G);fe.setReadTime(e.Hi(G.metadata.readTime)),w=w.insert(ee,fe)}const R=d.Ui.newChangeBuffer({trackRemovals:!0}),B=yield Ec(d,(G=s,Jo(Il(nr.fromString(`__bundle__/docs/${G}`)))));var G;return d.persistence.runTransaction("Apply bundle documents","readwrite",G=>lm(G,R,w).next(ee=>(R.apply(G),ee)).next(ee=>d.Vs.removeMatchingKeysForTargetId(G,B.targetId).next(()=>d.Vs.addMatchingKeys(G,g,B.targetId)).next(()=>d.localDocuments.getLocalViewOfDocuments(G,ee.Gi,ee.Qi)).next(()=>ee.Gi)))}),dm.apply(this,arguments)}function r_(i,e){return Qf.apply(this,arguments)}function Qf(){return Qf=(0,Ie.Z)(function*(i,e,t=$n()){const s=yield Ec(i,Jo(Lf(e.bundledQuery))),d=P(i);return d.persistence.runTransaction("Save named query","readwrite",g=>{const w=ki(e.readTime);if(s.snapshotVersion.compareTo(w)>=0)return d.Ds.saveNamedQuery(g,e);const R=s.withResumeToken(Gi.EMPTY_BYTE_STRING,w);return d.$i=d.$i.insert(R.targetId,R),d.Vs.updateTargetData(g,R).next(()=>d.Vs.removeMatchingKeysForTargetId(g,s.targetId)).next(()=>d.Vs.addMatchingKeys(g,t,s.targetId)).next(()=>d.Ds.saveNamedQuery(g,e))})}),Qf.apply(this,arguments)}function ug(i,e){return`firestore_clients_${i}_${e}`}function Jf(i,e,t){let s=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function qh(i,e){return`firestore_targets_${i}_${e}`}class eh{constructor(e,t,s,d){this.user=e,this.batchId=t,this.state=s,this.error=d}static Ji(e,t,s){const d=JSON.parse(s);let g,w="object"==typeof d&&-1!==["pending","acknowledged","rejected"].indexOf(d.state)&&(void 0===d.error||"object"==typeof d.error);return w&&d.error&&(w="string"==typeof d.error.message&&"string"==typeof d.error.code,w&&(g=new j(d.error.code,d.error.message))),w?new eh(e,t,d.state,g):(_r("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Wh{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static Ji(e,t){const s=JSON.parse(t);let d,g="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return g&&s.error&&(g="string"==typeof s.error.message&&"string"==typeof s.error.code,g&&(d=new j(s.error.code,s.error.message))),g?new Wh(e,s.state,d):(_r("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Xf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const s=JSON.parse(t);let d="object"==typeof s&&s.activeTargetIds instanceof Array,g=Bd();for(let w=0;d&&w<s.activeTargetIds.length;++w)d=Zt(s.activeTargetIds[w]),g=g.add(s.activeTargetIds[w]);return d?new Xf(e,g):(_r("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class ep{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new ep(t.clientId,t.onlineState):(_r("SharedClientState",`Failed to parse online state: ${e}`),null)}}class th{constructor(){this.activeTargetIds=Bd()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zh{constructor(e,t,s,d,g){this.window=e,this.js=t,this.persistenceKey=s,this.tr=d,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new fr(ln),this.started=!1,this.ir=[];const w=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=g,this.rr=ug(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new th),this.cr=new RegExp(`^firestore_clients_${w}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${w}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${w}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(R){return`firestore_bundle_loaded_v2_${R}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.syncEngine.Ri();for(const d of t){if(d===e.tr)continue;const g=e.getItem(ug(e.persistenceKey,d));if(g){const w=Xf.Ji(d,g);w&&(e.sr=e.sr.insert(w.clientId,w))}}e._r();const s=e.storage.getItem(e.lr);if(s){const d=e.wr(s);d&&e.mr(d)}for(const d of e.ir)e.nr(d);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((s,d)=>{d.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,s){this.yr(e,t,s),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(qh(this.persistenceKey,e));if(s){const d=Wh.Ji(e,s);d&&(t=d.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(qh(this.persistenceKey,e))}updateQueryState(e,t,s){this.Tr(e,t,s)}handleUserChange(e,t,s){t.forEach(d=>{this.pr(d)}),this.currentUser=e,s.forEach(d=>{this.addPendingMutation(d)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return wt("SharedClientState","READ",e,t),t}setItem(e,t){wt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){wt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(wt("SharedClientState","EVENT",s.key,s.newValue),s.key===this.rr)return void _r("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,Ie.Z)(function*(){if(t.started){if(null!==s.key)if(t.cr.test(s.key)){if(null==s.newValue){const d=t.Rr(s.key);return t.br(d,null)}{const d=t.Pr(s.key,s.newValue);if(d)return t.br(d.clientId,d)}}else if(t.ar.test(s.key)){if(null!==s.newValue){const d=t.vr(s.key,s.newValue);if(d)return t.Vr(d)}}else if(t.hr.test(s.key)){if(null!==s.newValue){const d=t.Sr(s.key,s.newValue);if(d)return t.Dr(d)}}else if(s.key===t.lr){if(null!==s.newValue){const d=t.wr(s.newValue);if(d)return t.mr(d)}}else if(s.key===t.ur){const d=function(g){let w=Ds.ot;if(null!=g)try{const R=JSON.parse(g);T("number"==typeof R),w=R}catch(R){_r("SharedClientState","Failed to read sequence number from WebStorage",R)}return w}(s.newValue);d!==Ds.ot&&t.sequenceNumberHandler(d)}else if(s.key===t.dr){const d=t.Cr(s.newValue);yield Promise.all(d.map(g=>t.syncEngine.Nr(g)))}}else t.ir.push(s)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,s){const d=new eh(this.currentUser,e,t,s),g=Jf(this.persistenceKey,this.currentUser,e);this.setItem(g,d.Yi())}pr(e){const t=Jf(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,s){const d=qh(this.persistenceKey,e),g=new Wh(e,t,s);this.setItem(d,g.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const s=this.Rr(e);return Xf.Ji(s,t)}vr(e,t){const s=this.ar.exec(e),d=Number(s[1]);return eh.Ji(new ni(void 0!==s[2]?s[2]:null),d,t)}Sr(e,t){const s=this.hr.exec(e),d=Number(s[1]);return Wh.Ji(d,t)}wr(e){return ep.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,Ie.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);wt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const s=t?this.sr.insert(e,t):this.sr.remove(e),d=this.gr(this.sr),g=this.gr(s),w=[],R=[];return g.forEach(B=>{d.has(B)||w.push(B)}),d.forEach(B=>{g.has(B)||R.push(B)}),this.syncEngine.Mr(w,R).then(()=>{this.sr=s})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=Bd();return e.forEach((s,d)=>{t=t.unionWith(d.activeTargetIds)}),t}}class Kh{constructor(){this.Fr=new th,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,s){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new th,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class tp{Br(e){}shutdown(){}}class Ic{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){wt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){wt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const np={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class lg{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class my extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,s,d,g){const w=this.oo(e,t);wt("RestConnection","Sending: ",w,s);const R={};return this.uo(R,d,g),this.co(e,w,R,s).then(B=>(wt("RestConnection","Received: ",B),B),B=>{throw Ni("RestConnection",`${e} failed with error: `,B,"url: ",w,"request:",s),B})}ao(e,t,s,d,g){return this.ro(e,t,s,d,g)}uo(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+ou,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((d,g)=>e[g]=d),s&&s.headers.forEach((d,g)=>e[g]=d)}oo(e,t){return`${this.so}/v1/${t}:${np[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,s,d){return new Promise((g,w)=>{const R=new Za;R.listenOnce(Tu.COMPLETE,()=>{try{switch(R.getLastErrorCode()){case js.NO_ERROR:const G=R.getResponseJson();wt("Connection","XHR received:",JSON.stringify(G)),g(G);break;case js.TIMEOUT:wt("Connection",'RPC "'+e+'" timed out'),w(new j(N.DEADLINE_EXCEEDED,"Request time out"));break;case js.HTTP_ERROR:const ee=R.getStatus();if(wt("Connection",'RPC "'+e+'" failed with status:',ee,"response text:",R.getResponseText()),ee>0){const fe=R.getResponseJson().error;if(fe&&fe.status&&fe.message){const qe=function(ct){const Et=ct.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(Et)>=0?Et:N.UNKNOWN}(fe.status);w(new j(qe,fe.message))}else w(new j(N.UNKNOWN,"Server responded with status "+R.getStatus()))}else w(new j(N.UNAVAILABLE,"Connection failed."));break;default:A()}}finally{wt("Connection",'RPC "'+e+'" completed.')}});const B=JSON.stringify(d);R.send(t,"POST",B,s,15)})}ho(e,t,s){const d=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],g=su(),w=Ha(),R={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(R.xmlHttpFactory=new Wo({})),this.uo(R.initMessageHeaders,t,s),(0,je.uI)()||(0,je.b$)()||(0,je.d)()||(0,je.w1)()||(0,je.Mn)()||(0,je.ru)()||(R.httpHeadersOverwriteParam="$httpHeaders");const B=d.join("");wt("Connection","Creating WebChannel: "+B,R);const G=g.createWebChannel(B,R);let ee=!1,fe=!1;const qe=new lg({jr:Et=>{fe?wt("Connection","Not sending because WebChannel is closed:",Et):(ee||(wt("Connection","Opening WebChannel transport."),G.open(),ee=!0),wt("Connection","WebChannel sending:",Et),G.send(Et))},Wr:()=>G.close()}),ct=(Et,zt,gn)=>{Et.listen(zt,jr=>{try{gn(jr)}catch(Wi){setTimeout(()=>{throw Wi},0)}})};return ct(G,ti.EventType.OPEN,()=>{fe||wt("Connection","WebChannel transport opened.")}),ct(G,ti.EventType.CLOSE,()=>{fe||(fe=!0,wt("Connection","WebChannel transport closed"),qe.eo())}),ct(G,ti.EventType.ERROR,Et=>{fe||(fe=!0,Ni("Connection","WebChannel transport errored:",Et),qe.eo(new j(N.UNAVAILABLE,"The operation could not be completed")))}),ct(G,ti.EventType.MESSAGE,Et=>{var zt;if(!fe){const gn=Et.data[0];T(!!gn);const jr=gn,Wi=jr.error||(null===(zt=jr[0])||void 0===zt?void 0:zt.error);if(Wi){wt("Connection","WebChannel received error:",Wi);const pi=Wi.status;let zi=function(us){const Pa=Fn[us];if(void 0!==Pa)return qc(Pa)}(pi),Ki=Wi.message;void 0===zi&&(zi=N.INTERNAL,Ki="Unknown error status: "+pi+" with message "+Wi.message),fe=!0,qe.eo(new j(zi,Ki)),G.close()}else wt("Connection","WebChannel received:",gn),qe.no(gn)}}),ct(w,ql.STAT_EVENT,Et=>{Et.stat===$a.PROXY?wt("Connection","Detected buffering proxy"):Et.stat===$a.NOPROXY&&wt("Connection","Detected no buffering proxy")}),setTimeout(()=>{qe.Zr()},0),qe}}function Ta(){return"undefined"!=typeof window?window:null}function hd(){return"undefined"!=typeof document?document:null}function Yh(i){return new Qc(i,!0)}class fd{constructor(e,t,s=1e3,d=1.5,g=6e4){this.js=e,this.timerId=t,this.lo=s,this.fo=d,this._o=g,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),s=Math.max(0,Date.now()-this.yo),d=Math.max(0,t-s);d>0&&wt("ExponentialBackoff",`Backing off for ${d} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,d,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class cg{constructor(e,t,s,d,g,w,R,B){this.js=e,this.Ao=s,this.Ro=d,this.bo=g,this.authCredentialsProvider=w,this.appCheckCredentialsProvider=R,this.listener=B,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new fd(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,Ie.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}Oo(){var e=this;return(0,Ie.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var s=this;return(0,Ie.Z)(function*(){s.Fo(),s.$o(),s.So.cancel(),s.Po++,4!==e?s.So.reset():t&&t.code===N.RESOURCE_EXHAUSTED?(_r(t.toString()),_r("Using maximum backoff delay to prevent overloading the backend."),s.So.po()):t&&t.code===N.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Bo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,d])=>{this.Po===t&&this.Uo(s,d)},s=>{e(()=>{const d=new j(N.UNKNOWN,"Fetching auth token failed: "+s.message);return this.qo(d)})})}Uo(e,t){const s=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{s(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(d=>{s(()=>this.qo(d))}),this.stream.onMessage(d=>{s(()=>this.onMessage(d))})}xo(){var e=this;this.state=5,this.So.Io((0,Ie.Z)(function*(){e.state=0,e.start()}))}qo(e){return wt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(wt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hm extends cg{constructor(e,t,s,d,g,w){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,d,w),this.wt=g}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function Qe(i,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(B=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===B?1:"REMOVE"===B?2:"CURRENT"===B?3:"RESET"===B?4:A(),d=e.targetChange.targetIds||[],g=function(B,G){return B.dt?(T(void 0===G||"string"==typeof G),Gi.fromBase64String(G||"")):(T(void 0===G||G instanceof Uint8Array),Gi.fromUint8Array(G||new Uint8Array))}(i,e.targetChange.resumeToken),w=e.targetChange.cause,R=w&&function(B){const G=void 0===B.code?N.UNKNOWN:qc(B.code);return new j(G,B.message||"")}(w);t=new Tl(s,d,g,R||null)}else if("documentChange"in e){const s=e.documentChange,d=oo(i,s.document.name),g=ki(s.document.updateTime),w=new io({mapValue:{fields:s.document.fields}}),R=qr.newFoundDocument(d,g,w);t=new Vd(s.targetIds||[],s.removedTargetIds||[],R.key,R)}else if("documentDelete"in e){const s=e.documentDelete,d=oo(i,s.document),g=s.readTime?ki(s.readTime):yn.min(),w=qr.newNoDocument(d,g);t=new Vd([],s.removedTargetIds||[],w.key,w)}else if("documentRemove"in e){const s=e.documentRemove,d=oo(i,s.document);t=new Vd([],s.removedTargetIds||[],d,null)}else{if(!("filter"in e))return A();{const s=e.filter,g=new uc(s.count||0);t=new Yc(s.targetId,g)}}var B;return t}(this.wt,e),s=function(d){if(!("targetChange"in d))return yn.min();const g=d.targetChange;return g.targetIds&&g.targetIds.length?yn.min():g.readTime?ki(g.readTime):yn.min()}(e);return this.listener.Go(t,s)}Qo(e){const t={};t.database=m(this.wt),t.addTarget=function(d,g){let w;const R=g.target;return w=Jl(R)?{documents:nn(d,R)}:{query:qi(d,R)},w.targetId=g.targetId,g.resumeToken.approximateByteSize()>0?w.resumeToken=Jc(d,g.resumeToken):g.snapshotVersion.compareTo(yn.min())>0&&(w.readTime=Vr(d,g.snapshotVersion.toTimestamp())),w}(this.wt,e);const s=function hc(i,e){const t=function(s,d){switch(d){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return A()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.Mo(t)}jo(e){const t={};t.database=m(this.wt),t.removeTarget=e,this.Mo(t)}}class yy extends cg{constructor(e,t,s,d,g,w){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,d,w),this.wt=g,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(T(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function pn(i,e){return i&&i.length>0?(T(void 0!==e),i.map(t=>function(s,d){let g=ki(s.updateTime?s.updateTime:d);return g.isEqual(yn.min())&&(g=ki(d)),new oc(g,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=ki(e.commitTime);return this.listener.Jo(s,t)}return T(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=m(this.wt),this.Mo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>St(this.wt,s))};this.Mo(t)}}class _y extends class{}{constructor(e,t,s,d){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=s,this.wt=d,this.Zo=!1}tu(){if(this.Zo)throw new j(N.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,s){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,g])=>this.bo.ro(e,t,s,d,g)).catch(d=>{throw"FirebaseError"===d.name?(d.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new j(N.UNKNOWN,d.toString())})}ao(e,t,s){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,g])=>this.bo.ao(e,t,s,d,g)).catch(d=>{throw"FirebaseError"===d.name?(d.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new j(N.UNKNOWN,d.toString())})}terminate(){this.Zo=!0}}class dg{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(_r(t),this.su=!1):wt("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class nh{constructor(e,t,s,d,g){var w=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=g,this.du.Br(R=>{s.enqueueAndForget((0,Ie.Z)(function*(){var B;dl(w)&&(wt("RemoteStore","Restarting streams for network reachability change."),yield(B=(0,Ie.Z)(function*(G){const ee=P(G);ee.lu.add(4),yield Ka(ee),ee._u.set("Unknown"),ee.lu.delete(4),yield rh(ee)}),function(G){return B.apply(this,arguments)})(w))}))}),this._u=new dg(s,d)}}function rh(i){return hg.apply(this,arguments)}function hg(){return hg=(0,Ie.Z)(function*(i){if(dl(i))for(const e of i.fu)yield e(!0)}),hg.apply(this,arguments)}function Ka(i){return Da.apply(this,arguments)}function Da(){return Da=(0,Ie.Z)(function*(i){for(const e of i.fu)yield e(!1)}),Da.apply(this,arguments)}function bc(i,e){const t=P(i);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),oh(t)?sh(t):Tc(t).Co()&&ih(t,e))}function pd(i,e){const t=P(i),s=Tc(t);t.hu.delete(e),s.Co()&&Qh(t,e),0===t.hu.size&&(s.Co()?s.ko():dl(t)&&t._u.set("Unknown"))}function ih(i,e){i.wu.Nt(e.targetId),Tc(i).Qo(e)}function Qh(i,e){i.wu.Nt(e),Tc(i).jo(e)}function sh(i){i.wu=new Oi({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),te:e=>i.hu.get(e)||null}),Tc(i).start(),i._u.iu()}function oh(i){return dl(i)&&!Tc(i).Do()&&i.hu.size>0}function dl(i){return 0===P(i).lu.size}function _u(i){i.wu=void 0}function fm(i){return rp.apply(this,arguments)}function rp(){return rp=(0,Ie.Z)(function*(i){i.hu.forEach((e,t)=>{ih(i,e)})}),rp.apply(this,arguments)}function Jh(i,e){return ah.apply(this,arguments)}function ah(){return ah=(0,Ie.Z)(function*(i,e){_u(i),oh(i)?(i._u.uu(e),sh(i)):i._u.set("Unknown")}),ah.apply(this,arguments)}function Ya(i,e,t){return Xh.apply(this,arguments)}function Xh(){return Xh=(0,Ie.Z)(function*(i,e,t){if(i._u.set("Online"),e instanceof Tl&&2===e.state&&e.cause)try{yield(s=(0,Ie.Z)(function*(d,g){const w=g.cause;for(const R of g.targetIds)d.hu.has(R)&&(yield d.remoteSyncer.rejectListen(R,w),d.hu.delete(R),d.wu.removeTarget(R))}),function(d,g){return s.apply(this,arguments)})(i,e)}catch(s){wt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield vu(i,s)}else if(e instanceof Vd?i.wu.Ut(e):e instanceof Yc?i.wu.zt(e):i.wu.Gt(e),!t.isEqual(yn.min()))try{const s=yield um(i.localStore);t.compareTo(s)>=0&&(yield function(d,g){const w=d.wu.Yt(g);return w.targetChanges.forEach((R,B)=>{if(R.resumeToken.approximateByteSize()>0){const G=d.hu.get(B);G&&d.hu.set(B,G.withResumeToken(R.resumeToken,g))}}),w.targetMismatches.forEach(R=>{const B=d.hu.get(R);if(!B)return;d.hu.set(R,B.withResumeToken(Gi.EMPTY_BYTE_STRING,B.snapshotVersion)),Qh(d,R);const G=new ao(B.target,R,1,B.sequenceNumber);ih(d,G)}),d.remoteSyncer.applyRemoteEvent(w)}(i,t))}catch(s){wt("RemoteStore","Failed to raise snapshot:",s),yield vu(i,s)}var s}),Xh.apply(this,arguments)}function vu(i,e,t){return gd.apply(this,arguments)}function gd(){return gd=(0,Ie.Z)(function*(i,e,t){if(!Ts(e))throw e;i.lu.add(1),yield Ka(i),i._u.set("Offline"),t||(t=()=>um(i.localStore)),i.asyncQueue.enqueueRetryable((0,Ie.Z)(function*(){wt("RemoteStore","Retrying IndexedDB access"),yield t(),i.lu.delete(1),yield rh(i)}))}),gd.apply(this,arguments)}function pm(i,e){return e().catch(t=>vu(i,t,e))}function uh(i){return gm.apply(this,arguments)}function gm(){return gm=(0,Ie.Z)(function*(i){const e=P(i),t=kl(e);let s=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;ip(e);)try{const d=yield ag(e.localStore,s);if(null===d){0===e.au.length&&t.ko();break}s=d.batchId,lh(e,d)}catch(d){yield vu(e,d)}ef(e)&&md(e)}),gm.apply(this,arguments)}function ip(i){return dl(i)&&i.au.length<10}function lh(i,e){i.au.push(e);const t=kl(i);t.Co()&&t.zo&&t.Ho(e.mutations)}function ef(i){return dl(i)&&!kl(i).Do()&&i.au.length>0}function md(i){kl(i).start()}function vy(i){return yd.apply(this,arguments)}function yd(){return yd=(0,Ie.Z)(function*(i){kl(i).Xo()}),yd.apply(this,arguments)}function tf(i){return sp.apply(this,arguments)}function sp(){return sp=(0,Ie.Z)(function*(i){const e=kl(i);for(const t of i.au)e.Ho(t.mutations)}),sp.apply(this,arguments)}function op(i,e,t){return fg.apply(this,arguments)}function fg(){return fg=(0,Ie.Z)(function*(i,e,t){const s=i.au.shift(),d=Yp.from(s,e,t);yield pm(i,()=>i.remoteSyncer.applySuccessfulWrite(d)),yield uh(i)}),fg.apply(this,arguments)}function pg(i,e){return gg.apply(this,arguments)}function gg(){return gg=(0,Ie.Z)(function*(i,e){var t;e&&kl(i).zo&&(yield(t=(0,Ie.Z)(function*(s,d){if(Mo(g=d.code)&&g!==N.ABORTED){const w=s.au.shift();kl(s).No(),yield pm(s,()=>s.remoteSyncer.rejectFailedWrite(w.batchId,d)),yield uh(s)}var g}),function(s,d){return t.apply(this,arguments)})(i,e)),ef(i)&&md(i)}),gg.apply(this,arguments)}function mg(i,e){return ap.apply(this,arguments)}function ap(){return ap=(0,Ie.Z)(function*(i,e){const t=P(i);t.asyncQueue.verifyOperationInProgress(),wt("RemoteStore","RemoteStore received new credentials");const s=dl(t);t.lu.add(3),yield Ka(t),s&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield rh(t)}),ap.apply(this,arguments)}function Cc(i,e){return up.apply(this,arguments)}function up(){return up=(0,Ie.Z)(function*(i,e){const t=P(i);e?(t.lu.delete(2),yield rh(t)):e||(t.lu.add(2),yield Ka(t),t._u.set("Unknown"))}),up.apply(this,arguments)}function Tc(i){return i.mu||(i.mu=function(e,t,s){const d=P(e);return d.tu(),new hm(t,d.bo,d.authCredentials,d.appCheckCredentials,d.wt,s)}(i.datastore,i.asyncQueue,{zr:fm.bind(null,i),Jr:Jh.bind(null,i),Go:Ya.bind(null,i)}),i.fu.push(function(){var e=(0,Ie.Z)(function*(t){t?(i.mu.No(),oh(i)?sh(i):i._u.set("Unknown")):(yield i.mu.stop(),_u(i))});return function(t){return e.apply(this,arguments)}}())),i.mu}function kl(i){return i.gu||(i.gu=function(e,t,s){const d=P(e);return d.tu(),new yy(t,d.bo,d.authCredentials,d.appCheckCredentials,d.wt,s)}(i.datastore,i.asyncQueue,{zr:vy.bind(null,i),Jr:pg.bind(null,i),Yo:tf.bind(null,i),Jo:op.bind(null,i)}),i.fu.push(function(){var e=(0,Ie.Z)(function*(t){t?(i.gu.No(),yield uh(i)):(yield i.gu.stop(),i.au.length>0&&(wt("RemoteStore",`Stopping write stream with ${i.au.length} pending writes`),i.au=[]))});return function(t){return e.apply(this,arguments)}}())),i.gu}class Dc{constructor(e,t,s,d,g){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=d,this.removalCallback=g,this.deferred=new re,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(w=>{})}static createAndSchedule(e,t,s,d,g){const w=Date.now()+s,R=new Dc(e,t,w,d,g);return R.start(s),R}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new j(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bu(i,e){if(_r("AsyncQueue",`${e}: ${i}`),Ts(i))return new j(N.UNAVAILABLE,`${e}: ${i}`);throw i}class Qa{constructor(e){this.comparator=e?(t,s)=>e(t,s)||kt.comparator(t.key,s.key):(t,s)=>kt.comparator(t.key,s.key),this.keyedMap=Wc(),this.sortedSet=new fr(this.comparator)}static emptySet(e){return new Qa(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Qa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const d=t.getNext().key,g=s.getNext().key;if(!d.isEqual(g))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new Qa;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class mm{constructor(){this.yu=new fr(kt.comparator)}track(e){const t=e.doc.key,s=this.yu.get(t);s?0!==e.type&&3===s.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==s.type?this.yu=this.yu.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.yu=this.yu.remove(t):1===e.type&&2===s.type?this.yu=this.yu.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):A():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,s)=>{e.push(s)}),e}}class Sc{constructor(e,t,s,d,g,w,R,B){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=d,this.mutatedKeys=g,this.fromCache=w,this.syncStateChanged=R,this.excludesMetadataChanges=B}static fromInitialDocuments(e,t,s,d){const g=[];return t.forEach(w=>{g.push({type:0,doc:w})}),new Sc(e,t,Qa.emptySet(t),g,s,d,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let d=0;d<t.length;d++)if(t[d].type!==s[d].type||!t[d].doc.isEqual(s[d].doc))return!1;return!0}}class Ja{constructor(){this.Iu=void 0,this.listeners=[]}}class yg{constructor(){this.queries=new Xn(e=>$p(e),jc),this.onlineState="Unknown",this.Tu=new Set}}function Fl(i,e){return lp.apply(this,arguments)}function lp(){return lp=(0,Ie.Z)(function*(i,e){const t=P(i),s=e.query;let d=!1,g=t.queries.get(s);if(g||(d=!0,g=new Ja),d)try{g.Iu=yield t.onListen(s)}catch(w){const R=Bu(w,`Initialization of query '${hu(e.query)}' failed`);return void e.onError(R)}t.queries.set(s,g),g.listeners.push(e),e.Eu(t.onlineState),g.Iu&&e.Au(g.Iu)&&sf(t)}),lp.apply(this,arguments)}function nf(i,e){return rf.apply(this,arguments)}function rf(){return rf=(0,Ie.Z)(function*(i,e){const t=P(i),s=e.query;let d=!1;const g=t.queries.get(s);if(g){const w=g.listeners.indexOf(e);w>=0&&(g.listeners.splice(w,1),d=0===g.listeners.length)}if(d)return t.queries.delete(s),t.onUnlisten(s)}),rf.apply(this,arguments)}function ym(i,e){const t=P(i);let s=!1;for(const d of e){const w=t.queries.get(d.query);if(w){for(const R of w.listeners)R.Au(d)&&(s=!0);w.Iu=d}}s&&sf(t)}function cp(i,e,t){const s=P(i),d=s.queries.get(e);if(d)for(const g of d.listeners)g.onError(t);s.queries.delete(e)}function sf(i){i.Tu.forEach(e=>{e.next()})}class af{constructor(e,t,s){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=s||{}}Au(e){if(!this.options.includeMetadataChanges){const s=[];for(const d of e.docChanges)3!==d.type&&s.push(d);e=new Sc(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Sc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class _m{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class wy{constructor(e){this.wt=e}Wi(e){return oo(this.wt,e)}zi(e){return e.metadata.exists?Y(this.wt,e.document,!1):qr.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return ki(e)}}class dp{constructor(e,t,s){this.xu=e,this.localStore=t,this.wt=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=vm(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const s=nr.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,s=new wy(this.wt);for(const d of e)if(d.metadata.queries){const g=s.Wi(d.metadata.name);for(const w of d.metadata.queries){const R=(t.get(w)||$n()).add(g);t.set(w,R)}}return t}complete(){var e=this;return(0,Ie.Z)(function*(){const t=yield function Gh(i,e,t,s){return dm.apply(this,arguments)}(e.localStore,new wy(e.wt),e.documents,e.xu.id),s=e.ku(e.documents);for(const d of e.queries)yield r_(e.localStore,d,s.get(d.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Mu:t}})()}}function vm(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class _g{constructor(e){this.key=e}}class wm{constructor(e){this.key=e}}class Em{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=$n(),this.mutatedKeys=$n(),this.Lu=Ro(e),this.Uu=new Qa(this.Lu)}get qu(){return this.Fu}Ku(e,t){const s=t?t.Gu:new mm,d=t?t.Uu:this.Uu;let g=t?t.mutatedKeys:this.mutatedKeys,w=d,R=!1;const B="F"===this.query.limitType&&d.size===this.query.limit?d.last():null,G="L"===this.query.limitType&&d.size===this.query.limit?d.first():null;if(e.inorderTraversal((ee,fe)=>{const qe=d.get(ee),ct=bl(this.query,fe)?fe:null,Et=!!qe&&this.mutatedKeys.has(qe.key),zt=!!ct&&(ct.hasLocalMutations||this.mutatedKeys.has(ct.key)&&ct.hasCommittedMutations);let gn=!1;qe&&ct?qe.data.isEqual(ct.data)?Et!==zt&&(s.track({type:3,doc:ct}),gn=!0):this.Qu(qe,ct)||(s.track({type:2,doc:ct}),gn=!0,(B&&this.Lu(ct,B)>0||G&&this.Lu(ct,G)<0)&&(R=!0)):!qe&&ct?(s.track({type:0,doc:ct}),gn=!0):qe&&!ct&&(s.track({type:1,doc:qe}),gn=!0,(B||G)&&(R=!0)),gn&&(ct?(w=w.add(ct),g=zt?g.add(ee):g.delete(ee)):(w=w.delete(ee),g=g.delete(ee)))}),null!==this.query.limit)for(;w.size>this.query.limit;){const ee="F"===this.query.limitType?w.last():w.first();w=w.delete(ee.key),g=g.delete(ee.key),s.track({type:1,doc:ee})}return{Uu:w,Gu:s,Oi:R,mutatedKeys:g}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const d=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const g=e.Gu.pu();g.sort((G,ee)=>function(fe,qe){const ct=Et=>{switch(Et){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return A()}};return ct(fe)-ct(qe)}(G.type,ee.type)||this.Lu(G.doc,ee.doc)),this.ju(s);const w=t?this.Wu():[],R=0===this.Bu.size&&this.current?1:0,B=R!==this.$u;return this.$u=R,0!==g.length||B?{snapshot:new Sc(this.query,e.Uu,d,g,e.mutatedKeys,0===R,B,!1),zu:w}:{zu:w}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new mm,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=$n(),this.Uu.forEach(s=>{this.Hu(s.key)&&(this.Bu=this.Bu.add(s.key))});const t=[];return e.forEach(s=>{this.Bu.has(s)||t.push(new wm(s))}),this.Bu.forEach(s=>{e.has(s)||t.push(new _g(s))}),t}Ju(e){this.Fu=e.ji,this.Bu=$n();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return Sc.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class hp{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class Sa{constructor(e){this.key=e,this.Xu=!1}}class uf{constructor(e,t,s,d,g,w){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=d,this.currentUser=g,this.maxConcurrentLimboResolutions=w,this.Zu={},this.tc=new Xn(R=>$p(R),jc),this.ec=new Map,this.nc=new Set,this.sc=new fr(kt.comparator),this.ic=new Map,this.rc=new Qd,this.oc={},this.uc=new Map,this.cc=Rl.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function Ll(i,e){return lf.apply(this,arguments)}function lf(){return lf=(0,Ie.Z)(function*(i,e){const t=xa(i);let s,d;const g=t.tc.get(e);if(g)s=g.targetId,t.sharedClientState.addLocalQueryTarget(s),d=g.view.Yu();else{const w=yield Ec(t.localStore,Jo(e));t.isPrimaryClient&&bc(t.remoteStore,w);const R=t.sharedClientState.addLocalQueryTarget(w.targetId);s=w.targetId,d=yield Fi(t,e,s,"current"===R)}return d}),lf.apply(this,arguments)}function Fi(i,e,t,s){return Ac.apply(this,arguments)}function Ac(){return Ac=(0,Ie.Z)(function*(i,e,t,s){i.hc=(ee,fe,qe)=>{return(ct=(0,Ie.Z)(function*(Et,zt,gn,jr){let Wi=zt.view.Ku(gn);Wi.Oi&&(Wi=yield Xd(Et.localStore,zt.query,!1).then(({documents:Ki})=>zt.view.Ku(Ki,Wi)));const pi=jr&&jr.targetChanges.get(zt.targetId),zi=zt.view.applyChanges(Wi,Et.isPrimaryClient,pi);return Rc(Et,zt.targetId,zi.zu),zi.snapshot}),function(Et,zt,gn,jr){return ct.apply(this,arguments)})(i,ee,fe,qe);var ct};const d=yield Xd(i.localStore,e,!0),g=new Em(e,d.ji),w=g.Ku(d.documents),R=nl.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==i.onlineState),B=g.applyChanges(w,i.isPrimaryClient,R);Rc(i,t,B.zu);const G=new hp(e,t,g);return i.tc.set(e,G),i.ec.has(t)?i.ec.get(t).push(e):i.ec.set(t,[e]),B.snapshot}),Ac.apply(this,arguments)}function Ey(i,e){return cf.apply(this,arguments)}function cf(){return cf=(0,Ie.Z)(function*(i,e){const t=P(i),s=t.tc.get(e),d=t.ec.get(s.targetId);if(d.length>1)return t.ec.set(s.targetId,d.filter(g=>!jc(g,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield Ol(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),pd(t.remoteStore,s.targetId),wu(t,s.targetId)}).catch($s))):(wu(t,s.targetId),yield Ol(t.localStore,s.targetId,!0))}),cf.apply(this,arguments)}function vg(){return vg=(0,Ie.Z)(function*(i,e,t){const s=vp(i);try{const d=yield function(g,w){const R=P(g),B=Or.now(),G=w.reduce((qe,ct)=>qe.add(ct.key),$n());let ee,fe;return R.persistence.runTransaction("Locally write mutations","readwrite",qe=>{let ct=Ss(),Et=$n();return R.Ui.getEntries(qe,G).next(zt=>{ct=zt,ct.forEach((gn,jr)=>{jr.isValidDocument()||(Et=Et.add(gn))})}).next(()=>R.localDocuments.getOverlayedDocuments(qe,ct)).next(zt=>{ee=zt;const gn=[];for(const jr of w){const Wi=Zc(jr,ee.get(jr.key).overlayedDocument);null!=Wi&&gn.push(new Ou(jr.key,Wi,Ch(Wi.value.mapValue),di.exists(!0)))}return R.mutationQueue.addMutationBatch(qe,B,gn,w)}).next(zt=>{fe=zt;const gn=zt.applyToLocalDocumentSet(ee,Et);return R.documentOverlayCache.saveOverlays(qe,zt.batchId,gn)})}).then(()=>({batchId:fe.batchId,changes:so(ee)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(d.batchId),function(g,w,R){let B=g.oc[g.currentUser.toKey()];B||(B=new fr(ln)),B=B.insert(w,R),g.oc[g.currentUser.toKey()]=B}(s,d.batchId,t),yield ju(s,d.changes),yield uh(s.remoteStore)}catch(d){const g=Bu(d,"Failed to persist write");t.reject(g)}}),vg.apply(this,arguments)}function Im(i,e){return bm.apply(this,arguments)}function bm(){return bm=(0,Ie.Z)(function*(i,e){const t=P(i);try{const s=yield cd(t.localStore,e);e.targetChanges.forEach((d,g)=>{const w=t.ic.get(g);w&&(T(d.addedDocuments.size+d.modifiedDocuments.size+d.removedDocuments.size<=1),d.addedDocuments.size>0?w.Xu=!0:d.modifiedDocuments.size>0?T(w.Xu):d.removedDocuments.size>0&&(T(w.Xu),w.Xu=!1))}),yield ju(t,s,e)}catch(s){yield $s(s)}}),bm.apply(this,arguments)}function df(i,e,t){const s=P(i);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const d=[];s.tc.forEach((g,w)=>{const R=w.view.Eu(e);R.snapshot&&d.push(R.snapshot)}),function(g,w){const R=P(g);R.onlineState=w;let B=!1;R.queries.forEach((G,ee)=>{for(const fe of ee.listeners)fe.Eu(w)&&(B=!0)}),B&&sf(R)}(s.eventManager,e),d.length&&s.Zu.Go(d),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function wg(i,e,t){return Eg.apply(this,arguments)}function Eg(){return Eg=(0,Ie.Z)(function*(i,e,t){const s=P(i);s.sharedClientState.updateQueryState(e,"rejected",t);const d=s.ic.get(e),g=d&&d.key;if(g){let w=new fr(kt.comparator);w=w.insert(g,qr.newNoDocument(g,yn.min()));const R=$n().add(g),B=new ir(yn.min(),new Map,new Ln(ln),w,R);yield Im(s,B),s.sc=s.sc.remove(g),s.ic.delete(e),gp(s)}else yield Ol(s.localStore,e,!1).then(()=>wu(s,e,t)).catch($s)}),Eg.apply(this,arguments)}function Ig(i,e){return bg.apply(this,arguments)}function bg(){return bg=(0,Ie.Z)(function*(i,e){const t=P(i),s=e.batch.batchId;try{const d=yield ld(t.localStore,e);_d(t,s,null),pp(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield ju(t,d)}catch(d){yield $s(d)}}),bg.apply(this,arguments)}function fp(i,e,t){return ch.apply(this,arguments)}function ch(){return ch=(0,Ie.Z)(function*(i,e,t){const s=P(i);try{const d=yield function(g,w){const R=P(g);return R.persistence.runTransaction("Reject batch","readwrite-primary",B=>{let G;return R.mutationQueue.lookupMutationBatch(B,w).next(ee=>(T(null!==ee),G=ee.keys(),R.mutationQueue.removeMutationBatch(B,ee))).next(()=>R.mutationQueue.performConsistencyCheck(B)).next(()=>R.documentOverlayCache.removeOverlaysForBatchId(B,G,w)).next(()=>R.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(B,G)).next(()=>R.localDocuments.getDocuments(B,G))})}(s.localStore,e);_d(s,e,t),pp(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield ju(s,d)}catch(d){yield $s(d)}}),ch.apply(this,arguments)}function ff(){return ff=(0,Ie.Z)(function*(i,e){const t=P(i);dl(t.remoteStore)||wt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(g){const w=P(g);return w.persistence.runTransaction("Get highest unacknowledged batch id","readonly",R=>w.mutationQueue.getHighestUnacknowledgedBatchId(R))}(t.localStore);if(-1===s)return void e.resolve();const d=t.uc.get(s)||[];d.push(e),t.uc.set(s,d)}catch(s){const d=Bu(s,"Initialization of waitForPendingWrites() operation failed");e.reject(d)}}),ff.apply(this,arguments)}function pp(i,e){(i.uc.get(e)||[]).forEach(t=>{t.resolve()}),i.uc.delete(e)}function _d(i,e,t){const s=P(i);let d=s.oc[s.currentUser.toKey()];if(d){const g=d.get(e);g&&(t?g.reject(t):g.resolve(),d=d.remove(e)),s.oc[s.currentUser.toKey()]=d}}function wu(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.ec.get(e))i.tc.delete(s),t&&i.Zu.lc(s,t);i.ec.delete(e),i.isPrimaryClient&&i.rc.us(e).forEach(s=>{i.rc.containsKey(s)||Cg(i,s)})}function Cg(i,e){i.nc.delete(e.path.canonicalString());const t=i.sc.get(e);null!==t&&(pd(i.remoteStore,t),i.sc=i.sc.remove(e),i.ic.delete(t),gp(i))}function Rc(i,e,t){for(const s of t)s instanceof _g?(i.rc.addReference(s.key,e),Vu(i,s)):s instanceof wm?(wt("SyncEngine","Document no longer in limbo: "+s.key),i.rc.removeReference(s.key,e),i.rc.containsKey(s.key)||Cg(i,s.key)):A()}function Vu(i,e){const t=e.key,s=t.path.canonicalString();i.sc.get(t)||i.nc.has(s)||(wt("SyncEngine","New document in limbo: "+t),i.nc.add(s),gp(i))}function gp(i){for(;i.nc.size>0&&i.sc.size<i.maxConcurrentLimboResolutions;){const e=i.nc.values().next().value;i.nc.delete(e);const t=new kt(nr.fromString(e)),s=i.cc.next();i.ic.set(s,new Sa(t)),i.sc=i.sc.insert(t,s),bc(i.remoteStore,new ao(Jo(Il(t.path)),s,2,Ds.ot))}}function ju(i,e,t){return Eu.apply(this,arguments)}function Eu(){return Eu=(0,Ie.Z)(function*(i,e,t){const s=P(i),d=[],g=[],w=[];var R;s.tc.isEmpty()||(s.tc.forEach((R,B)=>{w.push(s.hc(B,e,t).then(G=>{if(G){s.isPrimaryClient&&s.sharedClientState.updateQueryState(B.targetId,G.fromCache?"not-current":"current"),d.push(G);const ee=sg.Vi(B.targetId,G);g.push(ee)}}))}),yield Promise.all(w),s.Zu.Go(d),yield(R=(0,Ie.Z)(function*(B,G){const ee=P(B);try{yield ee.persistence.runTransaction("notifyLocalViewChanges","readwrite",fe=>Ue.forEach(G,qe=>Ue.forEach(qe.Pi,ct=>ee.persistence.referenceDelegate.addReference(fe,qe.targetId,ct)).next(()=>Ue.forEach(qe.vi,ct=>ee.persistence.referenceDelegate.removeReference(fe,qe.targetId,ct)))))}catch(fe){if(!Ts(fe))throw fe;wt("LocalStore","Failed to update sequence numbers: "+fe)}for(const fe of G){const qe=fe.targetId;if(!fe.fromCache){const ct=ee.$i.get(qe),zt=ct.withLastLimboFreeSnapshotVersion(ct.snapshotVersion);ee.$i=ee.$i.insert(qe,zt)}}}),function(B,G){return R.apply(this,arguments)})(s.localStore,g))}),Eu.apply(this,arguments)}function pf(i,e){return Ws.apply(this,arguments)}function Ws(){return Ws=(0,Ie.Z)(function*(i,e){const t=P(i);if(!t.currentUser.isEqual(e)){wt("SyncEngine","User change. New user:",e.toKey());const s=yield Kf(t.localStore,e);t.currentUser=e,(d=t).uc.forEach(w=>{w.forEach(R=>{R.reject(new j(N.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),d.uc.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield ju(t,s.Ki)}var d}),Ws.apply(this,arguments)}function vd(i,e){const t=P(i),s=t.ic.get(e);if(s&&s.Xu)return $n().add(s.key);{let d=$n();const g=t.ec.get(e);if(!g)return d;for(const w of g){const R=t.tc.get(w);d=d.unionWith(R.view.qu)}return d}}function mp(i,e){return Aa.apply(this,arguments)}function Aa(){return Aa=(0,Ie.Z)(function*(i,e){const t=P(i),s=yield Xd(t.localStore,e.query,!0),d=e.view.Ju(s);return t.isPrimaryClient&&Rc(t,e.targetId,d.zu),d}),Aa.apply(this,arguments)}function Tg(i,e){return Mc.apply(this,arguments)}function Mc(){return Mc=(0,Ie.Z)(function*(i,e){const t=P(i);return Fo(t.localStore,e).then(s=>ju(t,s))}),Mc.apply(this,arguments)}function dh(i,e,t,s){return Pc.apply(this,arguments)}function Pc(){return Pc=(0,Ie.Z)(function*(i,e,t,s){const d=P(i),g=yield function(w,R){const B=P(w),G=P(B.mutationQueue);return B.persistence.runTransaction("Lookup mutation documents","readonly",ee=>G.yn(ee,R).next(fe=>fe?B.localDocuments.getDocuments(ee,fe):Ue.resolve(null)))}(d.localStore,e);var R;null!==g?("pending"===t?yield uh(d.remoteStore):"acknowledged"===t||"rejected"===t?(_d(d,e,s||null),pp(d,e),R=e,P(P(d.localStore).mutationQueue).In(R)):A(),yield ju(d,g)):wt("SyncEngine","Cannot apply mutation batch with id: "+e)}),Pc.apply(this,arguments)}function Nc(){return Nc=(0,Ie.Z)(function*(i,e){const t=P(i);if(xa(t),vp(t),!0===e&&!0!==t.ac){const s=t.sharedClientState.getAllActiveQueryTargets(),d=yield wd(t,s.toArray());t.ac=!0,yield Cc(t.remoteStore,!0);for(const g of d)bc(t.remoteStore,g)}else if(!1===e&&!1!==t.ac){const s=[];let d=Promise.resolve();t.ec.forEach((g,w)=>{t.sharedClientState.isLocalQueryTarget(w)?s.push(w):d=d.then(()=>(wu(t,w),Ol(t.localStore,w,!0))),pd(t.remoteStore,w)}),yield d,yield wd(t,s),function(g){const w=P(g);w.ic.forEach((R,B)=>{pd(w.remoteStore,B)}),w.rc.cs(),w.ic=new Map,w.sc=new fr(kt.comparator)}(t),t.ac=!1,yield Cc(t.remoteStore,!1)}}),Nc.apply(this,arguments)}function wd(i,e,t){return Oc.apply(this,arguments)}function Oc(){return Oc=(0,Ie.Z)(function*(i,e,t){const s=P(i),d=[],g=[];for(const w of e){let R;const B=s.ec.get(w);if(B&&0!==B.length){R=yield Ec(s.localStore,Jo(B[0]));for(const G of B){const ee=s.tc.get(G),fe=yield mp(s,ee);fe.snapshot&&g.push(fe.snapshot)}}else{const G=yield Yf(s.localStore,w);R=yield Ec(s.localStore,G),yield Fi(s,Ed(G),w,!1)}d.push(R)}return s.Zu.Go(g),d}),Oc.apply(this,arguments)}function Ed(i){return Sh(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function fh(i){const e=P(i);return P(P(e.localStore).persistence).Ri()}function Cm(i,e,t,s){return yp.apply(this,arguments)}function yp(){return yp=(0,Ie.Z)(function*(i,e,t,s){const d=P(i);if(d.ac)return void wt("SyncEngine","Ignoring unexpected query state notification.");const g=d.ec.get(e);if(g&&g.length>0)switch(t){case"current":case"not-current":{const w=yield Fo(d.localStore,nc(g[0])),R=ir.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield ju(d,w,R);break}case"rejected":yield Ol(d.localStore,e,!0),wu(d,e,s);break;default:A()}}),yp.apply(this,arguments)}function Tm(i,e,t){return _p.apply(this,arguments)}function _p(){return _p=(0,Ie.Z)(function*(i,e,t){const s=xa(i);if(s.ac){for(const d of e){if(s.ec.has(d)){wt("SyncEngine","Adding an already active target "+d);continue}const g=yield Yf(s.localStore,d),w=yield Ec(s.localStore,g);yield Fi(s,Ed(g),w.targetId,!1),bc(s.remoteStore,w)}for(const d of t)s.ec.has(d)&&(yield Ol(s.localStore,d,!1).then(()=>{pd(s.remoteStore,d),wu(s,d)}).catch($s))}}),_p.apply(this,arguments)}function xa(i){const e=P(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Im.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vd.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wg.bind(null,e),e.Zu.Go=ym.bind(null,e.eventManager),e.Zu.lc=cp.bind(null,e.eventManager),e}function vp(i){const e=P(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ig.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fp.bind(null,e),e}class Ep{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ie.Z)(function*(){t.wt=Yh(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return zf(this.persistence,new og,e.initialUser,this.wt)}_c(e){return new Hh(qf.Ms,this.wt)}dc(e){return new Kh}terminate(){var e=this;return(0,Ie.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Dg extends Ep{constructor(e,t,s){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,Ie.Z)(function*(){yield t().call(s,e),yield s.yc.initialize(s,e),yield vp(s.yc.syncEngine),yield uh(s.yc.remoteStore),yield s.persistence.ci(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return zf(this.persistence,new og,e.initialUser,this.wt)}mc(e,t){return new eg(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const s=new Sr(t,this.persistence);return new ga(e.asyncQueue,s)}_c(e){const t=wc(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?ko.withCacheSize(this.cacheSizeBytes):ko.DEFAULT;return new $h(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,Ta(),hd(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new Kh}}class Dm extends Dg{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,Ie.Z)(function*(){yield t().call(s,e);const d=s.yc.syncEngine;s.sharedClientState instanceof zh&&(s.sharedClientState.syncEngine={kr:dh.bind(null,d),Or:Cm.bind(null,d),Mr:Tm.bind(null,d),Ri:fh.bind(null,d),Nr:Tg.bind(null,d)},yield s.sharedClientState.start()),yield s.persistence.ci(function(){var g=(0,Ie.Z)(function*(w){yield function hh(i,e){return Nc.apply(this,arguments)}(s.yc.syncEngine,w),s.gcScheduler&&(w&&!s.gcScheduler.started?s.gcScheduler.start():w||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(w&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():w||s.indexBackfillerScheduler.stop())});return function(w){return g.apply(this,arguments)}}())})()}dc(e){const t=Ta();if(!zh.V(t))throw new j(N.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=wc(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new zh(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class Ip{initialize(e,t){var s=this;return(0,Ie.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=d=>df(s.syncEngine,d,1),s.remoteStore.remoteSyncer.handleCredentialChange=pf.bind(null,s.syncEngine),yield Cc(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new yg}createDatastore(e){const t=Yh(e.databaseInfo.databaseId),s=new my(e.databaseInfo);return new _y(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,d=e.asyncQueue,g=R=>df(this.syncEngine,R,0),w=Ic.V()?new Ic:new tp,new nh(t,s,d,g,w);var t,s,d,g,w}createSyncEngine(e,t){return function(s,d,g,w,R,B,G){const ee=new uf(s,d,g,w,R,B);return G&&(ee.ac=!0),ee}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ie.Z)(function*(t){const s=P(t);wt("RemoteStore","RemoteStore shutting down."),s.lu.add(5),yield Ka(s),s.du.shutdown(),s._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Sm(i,e=10240){let t=0;return{read:()=>(0,Ie.Z)(function*(){if(t<i.byteLength){const s={value:i.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,Ie.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class bp{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Am{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new re,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(s=>{s&&s.Cu()?this.metadata.resolve(s.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==s?void 0:s.payload)}`))},s=>this.metadata.reject(s))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,Ie.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,Ie.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.bc();if(null===t)return null;const s=e.Ac.decode(t),d=Number(s);isNaN(d)&&e.Pc(`length string (${s}) is not valid number`);const g=yield e.vc(d);return new _m(JSON.parse(g),t.length+d)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,Ie.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}vc(e){var t=this;return(0,Ie.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const s=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class xm{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ie.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new j(N.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(d=(0,Ie.Z)(function*(g,w){const R=P(g),B=m(R.wt)+"/documents",G={documents:w.map(ct=>dc(R.wt,ct))},ee=yield R.ao("BatchGetDocuments",B,G),fe=new Map;ee.forEach(ct=>{const Et=function be(i,e){return"found"in e?function(t,s){T(!!s.found);const d=oo(t,s.found.name),g=ki(s.found.updateTime),w=new io({mapValue:{fields:s.found.fields}});return qr.newFoundDocument(d,g,w)}(i,e):"missing"in e?function(t,s){T(!!s.missing),T(!!s.readTime);const d=oo(t,s.missing),g=ki(s.readTime);return qr.newNoDocument(d,g)}(i,e):A()}(R.wt,ct);fe.set(Et.key.toString(),Et)});const qe=[];return w.forEach(ct=>{const Et=fe.get(ct.toString());T(!!Et),qe.push(Et)}),qe}),function(g,w){return d.apply(this,arguments)})(t.datastore,e);var d;return s.forEach(d=>t.recordVersion(d)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new ku(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ie.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,d)=>{const g=kt.fromPath(d);e.mutations.push(new Gc(g,e.precondition(g)))}),yield(s=(0,Ie.Z)(function*(d,g){const w=P(d),R=m(w.wt)+"/documents",B={writes:g.map(G=>St(w.wt,G))};yield w.ro("Commit",R,B)}),function(d,g){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw A();t=yn.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new j(N.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?di.updateTime(t):di.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(yn.min()))throw new j(N.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return di.updateTime(t)}return di.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Iy{constructor(e,t,s,d,g){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=d,this.deferred=g,this.Dc=s.maxAttempts,this.So=new fd(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,Ie.Z)(function*(){const t=new xm(e.datastore),s=e.xc(t);s&&s.then(d=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(d)}).catch(g=>{e.Nc(g)}))}).catch(d=>{e.Nc(d)})}))}xc(e){try{const t=this.updateFunction(e);return!pt(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Mo(t)}return!1}}class Rm{constructor(e,t,s,d){var g=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=d,this.user=ni.UNAUTHENTICATED,this.clientId=lu.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var w=(0,Ie.Z)(function*(R){wt("FirestoreClient","Received user=",R.uid),yield g.authCredentialListener(R),g.user=R});return function(R){return w.apply(this,arguments)}}()),this.appCheckCredentials.start(s,w=>(wt("FirestoreClient","Received new app check token=",w),this.appCheckCredentialListener(w,this.user)))}getConfiguration(){var e=this;return(0,Ie.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new j(N.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new re;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const d=Bu(s,"Failed to shutdown persistence");t.reject(d)}})),t.promise}}function by(i,e){return Cp.apply(this,arguments)}function Cp(){return Cp=(0,Ie.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),wt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let s=t.initialUser;i.setCredentialChangeListener(function(){var d=(0,Ie.Z)(function*(g){s.isEqual(g)||(yield Kf(e.localStore,g),s=g)});return function(g){return d.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),Cp.apply(this,arguments)}function Mm(i,e){return Sg.apply(this,arguments)}function Sg(){return Sg=(0,Ie.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield Pm(i);wt("FirestoreClient","Initializing OnlineComponentProvider");const s=yield i.getConfiguration();yield e.initialize(t,s),i.setCredentialChangeListener(d=>mg(e.remoteStore,d)),i.setAppCheckTokenChangeListener((d,g)=>mg(e.remoteStore,g)),i.onlineComponents=e}),Sg.apply(this,arguments)}function Pm(i){return Ag.apply(this,arguments)}function Ag(){return Ag=(0,Ie.Z)(function*(i){return i.offlineComponents||(wt("FirestoreClient","Using default OfflineComponentProvider"),yield by(i,new Ep)),i.offlineComponents}),Ag.apply(this,arguments)}function ph(i){return gf.apply(this,arguments)}function gf(){return gf=(0,Ie.Z)(function*(i){return i.onlineComponents||(wt("FirestoreClient","Using default OnlineComponentProvider"),yield Mm(i,new Ip)),i.onlineComponents}),gf.apply(this,arguments)}function Nm(i){return Pm(i).then(e=>e.persistence)}function Om(i){return Pm(i).then(e=>e.localStore)}function Cy(i){return ph(i).then(e=>e.remoteStore)}function Ty(i){return ph(i).then(e=>e.syncEngine)}function mf(i){return Tp.apply(this,arguments)}function Tp(){return Tp=(0,Ie.Z)(function*(i){const e=yield ph(i),t=e.eventManager;return t.onListen=Ll.bind(null,e.syncEngine),t.onUnlisten=Ey.bind(null,e.syncEngine),t}),Tp.apply(this,arguments)}function km(i,e,t={}){const s=new re;return i.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(d,g,w,R,B){const G=new bp({next:fe=>{g.enqueueAndForget(()=>nf(d,ee));const qe=fe.docs.has(w);!qe&&fe.fromCache?B.reject(new j(N.UNAVAILABLE,"Failed to get document because the client is offline.")):qe&&fe.fromCache&&R&&"server"===R.source?B.reject(new j(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):B.resolve(fe)},error:fe=>B.reject(fe)}),ee=new af(Il(w.path),G,{includeMetadataChanges:!0,Du:!0});return Fl(d,ee)}(yield mf(i),i.asyncQueue,e,t,s)})),s.promise}function Lm(i,e,t={}){const s=new re;return i.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(d,g,w,R,B){const G=new bp({next:fe=>{g.enqueueAndForget(()=>nf(d,ee)),fe.fromCache&&"server"===R.source?B.reject(new j(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):B.resolve(fe)},error:fe=>B.reject(fe)}),ee=new af(w,G,{includeMetadataChanges:!0,Du:!0});return Fl(d,ee)}(yield mf(i),i.asyncQueue,e,t,s)})),s.promise}const gh=new Map;function xg(i,e,t){if(!t)throw new j(N.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Bm(i,e,t,s){if(!0===e&&!0===s)throw new j(N.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function Vm(i){if(!kt.isDocumentKey(i))throw new j(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function jm(i){if(kt.isDocumentKey(i))throw new j(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function yf(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":A()}function vr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new j(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=yf(i);throw new j(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function Dp(i,e){if(e<=0)throw new j(N.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class Sp{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new j(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new j(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Bm("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kc{constructor(e,t,s){this._authCredentials=t,this._appCheckCredentials=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sp({}),this._settingsFrozen=!1,e instanceof Le?this._databaseId=e:(this._app=e,this._databaseId=function(d){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new j(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Le(d.options.projectId)}(e))}get app(){if(!this._app)throw new j(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new j(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sp(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new et;switch(t.type){case"gapi":const s=t.client;return T(!("object"!=typeof s||null===s||!s.auth||!s.auth.getAuthHeaderValueForFirstParty)),new ar(s,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new j(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=gh.get(e);t&&(wt("ComponentProvider","Removing Datastore"),gh.delete(e),t.terminate())}(this),Promise.resolve()}}class kr{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kr(this.firestore,e,this._key)}}class Lo{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Lo(this.firestore,e,this._query)}}class hl extends Lo{constructor(e,t,s){super(e,t,Il(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kr(this.firestore,null,new kt(e))}withConverter(e){return new hl(this.firestore,e,this._path)}}function mh(i,e,...t){if(i=(0,je.m9)(i),xg("collection","path",e),i instanceof kc){const s=nr.fromString(e,...t);return jm(s),new hl(i,null,s)}{if(!(i instanceof kr||i instanceof hl))throw new j(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(nr.fromString(e,...t));return jm(s),new hl(i.firestore,null,s)}}function bd(i,e,...t){if(i=(0,je.m9)(i),1===arguments.length&&(e=lu.I()),xg("doc","path",e),i instanceof kc){const s=nr.fromString(e,...t);return Vm(s),new kr(i,null,new kt(s))}{if(!(i instanceof kr||i instanceof hl))throw new j(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(nr.fromString(e,...t));return Vm(s),new kr(i.firestore,i instanceof hl?i.converter:null,new kt(s))}}function _f(i,e){return i=(0,je.m9)(i),e=(0,je.m9)(e),(i instanceof kr||i instanceof hl)&&(e instanceof kr||e instanceof hl)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function Rg(i,e){return i=(0,je.m9)(i),e=(0,je.m9)(e),i instanceof Lo&&e instanceof Lo&&i.firestore===e.firestore&&jc(i._query,e._query)&&i.converter===e.converter}class Ap{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new fd(this,"async_queue_retry"),this.Kc=()=>{const t=hd();t&&wt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=hd();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=hd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new re;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}jc(){var e=this;return(0,Ie.Z)(function*(){if(0!==e.Mc.length){try{yield e.Mc[0](),e.Mc.shift(),e.So.reset()}catch(t){if(!Ts(t))throw t;wt("AsyncQueue","Operation failed with retryable error: "+t)}e.Mc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Oc.then(()=>(this.Lc=!0,e().catch(s=>{throw this.Bc=s,this.Lc=!1,_r("INTERNAL UNHANDLED ERROR: ",function(g){let w=g.message||"";return g.stack&&(w=g.stack.includes(g.message)?g.stack:g.message+"\n"+g.stack),w}(s)),s}).then(s=>(this.Lc=!1,s))));return this.Oc=t,t}enqueueAfterDelay(e,t,s){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const d=Dc.createAndSchedule(this,e,t,s,g=>this.Wc(g));return this.$c.push(d),d}Gc(){this.Bc&&A()}verifyOperationInProgress(){}zc(){var e=this;return(0,Ie.Z)(function*(){let t;do{t=e.Oc,yield t}while(t!==e.Oc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function yh(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const d of["next","error","complete"])if(d in s&&"function"==typeof s[d])return!0;return!1}(i)}class Mg{constructor(){this._progressObserver={},this._taskCompletionResolver=new re,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Li extends kc{constructor(e,t,s){super(e,t,s),this.type="firestore",this._queue=new Ap,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Zm(this),this._firestoreClient.terminate()}}function _s(i){return i._firestoreClient||Zm(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Zm(i){var e;const t=i._freezeSettings(),s=(g=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Pe(i._databaseId,g,i._persistenceKey,(R=t).host,R.ssl,R.experimentalForceLongPolling,R.experimentalAutoDetectLongPolling,R.useFetchStreams));var g,R;i._firestoreClient=new Rm(i._authCredentials,i._appCheckCredentials,i._queue,s)}function Og(i,e,t){const s=new re;return i.asyncQueue.enqueue((0,Ie.Z)(function*(){try{yield by(i,t),yield Mm(i,e),s.resolve()}catch(d){if(!("FirebaseError"===(g=d).name?g.code===N.FAILED_PRECONDITION||g.code===N.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&g instanceof DOMException)||22===g.code||20===g.code||11===g.code))throw d;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+d),s.reject(d)}var g})).then(()=>s.promise)}function h(i){if(i._initialized||i._terminated)throw new j(N.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class _{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new j(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class M{constructor(e){this._byteString=e}static fromBase64String(e){try{return new M(Gi.fromBase64String(e))}catch(t){throw new j(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new M(Gi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ${constructor(e){this._methodName=e}}class z{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new j(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new j(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ln(this._lat,e._lat)||ln(this._long,e._long)}}const ne=/^__.*__$/;class Ne{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new Ou(e,this.data,this.fieldMask,t,this.fieldTransforms):new ac(e,this.data,t,this.fieldTransforms)}}class Fe{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ou(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Ye(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw A()}}class Mt{constructor(e,t,s,d,g,w){this.settings=e,this.databaseId=t,this.wt=s,this.ignoreUndefinedProperties=d,void 0===g&&this.Xc(),this.fieldTransforms=g||[],this.fieldMask=w||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new Mt(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),d=this.ta({path:s,na:!1});return d.sa(e),d}ia(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),d=this.ta({path:s,na:!1});return d.Xc(),d}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return zm(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(Ye(this.Zc)&&ne.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class Vt{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=s||Yh(e)}aa(e,t,s,d=!1){return new Mt({Zc:e,methodName:t,ca:s,path:kn.emptyPath(),na:!1,ua:d},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function Cn(i){const e=i._freezeSettings(),t=Yh(i._databaseId);return new Vt(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Wn(i,e,t,s,d,g={}){const w=i.aa(g.merge||g.mergeFields?2:0,e,t,d);_h("Data must be an object, but it was:",w,s);const R=Ry(s,w);let B,G;if(g.merge)B=new Jn(w.fieldMask),G=w.fieldTransforms;else if(g.mergeFields){const ee=[];for(const fe of g.mergeFields){const qe=Py(e,fe,t);if(!w.contains(qe))throw new j(N.INVALID_ARGUMENT,`Field '${qe}' is specified in your field mask but missing from your input data.`);Ny(ee,qe)||ee.push(qe)}B=new Jn(ee),G=w.fieldTransforms.filter(fe=>B.covers(fe.field))}else B=null,G=w.fieldTransforms;return new Ne(new io(R),B,G)}class vs extends ${_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vs}}function Rs(i,e,t){return new Mt({Zc:3,ca:e.settings.ca,methodName:i._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class fi extends ${_toFieldTransform(e){return new Hc(e.path,new wa)}isEqual(e){return e instanceof fi}}class zs extends ${constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=Rs(this,e,!0),s=this.ha.map(g=>Ef(g,t)),d=new fu(s);return new Hc(e.path,d)}isEqual(e){return this===e}}class Ui extends ${constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=Rs(this,e,!0),s=this.ha.map(g=>Ef(g,t)),d=new Rn(s);return new Hc(e.path,d)}isEqual(e){return this===e}}class Cd extends ${constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new Cl(e.wt,Hn(e.wt,this.la));return new Hc(e.path,t)}isEqual(e){return this===e}}function vf(i,e,t,s){const d=i.aa(1,e,t);_h("Data must be an object, but it was:",d,s);const g=[],w=io.empty();Qu(s,(B,G)=>{const ee=Fg(e,B,t);G=(0,je.m9)(G);const fe=d.ia(ee);if(G instanceof vs)g.push(ee);else{const qe=Ef(G,fe);null!=qe&&(g.push(ee),w.set(ee,qe))}});const R=new Jn(g);return new Fe(w,R,d.fieldTransforms)}function Td(i,e,t,s,d,g){const w=i.aa(1,e,t),R=[Py(e,s,t)],B=[d];if(g.length%2!=0)throw new j(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let qe=0;qe<g.length;qe+=2)R.push(Py(e,g[qe])),B.push(g[qe+1]);const G=[],ee=io.empty();for(let qe=R.length-1;qe>=0;--qe)if(!Ny(G,R[qe])){const ct=R[qe];let Et=B[qe];Et=(0,je.m9)(Et);const zt=w.ia(ct);if(Et instanceof vs)G.push(ct);else{const gn=Ef(Et,zt);null!=gn&&(G.push(ct),ee.set(ct,gn))}}const fe=new Jn(G);return new Fe(ee,fe,w.fieldTransforms)}function wf(i,e,t,s=!1){return Ef(t,i.aa(s?4:3,e))}function Ef(i,e){if(My(i=(0,je.m9)(i)))return _h("Unsupported field value:",e,i),Ry(i,e);if(i instanceof $)return function(t,s){if(!Ye(s.Zc))throw s.oa(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s.oa(`${t._methodName}() is not currently supported inside arrays`);const d=t._toFieldTransform(s);d&&s.fieldTransforms.push(d)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,s){const d=[];let g=0;for(const w of t){let R=Ef(w,s.ra(g));null==R&&(R={nullValue:"NULL_VALUE"}),d.push(R),g++}return{arrayValue:{values:d}}}(i,e)}return function(t,s){if(null===(t=(0,je.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Hn(s.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const d=Or.fromDate(t);return{timestampValue:Vr(s.wt,d)}}if(t instanceof Or){const d=new Or(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Vr(s.wt,d)}}if(t instanceof z)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof M)return{bytesValue:Jc(s.wt,t._byteString)};if(t instanceof kr){const d=s.databaseId,g=t.firestore._databaseId;if(!g.isEqual(d))throw s.oa(`Document reference is for database ${g.projectId}/${g.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:sl(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s.oa(`Unsupported field value: ${yf(t)}`)}(i,e)}function Ry(i,e){const t={};return ss(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qu(i,(s,d)=>{const g=Ef(d,e.ea(s));null!=g&&(t[s]=g)}),{mapValue:{fields:t}}}function My(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Or||i instanceof z||i instanceof M||i instanceof kr||i instanceof $)}function _h(i,e,t){if(!My(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=yf(t);throw e.oa("an object"===s?i+" a custom object":i+" "+s)}var s}function Py(i,e,t){if((e=(0,je.m9)(e))instanceof _)return e._internalPath;if("string"==typeof e)return Fg(i,e);throw zm("Field path arguments must be of type string or ",i,!1,void 0,t)}const G_=new RegExp("[~\\*/\\[\\]]");function Fg(i,e,t){if(e.search(G_)>=0)throw zm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new _(...e.split("."))._internalPath}catch(s){throw zm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function zm(i,e,t,s,d){const g=s&&!s.isEmpty(),w=void 0!==d;let R=`Function ${e}() called with invalid data`;t&&(R+=" (via `toFirestore()`)"),R+=". ";let B="";return(g||w)&&(B+=" (found",g&&(B+=` in field ${s}`),w&&(B+=` in document ${d}`),B+=")"),new j(N.INVALID_ARGUMENT,R+i+B)}function Ny(i,e){return i.some(t=>t.isEqual(e))}class Km{constructor(e,t,s,d,g){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=d,this._converter=g}get id(){return this._key.path.lastSegment()}get ref(){return new kr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new s_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(xp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class s_ extends Km{data(){return super.data()}}function xp(i,e){return"string"==typeof e?Fg(i,e):e instanceof _?e._internalPath:e._delegate._internalPath}class Ma{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Dd extends Km{constructor(e,t,s,d,g,w){super(e,t,s,d,w),this._firestore=e,this._firestoreImpl=e,this.metadata=g}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Lg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(xp("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class Lg extends Dd{data(e={}){return super.data(e)}}class ea{constructor(e,t,s,d){this._firestore=e,this._userDataWriter=t,this._snapshot=d,this.metadata=new Ma(d.hasPendingWrites,d.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Lg(this._firestore,this._userDataWriter,s.key,s,new Ma(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new j(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,d){if(s._snapshot.oldDocs.isEmpty()){let g=0;return s._snapshot.docChanges.map(w=>({type:"added",doc:new Lg(s._firestore,s._userDataWriter,w.doc.key,w.doc,new Ma(s._snapshot.mutatedKeys.has(w.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:g++}))}{let g=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(w=>d||3!==w.type).map(w=>{const R=new Lg(s._firestore,s._userDataWriter,w.doc.key,w.doc,new Ma(s._snapshot.mutatedKeys.has(w.doc.key),s._snapshot.fromCache),s.query.converter);let B=-1,G=-1;return 0!==w.type&&(B=g.indexOf(w.doc.key),g=g.delete(w.doc.key)),1!==w.type&&(g=g.add(w.doc),G=g.indexOf(w.doc.key)),{type:Ul(w.type),doc:R,oldIndex:B,newIndex:G}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Ul(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return A()}}function fl(i,e){return i instanceof Dd&&e instanceof Dd?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof ea&&e instanceof ea&&i._firestore===e._firestore&&Rg(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function Oy(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new j(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Rp{}function vh(i,...e){for(const t of e)i=t._apply(i);return i}class q_ extends Rp{constructor(e,t,s){super(),this.fa=e,this.da=t,this._a=s,this.type="where"}_apply(e){const t=Cn(e.firestore),s=function(d,g,w,R,B,G,ee){let fe;if(B.isKeyField()){if("array-contains"===G||"array-contains-any"===G)throw new j(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${G}' queries on documentId().`);if("in"===G||"not-in"===G){Ym(ee,G);const ct=[];for(const Et of ee)ct.push(Ly(R,d,Et));fe={arrayValue:{values:ct}}}else fe=Ly(R,d,ee)}else"in"!==G&&"not-in"!==G&&"array-contains-any"!==G||Ym(ee,G),fe=wf(w,"where",ee,"in"===G||"not-in"===G);const qe=Gs.create(B,G,fe);return function(ct,Et){if(Et.ht()){const gn=Af(ct);if(null!==gn&&!gn.isEqual(Et.field))throw new j(N.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${gn.toString()}' and '${Et.field.toString()}'`);const jr=Vc(ct);null!==jr&&Uy(0,Et.field,jr)}const zt=function(gn,jr){for(const Wi of gn.filters)if(jr.indexOf(Wi.op)>=0)return Wi.op;return null}(ct,function(gn){switch(gn){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Et.op));if(null!==zt)throw new j(N.INVALID_ARGUMENT,zt===Et.op?`Invalid query. You cannot use more than one '${Et.op.toString()}' filter.`:`Invalid query. You cannot use '${Et.op.toString()}' filters with '${zt.toString()}' filters.`)}(d,qe),qe}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new Lo(e.firestore,e.converter,function(d,g){const w=d.filters.concat([g]);return new Wa(d.path,d.collectionGroup,d.explicitOrderBy.slice(),w,d.limit,d.limitType,d.startAt,d.endAt)}(e._query,s))}}class z_ extends Rp{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(s,d,g){if(null!==s.startAt)throw new j(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new j(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const w=new El(d,g);return function(R,B){if(null===Vc(R)){const G=Af(R);null!==G&&Uy(0,G,B.field)}}(s,w),w}(e._query,this.fa,this.wa);return new Lo(e.firestore,e.converter,function(s,d){const g=s.explicitOrderBy.concat([d]);return new Wa(s.path,s.collectionGroup,g,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class Mp extends Rp{constructor(e,t,s){super(),this.type=e,this.ma=t,this.ga=s}_apply(e){return new Lo(e.firestore,e.converter,Ah(e._query,this.ma,this.ga))}}class a_ extends Rp{constructor(e,t,s){super(),this.type=e,this.ya=t,this.pa=s}_apply(e){const t=Fy(e,this.type,this.ya,this.pa);return new Lo(e.firestore,e.converter,(d=t,new Wa((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,d,s.endAt)));var s,d}}class Ug extends Rp{constructor(e,t,s){super(),this.type=e,this.ya=t,this.pa=s}_apply(e){const t=Fy(e,this.type,this.ya,this.pa);return new Lo(e.firestore,e.converter,(d=t,new Wa((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,d)));var s,d}}function Fy(i,e,t,s){if(t[0]=(0,je.m9)(t[0]),t[0]instanceof Km)return function(d,g,w,R,B){if(!R)throw new j(N.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${w}().`);const G=[];for(const ee of tl(d))if(ee.field.isKeyField())G.push(_o(g,R.key));else{const fe=R.data.field(ee.field);if(U(fe))throw new j(N.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ee.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===fe){const qe=ee.field.canonicalString();throw new j(N.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${qe}' (used as the orderBy) does not exist.`)}G.push(fe)}return new Qo(G,B)}(i._query,i.firestore._databaseId,e,t[0]._document,s);{const d=Cn(i.firestore);return function(g,w,R,B,G,ee){const fe=g.explicitOrderBy;if(G.length>fe.length)throw new j(N.INVALID_ARGUMENT,`Too many arguments provided to ${B}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const qe=[];for(let ct=0;ct<G.length;ct++){const Et=G[ct];if(fe[ct].field.isKeyField()){if("string"!=typeof Et)throw new j(N.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${B}(), but got a ${typeof Et}`);if(!tc(g)&&-1!==Et.indexOf("/"))throw new j(N.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${B}() must be a plain document ID, but '${Et}' contains a slash.`);const zt=g.path.child(nr.fromString(Et));if(!kt.isDocumentKey(zt))throw new j(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${B}() must result in a valid document path, but '${zt}' is not because it contains an odd number of segments.`);const gn=new kt(zt);qe.push(_o(w,gn))}else{const zt=wf(R,B,Et);qe.push(zt)}}return new Qo(qe,ee)}(i._query,i.firestore._databaseId,d,e,t,s)}}function Ly(i,e,t){if("string"==typeof(t=(0,je.m9)(t))){if(""===t)throw new j(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tc(e)&&-1!==t.indexOf("/"))throw new j(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(nr.fromString(t));if(!kt.isDocumentKey(s))throw new j(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return _o(i,new kt(s))}if(t instanceof kr)return _o(i,t._key);throw new j(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yf(t)}.`)}function Ym(i,e){if(!Array.isArray(i)||0===i.length)throw new j(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new j(N.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Uy(i,e,t){if(!t.isEqual(e))throw new j(N.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const d_={maxAttempts:5};class Qm{convertValue(e,t="none"){switch(an(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Br(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(k(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw A()}}convertObject(e,t){const s={};return Qu(e.fields,(d,g)=>{s[d]=this.convertValue(g,t)}),s}convertGeoPoint(e){return new z(Br(e.latitude),Br(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=K(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(oe(e));default:return null}}convertTimestamp(e){const t=Ao(e);return new Or(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=nr.fromString(e);T(Ph(s));const d=new Le(s.get(1),s.get(3)),g=new kt(s.popFirst(5));return d.isEqual(t)||_r(`Document ${g} contains a document reference within a different database (${d.projectId}/${d.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),g}}function Bg(i,e,t){let s;return s=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,s}class h_ extends Qm{constructor(e){super(),this.firestore=e}convertBytes(e){return new M(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new kr(this.firestore,null,t)}}class By{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Cn(e)}set(e,t,s){this._verifyNotCommitted();const d=Sd(e,this._firestore),g=Bg(d.converter,t,s),w=Wn(this._dataReader,"WriteBatch.set",d._key,g,null!==d.converter,s);return this._mutations.push(w.toMutation(d._key,di.none())),this}update(e,t,s,...d){this._verifyNotCommitted();const g=Sd(e,this._firestore);let w;return w="string"==typeof(t=(0,je.m9)(t))||t instanceof _?Td(this._dataReader,"WriteBatch.update",g._key,t,s,d):vf(this._dataReader,"WriteBatch.update",g._key,t),this._mutations.push(w.toMutation(g._key,di.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Sd(e,this._firestore);return this._mutations=this._mutations.concat(new ku(t._key,di.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new j(N.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Sd(i,e){if((i=(0,je.m9)(i)).firestore!==e)throw new j(N.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class If extends Qm{constructor(e){super(),this.firestore=e}convertBytes(e){return new M(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new kr(this.firestore,null,t)}}function p_(i,e,t){i=vr(i,kr);const s=vr(i.firestore,Li),d=Bg(i.converter,e,t);return Pp(s,[Wn(Cn(s),"setDoc",i._key,d,null!==i.converter,t).toMutation(i._key,di.none())])}function g_(i,e,t,...s){i=vr(i,kr);const d=vr(i.firestore,Li),g=Cn(d);let w;return w="string"==typeof(e=(0,je.m9)(e))||e instanceof _?Td(g,"updateDoc",i._key,e,t,s):vf(g,"updateDoc",i._key,e),Pp(d,[w.toMutation(i._key,di.exists(!0))])}function m_(i,...e){var t,s,d;i=(0,je.m9)(i);let g={includeMetadataChanges:!1},w=0;"object"!=typeof e[w]||yh(e[w])||(g=e[w],w++);const R={includeMetadataChanges:g.includeMetadataChanges};if(yh(e[w])){const fe=e[w];e[w]=null===(t=fe.next)||void 0===t?void 0:t.bind(fe),e[w+1]=null===(s=fe.error)||void 0===s?void 0:s.bind(fe),e[w+2]=null===(d=fe.complete)||void 0===d?void 0:d.bind(fe)}let B,G,ee;if(i instanceof kr)G=vr(i.firestore,Li),ee=Il(i._key.path),B={next:fe=>{e[w]&&e[w](Vy(G,i,fe))},error:e[w+1],complete:e[w+2]};else{const fe=vr(i,Lo);G=vr(fe.firestore,Li),ee=fe._query;const qe=new If(G);B={next:ct=>{e[w]&&e[w](new ea(G,qe,fe,ct))},error:e[w+1],complete:e[w+2]},Oy(i._query)}return function(fe,qe,ct,Et){const zt=new bp(Et),gn=new af(qe,zt,ct);return fe.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return Fl(yield mf(fe),gn)})),()=>{zt.Tc(),fe.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return nf(yield mf(fe),gn)}))}}(_s(G),ee,R,B)}function Pp(i,e){return function(t,s){const d=new re;return t.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function xc(i,e,t){return vg.apply(this,arguments)}(yield Ty(t),s,d)})),d.promise}(_s(i),e)}function Vy(i,e,t){const s=t.docs.get(e._key),d=new If(i);return new Dd(i,d,e._key,s,new Ma(t.hasPendingWrites,t.fromCache),e.converter)}class sv extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Cn(e)}get(e){const t=Sd(e,this._firestore),s=new h_(this._firestore);return this._transaction.lookup([t._key]).then(d=>{if(!d||1!==d.length)return A();const g=d[0];if(g.isFoundDocument())return new Km(this._firestore,s,g.key,g,t.converter);if(g.isNoDocument())return new Km(this._firestore,s,t._key,null,t.converter);throw A()})}set(e,t,s){const d=Sd(e,this._firestore),g=Bg(d.converter,t,s),w=Wn(this._dataReader,"Transaction.set",d._key,g,null!==d.converter,s);return this._transaction.set(d._key,w),this}update(e,t,s,...d){const g=Sd(e,this._firestore);let w;return w="string"==typeof(t=(0,je.m9)(t))||t instanceof _?Td(this._dataReader,"Transaction.update",g._key,t,s,d):vf(this._dataReader,"Transaction.update",g._key,t),this._transaction.update(g._key,w),this}delete(e){const t=Sd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Sd(e,this._firestore),s=new If(this._firestore);return super.get(e).then(d=>new Dd(this._firestore,s,t._key,d._document,new Ma(!1,!1),t.converter))}}function Jm(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new j("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function Hy(){if("undefined"==typeof Uint8Array)throw new j("unimplemented","Uint8Arrays are not available in this environment.")}function $y(){if(!function Wl(){return"undefined"!=typeof atob}())throw new j("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){ou=At.SDK_VERSION,(0,At._registerComponent)(new Xe.wA("firestore",(t,{options:s})=>{const d=t.getProvider("app").getImmediate(),g=new Li(d,new In(t.getProvider("auth-internal")),new $i(t.getProvider("app-check-internal")));return s=Object.assign({useFetchStreams:e},s),g._setSettings(s),g},"PUBLIC")),(0,At.registerVersion)(ca,"3.4.10",i),(0,At.registerVersion)(ca,"3.4.10","esm2017")}();class Bl{constructor(e){this._delegate=e}static fromBase64String(e){return $y(),new Bl(M.fromBase64String(e))}static fromUint8Array(e){return Hy(),new Bl(M.fromUint8Array(e))}toBase64(){return $y(),this._delegate.toBase64()}toUint8Array(){return Hy(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Zy(i){return function dv(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const s of e)if(s in t&&"function"==typeof t[s])return!0;return!1}(i,["next","error","complete"])}class Np{enableIndexedDbPersistence(e,t){return function Ng(i,e){h(i=vr(i,Li));const t=_s(i),s=i._freezeSettings(),d=new Ip;return Og(t,d,new Dg(d,s.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Gm(i){h(i=vr(i,Li));const e=_s(i),t=i._freezeSettings(),s=new Ip;return Og(e,s,new Dm(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function kg(i){if(i._initialized&&!i._terminated)throw new j(N.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new re;return i._queue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{yield(t=(0,Ie.Z)(function*(s){if(!Zs.V())return Promise.resolve();const d=s+"main";yield Zs.delete(d)}),function(s){return t.apply(this,arguments)})(wc(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class hv{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof Le||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ni("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function Sy(i,e,t,s={}){var d;const g=(i=vr(i,kc))._getSettings();if("firestore.googleapis.com"!==g.host&&g.host!==e&&Ni("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},g),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let w,R;if("string"==typeof s.mockUserToken)w=s.mockUserToken,R=ni.MOCK_USER;else{w=(0,je.Sg)(s.mockUserToken,null===(d=i._app)||void 0===d?void 0:d.options.projectId);const B=s.mockUserToken.sub||s.mockUserToken.user_id;if(!B)throw new j(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");R=new ni(B)}i._authCredentials=new Ft(new ge(w,R))}}(this._delegate,e,t,s)}enableNetwork(){return function xy(i){return function i_(i){return i.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield Nm(i),t=yield Cy(i);return e.setNetworkEnabled(!0),function(s){const d=P(s);return d.lu.delete(0),rh(d)}(t)}))}(_s(i=vr(i,Li)))}(this._delegate)}disableNetwork(){return function Wm(i){return function Dy(i){return i.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield Nm(i),t=yield Cy(i);return e.setNetworkEnabled(!1),(s=(0,Ie.Z)(function*(d){const g=P(d);g.lu.add(0),yield Ka(g),g._u.set("Offline")}),function(d){return s.apply(this,arguments)})(t);var s}))}(_s(i=vr(i,Li)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,Bm("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function qm(i){return function(e){const t=new re;return e.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function hf(i,e){return ff.apply(this,arguments)}(yield Ty(e),t)})),t.promise}(_s(i=vr(i,Li)))}(this._delegate)}onSnapshotsInSync(e){return function iv(i,e){return function Um(i,e){const t=new bp(e);return i.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return s=yield mf(i),d=t,P(s).Tu.add(d),void d.next();var s,d})),()=>{t.Tc(),i.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return s=yield mf(i),d=t,void P(s).Tu.delete(d);var s,d}))}}(_s(i=vr(i,Li)),yh(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new j("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new jg(this,mh(this._delegate,e))}catch(t){throw Xa(t,"collection()","Firestore.collection()")}}doc(e){try{return new un(this,bd(this._delegate,e))}catch(t){throw Xa(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Uo(this,function Hm(i,e){if(i=vr(i,kc),xg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new j(N.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Lo(i,null,(t=e,new Wa(nr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Xa(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function ov(i,e,t){i=vr(i,Li);const s=Object.assign(Object.assign({},d_),t);return function(d){if(d.maxAttempts<1)throw new j(N.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function Hu(i,e,t){const s=new re;return i.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){const d=yield(g=i,ph(g).then(w=>w.datastore));var g;new Iy(i.asyncQueue,d,t,e,s).run()})),s.promise}(_s(i),d=>e(new sv(i,d)),s)}(this._delegate,t=>e(new Gy(this,t)))}batch(){return _s(this._delegate),new qy(new By(this._delegate,e=>Pp(this._delegate,e)))}loadBundle(e){return function o(i,e){const t=_s(i=vr(i,Li)),s=new Mg;return function Eo(i,e,t,s){const d=function(g,w){let R;return R="string"==typeof g?(new TextEncoder).encode(g):g,B=function(B,G){if(B instanceof Uint8Array)return Sm(B,G);if(B instanceof ArrayBuffer)return Sm(new Uint8Array(B),G);if(B instanceof ReadableStream)return B.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(R),new Am(B,w);var B}(t,Yh(e));i.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){!function wp(i,e,t){const s=P(i);var d;(d=(0,Ie.Z)(function*(g,w,R){try{const B=yield w.getMetadata();if(yield function(qe,ct){const Et=P(qe),zt=ki(ct.createTime);return Et.persistence.runTransaction("hasNewerBundle","readonly",gn=>Et.Ds.getBundleMetadata(gn,ct.id)).then(gn=>!!gn&&gn.createTime.compareTo(zt)>=0)}(g.localStore,B))return yield w.close(),R._completeWith({taskState:"Success",documentsLoaded:(qe=B).totalDocuments,bytesLoaded:qe.totalBytes,totalDocuments:qe.totalDocuments,totalBytes:qe.totalBytes}),Promise.resolve(new Set);R._updateProgress(vm(B));const G=new dp(B,g.localStore,w.wt);let ee=yield w.fc();for(;ee;){const qe=yield G.Nu(ee);qe&&R._updateProgress(qe),ee=yield w.fc()}const fe=yield G.complete();return yield ju(g,fe.Mu,void 0),yield function(qe,ct){const Et=P(qe);return Et.persistence.runTransaction("Save bundle","readwrite",zt=>Et.Ds.saveBundleMetadata(zt,ct))}(g.localStore,B),R._completeWith(fe.progress),Promise.resolve(fe.Ou)}catch(B){return Ni("SyncEngine",`Loading bundle failed with ${B}`),R._failWith(B),Promise.resolve(new Set)}var qe}),function(g,w,R){return d.apply(this,arguments)})(s,e,t).then(d=>{s.sharedClientState.notifyBundleLoaded(d)})}(yield Ty(i),d,s)}))}(t,i._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function u(i,e){return function Ra(i,e){return i.asyncQueue.enqueue((0,Ie.Z)(function*(){return function(t,s){const d=P(t);return d.persistence.runTransaction("Get named query","readonly",g=>d.Ds.getNamedQuery(g,s))}(yield Om(i),e)}))}(_s(i=vr(i,Li)),e).then(t=>t?new Lo(i,null,t.query):null)}(this._delegate,e).then(t=>t?new Uo(this,t):null)}}class Op extends Qm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bl(new M(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return un.forKey(t,this.firestore,null)}}class Gy{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Op(e)}get(e){const t=Eh(e);return this._delegate.get(t).then(s=>new wh(this._firestore,new Dd(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const d=Eh(e);return s?(Jm("Transaction.set",s),this._delegate.set(d,t,s)):this._delegate.set(d,t),this}update(e,t,s,...d){const g=Eh(e);return 2===arguments.length?this._delegate.update(g,t):this._delegate.update(g,t,s,...d),this}delete(e){const t=Eh(e);return this._delegate.delete(t),this}}class qy{constructor(e){this._delegate=e}set(e,t,s){const d=Eh(e);return s?(Jm("WriteBatch.set",s),this._delegate.set(d,t,s)):this._delegate.set(d,t),this}update(e,t,s,...d){const g=Eh(e);return 2===arguments.length?this._delegate.update(g,t):this._delegate.update(g,t,s,...d),this}delete(e){const t=Eh(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class kp{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new Lg(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Vg(this._firestore,s),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=kp.INSTANCES;let d=s.get(e);d||(d=new WeakMap,s.set(e,d));let g=d.get(t);return g||(g=new kp(e,new Op(e),t),d.set(t,g)),g}}kp.INSTANCES=new WeakMap;class un{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Op(e)}static forPath(e,t,s){if(e.length%2!=0)throw new j("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new un(t,new kr(t._delegate,s,new kt(e)))}static forKey(e,t,s){return new un(t,new kr(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new jg(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new jg(this.firestore,mh(this._delegate,e))}catch(t){throw Xa(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,je.m9)(e))instanceof kr&&_f(this._delegate,e)}set(e,t){t=Jm("DocumentReference.set",t);try{return t?p_(this._delegate,e,t):p_(this._delegate,e)}catch(s){throw Xa(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?g_(this._delegate,e):g_(this._delegate,e,t,...s)}catch(d){throw Xa(d,"updateDoc()","DocumentReference.update()")}}delete(){return function nv(i){return Pp(vr(i.firestore,Li),[new ku(i._key,di.none())])}(this._delegate)}onSnapshot(...e){const t=I_(e),s=b_(e,d=>new wh(this.firestore,new Dd(this.firestore._delegate,this._userDataWriter,d._key,d._document,d.metadata,this._delegate.converter)));return m_(this._delegate,t,s)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Q_(i){i=vr(i,kr);const e=vr(i.firestore,Li),t=_s(e),s=new If(e);return function Id(i,e){const t=new re;return i.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(s=(0,Ie.Z)(function*(d,g,w){try{const R=yield function(B,G){const ee=P(B);return ee.persistence.runTransaction("read document","readonly",fe=>ee.localDocuments.getDocument(fe,G))}(d,g);R.isFoundDocument()?w.resolve(R):R.isNoDocument()?w.resolve(null):w.reject(new j(N.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(R){const B=Bu(R,`Failed to get document '${g} from cache`);w.reject(B)}}),function(d,g,w){return s.apply(this,arguments)})(yield Om(i),e,t);var s})),t.promise}(t,i._key).then(d=>new Dd(e,s,i._key,d,new Ma(null!==d&&d.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function J_(i){i=vr(i,kr);const e=vr(i.firestore,Li);return km(_s(e),i._key,{source:"server"}).then(t=>Vy(e,i,t))}(this._delegate):function f_(i){i=vr(i,kr);const e=vr(i.firestore,Li);return km(_s(e),i._key).then(t=>Vy(e,i,t))}(this._delegate),t.then(s=>new wh(this.firestore,new Dd(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new un(this.firestore,this._delegate.withConverter(e?kp.getInstance(this.firestore,e):null))}}function Xa(i,e,t){return i.message=i.message.replace(e,t),i}function I_(i){for(const e of i)if("object"==typeof e&&!Zy(e))return e;return{}}function b_(i,e){var t,s;let d;return d=Zy(i[0])?i[0]:Zy(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:g=>{d.next&&d.next(e(g))},error:null===(t=d.error)||void 0===t?void 0:t.bind(d),complete:null===(s=d.complete)||void 0===s?void 0:s.bind(d)}}class wh{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new un(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return fl(this._delegate,e._delegate)}}class Vg extends wh{data(e){const t=this._delegate.data(e);return function C(i,e){i||A()}(void 0!==t),t}}class Uo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Op(e)}where(e,t,s){try{return new Uo(this.firestore,vh(this._delegate,function W_(i,e,t){const s=e,d=xp("where",i);return new q_(d,s,t)}(e,t,s)))}catch(d){throw Xa(d,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Uo(this.firestore,vh(this._delegate,function ky(i,e="asc"){const t=e,s=xp("orderBy",i);return new z_(s,t)}(e,t)))}catch(s){throw Xa(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Uo(this.firestore,vh(this._delegate,function K_(i){return Dp("limit",i),new Mp("limit",i,"F")}(e)))}catch(t){throw Xa(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Uo(this.firestore,vh(this._delegate,function o_(i){return Dp("limitToLast",i),new Mp("limitToLast",i,"L")}(e)))}catch(t){throw Xa(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Uo(this.firestore,vh(this._delegate,function u_(...i){return new a_("startAt",i,!0)}(...e)))}catch(t){throw Xa(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Uo(this.firestore,vh(this._delegate,function l_(...i){return new a_("startAfter",i,!1)}(...e)))}catch(t){throw Xa(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Uo(this.firestore,vh(this._delegate,function Y_(...i){return new Ug("endBefore",i,!1)}(...e)))}catch(t){throw Xa(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Uo(this.firestore,vh(this._delegate,function c_(...i){return new Ug("endAt",i,!0)}(...e)))}catch(t){throw Xa(t,"endAt()","Query.endAt()")}}isEqual(e){return Rg(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function ev(i){i=vr(i,Lo);const e=vr(i.firestore,Li),t=_s(e),s=new If(e);return function Fm(i,e){const t=new re;return i.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(s=(0,Ie.Z)(function*(d,g,w){try{const R=yield Xd(d,g,!0),B=new Em(g,R.ji),G=B.Ku(R.documents),ee=B.applyChanges(G,!1);w.resolve(ee.snapshot)}catch(R){const B=Bu(R,`Failed to execute query '${g} against cache`);w.reject(B)}}),function(d,g,w){return s.apply(this,arguments)})(yield Om(i),e,t);var s})),t.promise}(t,i._query).then(d=>new ea(e,s,i,d))}(this._delegate):"server"===(null==e?void 0:e.source)?function tv(i){i=vr(i,Lo);const e=vr(i.firestore,Li),t=_s(e),s=new If(e);return Lm(t,i._query,{source:"server"}).then(d=>new ea(e,s,i,d))}(this._delegate):function X_(i){i=vr(i,Lo);const e=vr(i.firestore,Li),t=_s(e),s=new If(e);return Oy(i._query),Lm(t,i._query).then(d=>new ea(e,s,i,d))}(this._delegate),t.then(s=>new as(this.firestore,new ea(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=I_(e),s=b_(e,d=>new as(this.firestore,new ea(this.firestore._delegate,this._userDataWriter,this._delegate,d._snapshot)));return m_(this._delegate,t,s)}withConverter(e){return new Uo(this.firestore,this._delegate.withConverter(e?kp.getInstance(this.firestore,e):null))}}class Xm{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Vg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class as{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Uo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Vg(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Xm(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new Vg(this._firestore,s))})}isEqual(e){return fl(this._delegate,e._delegate)}}class jg extends Uo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new un(this.firestore,e):null}doc(e){try{return new un(this.firestore,void 0===e?bd(this._delegate):bd(this._delegate,e))}catch(t){throw Xa(t,"doc()","CollectionReference.doc()")}}add(e){return function rv(i,e){const t=vr(i.firestore,Li),s=bd(i),d=Bg(i.converter,e);return Pp(t,[Wn(Cn(i.firestore),"addDoc",s._key,d,null!==i.converter,{}).toMutation(s._key,di.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new un(this.firestore,t))}isEqual(e){return _f(this._delegate,e._delegate)}withConverter(e){return new jg(this.firestore,this._delegate.withConverter(e?kp.getInstance(this.firestore,e):null))}}function Eh(i){return vr(i,kr)}class Wy{constructor(...e){this._delegate=new _(...e)}static documentId(){return new Wy(kn.keyField().canonicalString())}isEqual(e){return(e=(0,je.m9)(e))instanceof _&&this._delegate._internalPath.isEqual(e._internalPath)}}class bf{constructor(e){this._delegate=e}static serverTimestamp(){const e=function uv(){return new fi("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new bf(e)}static delete(){const e=function av(){return new vs("deleteField")}();return e._methodName="FieldValue.delete",new bf(e)}static arrayUnion(...e){const t=function y_(...i){return new zs("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new bf(t)}static arrayRemove(...e){const t=function __(...i){return new Ui("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new bf(t)}static increment(e){const t=function v_(i){return new Cd("increment",i)}(e);return t._methodName="FieldValue.increment",new bf(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const C_={Firestore:hv,GeoPoint:z,Timestamp:Or,Blob:Bl,Transaction:Gy,WriteBatch:qy,DocumentReference:un,DocumentSnapshot:wh,Query:Uo,QueryDocumentSnapshot:Vg,QuerySnapshot:as,CollectionReference:jg,FieldPath:Wy,FieldValue:bf,setLogLevel:function h0(i){!function Du(i){zo.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function D_(i){(function T_(i,e){i.INTERNAL.registerComponent(new Xe.wA("firestore-compat",t=>{const s=t.getProvider("app-compat").getImmediate(),d=t.getProvider("firestore").getImmediate();return e(s,d)},"PUBLIC").setServiceProps(Object.assign({},C_)))})(i,(e,t)=>new hv(e,t,new Np)),i.registerVersion("@firebase/firestore-compat","0.1.19")}(rt.Z);var Ad=V(1205),fv=V(440),pv=V(127);function Fp(i,e){return function gv(i,e=v.z){return new J.y(t=>{let s;return null!=e?e.schedule(()=>{s=i.onSnapshot({includeMetadataChanges:!0},t)}):s=i.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=s&&s()}})}(i,e)}function zy(i,e){return Fp(i,e).pipe((0,ae.U)(t=>({payload:t,type:"query"})))}function ey(i,e){return zy(i,e).pipe((0,le.O)(void 0),Oe(),(0,ae.U)(([t,s])=>{const d=s.payload.docChanges(),g=d.map(w=>({type:w.type,payload:w}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((w,R)=>{const B=d.find(ee=>ee.doc.ref.isEqual(w.ref)),G=null==t?void 0:t.payload.docs.find(ee=>ee.ref.isEqual(w.ref));B&&JSON.stringify(B.doc.metadata)===JSON.stringify(w.metadata)||!B&&G&&JSON.stringify(G.metadata)===JSON.stringify(w.metadata)||g.push({type:"modified",payload:{oldIndex:R,newIndex:R,type:"modified",doc:w}})}),g}))}function Hg(i,e,t){return ey(i,t).pipe((0,De.R)((s,d)=>function S_(i,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(i=function A_(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return ty(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return ty(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return ty(i,e.oldIndex,1)}return i}(i,s))}),i}(s,d.map(g=>g.payload),e),[]),(0,It.x)(),(0,ae.U)(s=>s.map(d=>({type:d.type,payload:d}))))}function ty(i,e,t,...s){const d=i.slice();return d.splice(e,t,...s),d}function x_(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class Lp{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=ey(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ae.U)(s=>s.filter(d=>e.indexOf(d.type)>-1)))),t.pipe((0,le.O)(void 0),Oe(),(0,nt.h)(([s,d])=>d.length>0||!s),(0,ae.U)(([s,d])=>d),ve.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,De.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=x_(e);return Hg(this.query,t,this.afs.schedulers.outsideAngular).pipe(ve.iC)}valueChanges(e={}){return zy(this.query,this.afs.schedulers.outsideAngular).pipe((0,ae.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),ve.iC)}get(e){return(0,Ce.D)(this.query.get(e)).pipe(ve.iC)}add(e){return this.ref.add(e)}doc(e){return new Up(this.ref.doc(e),this.afs)}}class Up{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:d,query:g}=Ky(s,t);return new Lp(d,g,this.afs)}snapshotChanges(){return function mv(i,e){return Fp(i,e).pipe((0,le.O)(void 0),Oe(),(0,ae.U)(([t,s])=>s.exists?(null==t?void 0:t.exists)?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ve.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ae.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Ce.D)(this.ref.get(e)).pipe(ve.iC)}}class yv{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?ey(this.query,this.afs.schedulers.outsideAngular).pipe((0,ae.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),(0,nt.h)(t=>t.length>0),ve.iC):ey(this.query,this.afs.schedulers.outsideAngular).pipe(ve.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,De.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=x_(e);return Hg(this.query,t,this.afs.schedulers.outsideAngular).pipe(ve.iC)}valueChanges(e={}){return zy(this.query,this.afs.schedulers.outsideAngular).pipe((0,ae.U)(s=>s.payload.docs.map(d=>e.idField?Object.assign({[e.idField]:d.id},d.data()):d.data())),ve.iC)}get(e){return(0,Ce.D)(this.query.get(e)).pipe(ve.iC)}}const R_=new S.OlP("angularfire2.enableFirestorePersistence"),M_=new S.OlP("angularfire2.firestore.persistenceSettings"),P_=new S.OlP("angularfire2.firestore.settings"),N_=new S.OlP("angularfire2.firestore.use-emulator");function Ky(i,e=(t=>t)){return{query:e(i),ref:i}}let O_=(()=>{class i{constructor(t,s,d,g,w,R,B,G,ee,fe,qe,ct,Et,zt,gn,jr,Wi){this.schedulers=B;const pi=(0,at.on)(t,R,s),zi=ee;fe&&(0,Ad.nw)(pi,R,qe,Et,zt,gn,ct,jr),[this.firestore,this.persistenceEnabled$]=(0,at.cc)(`${pi.name}.firestore`,"AngularFirestore",pi.name,()=>{const Ki=R.runOutsideAngular(()=>pi.firestore());if(g&&Ki.settings(g),zi&&Ki.useEmulator(...zi),d&&!(0,bt.PM)(w)){const us=()=>{try{return(0,Ce.D)(Ki.enablePersistence(G||void 0).then(()=>!0,()=>!1))}catch(Pa){return"undefined"!=typeof console&&console.warn(Pa),(0,Ee.of)(!1)}};return[Ki,R.runOutsideAngular(us)]}return[Ki,(0,Ee.of)(!1)]},[g,zi,d])}collection(t,s){let d;d="string"==typeof t?this.firestore.collection(t):t;const{ref:g,query:w}=Ky(d,s),R=this.schedulers.ngZone.run(()=>g);return new Lp(R,w,this)}collectionGroup(t,s){const d=s||(w=>w),g=this.firestore.collectionGroup(t);return new yv(d(g),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const d=this.schedulers.ngZone.run(()=>s);return new Up(d,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(S.LFG(at.Dh),S.LFG(at.xv,8),S.LFG(R_,8),S.LFG(P_,8),S.LFG(S.Lbi),S.LFG(S.R0b),S.LFG(ve.HU),S.LFG(M_,8),S.LFG(N_,8),S.LFG(Ad.zQ,8),S.LFG(Ad.Qv,8),S.LFG(Ad.L6,8),S.LFG(Ad._Q,8),S.LFG(Ad.rT,8),S.LFG(Ad.lh,8),S.LFG(Ad.f7,8),S.LFG(fv.nm,8))},i.\u0275prov=S.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),k_=(()=>{class i{constructor(){pv.Z.registerVersion("angularfire",ve.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:R_,useValue:!0},{provide:M_,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=S.oAB({type:i}),i.\u0275inj=S.cJS({providers:[O_]}),i})()},2011:(Rt,Ve,V)=>{V.d(Ve,{Dh:()=>xe,GT:()=>ve,cc:()=>nt,hO:()=>It,on:()=>le,pX:()=>Ee,xv:()=>Oe});var S=V(5e3),v=V(127),J=V(5813);Rt=V.hmd(Rt);const Ce=["ngOnDestroy"],Ee=(rt,Ie,At,Xe={})=>new Proxy(rt,{get:(Ke,je)=>At.runOutsideAngular(()=>{var Je;if(rt[je])return(null===(Je=null==Xe?void 0:Xe.spy)||void 0===Je?void 0:Je.get)&&Xe.spy.get(je,rt[je]),rt[je];if(Ce.indexOf(je)>-1)return()=>{};const yt=Ie.toPromise().then(X=>{const ze=X&&X[je];return"function"==typeof ze?ze.bind(X):ze&&ze.then?ze.then(ue=>At.run(()=>ue)):At.run(()=>ze)});return new Proxy(()=>{},{get:(X,ze)=>yt[ze],apply:(X,ze,ue)=>yt.then(Se=>{var Ae;const Ge=Se&&Se(...ue);return(null===(Ae=null==Xe?void 0:Xe.spy)||void 0===Ae?void 0:Ae.apply)&&Xe.spy.apply(je,ue,Ge),Ge})})})}),ve=(rt,Ie)=>{Ie.forEach(At=>{Object.getOwnPropertyNames(At.prototype||At).forEach(Xe=>{Object.defineProperty(rt.prototype,Xe,Object.getOwnPropertyDescriptor(At.prototype||At,Xe))})})};class Me{constructor(Ie){return Ie}}const xe=new S.OlP("angularfire2.app.options"),Oe=new S.OlP("angularfire2.app.name");function le(rt,Ie,At){const Ke="object"==typeof At&&At||{};Ke.name=Ke.name||"string"==typeof At&&At||"[DEFAULT]";const Je=v.Z.apps.filter(yt=>yt&&yt.name===Ke.name)[0]||Ie.runOutsideAngular(()=>v.Z.initializeApp(rt,Ke));try{JSON.stringify(rt)!==JSON.stringify(Je.options)&&ae("error",`${Je.name} Firebase App already initialized with different options${Rt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(yt){}return new Me(Je)}const ae=(rt,...Ie)=>{(0,S.X6Q)()&&"undefined"!=typeof console&&console[rt](...Ie)},De={provide:Me,useFactory:le,deps:[xe,S.R0b,[new S.FiY,Oe]]};let It=(()=>{class rt{constructor(At){v.Z.registerVersion("angularfire",J.q4.full,"core"),v.Z.registerVersion("angularfire",J.q4.full,"app-compat"),v.Z.registerVersion("angular",S.q4F.full,At.toString())}static initializeApp(At,Xe){return{ngModule:rt,providers:[{provide:xe,useValue:At},{provide:Oe,useValue:Xe}]}}}return rt.\u0275fac=function(At){return new(At||rt)(S.LFG(S.Lbi))},rt.\u0275mod=S.oAB({type:rt}),rt.\u0275inj=S.cJS({providers:[De]}),rt})();function nt(rt,Ie,At,Xe,Ke){const[,je,Je]=globalThis.\u0275AngularfireInstanceCache.find(yt=>yt[0]===rt)||[];if(je)return function at(rt,Ie){try{return rt.toString()===Ie.toString()}catch(At){return rt===Ie}}(Ke,Je)||(Ze("error",`${Ie} was already initialized on the ${At} Firebase App with different settings.${bt?" You may need to reload as Firebase is not HMR aware.":""}`),Ze("warn",{is:Ke,was:Je})),je;{const yt=Xe();return globalThis.\u0275AngularfireInstanceCache.push([rt,yt,Ke]),yt}}const bt=!!Rt.hot,Ze=(rt,...Ie)=>{(0,S.X6Q)()&&"undefined"!=typeof console&&console[rt](...Ie)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Rt,Ve,V)=>{V.d(Ve,{q4:()=>Zs,iC:()=>Gi,fc:()=>Jn,HU:()=>ms,vb:()=>Qu,JM:()=>ma});var S=V(5e3),v=V(5867),J=V(5861),Ce=V(9681),Ee=V(2090),ve=V(4859),Me=V(1877),xe=V(8766);const Oe="@firebase/installations",le="0.5.10",De=`w:${le}`,It="FIS_v2",Ie=new Ee.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function At(k){return k instanceof Ee.ZR&&k.code.includes("request-failed")}function Xe({projectId:k}){return`https://firebaseinstallations.googleapis.com/v1/projects/${k}/installations`}function Ke(k){return{token:k.token,requestStatus:2,expiresIn:Se(k.expiresIn),creationTime:Date.now()}}function je(k,U){return Je.apply(this,arguments)}function Je(){return(Je=(0,J.Z)(function*(k,U){const oe=(yield U.json()).error;return Ie.create("request-failed",{requestName:k,serverCode:oe.code,serverMessage:oe.message,serverStatus:oe.status})})).apply(this,arguments)}function yt({apiKey:k}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":k})}function X(k,{refreshToken:U}){const K=yt(k);return K.append("Authorization",function Ae(k){return`${It} ${k}`}(U)),K}function ze(k){return ue.apply(this,arguments)}function ue(){return(ue=(0,J.Z)(function*(k){const U=yield k();return U.status>=500&&U.status<600?k():U})).apply(this,arguments)}function Se(k){return Number(k.replace("s","000"))}function Ge(k,U){return $e.apply(this,arguments)}function $e(){return($e=(0,J.Z)(function*({appConfig:k,heartbeatServiceProvider:U},{fid:K}){const oe=Xe(k),Pe=yt(k),Le=U.getImmediate({optional:!0});if(Le){const wn=yield Le.getHeartbeatsHeader();wn&&Pe.append("x-firebase-client",wn)}const Bt={method:"POST",headers:Pe,body:JSON.stringify({fid:K,authVersion:It,appId:k.appId,sdkVersion:De})},Zt=yield ze(()=>fetch(oe,Bt));if(Zt.ok){const wn=yield Zt.json();return{fid:wn.fid||K,registrationStatus:2,refreshToken:wn.refreshToken,authToken:Ke(wn.authToken)}}throw yield je("Create Installation",Zt)})).apply(this,arguments)}function mt(k){return new Promise(U=>{setTimeout(U,k)})}const xt=/^[cdef][\w-]{21}$/;function ut(){try{const k=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(k),k[0]=112+k[0]%16;const K=function cn(k){return function Tt(k){return btoa(String.fromCharCode(...k)).replace(/\+/g,"-").replace(/\//g,"_")}(k).substr(0,22)}(k);return xt.test(K)?K:""}catch(k){return""}}function Yt(k){return`${k.appName}!${k.appId}`}const Wt=new Map;function $t(k,U){const K=Yt(k);_n(K,U),function mr(k,U){const K=function cr(){return!er&&"BroadcastChannel"in self&&(er=new BroadcastChannel("[Firebase] FID Change"),er.onmessage=k=>{_n(k.data.key,k.data.fid)}),er}();K&&K.postMessage({key:k,fid:U}),function zn(){0===Wt.size&&er&&(er.close(),er=null)}()}(K,U)}function _n(k,U){const K=Wt.get(k);if(K)for(const oe of K)oe(U)}let er=null;const wr="firebase-installations-store";let Yn=null;function Qt(){return Yn||(Yn=(0,xe.X3)("firebase-installations-database",1,{upgrade:(k,U)=>{0===U&&k.createObjectStore(wr)}})),Yn}function xn(k,U){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,J.Z)(function*(k,U){const K=Yt(k),Pe=(yield Qt()).transaction(wr,"readwrite"),Le=Pe.objectStore(wr),pt=yield Le.get(K);return yield Le.put(U,K),yield Pe.done,(!pt||pt.fid!==U.fid)&&$t(k,U.fid),U})).apply(this,arguments)}function Pn(k){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,J.Z)(function*(k){const U=Yt(k),oe=(yield Qt()).transaction(wr,"readwrite");yield oe.objectStore(wr).delete(U),yield oe.done})).apply(this,arguments)}function mi(k,U){return tt.apply(this,arguments)}function tt(){return(tt=(0,J.Z)(function*(k,U){const K=Yt(k),Pe=(yield Qt()).transaction(wr,"readwrite"),Le=Pe.objectStore(wr),pt=yield Le.get(K),Bt=U(pt);return void 0===Bt?yield Le.delete(K):yield Le.put(Bt,K),yield Pe.done,Bt&&(!pt||pt.fid!==Bt.fid)&&$t(k,Bt.fid),Bt})).apply(this,arguments)}function me(k){return we.apply(this,arguments)}function we(){return(we=(0,J.Z)(function*(k){let U;const K=yield mi(k.appConfig,oe=>{const Pe=dt(oe),Le=ke(k,Pe);return U=Le.registrationPromise,Le.installationEntry});return""===K.fid?{installationEntry:yield U}:{installationEntry:K,registrationPromise:U}})).apply(this,arguments)}function dt(k){return zr(k||{fid:ut(),registrationStatus:0})}function ke(k,U){if(0===U.registrationStatus){if(!navigator.onLine)return{installationEntry:U,registrationPromise:Promise.reject(Ie.create("app-offline"))};const K={fid:U.fid,registrationStatus:1,registrationTime:Date.now()},oe=function ft(k,U){return Dt.apply(this,arguments)}(k,K);return{installationEntry:K,registrationPromise:oe}}return 1===U.registrationStatus?{installationEntry:U,registrationPromise:Sn(k)}:{installationEntry:U}}function Dt(){return(Dt=(0,J.Z)(function*(k,U){try{const K=yield Ge(k,U);return xn(k.appConfig,K)}catch(K){throw At(K)&&409===K.customData.serverCode?yield Pn(k.appConfig):yield xn(k.appConfig,{fid:U.fid,registrationStatus:0}),K}})).apply(this,arguments)}function Sn(k){return on.apply(this,arguments)}function on(){return(on=(0,J.Z)(function*(k){let U=yield en(k.appConfig);for(;1===U.registrationStatus;)yield mt(100),U=yield en(k.appConfig);if(0===U.registrationStatus){const{installationEntry:K,registrationPromise:oe}=yield me(k);return oe||K}return U})).apply(this,arguments)}function en(k){return mi(k,U=>{if(!U)throw Ie.create("installation-not-found");return zr(U)})}function zr(k){return function Er(k){return 1===k.registrationStatus&&k.registrationTime+1e4<Date.now()}(k)?{fid:k.fid,registrationStatus:0}:k}function Nn(k,U){return se.apply(this,arguments)}function se(){return(se=(0,J.Z)(function*({appConfig:k,heartbeatServiceProvider:U},K){const oe=he(k,K),Pe=X(k,K),Le=U.getImmediate({optional:!0});if(Le){const wn=yield Le.getHeartbeatsHeader();wn&&Pe.append("x-firebase-client",wn)}const Bt={method:"POST",headers:Pe,body:JSON.stringify({installation:{sdkVersion:De,appId:k.appId}})},Zt=yield ze(()=>fetch(oe,Bt));if(Zt.ok)return Ke(yield Zt.json());throw yield je("Generate Auth Token",Zt)})).apply(this,arguments)}function he(k,{fid:U}){return`${Xe(k)}/${U}/authTokens:generate`}function ye(k){return st.apply(this,arguments)}function st(){return(st=(0,J.Z)(function*(k,U=!1){let K;const oe=yield mi(k.appConfig,Le=>{if(!tn(Le))throw Ie.create("not-registered");const pt=Le.authToken;if(!U&&yr(pt))return Le;if(1===pt.requestStatus)return K=ce(k,U),Le;{if(!navigator.onLine)throw Ie.create("app-offline");const Bt=Fr(Le);return K=Ot(k,Bt),Bt}});return K?yield K:oe.authToken})).apply(this,arguments)}function ce(k,U){return Re.apply(this,arguments)}function Re(){return(Re=(0,J.Z)(function*(k,U){let K=yield it(k.appConfig);for(;1===K.authToken.requestStatus;)yield mt(100),K=yield it(k.appConfig);const oe=K.authToken;return 0===oe.requestStatus?ye(k,U):oe})).apply(this,arguments)}function it(k){return mi(k,U=>{if(!tn(U))throw Ie.create("not-registered");return function Hr(k){return 1===k.requestStatus&&k.requestTime+1e4<Date.now()}(U.authToken)?Object.assign(Object.assign({},U),{authToken:{requestStatus:0}}):U})}function Ot(k,U){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,J.Z)(function*(k,U){try{const K=yield Nn(k,U),oe=Object.assign(Object.assign({},U),{authToken:K});return yield xn(k.appConfig,oe),K}catch(K){if(!At(K)||401!==K.customData.serverCode&&404!==K.customData.serverCode){const oe=Object.assign(Object.assign({},U),{authToken:{requestStatus:0}});yield xn(k.appConfig,oe)}else yield Pn(k.appConfig);throw K}})).apply(this,arguments)}function tn(k){return void 0!==k&&2===k.registrationStatus}function yr(k){return 2===k.requestStatus&&!function dn(k){const U=Date.now();return U<k.creationTime||k.creationTime+k.expiresIn<U+36e5}(k)}function Fr(k){const U={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},k),{authToken:U})}function yi(){return(yi=(0,J.Z)(function*(k){const U=k,{installationEntry:K,registrationPromise:oe}=yield me(U);return oe?oe.catch(console.error):ye(U).catch(console.error),K.fid})).apply(this,arguments)}function vn(){return(vn=(0,J.Z)(function*(k,U=!1){const K=k;return yield br(K),(yield ye(K,U)).token})).apply(this,arguments)}function br(k){return ai.apply(this,arguments)}function ai(){return(ai=(0,J.Z)(function*(k){const{registrationPromise:U}=yield me(k);U&&(yield U)})).apply(this,arguments)}function Si(k){return Ie.create("missing-app-config-values",{valueName:k})}const Tn="installations",Ht=k=>{const U=k.getProvider("app").getImmediate(),K=function Lr(k){if(!k||!k.options)throw Si("App Configuration");if(!k.name)throw Si("App Name");const U=["projectId","apiKey","appId"];for(const K of U)if(!k.options[K])throw Si(K);return{appName:k.name,projectId:k.options.projectId,apiKey:k.options.apiKey,appId:k.options.appId}}(U);return{app:U,appConfig:K,heartbeatServiceProvider:(0,Ce._getProvider)(U,"heartbeat"),_delete:()=>Promise.resolve()}},Bn=k=>{const U=k.getProvider("app").getImmediate(),K=(0,Ce._getProvider)(U,Tn).getImmediate();return{getId:()=>function Ms(k){return yi.apply(this,arguments)}(K),getToken:Pe=>function Qi(k){return vn.apply(this,arguments)}(K,Pe)}};(function Kr(){(0,Ce._registerComponent)(new ve.wA(Tn,Ht,"PUBLIC")),(0,Ce._registerComponent)(new ve.wA("installations-internal",Bn,"PRIVATE"))})(),(0,Ce.registerVersion)(Oe,le),(0,Ce.registerVersion)(Oe,le,"esm2017");const Ji="@firebase/remote-config",Tr=new Ee.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ks{constructor(U,K,oe,Pe){this.client=U,this.storage=K,this.storageCache=oe,this.logger=Pe}isCachedDataFresh(U,K){if(!K)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const oe=Date.now()-K,Pe=oe<=U;return this.logger.debug(`Config fetch cache check. Cache age millis: ${oe}. Cache max age millis (minimumFetchIntervalMillis setting): ${U}. Is cache hit: ${Pe}.`),Pe}fetch(U){var K=this;return(0,J.Z)(function*(){const[oe,Pe]=yield Promise.all([K.storage.getLastSuccessfulFetchTimestampMillis(),K.storage.getLastSuccessfulFetchResponse()]);if(Pe&&K.isCachedDataFresh(U.cacheMaxAgeMillis,oe))return Pe;U.eTag=Pe&&Pe.eTag;const Le=yield K.client.fetch(U),pt=[K.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Le.status&&pt.push(K.storage.setLastSuccessfulFetchResponse(Le)),yield Promise.all(pt),Le})()}}function eu(k=navigator){return k.languages&&k.languages[0]||k.language}class Pr{constructor(U,K,oe,Pe,Le,pt){this.firebaseInstallations=U,this.sdkVersion=K,this.namespace=oe,this.projectId=Pe,this.apiKey=Le,this.appId=pt}fetch(U){var K=this;return(0,J.Z)(function*(){var oe,Pe,Le;const[pt,Bt]=yield Promise.all([K.firebaseInstallations.getId(),K.firebaseInstallations.getToken()]),wn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${K.projectId}/namespaces/${K.namespace}:fetch?key=${K.apiKey}`,rr={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":U.eTag||"*"},an={sdk_version:K.sdkVersion,app_instance_id:pt,app_instance_id_token:Bt,app_id:K.appId,language_code:eu()},Ar={method:"POST",headers:rr,body:JSON.stringify(an)},os=fetch(wn,Ar),no=new Promise((ro,Ga)=>{U.signal.addEventListener(()=>{const Ru=new Error("The operation was aborted.");Ru.name="AbortError",Ga(Ru)})});let ya;try{yield Promise.race([os,no]),ya=yield os}catch(ro){let Ga="fetch-client-network";throw"AbortError"===(null===(oe=ro)||void 0===oe?void 0:oe.name)&&(Ga="fetch-timeout"),Tr.create(Ga,{originalErrorMessage:null===(Pe=ro)||void 0===Pe?void 0:Pe.message})}let ys=ya.status;const _a=ya.headers.get("ETag")||void 0;let _o,xo;if(200===ya.status){let ro;try{ro=yield ya.json()}catch(Ga){throw Tr.create("fetch-client-parse",{originalErrorMessage:null===(Le=Ga)||void 0===Le?void 0:Le.message})}_o=ro.entries,xo=ro.state}if("INSTANCE_STATE_UNSPECIFIED"===xo?ys=500:"NO_CHANGE"===xo?ys=304:("NO_TEMPLATE"===xo||"EMPTY_CONFIG"===xo)&&(_o={}),304!==ys&&200!==ys)throw Tr.create("fetch-status",{httpStatus:ys});return{status:ys,eTag:_a,config:_o}})()}}class Te{constructor(U,K){this.client=U,this.storage=K}fetch(U){var K=this;return(0,J.Z)(function*(){const oe=(yield K.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return K.attemptFetch(U,oe)})()}attemptFetch(U,{throttleEndTimeMillis:K,backoffCount:oe}){var Pe=this;return(0,J.Z)(function*(){yield function Ys(k,U){return new Promise((K,oe)=>{const Pe=Math.max(U-Date.now(),0),Le=setTimeout(K,Pe);k.addEventListener(()=>{clearTimeout(Le),oe(Tr.create("fetch-throttle",{throttleEndTimeMillis:U}))})})}(U.signal,K);try{const Le=yield Pe.client.fetch(U);return yield Pe.storage.deleteThrottleMetadata(),Le}catch(Le){if(!function bo(k){if(!(k instanceof Ee.ZR&&k.customData))return!1;const U=Number(k.customData.httpStatus);return 429===U||500===U||503===U||504===U}(Le))throw Le;const pt={throttleEndTimeMillis:Date.now()+(0,Ee.$s)(oe),backoffCount:oe+1};return yield Pe.storage.setThrottleMetadata(pt),Pe.attemptFetch(U,pt)}})()}}class ot{constructor(U,K,oe,Pe,Le){this.app=U,this._client=K,this._storageCache=oe,this._storage=Pe,this._logger=Le,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ct(k,U){var K;const oe=k.target.error||void 0;return Tr.create(U,{originalErrorMessage:oe&&(null===(K=oe)||void 0===K?void 0:K.message)})}const Pt="app_namespace_store";class Bi{constructor(U,K,oe,Pe=function tr(){return new Promise((k,U)=>{var K;try{const oe=indexedDB.open("firebase_remote_config",1);oe.onerror=Pe=>{U(Ct(Pe,"storage-open"))},oe.onsuccess=Pe=>{k(Pe.target.result)},oe.onupgradeneeded=Pe=>{0===Pe.oldVersion&&Pe.target.result.createObjectStore(Pt,{keyPath:"compositeKey"})}}catch(oe){U(Tr.create("storage-open",{originalErrorMessage:null===(K=oe)||void 0===K?void 0:K.message}))}})}()){this.appId=U,this.appName=K,this.namespace=oe,this.openDbPromise=Pe}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(U){return this.set("last_fetch_status",U)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(U){return this.set("last_successful_fetch_timestamp_millis",U)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(U){return this.set("last_successful_fetch_response",U)}getActiveConfig(){return this.get("active_config")}setActiveConfig(U){return this.set("active_config",U)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(U){return this.set("active_config_etag",U)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(U){return this.set("throttle_metadata",U)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(U){var K=this;return(0,J.Z)(function*(){const oe=yield K.openDbPromise;return new Promise((Pe,Le)=>{var pt;const Zt=oe.transaction([Pt],"readonly").objectStore(Pt),wn=K.createCompositeKey(U);try{const rr=Zt.get(wn);rr.onerror=an=>{Le(Ct(an,"storage-get"))},rr.onsuccess=an=>{const Ar=an.target.result;Pe(Ar?Ar.value:void 0)}}catch(rr){Le(Tr.create("storage-get",{originalErrorMessage:null===(pt=rr)||void 0===pt?void 0:pt.message}))}})})()}set(U,K){var oe=this;return(0,J.Z)(function*(){const Pe=yield oe.openDbPromise;return new Promise((Le,pt)=>{var Bt;const wn=Pe.transaction([Pt],"readwrite").objectStore(Pt),rr=oe.createCompositeKey(U);try{const an=wn.put({compositeKey:rr,value:K});an.onerror=Ar=>{pt(Ct(Ar,"storage-set"))},an.onsuccess=()=>{Le()}}catch(an){pt(Tr.create("storage-set",{originalErrorMessage:null===(Bt=an)||void 0===Bt?void 0:Bt.message}))}})})()}delete(U){var K=this;return(0,J.Z)(function*(){const oe=yield K.openDbPromise;return new Promise((Pe,Le)=>{var pt;const Zt=oe.transaction([Pt],"readwrite").objectStore(Pt),wn=K.createCompositeKey(U);try{const rr=Zt.delete(wn);rr.onerror=an=>{Le(Ct(an,"storage-delete"))},rr.onsuccess=()=>{Pe()}}catch(rr){Le(Tr.create("storage-delete",{originalErrorMessage:null===(pt=rr)||void 0===pt?void 0:pt.message}))}})})()}createCompositeKey(U){return[this.appId,this.appName,this.namespace,U].join()}}class lo{constructor(U){this.storage=U}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var U=this;return(0,J.Z)(function*(){const K=U.storage.getLastFetchStatus(),oe=U.storage.getLastSuccessfulFetchTimestampMillis(),Pe=U.storage.getActiveConfig(),Le=yield K;Le&&(U.lastFetchStatus=Le);const pt=yield oe;pt&&(U.lastSuccessfulFetchTimestampMillis=pt);const Bt=yield Pe;Bt&&(U.activeConfig=Bt)})()}setLastFetchStatus(U){return this.lastFetchStatus=U,this.storage.setLastFetchStatus(U)}setLastSuccessfulFetchTimestampMillis(U){return this.lastSuccessfulFetchTimestampMillis=U,this.storage.setLastSuccessfulFetchTimestampMillis(U)}setActiveConfig(U){return this.activeConfig=U,this.storage.setActiveConfig(U)}}function cs(){return tu.apply(this,arguments)}function tu(){return(tu=(0,J.Z)(function*(){if(!(0,Ee.hl)())return!1;try{return yield(0,Ee.eu)()}catch(k){return!1}})).apply(this,arguments)}!function Ns(){(0,Ce._registerComponent)(new ve.wA("remote-config",function k(U,{instanceIdentifier:K}){const oe=U.getProvider("app").getImmediate(),Pe=U.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Tr.create("registration-window");if(!(0,Ee.hl)())throw Tr.create("indexed-db-unavailable");const{projectId:Le,apiKey:pt,appId:Bt}=oe.options;if(!Le)throw Tr.create("registration-project-id");if(!pt)throw Tr.create("registration-api-key");if(!Bt)throw Tr.create("registration-app-id");const Zt=new Bi(Bt,oe.name,K=K||"firebase"),wn=new lo(Zt),rr=new Me.Yd(Ji);rr.logLevel=Me.in.ERROR;const an=new Pr(Pe,Ce.SDK_VERSION,K,Le,pt,Bt),Ar=new Te(an,Zt),os=new Ks(Ar,Zt,wn,rr),no=new ot(oe,os,wn,Zt,rr);return function Qn(k){const U=(0,Ee.m9)(k);U._initializePromise||(U._initializePromise=U._storageCache.loadFromStorage().then(()=>{U._isInitializationComplete=!0}))}(no),no},"PUBLIC").setMultipleInstances(!0)),(0,Ce.registerVersion)(Ji,"0.3.9"),(0,Ce.registerVersion)(Ji,"0.3.9","esm2017")}();const Oa="/firebase-messaging-sw.js",Qr="/firebase-cloud-messaging-push-scope",li="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",rs="google.c.a.c_id",ka="google.c.a.c_l",Is="google.c.a.ts",Zu="google.c.a.e";var Vo=(()=>{return(k=Vo||(Vo={})).PUSH_RECEIVED="push-received",k.NOTIFICATION_CLICKED="notification-clicked",Vo;var k})();function Ii(k){const U=new Uint8Array(k);return btoa(String.fromCharCode(...U)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ta(k){const K=(k+"=".repeat((4-k.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),oe=atob(K),Pe=new Uint8Array(oe.length);for(let Le=0;Le<oe.length;++Le)Pe[Le]=oe.charCodeAt(Le);return Pe}const Jr="fcm_token_details_db",xi="fcm_token_object_Store";function Fa(k){return Nr.apply(this,arguments)}function Nr(){return Nr=(0,J.Z)(function*(k){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Le=>Le.name).includes(Jr))return null;let U=null;return(yield(0,xe.X3)(Jr,5,{upgrade:(oe=(0,J.Z)(function*(Pe,Le,pt,Bt){var Zt;if(Le<2||!Pe.objectStoreNames.contains(xi))return;const wn=Bt.objectStore(xi),rr=yield wn.index("fcmSenderId").get(k);if(yield wn.clear(),rr)if(2===Le){const an=rr;if(!an.auth||!an.p256dh||!an.endpoint)return;U={token:an.fcmToken,createTime:null!==(Zt=an.createTime)&&void 0!==Zt?Zt:Date.now(),subscriptionOptions:{auth:an.auth,p256dh:an.p256dh,endpoint:an.endpoint,swScope:an.swScope,vapidKey:"string"==typeof an.vapidKey?an.vapidKey:Ii(an.vapidKey)}}}else if(3===Le){const an=rr;U={token:an.fcmToken,createTime:an.createTime,subscriptionOptions:{auth:Ii(an.auth),p256dh:Ii(an.p256dh),endpoint:an.endpoint,swScope:an.swScope,vapidKey:Ii(an.vapidKey)}}}else if(4===Le){const an=rr;U={token:an.fcmToken,createTime:an.createTime,subscriptionOptions:{auth:Ii(an.auth),p256dh:Ii(an.p256dh),endpoint:an.endpoint,swScope:an.swScope,vapidKey:Ii(an.vapidKey)}}}}),function(Le,pt,Bt,Zt){return oe.apply(this,arguments)})})).close(),yield(0,xe.Lj)(Jr),yield(0,xe.Lj)("fcm_vapid_details_db"),yield(0,xe.Lj)("undefined"),ho(U)?U:null;var oe}),Nr.apply(this,arguments)}function ho(k){if(!k||!k.subscriptionOptions)return!1;const{subscriptionOptions:U}=k;return"number"==typeof k.createTime&&k.createTime>0&&"string"==typeof k.token&&k.token.length>0&&"string"==typeof U.auth&&U.auth.length>0&&"string"==typeof U.p256dh&&U.p256dh.length>0&&"string"==typeof U.endpoint&&U.endpoint.length>0&&"string"==typeof U.swScope&&U.swScope.length>0&&"string"==typeof U.vapidKey&&U.vapidKey.length>0}const ks="firebase-messaging-store";let Co=null;function jn(){return Co||(Co=(0,xe.X3)("firebase-messaging-database",1,{upgrade:(k,U)=>{0===U&&k.createObjectStore(ks)}})),Co}function L(k){return q.apply(this,arguments)}function q(){return(q=(0,J.Z)(function*(k){const U=ht(k),oe=yield(yield jn()).transaction(ks).objectStore(ks).get(U);if(oe)return oe;{const Pe=yield Fa(k.appConfig.senderId);if(Pe)return yield F(k,Pe),Pe}})).apply(this,arguments)}function F(k,U){return Q.apply(this,arguments)}function Q(){return(Q=(0,J.Z)(function*(k,U){const K=ht(k),Pe=(yield jn()).transaction(ks,"readwrite");return yield Pe.objectStore(ks).put(U,K),yield Pe.done,U})).apply(this,arguments)}function de(k){return We.apply(this,arguments)}function We(){return(We=(0,J.Z)(function*(k){const U=ht(k),oe=(yield jn()).transaction(ks,"readwrite");yield oe.objectStore(ks).delete(U),yield oe.done})).apply(this,arguments)}function ht({appConfig:k}){return k.appId}const hn=new Ee.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function fn(k,U){return En.apply(this,arguments)}function En(){return(En=(0,J.Z)(function*(k,U){const K=yield Ri(k),oe=hs(U),Pe={method:"POST",headers:K,body:JSON.stringify(oe)};let Le;try{Le=yield(yield fetch(ji(k.appConfig),Pe)).json()}catch(pt){throw hn.create("token-subscribe-failed",{errorInfo:pt})}if(Le.error)throw hn.create("token-subscribe-failed",{errorInfo:Le.error.message});if(!Le.token)throw hn.create("token-subscribe-no-token");return Le.token})).apply(this,arguments)}function On(k,U){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,J.Z)(function*(k,U){const K=yield Ri(k),oe=hs(U.subscriptionOptions),Pe={method:"PATCH",headers:K,body:JSON.stringify(oe)};let Le;try{Le=yield(yield fetch(`${ji(k.appConfig)}/${U.token}`,Pe)).json()}catch(pt){throw hn.create("token-update-failed",{errorInfo:pt})}if(Le.error)throw hn.create("token-update-failed",{errorInfo:Le.error.message});if(!Le.token)throw hn.create("token-update-no-token");return Le.token})).apply(this,arguments)}function lr(k,U){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,J.Z)(function*(k,U){const oe={method:"DELETE",headers:yield Ri(k)};try{const Le=yield(yield fetch(`${ji(k.appConfig)}/${U}`,oe)).json();if(Le.error)throw hn.create("token-unsubscribe-failed",{errorInfo:Le.error.message})}catch(Pe){throw hn.create("token-unsubscribe-failed",{errorInfo:Pe})}})).apply(this,arguments)}function ji({projectId:k}){return`https://fcmregistrations.googleapis.com/v1/projects/${k}/registrations`}function Ri(k){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,J.Z)(function*({appConfig:k,installations:U}){const K=yield U.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":k.apiKey,"x-goog-firebase-installations-auth":`FIS ${K}`})})).apply(this,arguments)}function hs({p256dh:k,auth:U,endpoint:K,vapidKey:oe}){const Pe={web:{endpoint:K,auth:U,p256dh:k}};return oe!==li&&(Pe.web.applicationPubKey=oe),Pe}const La=6048e5;function jo(k){return fo.apply(this,arguments)}function fo(){return(fo=(0,J.Z)(function*(k){const U=yield Qs(k.swRegistration,k.vapidKey),K={vapidKey:k.vapidKey,swScope:k.swRegistration.scope,endpoint:U.endpoint,auth:Ii(U.getKey("auth")),p256dh:Ii(U.getKey("p256dh"))},oe=yield L(k.firebaseDependencies);if(oe){if(Ho(oe.subscriptionOptions,K))return Date.now()>=oe.createTime+La?ra(k,{token:oe.token,createTime:Date.now(),subscriptionOptions:K}):oe.token;try{yield lr(k.firebaseDependencies,oe.token)}catch(Pe){console.warn(Pe)}return gt(k.firebaseDependencies,K)}return gt(k.firebaseDependencies,K)})).apply(this,arguments)}function fs(k){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,J.Z)(function*(k){const U=yield L(k.firebaseDependencies);U&&(yield lr(k.firebaseDependencies,U.token),yield de(k.firebaseDependencies));const K=yield k.swRegistration.pushManager.getSubscription();return!K||K.unsubscribe()})).apply(this,arguments)}function ra(k,U){return nu.apply(this,arguments)}function nu(){return(nu=(0,J.Z)(function*(k,U){try{const K=yield On(k.firebaseDependencies,U),oe=Object.assign(Object.assign({},U),{token:K,createTime:Date.now()});return yield F(k.firebaseDependencies,oe),K}catch(K){throw yield fs(k),K}})).apply(this,arguments)}function gt(k,U){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,J.Z)(function*(k,U){const oe={token:yield fn(k,U),createTime:Date.now(),subscriptionOptions:U};return yield F(k,oe),oe.token})).apply(this,arguments)}function Qs(k,U){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,J.Z)(function*(k,U){return(yield k.pushManager.getSubscription())||k.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ta(U)})})).apply(this,arguments)}function Ho(k,U){return U.vapidKey===k.vapidKey&&U.endpoint===k.endpoint&&U.auth===k.auth&&U.p256dh===k.p256dh}function ia(k){const U={from:k.from,collapseKey:k.collapse_key,messageId:k.fcmMessageId};return function bs(k,U){if(!U.notification)return;k.notification={};const K=U.notification.title;K&&(k.notification.title=K);const oe=U.notification.body;oe&&(k.notification.body=oe);const Pe=U.notification.image;Pe&&(k.notification.image=Pe)}(U,k),function Ua(k,U){!U.data||(k.data=U.data)}(U,k),function pl(k,U){var K,oe,Pe,Le,pt;if(!U.fcmOptions&&!(null===(K=U.notification)||void 0===K?void 0:K.click_action))return;k.fcmOptions={};const Bt=null!==(Pe=null===(oe=U.fcmOptions)||void 0===oe?void 0:oe.link)&&void 0!==Pe?Pe:null===(Le=U.notification)||void 0===Le?void 0:Le.click_action;Bt&&(k.fcmOptions.link=Bt);const Zt=null===(pt=U.fcmOptions)||void 0===pt?void 0:pt.analytics_label;Zt&&(k.fcmOptions.analyticsLabel=Zt)}(U,k),U}function jl(k){return"object"==typeof k&&!!k&&rs in k}function ru(k,U){const K=[];for(let oe=0;oe<k.length;oe++)K.push(k.charAt(oe)),oe<U.length&&K.push(U.charAt(oe));return K.join("")}function Cs(k){return hn.create("missing-app-config-values",{valueName:k})}ru("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ru("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class bi{constructor(U,K,oe){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Pe=function Iu(k){if(!k||!k.options)throw Cs("App Configuration Object");if(!k.name)throw Cs("App Name");const U=["projectId","apiKey","appId","messagingSenderId"],{options:K}=k;for(const oe of U)if(!K[oe])throw Cs(oe);return{appName:k.name,projectId:K.projectId,apiKey:K.apiKey,appId:K.appId,senderId:K.messagingSenderId}}(U);this.firebaseDependencies={app:U,appConfig:Pe,installations:K,analyticsProvider:oe}}_delete(){return Promise.resolve()}}function Ls(k){return sa.apply(this,arguments)}function sa(){return(sa=(0,J.Z)(function*(k){var U;try{k.swRegistration=yield navigator.serviceWorker.register(Oa,{scope:Qr}),k.swRegistration.update().catch(()=>{})}catch(K){throw hn.create("failed-service-worker-registration",{browserErrorMessage:null===(U=K)||void 0===U?void 0:U.message})}})).apply(this,arguments)}function Us(k,U){return Js.apply(this,arguments)}function Js(){return(Js=(0,J.Z)(function*(k,U){if(!U&&!k.swRegistration&&(yield Ls(k)),U||!k.swRegistration){if(!(U instanceof ServiceWorkerRegistration))throw hn.create("invalid-sw-registration");k.swRegistration=U}})).apply(this,arguments)}function Xr(k,U){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,J.Z)(function*(k,U){U?k.vapidKey=U:k.vapidKey||(k.vapidKey=li)})).apply(this,arguments)}function gl(){return(gl=(0,J.Z)(function*(k,U){if(!navigator)throw hn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw hn.create("permission-blocked");return yield Xr(k,null==U?void 0:U.vapidKey),yield Us(k,null==U?void 0:U.serviceWorkerRegistration),jo(k)})).apply(this,arguments)}function To(k,U,K){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,J.Z)(function*(k,U,K){const oe=Gu(U);(yield k.firebaseDependencies.analyticsProvider.get()).logEvent(oe,{message_id:K[rs],message_name:K[ka],message_time:K[Is],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Gu(k){switch(k){case Vo.NOTIFICATION_CLICKED:return"notification_open";case Vo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ps(){return(ps=(0,J.Z)(function*(k,U){const K=U.data;if(!K.isFirebaseMessaging)return;k.onMessageHandler&&K.messageType===Vo.PUSH_RECEIVED&&("function"==typeof k.onMessageHandler?k.onMessageHandler(ia(K)):k.onMessageHandler.next(ia(K)));const oe=K.data;jl(oe)&&"1"===oe[Zu]&&(yield To(k,K.messageType,oe))})).apply(this,arguments)}const oa="@firebase/messaging",Do=k=>{const U=new bi(k.getProvider("app").getImmediate(),k.getProvider("installations-internal").getImmediate(),k.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",K=>function bu(k,U){return ps.apply(this,arguments)}(U,K)),U},aa=k=>{const U=k.getProvider("messaging").getImmediate();return{getToken:oe=>function iu(k,U){return gl.apply(this,arguments)}(U,oe)}};function po(){return go.apply(this,arguments)}function go(){return(go=(0,J.Z)(function*(){try{yield(0,Ee.eu)()}catch(k){return!1}return"undefined"!=typeof window&&(0,Ee.hl)()&&(0,Ee.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function qu(){(0,Ce._registerComponent)(new ve.wA("messaging",Do,"PUBLIC")),(0,Ce._registerComponent)(new ve.wA("messaging-internal",aa,"PRIVATE")),(0,Ce.registerVersion)(oa,"0.9.14"),(0,Ce.registerVersion)(oa,"0.9.14","esm2017")}();const ja="analytics",Fc="firebase_id",Bs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",la="https://www.googletagmanager.com/gtag/js",Zn=new Me.Yd("@firebase/analytics");function Cu(k){return Promise.all(k.map(U=>U.catch(K=>K)))}function ml(k,U){const K=document.createElement("script");K.src=`${la}?l=${k}&id=${U}`,K.async=!0,document.head.appendChild(K)}function mo(k,U,K,oe,Pe,Le){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,J.Z)(function*(k,U,K,oe,Pe,Le){const pt=oe[Pe];try{if(pt)yield U[pt];else{const Zt=(yield Cu(K)).find(wn=>wn.measurementId===Pe);Zt&&(yield U[Zt.appId])}}catch(Bt){Zn.error(Bt)}k("config",Pe,Le)})).apply(this,arguments)}function yl(k,U,K,oe,Pe){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,J.Z)(function*(k,U,K,oe,Pe){try{let Le=[];if(Pe&&Pe.send_to){let pt=Pe.send_to;Array.isArray(pt)||(pt=[pt]);const Bt=yield Cu(K);for(const Zt of pt){const wn=Bt.find(an=>an.measurementId===Zt),rr=wn&&U[wn.appId];if(!rr){Le=[];break}Le.push(rr)}}0===Le.length&&(Le=Object.values(U)),yield Promise.all(Le),k("event",oe,Pe||{})}catch(Le){Zn.error(Le)}})).apply(this,arguments)}function Gl(){const k=window.document.getElementsByTagName("script");for(const U of Object.values(k))if(U.src&&U.src.includes(la))return U;return null}const Pi=new Ee.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Tu=new class js{constructor(U={},K=1e3){this.throttleMetadata=U,this.intervalMillis=K}getThrottleMetadata(U){return this.throttleMetadata[U]}setThrottleMetadata(U,K){this.throttleMetadata[U]=K}deleteThrottleMetadata(U){delete this.throttleMetadata[U]}};function ql(k){return new Headers({Accept:"application/json","x-goog-api-key":k})}function $a(k){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,J.Z)(function*(k){var U;const{appId:K,apiKey:oe}=k,Pe={method:"GET",headers:ql(oe)},Le=Bs.replace("{app-id}",K),pt=yield fetch(Le,Pe);if(200!==pt.status&&304!==pt.status){let Bt="";try{const Zt=yield pt.json();(null===(U=Zt.error)||void 0===U?void 0:U.message)&&(Bt=Zt.error.message)}catch(Zt){}throw Pi.create("config-fetch-failed",{httpStatus:pt.status,responseMessage:Bt})}return pt.json()})).apply(this,arguments)}function ti(k){return Za.apply(this,arguments)}function Za(){return(Za=(0,J.Z)(function*(k,U=Tu,K){const{appId:oe,apiKey:Pe,measurementId:Le}=k.options;if(!oe)throw Pi.create("no-app-id");if(!Pe){if(Le)return{measurementId:Le,appId:oe};throw Pi.create("no-api-key")}const pt=U.getThrottleMetadata(oe)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Bt=new au;return setTimeout((0,J.Z)(function*(){Bt.abort()}),void 0!==K?K:6e4),ca({appId:oe,apiKey:Pe,measurementId:Le},pt,Bt,U)})).apply(this,arguments)}function ca(k,U,K){return ni.apply(this,arguments)}function ni(){return(ni=(0,J.Z)(function*(k,{throttleEndTimeMillis:U,backoffCount:K},oe,Pe=Tu){const{appId:Le,measurementId:pt}=k;try{yield ou(oe,U)}catch(Bt){if(pt)return Zn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${pt} provided in the "measurementId" field in the local Firebase config. [${Bt.message}]`),{appId:Le,measurementId:pt};throw Bt}try{const Bt=yield $a(k);return Pe.deleteThrottleMetadata(Le),Bt}catch(Bt){if(!zo(Bt)){if(Pe.deleteThrottleMetadata(Le),pt)return Zn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${pt} provided in the "measurementId" field in the local Firebase config. [${Bt.message}]`),{appId:Le,measurementId:pt};throw Bt}const Zt=503===Number(Bt.customData.httpStatus)?(0,Ee.$s)(K,Pe.intervalMillis,30):(0,Ee.$s)(K,Pe.intervalMillis),wn={throttleEndTimeMillis:Date.now()+Zt,backoffCount:K+1};return Pe.setThrottleMetadata(Le,wn),Zn.debug(`Calling attemptFetch again in ${Zt} millis`),ca(k,wn,oe,Pe)}})).apply(this,arguments)}function ou(k,U){return new Promise((K,oe)=>{const Pe=Math.max(U-Date.now(),0),Le=setTimeout(K,Pe);k.addEventListener(()=>{clearTimeout(Le),oe(Pi.create("fetch-throttle",{throttleEndTimeMillis:U}))})})}function zo(k){if(!(k instanceof Ee.ZR&&k.customData))return!1;const U=Number(k.customData.httpStatus);return 429===U||500===U||503===U||504===U}class au{constructor(){this.listeners=[]}addEventListener(U){this.listeners.push(U)}abort(){this.listeners.forEach(U=>U())}}function Du(){return wt.apply(this,arguments)}function wt(){return(wt=(0,J.Z)(function*(){if(!(0,Ee.hl)())return Zn.warn(Pi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Ee.eu)()}catch(k){return Zn.warn(Pi.create("indexeddb-unavailable",{errorInfo:k}).message),!1}return!0})).apply(this,arguments)}function Ni(){return(Ni=(0,J.Z)(function*(k,U,K,oe,Pe,Le,pt){var Bt;const Zt=ti(k);Zt.then(os=>{K[os.measurementId]=os.appId,k.options.measurementId&&os.measurementId!==k.options.measurementId&&Zn.warn(`The measurement ID in the local Firebase config (${k.options.measurementId}) does not match the measurement ID fetched from the server (${os.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(os=>Zn.error(os)),U.push(Zt);const wn=Du().then(os=>{if(os)return oe.getId()}),[rr,an]=yield Promise.all([Zt,wn]);Gl()||ml(Le,rr.measurementId),Pe("js",new Date);const Ar=null!==(Bt=null==pt?void 0:pt.config)&&void 0!==Bt?Bt:{};return Ar.origin="firebase",Ar.update=!0,null!=an&&(Ar[Fc]=an),Pe("config",rr.measurementId,Ar),rr.measurementId})).apply(this,arguments)}class Ko{constructor(U){this.app=U}_delete(){return delete A[this.app.options.appId],Promise.resolve()}}let A={},T=[];const C={};let j,re,P="dataLayer",ge=!1;function In(k,U,K){!function Ft(){const k=[];if((0,Ee.ru)()&&k.push("This is a browser extension environment."),(0,Ee.zI)()||k.push("Cookies are not available."),k.length>0){const U=k.map((oe,Pe)=>`(${Pe+1}) ${oe}`).join(" "),K=Pi.create("invalid-analytics-context",{errorInfo:U});Zn.warn(K.message)}}();const oe=k.options.appId;if(!oe)throw Pi.create("no-app-id");if(!k.options.apiKey){if(!k.options.measurementId)throw Pi.create("no-api-key");Zn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${k.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=A[oe])throw Pi.create("already-exists",{id:oe});if(!ge){!function Hi(k){let U=[];Array.isArray(window[k])?U=window[k]:window[k]=U}(P);const{wrappedGtag:Le,gtagCore:pt}=function eo(k,U,K,oe,Pe){let Le=function(...pt){window[oe].push(arguments)};return window[Pe]&&"function"==typeof window[Pe]&&(Le=window[Pe]),window[Pe]=function qo(k,U,K,oe){function Le(){return(Le=(0,J.Z)(function*(pt,Bt,Zt){try{"event"===pt?yield yl(k,U,K,Bt,Zt):"config"===pt?yield mo(k,U,K,oe,Bt,Zt):k("set",Bt)}catch(wn){Zn.error(wn)}})).apply(this,arguments)}return function Pe(pt,Bt,Zt){return Le.apply(this,arguments)}}(Le,k,U,K),{gtagCore:Le,wrappedGtag:window[Pe]}}(A,T,C,P,"gtag");re=Le,j=pt,ge=!0}return A[oe]=function _r(k,U,K,oe,Pe,Le,pt){return Ni.apply(this,arguments)}(k,T,C,U,j,P,K),new Ko(k)}function ar(){return(ar=(0,J.Z)(function*(k,U,K,oe,Pe){if(Pe&&Pe.global)k("event",K,oe);else{const Le=yield U;k("event",K,Object.assign(Object.assign({},oe),{send_to:Le}))}})).apply(this,arguments)}function ha(){return nr.apply(this,arguments)}function nr(){return(nr=(0,J.Z)(function*(){if((0,Ee.ru)()||!(0,Ee.zI)()||!(0,Ee.hl)())return!1;try{return yield(0,Ee.eu)()}catch(k){return!1}})).apply(this,arguments)}const Wu="@firebase/analytics";!function _l(){(0,Ce._registerComponent)(new ve.wA(ja,(U,{options:K})=>In(U.getProvider("app").getImmediate(),U.getProvider("installations-internal").getImmediate(),K),"PUBLIC")),(0,Ce._registerComponent)(new ve.wA("analytics-internal",function k(U){try{const K=U.getProvider(ja).getImmediate();return{logEvent:(oe,Pe,Le)=>function Pd(k,U,K,oe){k=(0,Ee.m9)(k),function qt(k,U,K,oe,Pe){return ar.apply(this,arguments)}(re,A[k.app.options.appId],U,K,oe).catch(Pe=>Zn.error(Pe))}(K,oe,Pe,Le)}}catch(K){throw Pi.create("interop-component-reg-failed",{reason:K})}},"PRIVATE")),(0,Ce.registerVersion)(Wu,"0.7.10"),(0,Ce.registerVersion)(Wu,"0.7.10","esm2017")}();var Nd=V(4408),Hs=V(7565);const zu=new class Ti extends Hs.v{}(class cu extends Nd.o{constructor(U,K){super(U,K),this.scheduler=U,this.work=K}schedule(U,K=0){return K>0?super.schedule(U,K):(this.delay=K,this.state=U,this.scheduler.flush(this),this)}execute(U,K){return K>0||this.closed?super.execute(U,K):this._execute(U,K)}requestAsyncId(U,K,oe=0){return null!=oe&&oe>0||null==oe&&this.delay>0?super.requestAsyncId(U,K,oe):U.flush(this)}});var $s=V(4986),vl=V(8505),Ue=V(5363),gs=V(9468);const Zs=new S.GfV("7.4.1"),fa="__angularfire_symbol__analyticsIsSupportedValue",Zi="__angularfire_symbol__analyticsIsSupported",Ts="__angularfire_symbol__remoteConfigIsSupportedValue",pa="__angularfire_symbol__remoteConfigIsSupported",Rr="__angularfire_symbol__messagingIsSupportedValue",Au="__angularfire_symbol__messagingIsSupported";function ma(k,U,K){if(U){if(1===U.length)return U[0];const Le=U.filter(pt=>pt.app===K);if(1===Le.length)return Le[0]}return K.container.getProvider(k).getImmediate({optional:!0})}globalThis[Zi]||(globalThis[Zi]=ha().then(k=>globalThis[fa]=k).catch(()=>globalThis[fa]=!1)),globalThis[Au]||(globalThis[Au]=po().then(k=>globalThis[Rr]=k).catch(()=>globalThis[Rr]=!1)),globalThis[pa]||(globalThis[pa]=cs().then(k=>globalThis[Ts]=k).catch(()=>globalThis[Ts]=!1));const Qu=(k,U)=>{const K=U?[U]:(0,v.C6)(),oe=[];return K.forEach(Pe=>{Pe.container.getProvider(k).instances.forEach(pt=>{oe.includes(pt)||oe.push(pt)})}),oe};function ss(){}class fr{constructor(U,K=zu){this.zone=U,this.delegate=K}now(){return this.delegate.now()}schedule(U,K,oe){const Pe=this.zone;return this.delegate.schedule(function(pt){Pe.runGuarded(()=>{U.apply(this,[pt])})},K,oe)}}class So{constructor(U){this.zone=U,this.task=null}call(U,K){const oe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ss,{},ss,ss)),K.pipe((0,vl.b)({next:oe,complete:oe,error:oe})).subscribe(U).add(oe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ms=(()=>{class k{constructor(K){this.ngZone=K,this.outsideAngular=K.runOutsideAngular(()=>new fr(Zone.current)),this.insideAngular=K.run(()=>new fr(Zone.current,$s.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return k.\u0275fac=function(K){return new(K||k)(S.LFG(S.R0b))},k.\u0275prov=S.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();function Ln(){const k=globalThis.\u0275AngularFireScheduler;if(!k)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return k}function Jn(k){return k.pipe((0,Ue.Q)(Ln().outsideAngular))}function Gi(k){return Ln(),function xu(k){return function(K){return(K=K.lift(new So(k.ngZone))).pipe((0,gs.R)(k.outsideAngular),(0,Ue.Q)(k.insideAngular))}}(Ln())(k)}},2090:(Rt,Ve,V)=>{V.d(Ve,{$s:()=>en,BH:()=>It,DV:()=>sn,Dv:()=>Yi,G6:()=>yt,GJ:()=>$t,L:()=>xe,LL:()=>$e,Mn:()=>je,Pz:()=>Lt,Sg:()=>nt,UG:()=>Ze,UI:()=>mr,US:()=>ve,Wj:()=>me,Yr:()=>Je,ZB:()=>ae,ZR:()=>Ge,b$:()=>At,cI:()=>xt,d:()=>Xe,dS:()=>dt,eu:()=>ze,g5:()=>J,gK:()=>mi,gQ:()=>wr,h$:()=>Me,hl:()=>X,hu:()=>v,jU:()=>rt,lb:()=>we,m9:()=>Nn,ne:()=>Yn,p$:()=>le,pd:()=>Kn,r3:()=>mn,ru:()=>Ie,tV:()=>Oe,uI:()=>bt,ug:()=>ke,vZ:()=>er,w1:()=>Ke,w9:()=>Wt,xO:()=>zn,xb:()=>_n,z$:()=>at,zI:()=>ue,zd:()=>Mr});const v=function(se,he){if(!se)throw J(he)},J=function(se){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+se)},Ce=function(se){const he=[];let ye=0;for(let st=0;st<se.length;st++){let ce=se.charCodeAt(st);ce<128?he[ye++]=ce:ce<2048?(he[ye++]=ce>>6|192,he[ye++]=63&ce|128):55296==(64512&ce)&&st+1<se.length&&56320==(64512&se.charCodeAt(st+1))?(ce=65536+((1023&ce)<<10)+(1023&se.charCodeAt(++st)),he[ye++]=ce>>18|240,he[ye++]=ce>>12&63|128,he[ye++]=ce>>6&63|128,he[ye++]=63&ce|128):(he[ye++]=ce>>12|224,he[ye++]=ce>>6&63|128,he[ye++]=63&ce|128)}return he},ve={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(se,he){if(!Array.isArray(se))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ye=he?this.byteToCharMapWebSafe_:this.byteToCharMap_,st=[];for(let ce=0;ce<se.length;ce+=3){const Re=se[ce],it=ce+1<se.length,Ot=it?se[ce+1]:0,Jt=ce+2<se.length,tn=Jt?se[ce+2]:0;let Fr=(15&Ot)<<2|tn>>6,Hr=63&tn;Jt||(Hr=64,it||(Fr=64)),st.push(ye[Re>>2],ye[(3&Re)<<4|Ot>>4],ye[Fr],ye[Hr])}return st.join("")},encodeString(se,he){return this.HAS_NATIVE_SUPPORT&&!he?btoa(se):this.encodeByteArray(Ce(se),he)},decodeString(se,he){return this.HAS_NATIVE_SUPPORT&&!he?atob(se):function(se){const he=[];let ye=0,st=0;for(;ye<se.length;){const ce=se[ye++];if(ce<128)he[st++]=String.fromCharCode(ce);else if(ce>191&&ce<224){const Re=se[ye++];he[st++]=String.fromCharCode((31&ce)<<6|63&Re)}else if(ce>239&&ce<365){const Jt=((7&ce)<<18|(63&se[ye++])<<12|(63&se[ye++])<<6|63&se[ye++])-65536;he[st++]=String.fromCharCode(55296+(Jt>>10)),he[st++]=String.fromCharCode(56320+(1023&Jt))}else{const Re=se[ye++],it=se[ye++];he[st++]=String.fromCharCode((15&ce)<<12|(63&Re)<<6|63&it)}}return he.join("")}(this.decodeStringToByteArray(se,he))},decodeStringToByteArray(se,he){this.init_();const ye=he?this.charToByteMapWebSafe_:this.charToByteMap_,st=[];for(let ce=0;ce<se.length;){const Re=ye[se.charAt(ce++)],Ot=ce<se.length?ye[se.charAt(ce)]:0;++ce;const tn=ce<se.length?ye[se.charAt(ce)]:64;++ce;const dn=ce<se.length?ye[se.charAt(ce)]:64;if(++ce,null==Re||null==Ot||null==tn||null==dn)throw Error();st.push(Re<<2|Ot>>4),64!==tn&&(st.push(Ot<<4&240|tn>>2),64!==dn&&st.push(tn<<6&192|dn))}return st},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let se=0;se<this.ENCODED_VALS.length;se++)this.byteToCharMap_[se]=this.ENCODED_VALS.charAt(se),this.charToByteMap_[this.byteToCharMap_[se]]=se,this.byteToCharMapWebSafe_[se]=this.ENCODED_VALS_WEBSAFE.charAt(se),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[se]]=se,se>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(se)]=se,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(se)]=se)}}},Me=function(se){const he=Ce(se);return ve.encodeByteArray(he,!0)},xe=function(se){return Me(se).replace(/\./g,"")},Oe=function(se){try{return ve.decodeString(se,!0)}catch(he){console.error("base64Decode failed: ",he)}return null};function le(se){return ae(void 0,se)}function ae(se,he){if(!(he instanceof Object))return he;switch(he.constructor){case Date:return new Date(he.getTime());case Object:void 0===se&&(se={});break;case Array:se=[];break;default:return he}for(const ye in he)!he.hasOwnProperty(ye)||!De(ye)||(se[ye]=ae(se[ye],he[ye]));return se}function De(se){return"__proto__"!==se}class It{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((he,ye)=>{this.resolve=he,this.reject=ye})}wrapCallback(he){return(ye,st)=>{ye?this.reject(ye):this.resolve(st),"function"==typeof he&&(this.promise.catch(()=>{}),1===he.length?he(ye):he(ye,st))}}}function nt(se,he){if(se.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const st=he||"demo-project",ce=se.iat||0,Re=se.sub||se.user_id;if(!Re)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const it=Object.assign({iss:`https://securetoken.google.com/${st}`,aud:st,iat:ce,exp:ce+3600,auth_time:ce,sub:Re,user_id:Re,firebase:{sign_in_provider:"custom",identities:{}}},se);return[xe(JSON.stringify({alg:"none",type:"JWT"})),xe(JSON.stringify(it)),""].join(".")}function at(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function bt(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(at())}function Ze(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(se){return!1}}function rt(){return"object"==typeof self&&self.self===self}function Ie(){const se="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof se&&void 0!==se.id}function At(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Xe(){return at().indexOf("Electron/")>=0}function Ke(){const se=at();return se.indexOf("MSIE ")>=0||se.indexOf("Trident/")>=0}function je(){return at().indexOf("MSAppHost/")>=0}function Je(){return!1}function yt(){return!Ze()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function X(){return"object"==typeof indexedDB}function ze(){return new Promise((se,he)=>{try{let ye=!0;const st="validate-browser-context-for-indexeddb-analytics-module",ce=self.indexedDB.open(st);ce.onsuccess=()=>{ce.result.close(),ye||self.indexedDB.deleteDatabase(st),se(!0)},ce.onupgradeneeded=()=>{ye=!1},ce.onerror=()=>{var Re;he((null===(Re=ce.error)||void 0===Re?void 0:Re.message)||"")}}catch(ye){he(ye)}})}function ue(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ge extends Error{constructor(he,ye,st){super(ye),this.code=he,this.customData=st,this.name="FirebaseError",Object.setPrototypeOf(this,Ge.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$e.prototype.create)}}class $e{constructor(he,ye,st){this.service=he,this.serviceName=ye,this.errors=st}create(he,...ye){const st=ye[0]||{},ce=`${this.service}/${he}`,Re=this.errors[he],it=Re?function mt(se,he){return se.replace(Tt,(ye,st)=>{const ce=he[st];return null!=ce?String(ce):`<${st}?>`})}(Re,st):"Error";return new Ge(ce,`${this.serviceName}: ${it} (${ce}).`,st)}}const Tt=/\{\$([^}]+)}/g;function xt(se){return JSON.parse(se)}function Lt(se){return JSON.stringify(se)}const ut=function(se){let he={},ye={},st={},ce="";try{const Re=se.split(".");he=xt(Oe(Re[0])||""),ye=xt(Oe(Re[1])||""),ce=Re[2],st=ye.d||{},delete ye.d}catch(Re){}return{header:he,claims:ye,data:st,signature:ce}},Wt=function(se){const ye=ut(se).claims;return!!ye&&"object"==typeof ye&&ye.hasOwnProperty("iat")},$t=function(se){const he=ut(se).claims;return"object"==typeof he&&!0===he.admin};function mn(se,he){return Object.prototype.hasOwnProperty.call(se,he)}function sn(se,he){if(Object.prototype.hasOwnProperty.call(se,he))return se[he]}function _n(se){for(const he in se)if(Object.prototype.hasOwnProperty.call(se,he))return!1;return!0}function mr(se,he,ye){const st={};for(const ce in se)Object.prototype.hasOwnProperty.call(se,ce)&&(st[ce]=he.call(ye,se[ce],ce,se));return st}function er(se,he){if(se===he)return!0;const ye=Object.keys(se),st=Object.keys(he);for(const ce of ye){if(!st.includes(ce))return!1;const Re=se[ce],it=he[ce];if(cr(Re)&&cr(it)){if(!er(Re,it))return!1}else if(Re!==it)return!1}for(const ce of st)if(!ye.includes(ce))return!1;return!0}function cr(se){return null!==se&&"object"==typeof se}function zn(se){const he=[];for(const[ye,st]of Object.entries(se))Array.isArray(st)?st.forEach(ce=>{he.push(encodeURIComponent(ye)+"="+encodeURIComponent(ce))}):he.push(encodeURIComponent(ye)+"="+encodeURIComponent(st));return he.length?"&"+he.join("&"):""}function Mr(se){const he={};return se.replace(/^\?/,"").split("&").forEach(st=>{if(st){const[ce,Re]=st.split("=");he[decodeURIComponent(ce)]=decodeURIComponent(Re)}}),he}function Kn(se){const he=se.indexOf("?");if(!he)return"";const ye=se.indexOf("#",he);return se.substring(he,ye>0?ye:void 0)}class wr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let he=1;he<this.blockSize;++he)this.pad_[he]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(he,ye){ye||(ye=0);const st=this.W_;if("string"==typeof he)for(let dn=0;dn<16;dn++)st[dn]=he.charCodeAt(ye)<<24|he.charCodeAt(ye+1)<<16|he.charCodeAt(ye+2)<<8|he.charCodeAt(ye+3),ye+=4;else for(let dn=0;dn<16;dn++)st[dn]=he[ye]<<24|he[ye+1]<<16|he[ye+2]<<8|he[ye+3],ye+=4;for(let dn=16;dn<80;dn++){const Fr=st[dn-3]^st[dn-8]^st[dn-14]^st[dn-16];st[dn]=4294967295&(Fr<<1|Fr>>>31)}let tn,yr,ce=this.chain_[0],Re=this.chain_[1],it=this.chain_[2],Ot=this.chain_[3],Jt=this.chain_[4];for(let dn=0;dn<80;dn++){dn<40?dn<20?(tn=Ot^Re&(it^Ot),yr=1518500249):(tn=Re^it^Ot,yr=1859775393):dn<60?(tn=Re&it|Ot&(Re|it),yr=2400959708):(tn=Re^it^Ot,yr=3395469782);const Fr=(ce<<5|ce>>>27)+tn+Jt+yr+st[dn]&4294967295;Jt=Ot,Ot=it,it=4294967295&(Re<<30|Re>>>2),Re=ce,ce=Fr}this.chain_[0]=this.chain_[0]+ce&4294967295,this.chain_[1]=this.chain_[1]+Re&4294967295,this.chain_[2]=this.chain_[2]+it&4294967295,this.chain_[3]=this.chain_[3]+Ot&4294967295,this.chain_[4]=this.chain_[4]+Jt&4294967295}update(he,ye){if(null==he)return;void 0===ye&&(ye=he.length);const st=ye-this.blockSize;let ce=0;const Re=this.buf_;let it=this.inbuf_;for(;ce<ye;){if(0===it)for(;ce<=st;)this.compress_(he,ce),ce+=this.blockSize;if("string"==typeof he){for(;ce<ye;)if(Re[it]=he.charCodeAt(ce),++it,++ce,it===this.blockSize){this.compress_(Re),it=0;break}}else for(;ce<ye;)if(Re[it]=he[ce],++it,++ce,it===this.blockSize){this.compress_(Re),it=0;break}}this.inbuf_=it,this.total_+=ye}digest(){const he=[];let ye=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ce=this.blockSize-1;ce>=56;ce--)this.buf_[ce]=255&ye,ye/=256;this.compress_(this.buf_);let st=0;for(let ce=0;ce<5;ce++)for(let Re=24;Re>=0;Re-=8)he[st]=this.chain_[ce]>>Re&255,++st;return he}}function Yn(se,he){const ye=new Qt(se,he);return ye.subscribe.bind(ye)}class Qt{constructor(he,ye){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ye,this.task.then(()=>{he(this)}).catch(st=>{this.error(st)})}next(he){this.forEachObserver(ye=>{ye.next(he)})}error(he){this.forEachObserver(ye=>{ye.error(he)}),this.close(he)}complete(){this.forEachObserver(he=>{he.complete()}),this.close()}subscribe(he,ye,st){let ce;if(void 0===he&&void 0===ye&&void 0===st)throw new Error("Missing Observer.");ce=function Mn(se,he){if("object"!=typeof se||null===se)return!1;for(const ye of he)if(ye in se&&"function"==typeof se[ye])return!0;return!1}(he,["next","error","complete"])?he:{next:he,error:ye,complete:st},void 0===ce.next&&(ce.next=Pn),void 0===ce.error&&(ce.error=Pn),void 0===ce.complete&&(ce.complete=Pn);const Re=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ce.error(this.finalError):ce.complete()}catch(it){}}),this.observers.push(ce),Re}unsubscribeOne(he){void 0===this.observers||void 0===this.observers[he]||(delete this.observers[he],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(he){if(!this.finalized)for(let ye=0;ye<this.observers.length;ye++)this.sendOne(ye,he)}sendOne(he,ye){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[he])try{ye(this.observers[he])}catch(st){"undefined"!=typeof console&&console.error&&console.error(st)}})}close(he){this.finalized||(this.finalized=!0,void 0!==he&&(this.finalError=he),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Pn(){}const Yi=function(se,he,ye,st){let ce;if(st<he?ce="at least "+he:st>ye&&(ce=0===ye?"none":"no more than "+ye),ce)throw new Error(se+" failed: Was called with "+st+(1===st?" argument.":" arguments.")+" Expects "+ce+".")};function mi(se,he){return`${se} failed: ${he} argument `}function me(se,he,ye,st){if((!st||ye)&&"function"!=typeof ye)throw new Error(mi(se,he)+"must be a valid function.")}function we(se,he,ye,st){if((!st||ye)&&("object"!=typeof ye||null===ye))throw new Error(mi(se,he)+"must be a valid context object.")}const dt=function(se){const he=[];let ye=0;for(let st=0;st<se.length;st++){let ce=se.charCodeAt(st);if(ce>=55296&&ce<=56319){const Re=ce-55296;st++,v(st<se.length,"Surrogate pair missing trail surrogate."),ce=65536+(Re<<10)+(se.charCodeAt(st)-56320)}ce<128?he[ye++]=ce:ce<2048?(he[ye++]=ce>>6|192,he[ye++]=63&ce|128):ce<65536?(he[ye++]=ce>>12|224,he[ye++]=ce>>6&63|128,he[ye++]=63&ce|128):(he[ye++]=ce>>18|240,he[ye++]=ce>>12&63|128,he[ye++]=ce>>6&63|128,he[ye++]=63&ce|128)}return he},ke=function(se){let he=0;for(let ye=0;ye<se.length;ye++){const st=se.charCodeAt(ye);st<128?he++:st<2048?he+=2:st>=55296&&st<=56319?(he+=4,ye++):he+=3}return he};function en(se,he=1e3,ye=2){const st=he*Math.pow(ye,se),ce=Math.round(.5*st*(Math.random()-.5)*2);return Math.min(144e5,st+ce)}function Nn(se){return se&&se._delegate?se._delegate:se}},7990:(Rt,Ve,V)=>{V.d(Ve,{e:()=>ve});var S=V(5e3),v=V(7407),J=V(1205),Ce=V(520),Ee=V(3809);let ve=(()=>{class Me{constructor(Oe,le,ae,De,It,nt){this.afs=Oe,this.afa=le,this.http=ae,this.httpc=De,this.router=It,this.ngZone=nt}registerUser(){}loginUser(){}logoutUser(){}getUserAuthState(){}}return Me.\u0275fac=function(Oe){return new(Oe||Me)(S.LFG(v.ST),S.LFG(J.zQ),S.LFG(Ce.JF),S.LFG(Ce.eN),S.LFG(Ee.F0),S.LFG(S.R0b))},Me.\u0275prov=S.Yz7({token:Me,factory:Me.\u0275fac,providedIn:"root"}),Me})()},5389:(Rt,Ve,V)=>{var S=V(9808),v=V(5e3);class J extends S.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ce extends J{static makeCurrent(){(0,S.HT)(new Ce)}onAndCancel(o,u,h){return o.addEventListener(u,h,!1),()=>{o.removeEventListener(u,h,!1)}}dispatchEvent(o,u){o.dispatchEvent(u)}remove(o){o.parentNode&&o.parentNode.removeChild(o)}createElement(o,u){return(u=u||this.getDefaultDocument()).createElement(o)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(o){return o.nodeType===Node.ELEMENT_NODE}isShadowRoot(o){return o instanceof DocumentFragment}getGlobalEventTarget(o,u){return"window"===u?window:"document"===u?o:"body"===u?o.body:null}getBaseHref(o){const u=function ve(){return Ee=Ee||document.querySelector("base"),Ee?Ee.getAttribute("href"):null}();return null==u?null:function xe(l){Me=Me||document.createElement("a"),Me.setAttribute("href",l);const o=Me.pathname;return"/"===o.charAt(0)?o:`/${o}`}(u)}resetBaseElement(){Ee=null}getUserAgent(){return window.navigator.userAgent}getCookie(o){return(0,S.Mx)(document.cookie,o)}}let Me,Ee=null;const Oe=new v.OlP("TRANSITION_ID"),ae=[{provide:v.ip1,useFactory:function le(l,o,u){return()=>{u.get(v.CZH).donePromise.then(()=>{const h=(0,S.q)(),_=o.querySelectorAll(`style[ng-transition="${l}"]`);for(let b=0;b<_.length;b++)h.remove(_[b])})}},deps:[Oe,S.K0,v.zs3],multi:!0}];class De{static init(){(0,v.VLi)(new De)}addToWindow(o){v.dqk.getAngularTestability=(h,_=!0)=>{const b=o.findTestabilityInTree(h,_);if(null==b)throw new Error("Could not find testability for element.");return b},v.dqk.getAllAngularTestabilities=()=>o.getAllTestabilities(),v.dqk.getAllAngularRootElements=()=>o.getAllRootElements(),v.dqk.frameworkStabilizers||(v.dqk.frameworkStabilizers=[]),v.dqk.frameworkStabilizers.push(h=>{const _=v.dqk.getAllAngularTestabilities();let b=_.length,M=!1;const $=function(z){M=M||z,b--,0==b&&h(M)};_.forEach(function(z){z.whenStable($)})})}findTestabilityInTree(o,u,h){if(null==u)return null;const _=o.getTestability(u);return null!=_?_:h?(0,S.q)().isShadowRoot(u)?this.findTestabilityInTree(o,u.host,!0):this.findTestabilityInTree(o,u.parentElement,!0):null}}let It=(()=>{class l{build(){return new XMLHttpRequest}}return l.\u0275fac=function(u){return new(u||l)},l.\u0275prov=v.Yz7({token:l,factory:l.\u0275fac}),l})();const nt=new v.OlP("EventManagerPlugins");let at=(()=>{class l{constructor(u,h){this._zone=h,this._eventNameToPlugin=new Map,u.forEach(_=>_.manager=this),this._plugins=u.slice().reverse()}addEventListener(u,h,_){return this._findPluginFor(h).addEventListener(u,h,_)}addGlobalEventListener(u,h,_){return this._findPluginFor(h).addGlobalEventListener(u,h,_)}getZone(){return this._zone}_findPluginFor(u){const h=this._eventNameToPlugin.get(u);if(h)return h;const _=this._plugins;for(let b=0;b<_.length;b++){const M=_[b];if(M.supports(u))return this._eventNameToPlugin.set(u,M),M}throw new Error(`No event manager plugin found for event ${u}`)}}return l.\u0275fac=function(u){return new(u||l)(v.LFG(nt),v.LFG(v.R0b))},l.\u0275prov=v.Yz7({token:l,factory:l.\u0275fac}),l})();class bt{constructor(o){this._doc=o}addGlobalEventListener(o,u,h){const _=(0,S.q)().getGlobalEventTarget(this._doc,o);if(!_)throw new Error(`Unsupported event target ${_} for event ${u}`);return this.addEventListener(_,u,h)}}let Ze=(()=>{class l{constructor(){this._stylesSet=new Set}addStyles(u){const h=new Set;u.forEach(_=>{this._stylesSet.has(_)||(this._stylesSet.add(_),h.add(_))}),this.onStylesAdded(h)}onStylesAdded(u){}getAllStyles(){return Array.from(this._stylesSet)}}return l.\u0275fac=function(u){return new(u||l)},l.\u0275prov=v.Yz7({token:l,factory:l.\u0275fac}),l})(),rt=(()=>{class l extends Ze{constructor(u){super(),this._doc=u,this._hostNodes=new Map,this._hostNodes.set(u.head,[])}_addStylesToHost(u,h,_){u.forEach(b=>{const M=this._doc.createElement("style");M.textContent=b,_.push(h.appendChild(M))})}addHost(u){const h=[];this._addStylesToHost(this._stylesSet,u,h),this._hostNodes.set(u,h)}removeHost(u){const h=this._hostNodes.get(u);h&&h.forEach(Ie),this._hostNodes.delete(u)}onStylesAdded(u){this._hostNodes.forEach((h,_)=>{this._addStylesToHost(u,_,h)})}ngOnDestroy(){this._hostNodes.forEach(u=>u.forEach(Ie))}}return l.\u0275fac=function(u){return new(u||l)(v.LFG(S.K0))},l.\u0275prov=v.Yz7({token:l,factory:l.\u0275fac}),l})();function Ie(l){(0,S.q)().remove(l)}const At={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Xe=/%COMP%/g;function ue(l,o,u){for(let h=0;h<o.length;h++){let _=o[h];Array.isArray(_)?ue(l,_,u):(_=_.replace(Xe,l),u.push(_))}return u}function Se(l){return o=>{if("__ngUnwrap__"===o)return l;!1===l(o)&&(o.preventDefault(),o.returnValue=!1)}}let Ge=(()=>{class l{constructor(u,h,_){this.eventManager=u,this.sharedStylesHost=h,this.appId=_,this.rendererByCompId=new Map,this.defaultRenderer=new $e(u)}createRenderer(u,h){if(!u||!h)return this.defaultRenderer;switch(h.encapsulation){case v.ifc.Emulated:{let _=this.rendererByCompId.get(h.id);return _||(_=new xt(this.eventManager,this.sharedStylesHost,h,this.appId),this.rendererByCompId.set(h.id,_)),_.applyToHost(u),_}case 1:case v.ifc.ShadowDom:return new Lt(this.eventManager,this.sharedStylesHost,u,h);default:if(!this.rendererByCompId.has(h.id)){const _=ue(h.id,h.styles,[]);this.sharedStylesHost.addStyles(_),this.rendererByCompId.set(h.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return l.\u0275fac=function(u){return new(u||l)(v.LFG(at),v.LFG(rt),v.LFG(v.AFp))},l.\u0275prov=v.Yz7({token:l,factory:l.\u0275fac}),l})();class $e{constructor(o){this.eventManager=o,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(o,u){return u?document.createElementNS(At[u]||u,o):document.createElement(o)}createComment(o){return document.createComment(o)}createText(o){return document.createTextNode(o)}appendChild(o,u){o.appendChild(u)}insertBefore(o,u,h){o&&o.insertBefore(u,h)}removeChild(o,u){o&&o.removeChild(u)}selectRootElement(o,u){let h="string"==typeof o?document.querySelector(o):o;if(!h)throw new Error(`The selector "${o}" did not match any elements`);return u||(h.textContent=""),h}parentNode(o){return o.parentNode}nextSibling(o){return o.nextSibling}setAttribute(o,u,h,_){if(_){u=_+":"+u;const b=At[_];b?o.setAttributeNS(b,u,h):o.setAttribute(u,h)}else o.setAttribute(u,h)}removeAttribute(o,u,h){if(h){const _=At[h];_?o.removeAttributeNS(_,u):o.removeAttribute(`${h}:${u}`)}else o.removeAttribute(u)}addClass(o,u){o.classList.add(u)}removeClass(o,u){o.classList.remove(u)}setStyle(o,u,h,_){_&(v.JOm.DashCase|v.JOm.Important)?o.style.setProperty(u,h,_&v.JOm.Important?"important":""):o.style[u]=h}removeStyle(o,u,h){h&v.JOm.DashCase?o.style.removeProperty(u):o.style[u]=""}setProperty(o,u,h){o[u]=h}setValue(o,u){o.nodeValue=u}listen(o,u,h){return"string"==typeof o?this.eventManager.addGlobalEventListener(o,u,Se(h)):this.eventManager.addEventListener(o,u,Se(h))}}class xt extends $e{constructor(o,u,h,_){super(o),this.component=h;const b=ue(_+"-"+h.id,h.styles,[]);u.addStyles(b),this.contentAttr=function X(l){return"_ngcontent-%COMP%".replace(Xe,l)}(_+"-"+h.id),this.hostAttr=function ze(l){return"_nghost-%COMP%".replace(Xe,l)}(_+"-"+h.id)}applyToHost(o){super.setAttribute(o,this.hostAttr,"")}createElement(o,u){const h=super.createElement(o,u);return super.setAttribute(h,this.contentAttr,""),h}}class Lt extends $e{constructor(o,u,h,_){super(o),this.sharedStylesHost=u,this.hostEl=h,this.shadowRoot=h.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const b=ue(_.id,_.styles,[]);for(let M=0;M<b.length;M++){const $=document.createElement("style");$.textContent=b[M],this.shadowRoot.appendChild($)}}nodeOrShadowRoot(o){return o===this.hostEl?this.shadowRoot:o}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(o,u){return super.appendChild(this.nodeOrShadowRoot(o),u)}insertBefore(o,u,h){return super.insertBefore(this.nodeOrShadowRoot(o),u,h)}removeChild(o,u){return super.removeChild(this.nodeOrShadowRoot(o),u)}parentNode(o){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(o)))}}let ut=(()=>{class l extends bt{constructor(u){super(u)}supports(u){return!0}addEventListener(u,h,_){return u.addEventListener(h,_,!1),()=>this.removeEventListener(u,h,_)}removeEventListener(u,h,_){return u.removeEventListener(h,_)}}return l.\u0275fac=function(u){return new(u||l)(v.LFG(S.K0))},l.\u0275prov=v.Yz7({token:l,factory:l.\u0275fac}),l})();const cn=["alt","control","meta","shift"],Wt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$t={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},mn={alt:l=>l.altKey,control:l=>l.ctrlKey,meta:l=>l.metaKey,shift:l=>l.shiftKey};let sn=(()=>{class l extends bt{constructor(u){super(u)}supports(u){return null!=l.parseEventName(u)}addEventListener(u,h,_){const b=l.parseEventName(h),M=l.eventCallback(b.fullKey,_,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,S.q)().onAndCancel(u,b.domEventName,M))}static parseEventName(u){const h=u.toLowerCase().split("."),_=h.shift();if(0===h.length||"keydown"!==_&&"keyup"!==_)return null;const b=l._normalizeKey(h.pop());let M="";if(cn.forEach(z=>{const ne=h.indexOf(z);ne>-1&&(h.splice(ne,1),M+=z+".")}),M+=b,0!=h.length||0===b.length)return null;const $={};return $.domEventName=_,$.fullKey=M,$}static getEventFullKey(u){let h="",_=function _n(l){let o=l.key;if(null==o){if(o=l.keyIdentifier,null==o)return"Unidentified";o.startsWith("U+")&&(o=String.fromCharCode(parseInt(o.substring(2),16)),3===l.location&&$t.hasOwnProperty(o)&&(o=$t[o]))}return Wt[o]||o}(u);return _=_.toLowerCase()," "===_?_="space":"."===_&&(_="dot"),cn.forEach(b=>{b!=_&&mn[b](u)&&(h+=b+".")}),h+=_,h}static eventCallback(u,h,_){return b=>{l.getEventFullKey(b)===u&&_.runGuarded(()=>h(b))}}static _normalizeKey(u){return"esc"===u?"escape":u}}return l.\u0275fac=function(u){return new(u||l)(v.LFG(S.K0))},l.\u0275prov=v.Yz7({token:l,factory:l.\u0275fac}),l})();const Mr=(0,v.eFA)(v._c5,"browser",[{provide:v.Lbi,useValue:S.bD},{provide:v.g9A,useValue:function mr(){Ce.makeCurrent(),De.init()},multi:!0},{provide:S.K0,useFactory:function cr(){return(0,v.RDi)(document),document},deps:[]}]),Kn=[{provide:v.zSh,useValue:"root"},{provide:v.qLn,useFactory:function er(){return new v.qLn},deps:[]},{provide:nt,useClass:ut,multi:!0,deps:[S.K0,v.R0b,v.Lbi]},{provide:nt,useClass:sn,multi:!0,deps:[S.K0]},{provide:Ge,useClass:Ge,deps:[at,rt,v.AFp]},{provide:v.FYo,useExisting:Ge},{provide:Ze,useExisting:rt},{provide:rt,useClass:rt,deps:[S.K0]},{provide:v.dDg,useClass:v.dDg,deps:[v.R0b]},{provide:at,useClass:at,deps:[nt,v.R0b]},{provide:S.JF,useClass:It,deps:[]}];let wr=(()=>{class l{constructor(u){if(u)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(u){return{ngModule:l,providers:[{provide:v.AFp,useValue:u.appId},{provide:Oe,useExisting:v.AFp},ae]}}}return l.\u0275fac=function(u){return new(u||l)(v.LFG(l,12))},l.\u0275mod=v.oAB({type:l}),l.\u0275inj=v.cJS({providers:Kn,imports:[S.ez,v.hGG]}),l})();"undefined"!=typeof window&&window;var yi=V(3809);let Qi=(()=>{class l{constructor(){}ngOnInit(){}}return l.\u0275fac=function(u){return new(u||l)},l.\u0275cmp=v.Xpm({type:l,selectors:[["app-add-payments"]],decls:51,vars:0,consts:[["id","metodopago",1,"best-features-area","section-padd4",2,"padding-top","125px !important"],[1,"container"],[1,"row","justify-content-center",2,"align-content","center","justify-content","center","align-items","center"],[1,"col-xl-12","col-lg-12"],[1,"row"],[1,"col-lg-12","col-md-12"],[1,"section-tittle","text-center",2,"padding-left","10px !important","padding-right","10px !important","margin-bottom","10px !important"],[2,"margin-bottom","30px !important"],["action","#",1,"credit-card-div","d-flex","justify-content-center"],[1,"panel","panel-default"],[1,"panel-heading"],[1,"row","d-flex","justify-content-center"],[1,"col-md-8"],["type","text","placeholder","N\xfamero de tarjeta",1,"form-control"],[1,"col-md-2","col-sm-2","col-xs-2"],[1,"help-block","text-muted","small-font"],["type","text","placeholder","MM",1,"form-control"],["type","text","placeholder","YY",1,"form-control"],["type","text","placeholder","CCV",1,"form-control"],["xmlns","http://www.w3.org/2000/svg","width","70","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-credit-card-fill",2,"align-items","center","text-align","center"],["d","M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v1H0V4zm0 3v5a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7H0zm3 2h1a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1z"],[1,"col-md-8","pad-adjust"],["type","text","placeholder","Nombre de la Tarjeta",1,"form-control"],[1,"checkbox"],["type","checkbox","checked","",1,"text-muted"],["href","#"],[1,"col-md-4","col-sm-2","col-xs-2","pad-adjust","d-flex","justify-content-start"],[1,"slider-btns"],["data-animation","fadeInLeft","data-delay","1.0s","routerLink","/apoyar",1,"btn","radius-btn"],[1,"col-md-4","col-sm-2","col-xs-2","pad-adjust","d-flex","justify-content-end"],["data-animation","fadeInLeft","data-delay","1.0s","href","/",1,"btn","radius-btn"]],template:function(u,h){1&u&&(v.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h2",7),v._uU(8,"Agrega tu Metodo de Pago"),v.qZA()()()()()()()(),v.TgZ(9,"div",1)(10,"form",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12),v._UZ(15,"input",13),v.qZA()(),v.TgZ(16,"div",11)(17,"div",14)(18,"span",15),v._uU(19," Mes de expiraci\xf3n"),v.qZA(),v._UZ(20,"input",16),v.qZA(),v.TgZ(21,"div",14)(22,"span",15),v._uU(23," A\xf1o de expiraci\xf3n"),v.qZA(),v._UZ(24,"input",17),v.qZA(),v.TgZ(25,"div",14)(26,"span",15),v._uU(27," CCV"),v.qZA(),v._UZ(28,"input",18),v.qZA(),v.TgZ(29,"div",14),v.O4$(),v.TgZ(30,"svg",19),v._UZ(31,"path",20),v.qZA()()(),v.kcU(),v.TgZ(32,"div",11)(33,"div",21),v._UZ(34,"input",22),v.qZA()(),v.TgZ(35,"div",11)(36,"div",21)(37,"div",23)(38,"label"),v._UZ(39,"input",24),v._uU(40," Guarde los datos para realizar pagos r\xe1pidos "),v._UZ(41,"a",25),v.qZA()()()(),v.TgZ(42,"div",11)(43,"div",26)(44,"div",27)(45,"a",28),v._uU(46,"CANCELAR"),v.qZA()()(),v.TgZ(47,"div",29)(48,"div",27)(49,"a",30),v._uU(50,"APORTAR"),v.qZA()()()()()()()())},directives:[yi.yS],styles:[".container[_ngcontent-%COMP%]{margin-top:10;padding-top:30px}.credit-card-div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-top:10px}.credit-card-div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding-top:30px}.credit-card-div[_ngcontent-%COMP%]   .small-font[_ngcontent-%COMP%]{font-size:9px}.credit-card-div[_ngcontent-%COMP%]   .pad-adjust[_ngcontent-%COMP%]{padding-top:10px}"]}),l})();var vn=V(7990);let br=(()=>{class l{constructor(u,h){this.authService=u,this.router=h}ngOnInit(){}logoutUser(){}}return l.\u0275fac=function(u){return new(u||l)(v.Y36(vn.e),v.Y36(yi.F0))},l.\u0275cmp=v.Xpm({type:l,selectors:[["app-donate"]],decls:89,vars:0,consts:[["id","download",1,"best-features-area","section-padd4",2,"padding-top","125px !important"],[1,"btn",3,"click"],[1,"container","mb-1"],[1,"section-tittle","text-center","col-lg-12","col-md-12",2,"margin-bottom","15px !important"],[2,"margin-bottom","2px !important"],[1,"container"],[1,"form-check","d-flex","flex-wrap","justify-content-center"],[1,"row","col-lg-12","col-xl-12","d-flex","justify-content-center","mb-15"],[1,"sobrecaja"],[1,"caja","mr-20","ml-20","pr-10","pl-10","mr-25","ml-25"],["type","radio","name","flexRadioDefault","id","flexRadioDefault1",1,"form-check-input"],["for","flexRadioDefault1",1,"form-check-label"],[1,"row","col-lg-12","col-xl-12","d-flex","justify-content-center","mt-15","mb-15"],[1,"sobrecaja","d-flex"],[1,"caja","mr-20","ml-20","pr-10","pl-10",2,"border","1px !important"],[1,"caja","mr-20","ml-20","pr-10","pl-10"],[1,"row","col-lg-12","col-xl-12","d-flex","justify-content-center","mt-30","mb-30"],[1,"slider-btns"],["data-animation","fadeInLeft","data-delay","1.0s","routerLink","",1,"btn","radius-btn"],[1,"form-check-1","d-flex","flex-wrap","justify-content-center"],[1,"sobrecajaF"],[1,"sobrecajaF","d-flex"]],template:function(u,h){1&u&&(v.TgZ(0,"section",0)(1,"a",1),v.NdJ("click",function(){return h.logoutUser()}),v.TgZ(2,"span"),v._uU(3,"LOGOUT"),v.qZA()(),v.TgZ(4,"div",2)(5,"div",3)(6,"h2",4),v._uU(7,"Aportar al programa Social CupoExpress"),v.qZA()()()(),v.TgZ(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9),v._UZ(13,"input",10),v.TgZ(14,"label",11)(15,"h2"),v._uU(16,"$ 1.000"),v.qZA()()()(),v.TgZ(17,"div",8)(18,"div",9),v._UZ(19,"input",10),v.TgZ(20,"label",11)(21,"h2"),v._uU(22,"$ 3.000"),v.qZA()()()(),v.TgZ(23,"div",8)(24,"div",9),v._UZ(25,"input",10),v.TgZ(26,"label",11)(27,"h2"),v._uU(28,"$ 5.000"),v.qZA()()()()(),v.TgZ(29,"div",12)(30,"div",13)(31,"div",14),v._UZ(32,"input",10),v.TgZ(33,"label",11)(34,"h2"),v._uU(35,"$ 7.000"),v.qZA()()()(),v.TgZ(36,"div",8)(37,"div",15),v._UZ(38,"input",10),v.TgZ(39,"label",11)(40,"h2"),v._uU(41,"$ 10.000"),v.qZA()()()(),v.TgZ(42,"div",8)(43,"div",15),v._UZ(44,"input",10),v.TgZ(45,"label",11)(46,"h2"),v._uU(47,"$ 15.000"),v.qZA()()()(),v.TgZ(48,"div",16)(49,"div",17)(50,"a",18),v._uU(51,"Seleccionar"),v.qZA()()()()(),v._UZ(52,"br"),v.TgZ(53,"div",3)(54,"h3",4),v._uU(55,"Frecuencia"),v.qZA()(),v._UZ(56,"br"),v.TgZ(57,"div",19)(58,"div",12)(59,"div",20)(60,"div",14),v._UZ(61,"input",10),v.TgZ(62,"label",11)(63,"h4"),v._uU(64,"Una vez"),v.qZA(),v.TgZ(65,"p"),v._uU(66,"Aporte \xfanico, sin frecuencia."),v.qZA()()()()(),v.TgZ(67,"div",12)(68,"div",20)(69,"div",15),v._UZ(70,"input",10),v.TgZ(71,"label",11)(72,"h4"),v._uU(73,"Semanal"),v.qZA(),v.TgZ(74,"p"),v._uU(75,"Aporte autom\xe1tico por semana, puedes cancelar en cualquier momento."),v.qZA()()()()(),v.TgZ(76,"div",12)(77,"div",21)(78,"div",14),v._UZ(79,"input",10),v.TgZ(80,"label",11)(81,"h4"),v._uU(82,"Mensual"),v.qZA(),v.TgZ(83,"p"),v._uU(84,"Aporte mensualmente, puedes cancelar en cualquier momento."),v.qZA()()()()(),v.TgZ(85,"div",16)(86,"div",17)(87,"a",18),v._uU(88,"Continuar"),v.qZA()()()()())},directives:[yi.yS],styles:[".sobrecaja[_ngcontent-%COMP%]{display:flex;margin:10px;padding:7px;border-color:#6610f2 2px!important;border:2px;border-radius:30px;background-color:#f0e6ff}.caja[_ngcontent-%COMP%]{padding:5px}.form-check-input[_ngcontent-%COMP%]{display:flex}.sobrecajaF[_ngcontent-%COMP%]{background-color:#f0e6ff;border-radius:30px;height:120px;width:400px}.row[_ngcontent-%COMP%]{display:flex}"]}),l})(),ai=(()=>{class l{Carga(u){for(let h of u){let _=document.createElement("script");_.src="./assets/js/"+h+".js",document.getElementsByTagName("body")[0].appendChild(_)}}}return l.\u0275fac=function(u){return new(u||l)},l.\u0275prov=v.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})(),_i=(()=>{class l{constructor(u){this._CargaScripts=u,u.Carga(["main","owl.carousel.min","bootstrap.min"])}ngOnInit(){}}return l.\u0275fac=function(u){return new(u||l)(v.Y36(ai))},l.\u0275cmp=v.Xpm({type:l,selectors:[["app-conditions"]],decls:112,vars:0,consts:[["id","programa",1,"terminos","service-area","sky-blue","section-padding2"],[1,"container"],[1,"row","d-flex","justify-content-center"],[1,"col-lg-7"],[1,"section-tittle"],[2,"padding-bottom","20px","margin-bottom","20px"]],template:function(u,h){1&u&&(v.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2",5),v._uU(6," T\xe9rminos y Condiciones de los Sitios de E-Commerce provistos por Servicios Tecnol\xf3gicos Trigo Ltda.\xa0 \xa0"),v.qZA(),v.TgZ(7,"p"),v._uU(8,"Los presentes T\xe9rminos y Condiciones regulan los servicios puestos a disposici\xf3n por Servicios Tecnol\xf3gicos Trigo Ltda. (\u201cTRIGO\u201d o la \u201cCompa\xf1\xeda\u201d) a los comercios y fundaciones (las \u201cEmpresas\u201d) consistentes en la provisi\xf3n de un sitio web o App de ventas online o comercio electr\xf3nico (\u201cSitio o App de E-Commerce\u201d). "),v._UZ(9,"br"),v._uU(10," Por favor lea estos T\xe9rminos y Condiciones cuidadosamente, teniendo en cuenta que mediante el uso de este Sitio o App de E-Commerce usted est\xe1 indicando su aceptaci\xf3n a los mismos. Usted debe visitar esta p\xe1gina peri\xf3dicamente para revisar los T\xe9rminos y Condiciones debido a que los mismos son obligatorios para usted. "),v._UZ(11,"br"),v._uU(12," Adicionalmente, recuerde que los precios, la transacci\xf3n, l\xedmites de compras, idoneidad del producto, y dem\xe1s condiciones de la transacci\xf3n a trav\xe9s del Sitio o App E-commerce respectivo, son definidos por las Empresas y de ser necesario podr\xe1n estar regulados por los t\xe9rminos y condiciones dispuestos por la Empresa. "),v.qZA(),v._UZ(13,"br"),v.TgZ(14,"h3"),v._uU(15,"Definiciones"),v.qZA(),v._UZ(16,"br"),v.TgZ(17,"p"),v._uU(18,"Empresa: Es el comercio o fundaci\xf3n, ajenos a TRIGO, que contratan las herramientas tecnol\xf3gicas o software puestas a disposici\xf3n por TRIGO con el fin de que TRIGO le provea las herramientas de E-Commerce para crear su Sitio o App E-commerce. En tal sentido, las Empresas son las responsables exclusivas de los productos o servicios que comercializan a trav\xe9s de su Sitio o App E-commerce y son las encargadas de determinar las condiciones en las que se ofertan sus productos y con quienes finalmente los Usuarios celebran las transacciones de compraventa."),v.qZA(),v._UZ(19,"br"),v.TgZ(20,"p"),v._uU(21,"Pasarela de pagos: Servicio prestado por terceros ajenos a TRIGO que permite el procesamiento y realizaci\xf3n de pagos por parte de los Usuarios a las Empresas, a trav\xe9s de medios electr\xf3nicos. "),v._UZ(22,"br"),v._uU(23," Sitio o App E-commerce: Es la p\xe1gina web o la App de la Empresa, el cual es controlado, operado y administrado por la Empresa bajo su nombre de dominio, y en el cual se exhiben y ofrecen los productos o servicios a los Usuarios. "),v._UZ(24,"br"),v._uU(25," Usuario: Es la persona natural o jur\xeddica que hace uso de las herramientas tecnol\xf3gicas o software que ofrece el Sitio o App E-commerce, con el prop\xf3sito de adquirir un producto o servicio ofertado por la Empresa. "),v._UZ(26,"br"),v.qZA(),v.TgZ(27,"h3"),v._uU(28,"Objeto "),v.qZA(),v._UZ(29,"br"),v.TgZ(30,"p"),v._uU(31,"Los presentes T\xe9rminos y Condiciones regulan los servicios provistos por TRIGO a la Empresa, los cuales facilitan la puesta a disposici\xf3n de los servicios de pago adquiridos por los Usuarios. En consecuencia, TRIGO no es responsable de las condiciones bajo las que se celebren las transacciones entre el Usuario y la Empresa, si son equitativas y/o si se ejecutan id\xf3neamente. "),v.qZA(),v._UZ(32,"br"),v.TgZ(33,"h3"),v._uU(34,"T\xe9rminos y Condiciones de la Empresa"),v.qZA(),v._UZ(35,"br"),v.TgZ(36,"p"),v._uU(37,"Para referencias y condiciones sobre los precios, la transacci\xf3n, l\xedmites de compras, devoluci\xf3n de los productos o servicios, retracto de la transacci\xf3n y dem\xe1s condiciones de la celebraci\xf3n de la transacci\xf3n entre el Usuario y la Empresa, dir\xedjase directamente a los t\xe9rminos y condiciones establecidos por la Empresa. "),v.qZA(),v._UZ(38,"br"),v.TgZ(39,"h3"),v._uU(40,"Servicios ofrecidos por TRIGO en los Sitios o Apps de E-Commerce"),v.qZA(),v._UZ(41,"br"),v.TgZ(42,"p"),v._uU(43,"Independientemente de los productos o servicios ofrecidos por las Empresas que sean exhibidos en cada uno de los Sitios o App de E-Commerce, TRIGO prestar\xe1 los siguientes servicios, limit\xe1ndose a estos \xfanicamente:"),v.qZA(),v.TgZ(44,"h3"),v._uU(45,"Restricciones para algunos productos o servicios y protecci\xf3n de menores de edad: "),v.qZA(),v._UZ(46,"br"),v.TgZ(47,"p"),v._uU(48,"Para el acceso a los Sitios o App E-commerce y a los productos o servicios que ah\xed se ofrecen, es necesario ser mayor de edad (18 a\xf1os) conforme a la legislaci\xf3n chilena, por lo que, al momento de realizar la transacci\xf3n con las Empresas, el Usuario declara y garantiza que tiene la mayor\xeda de edad requerida. "),v._UZ(49,"br"),v._uU(50," Asimismo, debido a que legalmente no se permite suministrar ciertos productos o servicios a Usuarios que sean menores de edad, los Usuarios declaran que las personas que recibir\xe1n los productos o servicios de las Empresas son mayores de edad. "),v._UZ(51,"br"),v._uU(52," TRIGO se reserva la facultad de requerir a los Usuarios (o a cualquier persona designada por \xe9stos para recibir los productos o servicios) prueba de su mayor\xeda de edad al momento de su acceso. "),v.qZA(),v._UZ(53,"br"),v.TgZ(54,"h3"),v._uU(55,"Cancelaci\xf3n y devoluci\xf3n de los pedidos de productos o servicios: "),v.qZA(),v._UZ(56,"br"),v.TgZ(57,"p"),v._uU(58,"Una vez confirmada la compra por el Usuario, no ser\xe1 posible cancelar o devolver el pedido a trav\xe9s del Sitio o App de E-Commerce. Cualquier solicitud respecto a devoluciones, derecho de retracto y/o cancelaciones de pedidos ser\xe1n solicitados o acordados exclusivamente entre las Empresas y los Usuarios."),v.qZA(),v._UZ(59,"br"),v.TgZ(60,"h3"),v._uU(61,"Servicio al cliente: "),v.qZA(),v._UZ(62,"br"),v.TgZ(63,"p"),v._uU(64,"Los reclamos e inquietudes relacionadas con la idoneidad, caracter\xedsticas, uso o cambio de los productos o servicios, celebraci\xf3n y ejecuci\xf3n de las transacciones realizadas por el Usuario con la Empresa, deber\xe1n ser dirigidas a esta \xfaltima a trav\xe9s de los canales previstos y dispuestos por las Empresas en el Sitio o App de E-Commerce."),v.qZA(),v._UZ(65,"br"),v.TgZ(66,"h3"),v._uU(67,"Medios de Pago"),v.qZA(),v._UZ(68,"br"),v.TgZ(69,"p"),v._uU(70,"TRIGO pone a disposici\xf3n de las Empresas medios o pasarelas de pago, operadas por terceros, para que los Usuarios puedan realizar los pagos de los productos o servicios adquiridos a las Empresas por medio de las mencionadas pasarelas de pagos. "),v._UZ(71,"br"),v._uU(72," Los productos o servicios ofrecidos por las Empresas solo podr\xe1n ser pagados utilizando tarjetas de cr\xe9dito o d\xe9bito aceptadas por las respectivas pasarelas de pago. "),v._UZ(73,"br"),v._uU(74," Las medidas de seguridad de su medio de pago ser\xe1n aquellas que brinden las entidades financieras proveedoras de las tarjetas y/o las pasarelas de pago que utilice el Usuario. "),v.qZA(),v._UZ(75,"br"),v.TgZ(76,"h3"),v._uU(77,"Deberes de los Usuarios"),v.qZA(),v._UZ(78,"br"),v.TgZ(79,"h3"),v._uU(80,"Con la aceptaci\xf3n de los presentes T\xe9rminos y Condiciones, el Usuario se compromete a: "),v.qZA(),v.TgZ(81,"p"),v._uU(82," Suministrar informaci\xf3n veraz y fidedigna al momento de crear su Cuenta de Usuario; "),v._UZ(83,"br"),v._uU(84," Hacer un uso responsable y correcto del Sitio o App E-commerce. "),v._UZ(85,"br"),v._uU(86," Abstenerse de utilizar el Sitio o App E-commerce para realizar actos contrarios a la ley, especialmente aquellos relacionados con el derecho de propiedad intelectual de terceros. "),v._UZ(87,"br"),v._uU(88," Informar a la Empresa cualquier usurpaci\xf3n o suplantaci\xf3n de identidad o de los datos de validaci\xf3n. "),v._UZ(89,"br"),v._uU(90," Abstenerse de realizar conductas atentatorias del funcionamiento de los Sitios o App de E-commerce, as\xed como violar o intentar violar su seguridad. Espec\xedficamente no podr\xe1n (i) acceder a servidores o cuentas a los cuales el usuario no est\xe1 autorizado a ingresar; (ii) intentar probar la vulnerabilidad de un sistema o red sin la debida autorizaci\xf3n o violar las medidas de seguridad o autenticaci\xf3n, (iii) intentar interferir con los servicios prestados a un usuario, servidor o red incluyendo, pero sin limitarse al env\xedo de virus a trav\xe9s de los Sitios o Apps de E-commerce. La violaci\xf3n de cualquier sistema o red de seguridad puede resultar en responsabilidades civiles y penales. La Empresa o TRIGO investigar\xe1 la ocurrencia de hechos que puedan constituir violaciones a lo anterior y cooperar\xe1 con cualquier autoridad competente en la persecuci\xf3n de los usuarios que est\xe9n envueltos en tales violaciones. "),v.qZA(),v._UZ(91,"br"),v.TgZ(92,"h3"),v._uU(93,"Responsabilidad "),v.qZA(),v._UZ(94,"br"),v.TgZ(95,"p"),v._uU(96,"Respecto de la transacci\xf3n: El Usuario sabe y declara que TRIGO, no toma decisiones ni asume responsabilidad sobre la calidad, idoneidad y condiciones de oferta de los productos o servicios que proveen las Empresas, lo que ser\xe1 de exclusiva responsabilidad de estas \xfaltimas. Por el contrario, el servicio ofrecido por la TRIGO, y en consecuencia su responsabilidad, se limita exclusivamente a poner a disposici\xf3n de los Usuarios unas pasarelas de pago operadas por terceros. "),v._UZ(97,"br"),v._uU(98," En ese sentido, el Usuario declara que ser\xe1 responsable por las decisiones que adopte al celebrar sus transacciones con las Empresas, asumiendo los riesgos comerciales o econ\xf3micos de las mismas. Adem\xe1s, tiene pleno conocimiento y declara entender que cualquier queja y/o reclamo que pudiese tener con respecto a la idoneidad, de los productos o servicios, o en relaci\xf3n con la informaci\xf3n brindada sobre los mismos y/o los t\xe9rminos de la transacci\xf3n celebrada con las Empresas, deber\xe1n ser dirigidos directamente a estas. "),v.qZA(),v._UZ(99,"br"),v.TgZ(100,"h3"),v._uU(101,"Tratamiento de datos personales"),v.qZA(),v._UZ(102,"br"),v.TgZ(103,"p"),v._uU(104,"TRIGO tratar\xe1 los datos personales de los Usuarios a los que tenga acceso, conforme a lo dispuesto en las normas de protecci\xf3n de datos personales en los t\xe9rminos indicados en el aviso de privacidad. "),v.qZA(),v._UZ(105,"br"),v.TgZ(106,"h3"),v._uU(107,"Propiedad intelectual de los contenidos "),v.qZA(),v._UZ(108,"br"),v.TgZ(109,"p"),v._uU(110,"Los signos distintivos utilizados para identificar a las Empresas y las Im\xe1genes que puedan encontrarse en los Sitios o Apps de E-Commerce, son de propiedad o uso de las Empresas."),v.qZA(),v._UZ(111,"br"),v.qZA()()()()())},styles:[""]}),l})(),$r=(()=>{class l{constructor(){}ngOnInit(){}}return l.\u0275fac=function(u){return new(u||l)},l.\u0275cmp=v.Xpm({type:l,selectors:[["app-navbar"]],decls:43,vars:0,consts:[["id","header","data-sticky-shrink","false",1,"header-size-sm","border-bottom-0"],["id","header-wrap"],[1,"container"],[1,"header-row","justify-content-lg-between"],["id","logo",1,"me-lg-5"],["href","index.html","data-dark-logo","assets/demos/business/images/logo-dark.png",1,"standard-logo"],["src","assets/demos/business/logo.png","alt","Canvas Logo"],["href","index.html","data-dark-logo","assets/demos/business/images/logo-dark@2x.png",1,"retina-logo"],["src","assets/demos/business/images/logo@2x.png","alt","Canvas Logo"],[1,"header-misc"],["href","demo-nonprofit-causes-single.html",1,"button","button-rounded","button-light"],["id","primary-menu-trigger"],["viewBox","0 0 100 100",1,"svg-trigger"],["d","m 30,33 h 40 c 3.722839,0 7.5,3.126468 7.5,8.578427 0,5.451959 -2.727029,8.421573 -7.5,8.421573 h -20"],["d","m 30,50 h 40"],["d","m 70,67 h -40 c 0,0 -7.5,-0.802118 -7.5,-8.365747 0,-7.563629 7.5,-8.634253 7.5,-8.634253 h 20"],[1,"primary-menu","with-arrows","me-lg-auto"],[1,"menu-container","align-self-start"],[1,"menu-item"],[1,"menu-bg","col-auto","align-self-start","d-flex"],[1,"menu-item","current"],["href","demo-nonprofit.html",1,"menu-link"],["href","demo-nonprofit-about.html",1,"menu-link"],["href","demo-nonprofit-causes.html",1,"menu-link"],["href","demo-nonprofit-events.html",1,"menu-link"],["href","#",1,"menu-link","btn-contact"],[1,"header-wrap-clone"]],template:function(u,h){1&u&&(v.TgZ(0,"header",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"a",5),v._UZ(6,"img",6),v.qZA(),v.TgZ(7,"a",7),v._UZ(8,"img",8),v.qZA()(),v.TgZ(9,"div",9)(10,"a",10)(11,"div"),v._uU(12,"Aportar"),v.qZA()()(),v.TgZ(13,"div",11),v.O4$(),v.TgZ(14,"svg",12),v._UZ(15,"path",13)(16,"path",14)(17,"path",15),v.qZA()(),v.kcU(),v.TgZ(18,"nav",16)(19,"ul",17)(20,"li",18),v._UZ(21,"span",19),v.qZA(),v.TgZ(22,"li",20)(23,"a",21)(24,"div"),v._uU(25,"Inicio"),v.qZA()()(),v.TgZ(26,"li",18)(27,"a",22)(28,"div"),v._uU(29,"La Fundacion"),v.qZA()()(),v.TgZ(30,"li",18)(31,"a",23)(32,"div"),v._uU(33,"Hazte Socio"),v.qZA()()(),v.TgZ(34,"li",18)(35,"a",24)(36,"div"),v._uU(37,"Noticias"),v.qZA()()(),v.TgZ(38,"li",18)(39,"a",25)(40,"div"),v._uU(41,"Contacto"),v.qZA()()()()()()()(),v._UZ(42,"div",26),v.qZA())},styles:[""]}),l})(),vi=(()=>{class l{constructor(u){this._CargaScripts=u,u.Carga(["functions","jquery","plugins","jquery.calendario"])}ngOnInit(){}}return l.\u0275fac=function(u){return new(u||l)(v.Y36(ai))},l.\u0275cmp=v.Xpm({type:l,selectors:[["app-page-content"]],decls:350,vars:0,consts:[["id","slider",1,"slider-element","dark","swiper_wrapper","slider-parallax","min-vh-75"],[1,"slider-inner"],[1,"swiper-container","swiper-parent"],[1,"swiper-wrapper"],[1,"swiper-slide","dark"],[1,"container"],[1,"slider-caption"],["data-animate","fadeInUp",1,"nott"],["href","#","data-animate","fadeInUp","data-delay","400",1,"button","button-rounded","button-large","button-light","shadow","nott","ls0","ms-0","mt-4"],[1,"swiper-slide-bg",2,"background","linear-gradient(rgba(0,0,0,.3), rgba(0,0,0,.5)), url('assets/demos/nonprofit/images/slider/1.jpg') no-repeat center center","background-size","cover"],[1,"swiper-slide-bg",2,"background","linear-gradient(rgba(0,0,0,0), rgba(0,0,0,.8)), url('assets/demos/nonprofit/images/slider/2.jpg') no-repeat center center","background-size","cover"],[1,"swiper-navs"],[1,"slider-arrow-left"],[1,"bi","bi-arrow-left-circle"],[1,"slider-arrow-right"],[1,"bi","bi-arrow-right-circle"],[1,"swiper-scrollbar"],[1,"swiper-scrollbar-drag"],[1,"slide-number"],[1,"slide-number-current"],[1,"slide-number-total"],["id","content"],[1,"content-wrap","py-0",2,"overflow","visible"],["viewBox","0 0 1382 58","width","100%","height","60","preserveAspectRatio","none",2,"position","absolute","top","-58px","left","0","z-index","1"],["d","M1.52.62s802.13,127,1380,0v56H.51Z",2,"fill","#FFF"],[1,"slider-feature","w-100"],[1,"row","justify-content-center"],[1,"col-md-3","px-1"],["href","demo-nonprofit-about.html",1,"card","center","border-start-0","border-end-0","border-top-0","border-bottom","border-bottom","shadow","py-3","rounded-0","fw-semibold","text-uppercase","ls1"],[1,"card-body"],["href","demo-nonprofit-causes.html",1,"card","center","border-start-0","border-end-0","border-top-0","border-bottom","border-bottom","shadow","py-3","rounded-0","fw-semibold","text-uppercase","ls1"],["href","demo-nonprofit-contact.html",1,"card","center","border-start-0","border-end-0","border-top-0","border-bottom","border-bottom","shadow","py-3","rounded-0","fw-semibold","text-uppercase","ls1"],[1,"section","mt-3",2,"background","#FFF url('assets/demos/nonprofit/images/others/1.jpg') no-repeat 100% 50% / auto 100%"],[1,"col-md-7","center"],[1,"heading-block","border-bottom-0","mb-4"],[1,"mb-4","nott"],[1,"svg-line","bottommargin-sm"],["src","assets/demos/nonprofit/images/divider-1.svg","alt","svg divider","height","20"],[1,"row","mt-5","col-mb-50","mb-0"],[1,"col-md-3"],[1,"feature-box","flex-column","mx-0"],[1,"fbox-media","position-relative"],["src","assets/demos/nonprofit/images/icons/donate.svg","alt","Featured Icon","width","60",1,"mb-3"],[1,"fbox-content","px-0"],[1,"nott","ls0"],["href","#",1,"text-dark"],["href","#",1,"button","button-rounded","button-border","nott","ls0","fw-normal","ms-0","mt-4"],["src","assets/demos/nonprofit/images/icons/volunteer.svg","alt","Featured Icon","width","60",1,"mb-3"],["src","assets/demos/nonprofit/images/icons/help-child.svg","alt","Featured Icon","width","60",1,"mb-3"],[1,"w-100","position-relative"],["data-bottom-top","background-position:0px 0px;","data-top-bottom","background-position:0px -50px;",1,"donor-img","d-flex","align-items-center","rounded","parallax","mx-auto","shadow-sm","w-100",2,"height","500px","background","url('assets/demos/nonprofit/images/others/3.jpg') no-repeat center center / cover"],[1,"card","bg-white","border-0","center","py-sm-4","px-sm-5","p-2","shadow-sm",2,"position","absolute","top","50%","right","80px","transform","translateY(-50%)"],[1,"color","h1","mb-3"],[1,"icon-heart"],[1,"text-uppercase","fw-normal","ls2","text-muted","mb-3","d-block"],[1,"display-3","fw-bold","mb-3","font-secondary"],["href","demo-nonprofit-causes-single.html",1,"button-svg"],[1,"clear"],[1,"section",2,"background","url('assets/demos/nonprofit/images/others/section-bg.jpg') no-repeat center center / cover","padding","80px 0"],[1,"container","clearfix"],[1,"col-lg-12","mb-25"],[1,"mb-2"],[1,"svg-line","mb-2","clearfix"],["src","assets/demos/nonprofit/images/divider-1.svg","alt","svg divider","height","10"],[1,"mb-5"],[1,"row","mission-goals","gutter-30","mb-0"],[1,"col-md-6"],[1,"feature-box","fbox-plain","bg-white","mx-0"],[1,"fbox-media","position-relative","col-auto","p-0","me-4"],["src","assets/demos/nonprofit/images/icons/home.svg","alt","Featured Icon 1","width","50"],[1,"fbox-content"],["src","assets/demos/nonprofit/images/icons/health.svg","alt","Featured Icon 2","width","50"],["src","assets/demos/nonprofit/images/icons/education.svg","alt","Featured Icon 3","width","50"],["src","assets/demos/nonprofit/images/icons/animal.svg","alt","Featured Icon 4","width","50"],["src","assets/demos/nonprofit/images/icons/environmental.svg","alt","Featured Icon 5","width","50"],["src","assets/demos/nonprofit/images/icons/food.svg","alt","Featured Icon 6","width","50"],[1,"col-lg-12","mt-25","mt-lg-25",2,"margin-top","55px"],[1,"mb-2","mt-25"],["href","https://www.youtube.com/watch?v=VqmFKnHG5q8","data-lightbox","iframe",1,"shadow-sm","d-flex","align-items-center","justify-content-center","play-video","rounded","position-relative","bg-color","mt-3","clearfix",2,"background","linear-gradient(rgba(0,0,0,.05), rgba(0,0,0,.01)), url('assets/demos/nonprofit/images/others/5.jpg') no-repeat center center / cover","height","300px"],[1,"icon-play"],["data-lightbox","gallery",1,"row","mt-4"],[1,"col-sm-6"],["href","https://www.youtube.com/watch?v=hc7iuc5KZ8Y","data-lightbox","iframe",1,"shadow-sm","d-flex","align-items-center","justify-content-center","play-video","rounded","position-relative","bg-color","left",2,"background","url('assets/demos/nonprofit/images/others/4.jpg') no-repeat center center / cover","height","140px"],[1,"icon-play","icon-small"],[1,"col-sm-6","mt-4","mt-sm-0"],["href","https://www.youtube.com/watch?v=VqmFKnHG5q8","data-lightbox","iframe",1,"shadow-sm","d-flex","align-items-center","justify-content-center","play-video","rounded","position-relative","bg-color","left",2,"background","url('assets/demos/nonprofit/images/others/2.jpg') no-repeat center center / cover","height","140px"],[1,"section","bg-transparent"],[1,"row","justify-content-center","mb-5"],[1,"svg-line","bottommargin-sm","clearfix"],[1,"row","justify-content-around"],[1,"col-lg-2","col-md-4","col-6"],[1,"team","overflow-hidden"],[1,"team-image"],["src","assets/demos/nonprofit/images/volunteers/1.jpg","alt","Penny Tool"],[1,"team-desc"],[1,"team-title","pt-3","mb-0","fw-medium","nott"],[1,"team","mt-5"],["src","assets/demos/nonprofit/images/volunteers/6.jpg","alt","Piff Jenkins"],[1,"col-lg-2","col-md-4","col-6","mt-4"],[1,"team"],["src","assets/demos/nonprofit/images/volunteers/2.jpg","alt","Rodney Artich"],["src","assets/demos/nonprofit/images/volunteers/7.jpg","alt","Weir Doe"],["src","assets/demos/nonprofit/images/volunteers/3.jpg","alt","Jackson Pot"],["src","assets/demos/nonprofit/images/volunteers/8.jpg","alt","Phillip Anthropy "],[1,"col-lg-2","col-md-4","col-6","mt-5"],["src","assets/demos/nonprofit/images/volunteers/4.jpg","alt","Eric Widget"],["src","assets/demos/nonprofit/images/volunteers/9.jpg","alt","Giles Posture"],[1,"col-lg-2","col-md-4","col-6","mt-1"],["src","assets/demos/nonprofit/images/volunteers/5.jpg","alt","Gunther Beard"],[1,"team","full-border","imagescalein","mt-5"],["href","#",1,"team-image"],["src","assets/demos/nonprofit/images/volunteers/10.jpg","alt","Apply Volunteer",1,"rounded-0"],[1,"section","bg-transparent",2,"padding","80px 0"],["src","assets/demos/nonprofit/images/divider-1.svg","alt","svg divider","height","15"],[1,"col-md-11","my-5"],[1,"clients-grid","grid-2","grid-sm-3","grid-md-5","mb-0"],[1,"grid-item"],["href","#"],["src","assets/images/1.png","alt","Clients"],["src","assets/images/2.png","alt","Clients"],["src","assets/images/3.png","alt","Clients"],["src","assets/images/4.png","alt","Clients"],["src","assets/images/5.png","alt","Clients"],["src","assets/images/6.png","alt","Clients"],["src","assets/images/7.png","alt","Clients"],["src","assets/images/8.png","alt","Clients"],["src","assets/images/9.png","alt","Clients"],["src","assets/images/10.png","alt","Clients"],[1,"fw-normal","text-black-50","mb-0"],[1,"line","line-sm","my-0","clearfix"]],template:function(u,h){1&u&&(v.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div")(8,"h2",7),v._uU(9,"Apoya a quienes m\xe1s lo necesiten"),v.qZA(),v.TgZ(10,"a",8),v._uU(11,"Saber m\xe1s"),v.qZA()()()(),v._UZ(12,"div",9),v.qZA(),v.TgZ(13,"div",4)(14,"div",5)(15,"div",6)(16,"div")(17,"h2",7),v._uU(18,"Tu aporte ser\xe1 ayuda real."),v.qZA(),v.TgZ(19,"a",8),v._uU(20,"Saber m\xe1s"),v.qZA()()()(),v._UZ(21,"div",10),v.qZA()(),v.TgZ(22,"div",11)(23,"div",12),v._UZ(24,"i",13),v.qZA(),v.TgZ(25,"div",14),v._UZ(26,"i",15),v.qZA()(),v.TgZ(27,"div",16)(28,"div",17)(29,"div",18),v._UZ(30,"div",19),v.TgZ(31,"span"),v._uU(32,"/"),v.qZA(),v._UZ(33,"div",20),v.qZA()()()()()(),v.TgZ(34,"section",21)(35,"div",22),v.O4$(),v.TgZ(36,"svg",23),v._UZ(37,"path",24),v.qZA(),v.kcU(),v.TgZ(38,"div",5)(39,"div",25)(40,"div",26)(41,"div",27)(42,"a",28)(43,"div",29),v._uU(44," Nuestra Misi\xf3n "),v.qZA()()(),v.TgZ(45,"div",27)(46,"a",30)(47,"div",29),v._uU(48," Fundadores "),v.qZA()()(),v.TgZ(49,"div",27)(50,"a",31)(51,"div",29),v._uU(52," Requisitos "),v.qZA()()()()()(),v.TgZ(53,"div",32)(54,"div",5)(55,"div",26)(56,"div",33)(57,"div",34)(58,"h2",35),v._uU(59,"Ayuda Incondicional"),v.qZA()(),v.TgZ(60,"div",36),v._UZ(61,"img",37),v.qZA(),v.TgZ(62,"p"),v._uU(63,"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Dolores, quasi, dolorum blanditiis eius laboriosam, quidem temporibus, dolor quod voluptatum perferendis ullam. Odio sequi at dolore consequatur ad, odit expedita tenetur."),v.qZA()()(),v.TgZ(64,"div",38)(65,"div",39)(66,"div",40)(67,"div",41),v._UZ(68,"img",42),v.qZA(),v.TgZ(69,"div",43)(70,"h3",44)(71,"a",45),v._uU(72,"Tu Aporte"),v.qZA()(),v.TgZ(73,"p"),v._uU(74,"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Illum, dolore, voluptates!"),v.qZA(),v.TgZ(75,"a",46),v._uU(76,"Aporta Ahora"),v.qZA()()()(),v.TgZ(77,"div",39)(78,"div",40)(79,"div",41),v._UZ(80,"img",47),v.qZA(),v.TgZ(81,"div",43)(82,"h3",44)(83,"a",45),v._uU(84,"Voluntarios"),v.qZA()(),v.TgZ(85,"p"),v._uU(86,"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquam, provident. "),v.qZA(),v.TgZ(87,"a",46),v._uU(88,"Aprovecha"),v.qZA()()()(),v.TgZ(89,"div",39)(90,"div",40)(91,"div",41),v._UZ(92,"img",48),v.qZA(),v.TgZ(93,"div",43)(94,"h3",44)(95,"a",45),v._uU(96,"Ayuda a las Familias."),v.qZA()(),v.TgZ(97,"p"),v._uU(98,"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Commodi, ipsa!"),v.qZA(),v.TgZ(99,"a",46),v._uU(100,"Ayuda ahora"),v.qZA()()()()()()(),v.TgZ(101,"div",5)(102,"div",49),v._UZ(103,"div",50),v.TgZ(104,"div",51)(105,"div",29)(106,"div",52),v._UZ(107,"i",53),v.qZA(),v.TgZ(108,"small",54),v._uU(109,"Aportes Recibidos"),v.qZA(),v.TgZ(110,"h3",55),v._uU(111,"$2.4M"),v.qZA(),v.TgZ(112,"a",56),v._uU(113,"Ver m\xe1s"),v.qZA()()()()(),v._UZ(114,"div",57),v.TgZ(115,"div",58)(116,"div",59)(117,"div",60)(118,"h3",61),v._uU(119,"Nuetsra Mision "),v.TgZ(120,"span")(121,"div",62),v._UZ(122,"img",63),v.qZA(),v.TgZ(123,"p",64),v._uU(124,"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Veniam deleniti veritatis nostrum, temporibus vero maxime quisquam quaerat doloremque fugit nesciunt."),v.qZA(),v.TgZ(125,"div",65)(126,"div",66)(127,"div",67)(128,"div",68),v._UZ(129,"img",69),v.qZA(),v.TgZ(130,"div",70)(131,"h3",44)(132,"a",45),v._uU(133,"Homeless Charities."),v.qZA()(),v.TgZ(134,"p"),v._uU(135,"Lorem ipsum dolor sit amet, consectetur adipisicing elit."),v.qZA()()()(),v.TgZ(136,"div",66)(137,"div",67)(138,"div",68),v._UZ(139,"img",71),v.qZA(),v.TgZ(140,"div",70)(141,"h3",44)(142,"a",45),v._uU(143,"Health Charities."),v.qZA()(),v.TgZ(144,"p"),v._uU(145,'Continually restore adaptive paradigms after "outside.'),v.qZA()()()(),v.TgZ(146,"div",66)(147,"div",67)(148,"div",68),v._UZ(149,"img",72),v.qZA(),v.TgZ(150,"div",70)(151,"h3",44)(152,"a",45),v._uU(153,"Education Charities."),v.qZA()(),v.TgZ(154,"p"),v._uU(155,"Quickly benchmark client-centered vortals without cutting."),v.qZA()()()(),v.TgZ(156,"div",66)(157,"div",67)(158,"div",68),v._UZ(159,"img",73),v.qZA(),v.TgZ(160,"div",70)(161,"h3",44)(162,"a",45),v._uU(163,"Animal Charities."),v.qZA()(),v.TgZ(164,"p"),v._uU(165,"Lorem ipsum dolor sit amet, consectetur adipisicing elit."),v.qZA()()()(),v.TgZ(166,"div",66)(167,"div",67)(168,"div",68),v._UZ(169,"img",74),v.qZA(),v.TgZ(170,"div",70)(171,"h3",44)(172,"a",45),v._uU(173,"Eco Charities."),v.qZA()(),v.TgZ(174,"p"),v._uU(175,"Lorem ipsum dolor sit amet, consectetur adipisicing elit."),v.qZA()()()(),v.TgZ(176,"div",66)(177,"div",67)(178,"div",68),v._UZ(179,"img",75),v.qZA(),v.TgZ(180,"div",70)(181,"h3",44)(182,"a",45),v._uU(183,"Food Charities."),v.qZA()(),v.TgZ(184,"p"),v._uU(185,"Lorem ipsum dolor sit amet, consectetur adipisicing elit."),v.qZA()()()()(),v.TgZ(186,"div")(187,"div",76)(188,"h3",77),v._uU(189,"Ultimos Videos"),v.qZA(),v.TgZ(190,"div",62),v._UZ(191,"img",63),v.qZA(),v.TgZ(192,"p",64),v._uU(193,"Lorem ipsum dolor sit amet, consectetur adipisicing elit excepturi ipsa! "),v.qZA(),v._UZ(194,"div",57),v.TgZ(195,"a",78),v._UZ(196,"i",79),v.qZA(),v.TgZ(197,"div",80)(198,"div",81)(199,"a",82),v._UZ(200,"i",83),v.qZA()(),v.TgZ(201,"div",84)(202,"a",85),v._UZ(203,"i",83),v.qZA()()()(),v._UZ(204,"div")(205,"div"),v.TgZ(206,"div",86)(207,"div",59)(208,"div",87)(209,"div",33)(210,"div",34)(211,"h2",35),v._uU(212,"Equipo"),v.qZA()(),v.TgZ(213,"div",88),v._UZ(214,"img",37),v.qZA(),v.TgZ(215,"p"),v._uU(216,"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Dolores, quasi, dolorum blanditiis eius laboriosam, quidem temporibus, dolor quod voluptatum perferendis ullam. Odio sequi at dolore consequatur ad, odit expedita tenetur."),v.qZA()()(),v.TgZ(217,"div",89)(218,"div",90)(219,"div",91)(220,"div",92),v._UZ(221,"img",93),v.qZA(),v.TgZ(222,"div",94)(223,"h4",95),v._uU(224,"Penny Tool"),v.TgZ(225,"small"),v._uU(226,"Volunteers"),v.qZA()()()(),v.TgZ(227,"div",96)(228,"div",92),v._UZ(229,"img",97),v.qZA(),v.TgZ(230,"div",94)(231,"h4",95),v._uU(232,"Piff Jenkins"),v.TgZ(233,"small"),v._uU(234,"Volunteers"),v.qZA()()()()(),v.TgZ(235,"div",98)(236,"div",99)(237,"div",92),v._UZ(238,"img",100),v.qZA(),v.TgZ(239,"div",94)(240,"h4",95),v._uU(241,"Rodney Artich"),v.TgZ(242,"small"),v._uU(243,"Volunteers"),v.qZA()()()(),v.TgZ(244,"div",96)(245,"div",92),v._UZ(246,"img",101),v.qZA(),v.TgZ(247,"div",94)(248,"h4",95),v._uU(249,"Weir Doe"),v.TgZ(250,"small"),v._uU(251,"Volunteers"),v.qZA()()()()(),v.TgZ(252,"div",90)(253,"div",99)(254,"div",92),v._UZ(255,"img",102),v.qZA(),v.TgZ(256,"div",94)(257,"h4",95),v._uU(258,"Jackson Pot"),v.TgZ(259,"small"),v._uU(260,"Volunteers"),v.qZA()()()(),v.TgZ(261,"div",96)(262,"div",92),v._UZ(263,"img",103),v.qZA(),v.TgZ(264,"div",94)(265,"h4",95),v._uU(266,"Phillip Anthropy "),v.TgZ(267,"small"),v._uU(268,"Volunteers"),v.qZA()()()()(),v.TgZ(269,"div",104)(270,"div",99)(271,"div",92),v._UZ(272,"img",105),v.qZA(),v.TgZ(273,"div",94)(274,"h4",95),v._uU(275,"Eric Widget"),v.TgZ(276,"small"),v._uU(277,"Volunteers"),v.qZA()()()(),v.TgZ(278,"div",96)(279,"div",92),v._UZ(280,"img",106),v.qZA(),v.TgZ(281,"div",94)(282,"h4",95),v._uU(283,"Giles Posture"),v.TgZ(284,"small"),v._uU(285,"Volunteers"),v.qZA()()()()(),v.TgZ(286,"div",107)(287,"div",99)(288,"div",92),v._UZ(289,"img",108),v.qZA(),v.TgZ(290,"div",94)(291,"h4",95),v._uU(292,"Gunther Beard"),v.TgZ(293,"small"),v._uU(294,"Volunteers"),v.qZA()()()(),v.TgZ(295,"div",109)(296,"a",110),v._UZ(297,"img",111),v.qZA()()()()()(),v.TgZ(298,"div",112)(299,"div",59)(300,"div",26)(301,"div",33)(302,"div",34)(303,"h2",35),v._uU(304,"Quienes Trabajan con nosotros"),v.qZA()(),v.TgZ(305,"div",88),v._UZ(306,"img",113),v.qZA(),v.TgZ(307,"p"),v._uU(308,"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Dolores, quasi, dolorum blanditiis eius laboriosam, quidem temporibus, dolor quod voluptatum perferendis ullam. Odio sequi at dolore consequatur ad, odit expedita tenetur."),v.qZA()(),v._UZ(309,"div",57),v.TgZ(310,"div",114)(311,"ul",115)(312,"li",116)(313,"a",117),v._UZ(314,"img",118),v.qZA()(),v.TgZ(315,"li",116)(316,"a",117),v._UZ(317,"img",119),v.qZA()(),v.TgZ(318,"li",116)(319,"a",117),v._UZ(320,"img",120),v.qZA()(),v.TgZ(321,"li",116)(322,"a",117),v._UZ(323,"img",121),v.qZA()(),v.TgZ(324,"li",116)(325,"a",117),v._UZ(326,"img",122),v.qZA()(),v.TgZ(327,"li",116)(328,"a",117),v._UZ(329,"img",123),v.qZA()(),v.TgZ(330,"li",116)(331,"a",117),v._UZ(332,"img",124),v.qZA()(),v.TgZ(333,"li",116)(334,"a",117),v._UZ(335,"img",125),v.qZA()(),v.TgZ(336,"li",116)(337,"a",117),v._UZ(338,"img",126),v.qZA()(),v.TgZ(339,"li",116)(340,"a",117),v._UZ(341,"img",127),v.qZA()()()(),v.TgZ(342,"h5",128),v._uU(343,"If you want to work with for nonprofit? "),v.TgZ(344,"a",117)(345,"u"),v._uU(346,"Send your Details"),v.qZA()(),v._uU(347,"."),v.qZA()()()(),v._UZ(348,"div",129)(349,"div",57),v.qZA()()()()()()()())},styles:[".video-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:99999;background-color:#3502579c;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;transition:all .3s}.video-container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:15%;right:35px;font-size:40px;cursor:pointer}.video-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{width:850%;max-width:700px;transform:scale(0);box-shadow:0 20px 20px #000;outline:none;transition:all .3s}.video-container.show[_ngcontent-%COMP%]{pointer-events:all;opacity:1}.video-container.show[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{transform:scale(1)}"]}),l})(),Bo=(()=>{class l{constructor(){}ngOnInit(){}}return l.\u0275fac=function(u){return new(u||l)},l.\u0275cmp=v.Xpm({type:l,selectors:[["app-footer"]],decls:33,vars:0,consts:[["id","footer",2,"background-color","#002D40"],[1,"container"],[1,"footer-widgets-wrap","dark","clearfix",2,"background","radial-gradient(rgba(0,45,64,.5), rgba(0,45,64,.1), rgba(0,45,64,.5)), url('demos/nonprofit/images/others/footer.jpg') repeat center center / cover","padding","150px 0"],[1,"mx-auto","center",2,"max-width","700px"],[1,"display-2","fw-bold","text-white","mb-0","ls1","font-secondary","mb-4"],["href","demo-nonprofit-causes-single.html",1,"button","button-rounded","button-xlarge","button-white","bg-white","button-light","text-dark","shadow","nott","ls0","ms-0","mt-5"],["id","copyrights",1,"bg-color"],[1,"container","clearfix"],[1,"row","justify-content-between","align-items-center"],[1,"col-md-6"],[1,"copyright-links"],["href","#"],[1,"col-md-6","d-md-flex","flex-md-column","align-items-md-end","mt-4","mt-md-0"],[1,"copyrights-menu","copyright-links","clearfix"]],template:function(u,h){1&u&&(v.TgZ(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),v._uU(5,"Ayuda a quienes m\xe1s &lo necesitan."),v.qZA(),v.TgZ(6,"a",5),v._uU(7,"Aportar"),v.qZA()()()(),v.TgZ(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9),v._uU(12," Copyrights \xa9 2022 by Trigo Technologies."),v._UZ(13,"br"),v.TgZ(14,"div",10)(15,"a",11),v._uU(16,"Terms of Use"),v.qZA(),v._uU(17," / "),v.TgZ(18,"a",11),v._uU(19,"Privacy Policy"),v.qZA()()(),v.TgZ(20,"div",12)(21,"div",13)(22,"a",11),v._uU(23,"About"),v.qZA(),v._uU(24,"/"),v.TgZ(25,"a",11),v._uU(26,"Features"),v.qZA(),v._uU(27,"/"),v.TgZ(28,"a",11),v._uU(29,"FAQs"),v.qZA(),v._uU(30,"/"),v.TgZ(31,"a",11),v._uU(32,"Contact"),v.qZA()()()()()()())},styles:[""]}),l})(),Ps=(()=>{class l{constructor(){}ngOnInit(){}}return l.\u0275fac=function(u){return new(u||l)},l.\u0275cmp=v.Xpm({type:l,selectors:[["app-home"]],decls:3,vars:0,template:function(u,h){1&u&&v._UZ(0,"app-navbar")(1,"app-page-content")(2,"app-footer")},directives:[$r,vi,Bo],styles:[""]}),l})();const ls=[{path:"",component:Ps},{path:"home",component:Ps},{path:"conditions",component:_i},{path:"donate",component:br},{path:"add-payments",component:Qi},{path:"auth",loadChildren:()=>V.e(241).then(V.bind(V,7241)).then(l=>l.AuthModule)}];let wi=(()=>{class l{}return l.\u0275fac=function(u){return new(u||l)},l.\u0275mod=v.oAB({type:l}),l.\u0275inj=v.cJS({imports:[[yi.Bz.forRoot(ls)],yi.Bz]}),l})(),Lr=(()=>{class l{}return l.\u0275fac=function(u){return new(u||l)},l.\u0275cmp=v.Xpm({type:l,selectors:[["app-root"]],decls:1,vars:0,template:function(u,h){1&u&&v._UZ(0,"router-outlet")},directives:[yi.lC],encapsulation:2}),l})();const Si_firebaseConfig={apiKey:"AIzaSyDdGdJqdT5HP49L_gvqnxzTjXysmmA8EP8",authDomain:"fundacion-tu-sumas.firebaseapp.com",databaseURL:"https://fundacion-tu-sumas-default-rtdb.firebaseio.com",projectId:"fundacion-tu-sumas",storageBucket:"fundacion-tu-sumas.appspot.com",messagingSenderId:"1056165815010",appId:"1:1056165815010:web:4b7eb6df0180fe60d834bb",measurementId:"G-TX66DB8G4H"};var Tn=V(2011),_t=V(1205),Ht=V(8306),Bn=V(9646),Kr=V(8996),Ji=V(4986),Cr=V(4482),Ai=V(5403),Zr=V(4004),Tr=V(3900),Xt=V(5813),ws=V(3942),Xi=V(5861),es=V(9681),te=V(2090),hr=V(4859);const Gr="firebasestorage.googleapis.com",ii="storageBucket";class sr extends te.ZR{constructor(o,u){super(ts(o),`Firebase Storage: ${u} (${ts(o)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,sr.prototype)}_codeEquals(o){return ts(o)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(o){this.customData.serverResponse=o,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function ts(l){return"storage/"+l}function si(){return new sr("unknown","An unknown error occurred, please check the error payload for server response.")}function Ks(){return new sr("canceled","User canceled the upload/download.")}function bo(){return new sr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function He(l){return new sr("invalid-argument",l)}function ot(){return new sr("app-deleted","The Firebase app was deleted.")}function Ct(l){return new sr("invalid-root-operation","The operation '"+l+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Pt(l,o){return new sr("invalid-format","String does not match format '"+l+"': "+o)}function or(l){throw new sr("internal-error","Internal error: "+l)}class Vn{constructor(o,u){this.bucket=o,this.path_=u}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const o=encodeURIComponent;return"/b/"+o(this.bucket)+"/o/"+o(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(o,u){let h;try{h=Vn.makeFromUrl(o,u)}catch(_){return new Vn(o,"")}if(""===h.path)return h;throw function Pr(l){return new sr("invalid-default-bucket","Invalid default bucket '"+l+"'.")}(o)}static makeFromUrl(o,u){let h=null;const _="([A-Za-z0-9.\\-_]+)",$=new RegExp("^gs://"+_+"(/(.*))?$","i");function ne(zs){zs.path_=decodeURIComponent(zs.path)}const Fe=u.replace(/[.]/g,"\\."),fi=[{regex:$,indices:{bucket:1,path:3},postModify:function b(zs){"/"===zs.path.charAt(zs.path.length-1)&&(zs.path_=zs.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${Fe}/v[A-Za-z0-9_]+/b/${_}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:ne},{regex:new RegExp(`^https?://${u===Gr?"(?:storage.googleapis.com|storage.cloud.google.com)":u}/${_}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:ne}];for(let zs=0;zs<fi.length;zs++){const Ui=fi[zs],Cd=Ui.regex.exec(o);if(Cd){let Td=Cd[Ui.indices.path];Td||(Td=""),h=new Vn(Cd[Ui.indices.bucket],Td),Ui.postModify(h);break}}if(null==h)throw function eu(l){return new sr("invalid-url","Invalid URL '"+l+"'.")}(o);return h}}class tr{constructor(o){this.promise_=Promise.reject(o)}getPromise(){return this.promise_}cancel(o=!1){}}function cs(l){return"string"==typeof l||l instanceof String}function tu(l){return Oa()&&l instanceof Blob}function Oa(){return"undefined"!=typeof Blob}function Qr(l,o,u,h){if(h<o)throw He(`Invalid value for '${l}'. Expected ${o} or greater.`);if(h>u)throw He(`Invalid value for '${l}'. Expected ${u} or less.`)}function li(l,o,u){let h=o;return null==u&&(h=`https://${o}`),`${u}://${h}/v0${l}`}function ds(l){const o=encodeURIComponent;let u="?";for(const h in l)l.hasOwnProperty(h)&&(u=u+(o(h)+"=")+o(l[h])+"&");return u=u.slice(0,-1),u}var rs=(()=>{return(l=rs||(rs={}))[l.NO_ERROR=0]="NO_ERROR",l[l.NETWORK_ERROR=1]="NETWORK_ERROR",l[l.ABORT=2]="ABORT",rs;var l})();class ka{constructor(o,u,h,_,b,M,$,z,ne,Ne,Fe){this.url_=o,this.method_=u,this.headers_=h,this.body_=_,this.successCodes_=b,this.additionalRetryCodes_=M,this.callback_=$,this.errorCallback_=z,this.timeout_=ne,this.progressCallback_=Ne,this.connectionFactory_=Fe,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Ye,Mt)=>{this.resolve_=Ye,this.reject_=Mt,this.start_()})}start_(){const u=(h,_)=>{const b=this.resolve_,M=this.reject_,$=_.connection;if(_.wasSuccessCode)try{const z=this.callback_($,$.getResponse());!function Ns(l){return void 0!==l}(z)?b():b(z)}catch(z){M(z)}else if(null!==$){const z=si();z.serverResponse=$.getErrorText(),M(this.errorCallback_?this.errorCallback_($,z):z)}else M(_.canceled?this.appDelete_?ot():Ks():function Io(){return new sr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?u(0,new Is(!1,null,!0)):this.backoffId_=function Bi(l,o,u){let h=1,_=null,b=null,M=!1,$=0;function z(){return 2===$}let ne=!1;function Ne(...Wn){ne||(ne=!0,o.apply(null,Wn))}function Fe(Wn){_=setTimeout(()=>{_=null,l(Mt,z())},Wn)}function Ye(){b&&clearTimeout(b)}function Mt(Wn,...vs){if(ne)return void Ye();if(Wn)return Ye(),void Ne.call(null,Wn,...vs);if(z()||M)return Ye(),void Ne.call(null,Wn,...vs);let fi;h<64&&(h*=2),1===$?($=2,fi=0):fi=1e3*(h+Math.random()),Fe(fi)}let Vt=!1;function Cn(Wn){Vt||(Vt=!0,Ye(),!ne&&(null!==_?(Wn||($=2),clearTimeout(_),Fe(0)):Wn||($=1)))}return Fe(0),b=setTimeout(()=>{M=!0,Cn(!0)},u),Cn}((h,_)=>{if(_)return void h(!1,new Is(!1,null,!0));const b=this.connectionFactory_();this.pendingConnection_=b;const M=$=>{null!==this.progressCallback_&&this.progressCallback_($.loaded,$.lengthComputable?$.total:-1)};null!==this.progressCallback_&&b.addUploadProgressListener(M),b.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&b.removeUploadProgressListener(M),this.pendingConnection_=null;const $=b.getErrorCode()===rs.NO_ERROR,z=b.getStatus();if(!$||this.isRetryStatusCode_(z)){const Ne=b.getErrorCode()===rs.ABORT;return void h(!1,new Is(!1,null,Ne))}const ne=-1!==this.successCodes_.indexOf(z);h(!0,new Is(ne,b))})},u,this.timeout_)}getPromise(){return this.promise_}cancel(o){this.canceled_=!0,this.appDelete_=o||!1,null!==this.backoffId_&&function lo(l){l(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(o){const u=o>=500&&o<600,_=-1!==[408,429].indexOf(o),b=-1!==this.additionalRetryCodes_.indexOf(o);return u||_||b}}class Is{constructor(o,u,h){this.wasSuccessCode=o,this.connection=u,this.canceled=!!h}}function Os(...l){const o=function Jr(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==o){const u=new o;for(let h=0;h<l.length;h++)u.append(l[h]);return u.getBlob()}if(Oa())return new Blob(l);throw new sr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Nr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ho{constructor(o,u){this.data=o,this.contentType=u||null}}function is(l,o){switch(l){case Nr.RAW:return new ho(na(o));case Nr.BASE64:case Nr.BASE64URL:return new ho(Co(l,o));case Nr.DATA_URL:return new ho(function L(l){const o=new jn(l);return o.base64?Co(Nr.BASE64,o.rest):function ks(l){let o;try{o=decodeURIComponent(l)}catch(u){throw Pt(Nr.DATA_URL,"Malformed data URL.")}return na(o)}(o.rest)}(o),function q(l){return new jn(l).contentType}(o))}throw si()}function na(l){const o=[];for(let u=0;u<l.length;u++){let h=l.charCodeAt(u);h<=127?o.push(h):h<=2047?o.push(192|h>>6,128|63&h):55296==(64512&h)?u<l.length-1&&56320==(64512&l.charCodeAt(u+1))?(h=65536|(1023&h)<<10|1023&l.charCodeAt(++u),o.push(240|h>>18,128|h>>12&63,128|h>>6&63,128|63&h)):o.push(239,191,189):56320==(64512&h)?o.push(239,191,189):o.push(224|h>>12,128|h>>6&63,128|63&h)}return new Uint8Array(o)}function Co(l,o){switch(l){case Nr.BASE64:{const _=-1!==o.indexOf("-"),b=-1!==o.indexOf("_");if(_||b)throw Pt(l,"Invalid character '"+(_?"-":"_")+"' found: is it base64url encoded?");break}case Nr.BASE64URL:{const _=-1!==o.indexOf("+"),b=-1!==o.indexOf("/");if(_||b)throw Pt(l,"Invalid character '"+(_?"+":"/")+"' found: is it base64 encoded?");o=o.replace(/-/g,"+").replace(/_/g,"/");break}}let u;try{u=function Fa(l){return atob(l)}(o)}catch(_){throw Pt(l,"Invalid character found")}const h=new Uint8Array(u.length);for(let _=0;_<u.length;_++)h[_]=u.charCodeAt(_);return h}class jn{constructor(o){this.base64=!1,this.contentType=null;const u=o.match(/^data:([^,]+)?,/);if(null===u)throw Pt(Nr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const h=u[1]||null;null!=h&&(this.base64=function F(l,o){return l.length>=o.length&&l.substring(l.length-o.length)===o}(h,";base64"),this.contentType=this.base64?h.substring(0,h.length-7):h),this.rest=o.substring(o.indexOf(",")+1)}}class Q{constructor(o,u){let h=0,_="";tu(o)?(this.data_=o,h=o.size,_=o.type):o instanceof ArrayBuffer?(u?this.data_=new Uint8Array(o):(this.data_=new Uint8Array(o.byteLength),this.data_.set(new Uint8Array(o))),h=this.data_.length):o instanceof Uint8Array&&(u?this.data_=o:(this.data_=new Uint8Array(o.length),this.data_.set(o)),h=o.length),this.size_=h,this.type_=_}size(){return this.size_}type(){return this.type_}slice(o,u){if(tu(this.data_)){const _=function xi(l,o,u){return l.webkitSlice?l.webkitSlice(o,u):l.mozSlice?l.mozSlice(o,u):l.slice?l.slice(o,u):null}(this.data_,o,u);return null===_?null:new Q(_)}{const h=new Uint8Array(this.data_.buffer,o,u-o);return new Q(h,!0)}}static getBlob(...o){if(Oa()){const u=o.map(h=>h instanceof Q?h.data_:h);return new Q(Os.apply(null,u))}{const u=o.map(M=>cs(M)?is(Nr.RAW,M).data:M.data_);let h=0;u.forEach(M=>{h+=M.byteLength});const _=new Uint8Array(h);let b=0;return u.forEach(M=>{for(let $=0;$<M.length;$++)_[b++]=M[$]}),new Q(_,!0)}}uploadData(){return this.data_}}function de(l){let o;try{o=JSON.parse(l)}catch(u){return null}return function Vi(l){return"object"==typeof l&&!Array.isArray(l)}(o)?o:null}function Gt(l){const o=l.lastIndexOf("/",l.length-2);return-1===o?l:l.slice(o+1)}function hn(l,o){return o}class fn{constructor(o,u,h,_){this.server=o,this.local=u||o,this.writable=!!h,this.xform=_||hn}}let En=null;function Ir(){if(En)return En;const l=[];l.push(new fn("bucket")),l.push(new fn("generation")),l.push(new fn("metageneration")),l.push(new fn("name","fullPath",!0));const u=new fn("name");u.xform=function o(b,M){return function On(l){return!cs(l)||l.length<2?l:Gt(l)}(M)},l.push(u);const _=new fn("size");return _.xform=function h(b,M){return void 0!==M?Number(M):M},l.push(_),l.push(new fn("timeCreated")),l.push(new fn("updated")),l.push(new fn("md5Hash",null,!0)),l.push(new fn("cacheControl",null,!0)),l.push(new fn("contentDisposition",null,!0)),l.push(new fn("contentEncoding",null,!0)),l.push(new fn("contentLanguage",null,!0)),l.push(new fn("contentType",null,!0)),l.push(new fn("metadata","customMetadata",!0)),En=l,En}function ji(l,o,u){const h=de(o);return null===h?null:function Dr(l,o,u){const h={type:"file"},_=u.length;for(let b=0;b<_;b++){const M=u[b];h[M.local]=M.xform(h,o[M.server])}return function lr(l,o){Object.defineProperty(l,"ref",{get:function u(){const b=new Vn(l.bucket,l.fullPath);return o._makeStorageReference(b)}})}(h,l),h}(l,h,u)}function Kt(l,o){const u={},h=o.length;for(let _=0;_<h;_++){const b=o[_];b.writable&&(u[b.server]=l[b.local])}return JSON.stringify(u)}const hs="prefixes";class fs{constructor(o,u,h,_){this.url=o,this.method=u,this.handler=h,this.timeout=_,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Fs(l){if(!l)throw si()}function ra(l,o){return function u(h,_){const b=ji(l,_,o);return Fs(null!==b),b}}function Dn(l){return function o(u,h){let _;return _=401===u.getStatus()?u.getErrorText().includes("Firebase App Check token is invalid")?function ui(){return new sr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Na(){return new sr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===u.getStatus()?function uo(l){return new sr("quota-exceeded","Quota for bucket '"+l+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(l.bucket):403===u.getStatus()?function Es(l){return new sr("unauthorized","User does not have permission to access '"+l+"'.")}(l.path):h,_.serverResponse=h.serverResponse,_}}function Qs(l){const o=Dn(l);return function u(h,_){let b=o(h,_);return 404===h.getStatus()&&(b=function ns(l){return new sr("object-not-found","Object '"+l+"' does not exist.")}(l.path)),b.serverResponse=_.serverResponse,b}}function Ur(l,o,u){const _=li(o.fullServerUrl(),l.host,l._protocol),M=l.maxOperationRetryTime,$=new fs(_,"GET",ra(l,u),M);return $.errorHandler=Qs(o),$}function Ho(l,o,u,h,_){const b={};b.prefix=o.isRoot?"":o.path+"/",u&&u.length>0&&(b.delimiter=u),h&&(b.pageToken=h),_&&(b.maxResults=_);const $=li(o.bucketOnlyServerUrl(),l.host,l._protocol),ne=l.maxOperationRetryTime,Ne=new fs($,"GET",function nu(l,o){return function u(h,_){const b=function fo(l,o,u){const h=de(u);return null===h?null:function jo(l,o,u){const h={prefixes:[],items:[],nextPageToken:u.nextPageToken};if(u[hs])for(const _ of u[hs]){const b=_.replace(/\/$/,""),M=l._makeStorageReference(new Vn(o,b));h.prefixes.push(M)}if(u.items)for(const _ of u.items){const b=l._makeStorageReference(new Vn(o,_.name));h.items.push(b)}return h}(l,o,h)}(l,o,_);return Fs(null!==b),b}}(l,o.bucket),ne);return Ne.urlParams=b,Ne.errorHandler=Dn(o),Ne}function ru(l,o,u){const h=Object.assign({},u);return h.fullPath=l.path,h.size=o.size(),h.contentType||(h.contentType=function jl(l,o){return l&&l.contentType||o&&o.type()||"application/octet-stream"}(null,o)),h}class Cs{constructor(o,u,h,_){this.current=o,this.total=u,this.finalized=!!h,this.metadata=_||null}}function bi(l,o){let u=null;try{u=l.getResponseHeader("X-Goog-Upload-Status")}catch(_){Fs(!1)}return Fs(!!u&&-1!==(o||["active"]).indexOf(u)),u}const Xr={STATE_CHANGED:"state_changed"},Ci={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function iu(l){switch(l){case"running":case"pausing":case"canceling":return Ci.RUNNING;case"paused":return Ci.PAUSED;case"success":return Ci.SUCCESS;case"canceled":return Ci.CANCELED;default:return Ci.ERROR}}class gl{constructor(o,u,h){if(function co(l){return"function"==typeof l}(o)||null!=u||null!=h)this.next=o,this.error=null!=u?u:void 0,this.complete=null!=h?h:void 0;else{const b=o;this.next=b.next,this.error=b.error,this.complete=b.complete}}}function To(l){return(...o)=>{Promise.resolve().then(()=>l(...o))}}class bu extends class Gu{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=rs.NO_ERROR,this.sendPromise_=new Promise(o=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=rs.ABORT,o()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=rs.NETWORK_ERROR,o()}),this.xhr_.addEventListener("load",()=>{o()})})}send(o,u,h,_){if(this.sent_)throw or("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(u,o,!0),void 0!==_)for(const b in _)_.hasOwnProperty(b)&&this.xhr_.setRequestHeader(b,_[b].toString());return void 0!==h?this.xhr_.send(h):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw or("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw or("cannot .getStatus() before sending");try{return this.xhr_.status}catch(o){return-1}}getResponse(){if(!this.sent_)throw or("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw or("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(o){return this.xhr_.getResponseHeader(o)}addUploadProgressListener(o){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",o)}removeUploadProgressListener(o){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",o)}}{initXhr(){this.xhr_.responseType="text"}}function ps(){return new bu}class qu{constructor(o,u,h=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=o,this._blob=u,this._metadata=h,this._mappings=Ir(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=_=>{this._request=void 0,this._chunkMultiplier=1,_._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=_,this._transition("error"))},this._metadataErrorHandler=_=>{this._request=void 0,_._codeEquals("canceled")?this.completeTransitions_():(this._error=_,this._transition("error"))},this._promise=new Promise((_,b)=>{this._resolve=_,this._reject=b,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const o=this._transferred;return u=>this._updateProgress(o+u)}_shouldDoResumable(o){return o.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(o){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([u,h])=>{switch(this._state){case"running":o(u,h);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((o,u)=>{const h=function Ls(l,o,u,h,_){const b=o.bucketOnlyServerUrl(),M=ru(o,h,_),$={name:M.fullPath},z=li(b,l.host,l._protocol),Ne={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${h.size()}`,"X-Goog-Upload-Header-Content-Type":M.contentType,"Content-Type":"application/json; charset=utf-8"},Fe=Kt(M,u),Vt=new fs(z,"POST",function Mt(Cn){let Wn;bi(Cn);try{Wn=Cn.getResponseHeader("X-Goog-Upload-URL")}catch(vs){Fs(!1)}return Fs(cs(Wn)),Wn},l.maxUploadRetryTime);return Vt.urlParams=$,Vt.headers=Ne,Vt.body=Fe,Vt.errorHandler=Dn(o),Vt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),_=this._ref.storage._makeRequest(h,ps,o,u);this._request=_,_.getPromise().then(b=>{this._request=void 0,this._uploadUrl=b,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const o=this._uploadUrl;this._resolveToken((u,h)=>{const _=function sa(l,o,u,h){const z=new fs(u,"POST",function b(ne){const Ne=bi(ne,["active","final"]);let Fe=null;try{Fe=ne.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Mt){Fs(!1)}Fe||Fs(!1);const Ye=Number(Fe);return Fs(!isNaN(Ye)),new Cs(Ye,h.size(),"final"===Ne)},l.maxUploadRetryTime);return z.headers={"X-Goog-Upload-Command":"query"},z.errorHandler=Dn(o),z}(this._ref.storage,this._ref._location,o,this._blob),b=this._ref.storage._makeRequest(_,ps,u,h);this._request=b,b.getPromise().then(M=>{M=M,this._request=void 0,this._updateProgress(M.current),this._needToFetchStatus=!1,M.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const o=262144*this._chunkMultiplier,u=new Cs(this._transferred,this._blob.size()),h=this._uploadUrl;this._resolveToken((_,b)=>{let M;try{M=function Js(l,o,u,h,_,b,M,$){const z=new Cs(0,0);if(M?(z.current=M.current,z.total=M.total):(z.current=0,z.total=h.size()),h.size()!==z.total)throw function Te(){return new sr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const ne=z.total-z.current;let Ne=ne;_>0&&(Ne=Math.min(Ne,_));const Fe=z.current,Vt={"X-Goog-Upload-Command":Ne===ne?"upload, finalize":"upload","X-Goog-Upload-Offset":`${z.current}`},Cn=h.slice(Fe,Fe+Ne);if(null===Cn)throw bo();const fi=new fs(u,"POST",function Wn(zs,Ui){const Cd=bi(zs,["active","final"]),vf=z.current+Ne,Td=h.size();let wf;return wf="final"===Cd?ra(o,b)(zs,Ui):null,new Cs(vf,Td,"final"===Cd,wf)},o.maxUploadRetryTime);return fi.headers=Vt,fi.body=Cn.uploadData(),fi.progressCallback=$||null,fi.errorHandler=Dn(l),fi}(this._ref._location,this._ref.storage,h,this._blob,o,this._mappings,u,this._makeProgressCallback())}catch(z){return this._error=z,void this._transition("error")}const $=this._ref.storage._makeRequest(M,ps,_,b);this._request=$,$.getPromise().then(z=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(z.current),z.finalized?(this._metadata=z.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((o,u)=>{const h=Ur(this._ref.storage,this._ref._location,this._mappings),_=this._ref.storage._makeRequest(h,ps,o,u);this._request=_,_.getPromise().then(b=>{this._request=void 0,this._metadata=b,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((o,u)=>{const h=function Iu(l,o,u,h,_){const b=o.bucketOnlyServerUrl(),M={"X-Goog-Upload-Protocol":"multipart"},z=function $(){let fi="";for(let zs=0;zs<2;zs++)fi+=Math.random().toString().slice(2);return fi}();M["Content-Type"]="multipart/related; boundary="+z;const ne=ru(o,h,_),Ne=Kt(ne,u),Mt=Q.getBlob("--"+z+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Ne+"\r\n--"+z+"\r\nContent-Type: "+ne.contentType+"\r\n\r\n",h,"\r\n--"+z+"--");if(null===Mt)throw bo();const Vt={name:ne.fullPath},Cn=li(b,l.host,l._protocol),vs=l.maxUploadRetryTime,Rs=new fs(Cn,"POST",ra(l,u),vs);return Rs.urlParams=Vt,Rs.headers=M,Rs.body=Mt.uploadData(),Rs.errorHandler=Dn(o),Rs}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),_=this._ref.storage._makeRequest(h,ps,o,u);this._request=_,_.getPromise().then(b=>{this._request=void 0,this._metadata=b,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(o){const u=this._transferred;this._transferred=o,this._transferred!==u&&this._notifyObservers()}_transition(o){if(this._state!==o)switch(o){case"canceling":case"pausing":this._state=o,void 0!==this._request&&this._request.cancel();break;case"running":const u="paused"===this._state;this._state=o,u&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=o,this._notifyObservers();break;case"canceled":this._error=Ks(),this._state=o,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const o=iu(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:o,metadata:this._metadata,task:this,ref:this._ref}}on(o,u,h,_){const b=new gl(u||void 0,h||void 0,_||void 0);return this._addObserver(b),()=>{this._removeObserver(b)}}then(o,u){return this._promise.then(o,u)}catch(o){return this.then(null,o)}_addObserver(o){this._observers.push(o),this._notifyObserver(o)}_removeObserver(o){const u=this._observers.indexOf(o);-1!==u&&this._observers.splice(u,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(u=>{this._notifyObserver(u)})}_finishPromise(){if(void 0!==this._resolve){let o=!0;switch(iu(this._state)){case Ci.SUCCESS:To(this._resolve.bind(null,this.snapshot))();break;case Ci.CANCELED:case Ci.ERROR:To(this._reject.bind(null,this._error))();break;default:o=!1}o&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(o){switch(iu(this._state)){case Ci.RUNNING:case Ci.PAUSED:o.next&&To(o.next.bind(o,this.snapshot))();break;case Ci.SUCCESS:o.complete&&To(o.complete.bind(o))();break;default:o.error&&To(o.error.bind(o,this._error))()}}resume(){const o="paused"===this._state||"pausing"===this._state;return o&&this._transition("running"),o}pause(){const o="running"===this._state;return o&&this._transition("pausing"),o}cancel(){const o="running"===this._state||"pausing"===this._state;return o&&this._transition("canceling"),o}}class po{constructor(o,u){this._service=o,this._location=u instanceof Vn?u:Vn.makeFromUrl(u,o.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(o,u){return new po(o,u)}get root(){const o=new Vn(this._location.bucket,"");return this._newRef(this._service,o)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Gt(this._location.path)}get storage(){return this._service}get parent(){const o=function We(l){if(0===l.length)return null;const o=l.lastIndexOf("/");return-1===o?"":l.slice(0,o)}(this._location.path);if(null===o)return null;const u=new Vn(this._location.bucket,o);return new po(this._service,u)}_throwIfRoot(o){if(""===this._location.path)throw Ct(o)}}function Zo(l,o,u){return $l.apply(this,arguments)}function $l(){return($l=(0,Xi.Z)(function*(l,o,u){const _=yield Zl(l,{pageToken:u});o.prefixes.push(..._.prefixes),o.items.push(..._.items),null!=_.nextPageToken&&(yield Zo(l,o,_.nextPageToken))})).apply(this,arguments)}function Zl(l,o){null!=o&&"number"==typeof o.maxResults&&Qr("options.maxResults",1,1e3,o.maxResults);const u=o||{},h=Ho(l.storage,l._location,"/",u.pageToken,u.maxResults);return l.storage.makeRequestWithTokens(h,ps)}function Lc(l){l._throwIfRoot("getDownloadURL");const o=function bs(l,o,u){const _=li(o.fullServerUrl(),l.host,l._protocol),M=l.maxOperationRetryTime,$=new fs(_,"GET",function gt(l,o){return function u(h,_){const b=ji(l,_,o);return Fs(null!==b),function Ri(l,o,u,h){const _=de(o);if(null===_||!cs(_.downloadTokens))return null;const b=_.downloadTokens;if(0===b.length)return null;const M=encodeURIComponent;return b.split(",").map(ne=>{const Fe=l.fullPath;return li("/b/"+M(l.bucket)+"/o/"+M(Fe),u,h)+ds({alt:"media",token:ne})})[0]}(b,_,l.host,l._protocol)}}(l,u),M);return $.errorHandler=Qs(o),$}(l.storage,l._location,Ir());return l.storage.makeRequestWithTokens(o,ps).then(u=>{if(null===u)throw function pe(){return new sr("no-download-url","The given file does not have any download URLs.")}();return u})}function Bs(l,o){const u=function ht(l,o){const u=o.split("/").filter(h=>h.length>0).join("/");return 0===l.length?u:l+"/"+u}(l._location.path,o),h=new Vn(l._location.bucket,u);return new po(l.storage,h)}function Cu(l,o){if(l instanceof Vs){const u=l;if(null==u._bucket)throw function Ys(){return new sr("no-default-bucket","No default bucket found. Did you set the '"+ii+"' property when initializing the app?")}();const h=new po(u,u._bucket);return null!=o?Cu(h,o):h}return void 0!==o?Bs(l,o):l}function ml(l,o){if(o&&function la(l){return/^[A-Za-z]+:\/\//.test(l)}(o)){if(l instanceof Vs)return function Zn(l,o){return new po(l,o)}(l,o);throw He("To use ref(service, url), the first argument must be a Storage instance.")}return Cu(l,o)}function Hi(l,o){const u=null==o?void 0:o[ii];return null==u?null:Vn.makeFromBucketSpec(u,l)}class Vs{constructor(o,u,h,_,b){this.app=o,this._authProvider=u,this._appCheckProvider=h,this._url=_,this._firebaseVersion=b,this._bucket=null,this._host=Gr,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=_?Vn.makeFromBucketSpec(_,this._host):Hi(this._host,this.app.options)}get host(){return this._host}set host(o){this._host=o,this._bucket=null!=this._url?Vn.makeFromBucketSpec(this._url,o):Hi(o,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(o){Qr("time",0,Number.POSITIVE_INFINITY,o),this._maxUploadRetryTime=o}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(o){Qr("time",0,Number.POSITIVE_INFINITY,o),this._maxOperationRetryTime=o}_getAuthToken(){var o=this;return(0,Xi.Z)(function*(){if(o._overrideAuthToken)return o._overrideAuthToken;const u=o._authProvider.getImmediate({optional:!0});if(u){const h=yield u.getToken();if(null!==h)return h.accessToken}return null})()}_getAppCheckToken(){var o=this;return(0,Xi.Z)(function*(){const u=o._appCheckProvider.getImmediate({optional:!0});return u?(yield u.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(o=>o.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(o){return new po(this,o)}_makeRequest(o,u,h,_){if(this._deleted)return new tr(ot());{const b=function ta(l,o,u,h,_,b){const M=ds(l.urlParams),$=l.url+M,z=Object.assign({},l.headers);return function Vo(l,o){o&&(l["X-Firebase-GMPID"]=o)}(z,o),function Zu(l,o){null!==o&&o.length>0&&(l.Authorization="Firebase "+o)}(z,u),function Ei(l,o){l["X-Firebase-Storage-Version"]="webjs/"+(null!=o?o:"AppManager")}(z,b),function Ii(l,o){null!==o&&(l["X-Firebase-AppCheck"]=o)}(z,h),new ka($,l.method,z,l.body,l.successCodes,l.additionalRetryCodes,l.handler,l.errorHandler,l.timeout,l.progressCallback,_)}(o,this._appId,h,_,u,this._firebaseVersion);return this._requests.add(b),b.getPromise().then(()=>this._requests.delete(b),()=>this._requests.delete(b)),b}}makeRequestWithTokens(o,u){var h=this;return(0,Xi.Z)(function*(){const[_,b]=yield Promise.all([h._getAuthToken(),h._getAppCheckToken()]);return h._makeRequest(o,u,_,b).getPromise()})()}}const yl="@firebase/storage";function Wo(l,o){return ml(l=(0,te.m9)(l),o)}function zo(l,{instanceIdentifier:o}){const u=l.getProvider("app").getImmediate(),h=l.getProvider("auth-internal"),_=l.getProvider("app-check-internal");return new Vs(u,h,_,o,es.SDK_VERSION)}!function au(){(0,es._registerComponent)(new hr.wA("storage",zo,"PUBLIC").setMultipleInstances(!0)),(0,es.registerVersion)(yl,"0.9.7",""),(0,es.registerVersion)(yl,"0.9.7","esm2017")}();class Du{constructor(o,u,h){this._delegate=o,this.task=u,this.ref=h}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class wt{constructor(o,u){this._delegate=o,this._ref=u,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Du(this._delegate.snapshot,this,this._ref)}then(o,u){return this._delegate.then(h=>{if(o)return o(new Du(h,this,this._ref))},u)}on(o,u,h,_){let b;return u&&(b="function"==typeof u?M=>u(new Du(M,this,this._ref)):{next:u.next?M=>u.next(new Du(M,this,this._ref)):void 0,complete:u.complete||void 0,error:u.error||void 0}),this._delegate.on(o,b,h||void 0,_||void 0)}}class _r{constructor(o,u){this._delegate=o,this._service=u}get prefixes(){return this._delegate.prefixes.map(o=>new Ni(o,this._service))}get items(){return this._delegate.items.map(o=>new Ni(o,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Ni{constructor(o,u){this._delegate=o,this.storage=u}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(o){const u=function ti(l,o){return Bs(l,o)}(this._delegate,o);return new Ni(u,this.storage)}get root(){return new Ni(this._delegate.root,this.storage)}get parent(){const o=this._delegate.parent;return null==o?null:new Ni(o,this.storage)}put(o,u){return this._throwIfRoot("put"),new wt(function Pi(l,o,u){return function Mi(l,o,u){return l._throwIfRoot("uploadBytesResumable"),new qu(l,new Q(o),u)}(l=(0,te.m9)(l),o,u)}(this._delegate,o,u),this)}putString(o,u=Nr.RAW,h){this._throwIfRoot("putString");const _=is(u,o),b=Object.assign({},h);return null==b.contentType&&null!=_.contentType&&(b.contentType=_.contentType),new wt(new qu(this._delegate,new Q(_.data,!0),b),this)}listAll(){return function Tu(l){return function ei(l){const o={prefixes:[],items:[]};return Zo(l,o).then(()=>o)}(l=(0,te.m9)(l))}(this._delegate).then(o=>new _r(o,this.storage))}list(o){return function js(l,o){return Zl(l=(0,te.m9)(l),o)}(this._delegate,o||void 0).then(u=>new _r(u,this.storage))}getMetadata(){return function su(l){return function ja(l){l._throwIfRoot("getMetadata");const o=Ur(l.storage,l._location,Ir());return l.storage.makeRequestWithTokens(o,ps)}(l=(0,te.m9)(l))}(this._delegate)}updateMetadata(o){return function Ha(l,o){return function Fc(l,o){l._throwIfRoot("updateMetadata");const u=function Ua(l,o,u,h){const b=li(o.fullServerUrl(),l.host,l._protocol),$=Kt(u,h),ne=l.maxOperationRetryTime,Ne=new fs(b,"PATCH",ra(l,h),ne);return Ne.headers={"Content-Type":"application/json; charset=utf-8"},Ne.body=$,Ne.errorHandler=Qs(o),Ne}(l.storage,l._location,o,Ir());return l.storage.makeRequestWithTokens(u,ps)}(l=(0,te.m9)(l),o)}(this._delegate,o)}getDownloadURL(){return function ql(l){return Lc(l=(0,te.m9)(l))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function $a(l){return function Go(l){l._throwIfRoot("deleteObject");const o=function pl(l,o){const h=li(o.fullServerUrl(),l.host,l._protocol),$=new fs(h,"DELETE",function M(z,ne){},l.maxOperationRetryTime);return $.successCodes=[200,204],$.errorHandler=Qs(o),$}(l.storage,l._location);return l.storage.makeRequestWithTokens(o,ps)}(l=(0,te.m9)(l))}(this._delegate)}_throwIfRoot(o){if(""===this._delegate._location.path)throw Ct(o)}}class Ko{constructor(o,u){this.app=o,this._delegate=u}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(o){if(A(o))throw He("ref() expected a child path but got a URL, use refFromURL instead.");return new Ni(Wo(this._delegate,o),this)}refFromURL(o){if(!A(o))throw He("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Vn.makeFromUrl(o,this._delegate.host)}catch(u){throw He("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ni(Wo(this._delegate,o),this)}setMaxUploadRetryTime(o){this._delegate.maxUploadRetryTime=o}setMaxOperationRetryTime(o){this._delegate.maxOperationRetryTime=o}useEmulator(o,u,h={}){!function ca(l,o,u,h={}){!function mo(l,o,u,h={}){l.host=`${o}:${u}`,l._protocol="http";const{mockUserToken:_}=h;_&&(l._overrideAuthToken="string"==typeof _?_:(0,te.Sg)(_,l.app.options.projectId))}(l,o,u,h)}(this._delegate,o,u,h)}}function A(l){return/^[A-Za-z]+:\/\//.test(l)}function N(l,{instanceIdentifier:o}){const u=l.getProvider("app-compat").getImmediate(),h=l.getProvider("storage").getImmediate({identifier:o});return new Ko(u,h)}!function j(l){const o={TaskState:Ci,TaskEvent:Xr,StringFormat:Nr,Storage:Ko,Reference:Ni};l.INTERNAL.registerComponent(new hr.wA("storage-compat",N,"PUBLIC").setServiceProps(o).setMultipleInstances(!0)),l.registerVersion("@firebase/storage-compat","0.1.15")}(ws.Z);var re=V(440),ge=V(127);function Ft(l){const o=function et(l){return new Ht.y(o=>{const u=M=>o.next(M);u(l.snapshot);const b=l.on("state_changed",u);return l.then(M=>{u(M),o.complete()},M=>{u(l.snapshot),(M=>{o.error(M)})(M)}),function(){b()}}).pipe(function dr(l,o=Ji.z){return(0,Cr.e)((u,h)=>{let _=null,b=null,M=null;const $=()=>{if(_){_.unsubscribe(),_=null;const ne=b;b=null,h.next(ne)}};function z(){const ne=M+l,Ne=o.now();if(Ne<ne)return _=this.schedule(void 0,ne-Ne),void h.add(_);$()}u.subscribe((0,Ai.x)(h,ne=>{b=ne,M=o.now(),_||(_=o.schedule(z,l),h.add(_))},()=>{$(),h.complete()},void 0,()=>{b=_=null}))})}(0))}(l);return{task:l,then:l.then.bind(l),catch:l.catch.bind(l),pause:l.pause.bind(l),cancel:l.cancel.bind(l),resume:l.resume.bind(l),snapshotChanges:()=>o,percentageChanges:()=>o.pipe((0,Zr.U)(u=>u.bytesTransferred/u.totalBytes*100))}}function In(l){return{getDownloadURL:()=>(0,Bn.of)(void 0).pipe(Xt.fc,(0,Tr.w)(()=>l.getDownloadURL()),Xt.iC),getMetadata:()=>(0,Bn.of)(void 0).pipe(Xt.fc,(0,Tr.w)(()=>l.getMetadata()),Xt.iC),delete:()=>(0,Kr.D)(l.delete()),child:o=>In(l.child(o)),updateMetadata:o=>(0,Kr.D)(l.updateMetadata(o)),put:(o,u)=>Ft(l.put(o,u)),putString:(o,u,h)=>Ft(l.putString(o,u,h)),list:o=>(0,Kr.D)(l.list(o)),listAll:()=>(0,Kr.D)(l.listAll())}}const qt=new v.OlP("angularfire2.storageBucket"),ar=new v.OlP("angularfire2.storage.maxUploadRetryTime"),ur=new v.OlP("angularfire2.storage.maxOperationRetryTime"),$i=new v.OlP("angularfire2.storage.use-emulator");let Yo=(()=>{class l{constructor(u,h,_,b,M,$,z,ne,Ne,Fe){const Ye=(0,Tn.on)(u,M,h);this.storage=(0,Tn.cc)(`${Ye.name}.storage.${_}`,"AngularFireStorage",Ye.name,()=>{const Mt=M.runOutsideAngular(()=>Ye.storage(_||void 0)),Vt=Ne;return Vt&&Mt.useEmulator(...Vt),z&&Mt.setMaxUploadRetryTime(z),ne&&Mt.setMaxOperationRetryTime(ne),Mt},[z,ne])}ref(u){return In(this.storage.ref(u))}refFromURL(u){return In(this.storage.refFromURL(u))}upload(u,h,_){return In(this.storage.ref(u)).put(h,_)}}return l.\u0275fac=function(u){return new(u||l)(v.LFG(Tn.Dh),v.LFG(Tn.xv,8),v.LFG(qt,8),v.LFG(v.Lbi),v.LFG(v.R0b),v.LFG(Xt.HU),v.LFG(ar,8),v.LFG(ur,8),v.LFG($i,8),v.LFG(re.nm,8))},l.\u0275prov=v.Yz7({token:l,factory:l.\u0275fac,providedIn:"any"}),l})(),lu=(()=>{class l{}return l.\u0275fac=function(u){return new(u||l)},l.\u0275mod=v.oAB({type:l}),l.\u0275inj=v.cJS({}),l})(),ln=(()=>{class l{constructor(){ge.Z.registerVersion("angularfire",Xt.q4.full,"gcs-compat")}}return l.\u0275fac=function(u){return new(u||l)},l.\u0275mod=v.oAB({type:l}),l.\u0275inj=v.cJS({providers:[Yo],imports:[lu]}),l})();var yo=V(7407),da=V(6451),Or=V(3099),yn=V(5026),ha=V(1884),nr=V(8421),Rd=V(4671),kn=V(5032),kt=V(7669);V(9916);var Su=V(1877);const _l="@firebase/database";let cu="";function Hs(l){cu=l}class Ti{constructor(o){this.domStorage_=o,this.prefix_="firebase:"}set(o,u){null==u?this.domStorage_.removeItem(this.prefixedName_(o)):this.domStorage_.setItem(this.prefixedName_(o),(0,te.Pz)(u))}get(o){const u=this.domStorage_.getItem(this.prefixedName_(o));return null==u?null:(0,te.cI)(u)}remove(o){this.domStorage_.removeItem(this.prefixedName_(o))}prefixedName_(o){return this.prefix_+o}toString(){return this.domStorage_.toString()}}class zu{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(o,u){null==u?delete this.cache_[o]:this.cache_[o]=u}get(o){return(0,te.r3)(this.cache_,o)?this.cache_[o]:null}remove(o){delete this.cache_[o]}}const Ku=function(l){try{if("undefined"!=typeof window&&void 0!==window[l]){const o=window[l];return o.setItem("firebase:sentinel","cache"),o.removeItem("firebase:sentinel"),new Ti(o)}}catch(o){}return new zu},$s=Ku("localStorage"),vl=Ku("sessionStorage"),Ue=new Su.Yd("@firebase/database"),gs=function(){let l=1;return function(){return l++}}(),Zs=function(l){const o=(0,te.dS)(l),u=new te.gQ;u.update(o);const h=u.digest();return te.US.encodeByteArray(h)},fa=function(...l){let o="";for(let u=0;u<l.length;u++){const h=l[u];Array.isArray(h)||h&&"object"==typeof h&&"number"==typeof h.length?o+=fa.apply(null,h):o+="object"==typeof h?(0,te.Pz)(h):h,o+=" "}return o};let Zi=null,Ts=!0;const pa=function(l,o){(0,te.hu)(!o||!0===l||!1===l,"Can't turn on custom loggers persistently."),!0===l?(Ue.logLevel=Su.in.VERBOSE,Zi=Ue.log.bind(Ue),o&&vl.set("logging_enabled",!0)):"function"==typeof l?Zi=l:(Zi=null,vl.remove("logging_enabled"))},Rr=function(...l){if(!0===Ts&&(Ts=!1,null===Zi&&!0===vl.get("logging_enabled")&&pa(!0)),Zi){const o=fa.apply(null,l);Zi(o)}},Au=function(l){return function(...o){Rr(l,...o)}},Yu=function(...l){const o="FIREBASE INTERNAL ERROR: "+fa(...l);Ue.error(o)},ga=function(...l){const o=`FIREBASE FATAL ERROR: ${fa(...l)}`;throw Ue.error(o),new Error(o)},Sr=function(...l){const o="FIREBASE WARNING: "+fa(...l);Ue.warn(o)},ma=function(l){return"number"==typeof l&&(l!=l||l===Number.POSITIVE_INFINITY||l===Number.NEGATIVE_INFINITY)},ss="[MIN_NAME]",fr="[MAX_NAME]",So=function(l,o){if(l===o)return 0;if(l===ss||o===fr)return-1;if(o===ss||l===fr)return 1;{const u=K(l),h=K(o);return null!==u?null!==h?u-h==0?l.length-o.length:u-h:-1:null!==h?1:l<o?-1:1}},ms=function(l,o){return l===o?0:l<o?-1:1},Ln=function(l,o){if(o&&l in o)return o[l];throw new Error("Missing required key ("+l+") in object: "+(0,te.Pz)(o))},Ju=function(l){if("object"!=typeof l||null===l)return(0,te.Pz)(l);const o=[];for(const h in l)o.push(h);o.sort();let u="{";for(let h=0;h<o.length;h++)0!==h&&(u+=","),u+=(0,te.Pz)(o[h]),u+=":",u+=Ju(l[o[h]]);return u+="}",u},to=function(l,o){const u=l.length;if(u<=o)return[l];const h=[];for(let _=0;_<u;_+=o)h.push(l.substring(_,_+o>u?u:_+o));return h};function Jn(l,o){for(const u in l)l.hasOwnProperty(u)&&o(u,l[u])}const Wl=function(l){(0,te.hu)(!ma(l),"Invalid JSON number");const h=1023;let _,b,M,$,z;0===l?(b=0,M=0,_=1/l==-1/0?1:0):(_=l<0,(l=Math.abs(l))>=Math.pow(2,1-h)?($=Math.min(Math.floor(Math.log(l)/Math.LN2),h),b=$+h,M=Math.round(l*Math.pow(2,52-$)-Math.pow(2,52))):(b=0,M=Math.round(l/Math.pow(2,-1074))));const ne=[];for(z=52;z;z-=1)ne.push(M%2?1:0),M=Math.floor(M/2);for(z=11;z;z-=1)ne.push(b%2?1:0),b=Math.floor(b/2);ne.push(_?1:0),ne.reverse();const Ne=ne.join("");let Fe="";for(z=0;z<64;z+=8){let Ye=parseInt(Ne.substr(z,8),2).toString(16);1===Ye.length&&(Ye="0"+Ye),Fe+=Ye}return Fe.toLowerCase()},Br=new RegExp("^-?(0*)\\d{1,10}$"),k=-2147483648,U=2147483647,K=function(l){if(Br.test(l)){const o=Number(l);if(o>=k&&o<=U)return o}return null},oe=function(l){try{l()}catch(o){setTimeout(()=>{throw Sr("Exception was thrown by user callback.",o.stack||""),o},Math.floor(0))}},Le=function(l,o){const u=setTimeout(l,o);return"object"==typeof u&&u.unref&&u.unref(),u};class pt{constructor(o,u){this.appName_=o,this.appCheckProvider=u,this.appCheck=null==u?void 0:u.getImmediate({optional:!0}),this.appCheck||null==u||u.get().then(h=>this.appCheck=h)}getToken(o){return this.appCheck?this.appCheck.getToken(o):new Promise((u,h)=>{setTimeout(()=>{this.appCheck?this.getToken(o).then(u,h):u(null)},0)})}addTokenChangeListener(o){var u;null===(u=this.appCheckProvider)||void 0===u||u.get().then(h=>h.addTokenListener(o))}notifyForInvalidToken(){Sr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Bt{constructor(o,u,h){this.appName_=o,this.firebaseOptions_=u,this.authProvider_=h,this.auth_=null,this.auth_=h.getImmediate({optional:!0}),this.auth_||h.onInit(_=>this.auth_=_)}getToken(o){return this.auth_?this.auth_.getToken(o).catch(u=>u&&"auth/token-not-initialized"===u.code?(Rr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(u)):new Promise((u,h)=>{setTimeout(()=>{this.auth_?this.getToken(o).then(u,h):u(null)},0)})}addTokenChangeListener(o){this.auth_?this.auth_.addAuthTokenListener(o):this.authProvider_.get().then(u=>u.addAuthTokenListener(o))}removeTokenChangeListener(o){this.authProvider_.get().then(u=>u.removeAuthTokenListener(o))}notifyForInvalidToken(){let o='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';o+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Sr(o)}}let Zt=(()=>{class l{constructor(u){this.accessToken=u}getToken(u){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(u){u(this.accessToken)}removeTokenChangeListener(u){}notifyForInvalidToken(){}}return l.OWNER="owner",l})();const no=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,_o="websocket",xo="long_polling";class ro{constructor(o,u,h,_,b=!1,M="",$=!1){this.secure=u,this.namespace=h,this.webSocketOnly=_,this.nodeAdmin=b,this.persistenceKey=M,this.includeNamespaceInQueryParams=$,this._host=o.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=$s.get("host:"+o)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(o){o!==this.internalHost&&(this.internalHost=o,this.isCacheableHost()&&$s.set("host:"+this._host,this.internalHost))}toString(){let o=this.toURLString();return this.persistenceKey&&(o+="<"+this.persistenceKey+">"),o}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Ru(l,o,u){let h;if((0,te.hu)("string"==typeof o,"typeof type must == string"),(0,te.hu)("object"==typeof u,"typeof params must == object"),o===_o)h=(l.secure?"wss://":"ws://")+l.internalHost+"/.ws?";else{if(o!==xo)throw new Error("Unknown connection type: "+o);h=(l.secure?"https://":"http://")+l.internalHost+"/.lp?"}(function Ga(l){return l.host!==l.internalHost||l.isCustomHost()||l.includeNamespaceInQueryParams})(l)&&(u.ns=l.namespace);const _=[];return Jn(u,(b,M)=>{_.push(b+"="+M)}),h+_.join("&")}class wl{constructor(){this.counters_={}}incrementCounter(o,u=1){(0,te.r3)(this.counters_,o)||(this.counters_[o]=0),this.counters_[o]+=u}get(){return(0,te.p$)(this.counters_)}}const Mu={},zl={};function bh(l){const o=l.toString();return Mu[o]||(Mu[o]=new wl),Mu[o]}class Yl{constructor(o){this.onMessage_=o,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(o,u){this.closeAfterResponse=o,this.onClose=u,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(o,u){for(this.pendingResponses[o]=u;this.pendingResponses[this.currentResponseNum];){const h=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let _=0;_<h.length;++_)h[_]&&oe(()=>{this.onMessage_(h[_])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class du{constructor(o,u,h,_,b,M,$){this.connId=o,this.repoInfo=u,this.applicationId=h,this.appCheckToken=_,this.authToken=b,this.transportSessionId=M,this.lastSessionId=$,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Au(o),this.stats_=bh(u),this.urlFn=z=>(this.appCheckToken&&(z.ac=this.appCheckToken),Ru(u,xo,z))}open(o,u){this.curSegmentNum=0,this.onDisconnect_=u,this.myPacketOrderer=new Yl(o),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(l){if((0,te.Yr)()||"complete"===document.readyState)l();else{let o=!1;const u=function(){document.body?o||(o=!0,l()):setTimeout(u,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",u,!1),window.addEventListener("load",u,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&u()}),window.attachEvent("onload",u))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Od((...b)=>{const[M,$,z,ne,Ne]=b;if(this.incrementIncomingBytes_(b),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===M)this.id=$,this.password=z;else{if("close"!==M)throw new Error("Unrecognized command received: "+M);$?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter($,()=>{this.onClosed_()})):this.onClosed_()}},(...b)=>{const[M,$]=b;this.incrementIncomingBytes_(b),this.myPacketOrderer.handleResponse(M,$)},()=>{this.onClosed_()},this.urlFn);const h={start:"t"};h.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(h.cb=this.scriptTagHolder.uniqueCallbackIdentifier),h.v="5",this.transportSessionId&&(h.s=this.transportSessionId),this.lastSessionId&&(h.ls=this.lastSessionId),this.applicationId&&(h.p=this.applicationId),this.appCheckToken&&(h.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&no.test(location.hostname)&&(h.r="f");const _=this.urlFn(h);this.log_("Connecting via long-poll to "+_),this.scriptTagHolder.addTag(_,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){du.forceAllow_=!0}static forceDisallow(){du.forceDisallow_=!0}static isAvailable(){return!((0,te.Yr)()||!du.forceAllow_&&(du.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(o){const u=(0,te.Pz)(o);this.bytesSent+=u.length,this.stats_.incrementCounter("bytes_sent",u.length);const h=(0,te.h$)(u),_=to(h,1840);for(let b=0;b<_.length;b++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,_.length,_[b]),this.curSegmentNum++}addDisconnectPingFrame(o,u){if((0,te.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const h={dframe:"t"};h.id=o,h.pw=u,this.myDisconnFrame.src=this.urlFn(h),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(o){const u=(0,te.Pz)(o).length;this.bytesReceived+=u,this.stats_.incrementCounter("bytes_received",u)}}class Od{constructor(o,u,h,_){if(this.onDisconnect=h,this.urlFn=_,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,te.Yr)())this.commandCB=o,this.onMessageCB=u;else{this.uniqueCallbackIdentifier=gs(),window["pLPCommand"+this.uniqueCallbackIdentifier]=o,window["pRTLPCB"+this.uniqueCallbackIdentifier]=u,this.myIFrame=Od.createIFrame_();let b="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(b='<script>document.domain="'+document.domain+'";<\/script>');const M="<html><body>"+b+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(M),this.myIFrame.doc.close()}catch($){Rr("frame writing exception"),$.stack&&Rr($.stack),Rr($)}}}static createIFrame_(){const o=document.createElement("iframe");if(o.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(o);try{o.contentWindow.document||Rr("No IE domain setting required")}catch(u){const h=document.domain;o.src="javascript:void((function(){document.open();document.domain='"+h+"';document.close();})())"}return o.contentDocument?o.doc=o.contentDocument:o.contentWindow?o.doc=o.contentWindow.document:o.document&&(o.doc=o.document),o}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const o=this.onDisconnect;o&&(this.onDisconnect=null,o())}startLongPoll(o,u){for(this.myID=o,this.myPW=u,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const o={};o.id=this.myID,o.pw=this.myPW,o.ser=this.currentSerial;let u=this.urlFn(o),h="",_=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+h.length<=1870;){const M=this.pendingSegs.shift();h=h+"&seg"+_+"="+M.seg+"&ts"+_+"="+M.ts+"&d"+_+"="+M.d,_++}return u+=h,this.addLongPollTag_(u,this.currentSerial),!0}return!1}enqueueSegment(o,u,h){this.pendingSegs.push({seg:o,ts:u,d:h}),this.alive&&this.newRequest_()}addLongPollTag_(o,u){this.outstandingRequests.add(u);const h=()=>{this.outstandingRequests.delete(u),this.newRequest_()},_=setTimeout(h,Math.floor(25e3));this.addTag(o,()=>{clearTimeout(_),h()})}addTag(o,u){(0,te.Yr)()?this.doNodeLongPoll(o,u):setTimeout(()=>{try{if(!this.sendNewPolls)return;const h=this.myIFrame.doc.createElement("script");h.type="text/javascript",h.async=!0,h.src=o,h.onload=h.onreadystatechange=function(){const _=h.readyState;(!_||"loaded"===_||"complete"===_)&&(h.onload=h.onreadystatechange=null,h.parentNode&&h.parentNode.removeChild(h),u())},h.onerror=()=>{Rr("Long-poll script failed to load: "+o),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(h)}catch(h){}},Math.floor(1))}}let kd=null;"undefined"!=typeof MozWebSocket?kd=MozWebSocket:"undefined"!=typeof WebSocket&&(kd=WebSocket);let Qo=(()=>{class l{constructor(u,h,_,b,M,$,z){this.connId=u,this.applicationId=_,this.appCheckToken=b,this.authToken=M,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Au(this.connId),this.stats_=bh(h),this.connURL=l.connectionURL_(h,$,z,b,_),this.nodeAdmin=h.nodeAdmin}static connectionURL_(u,h,_,b,M){const $={v:"5"};return!(0,te.Yr)()&&"undefined"!=typeof location&&location.hostname&&no.test(location.hostname)&&($.r="f"),h&&($.s=h),_&&($.ls=_),b&&($.ac=b),M&&($.p=M),Ru(u,_o,$)}open(u,h){this.onDisconnect=h,this.onMessage=u,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,$s.set("previous_websocket_failure",!0);try{let _;if((0,te.Yr)()){const M={headers:{"User-Agent":`Firebase/5/${cu}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(M.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(M.headers["X-Firebase-AppCheck"]=this.appCheckToken);const $=process.env,z=0===this.connURL.indexOf("wss://")?$.HTTPS_PROXY||$.https_proxy:$.HTTP_PROXY||$.http_proxy;z&&(M.proxy={origin:z})}this.mySock=new kd(this.connURL,[],_)}catch(_){this.log_("Error instantiating WebSocket.");const b=_.message||_.data;return b&&this.log_(b),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=_=>{this.handleIncomingFrame(_)},this.mySock.onerror=_=>{this.log_("WebSocket error.  Closing connection.");const b=_.message||_.data;b&&this.log_(b),this.onClosed_()}}start(){}static forceDisallow(){l.forceDisallow_=!0}static isAvailable(){let u=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const _=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);_&&_.length>1&&parseFloat(_[1])<4.4&&(u=!0)}return!u&&null!==kd&&!l.forceDisallow_}static previouslyFailed(){return $s.isInMemoryStorage||!0===$s.get("previous_websocket_failure")}markConnectionHealthy(){$s.remove("previous_websocket_failure")}appendFrame_(u){if(this.frames.push(u),this.frames.length===this.totalFrames){const h=this.frames.join("");this.frames=null;const _=(0,te.cI)(h);this.onMessage(_)}}handleNewFrameCount_(u){this.totalFrames=u,this.frames=[]}extractFrameCount_(u){if((0,te.hu)(null===this.frames,"We already have a frame buffer"),u.length<=6){const h=Number(u);if(!isNaN(h))return this.handleNewFrameCount_(h),null}return this.handleNewFrameCount_(1),u}handleIncomingFrame(u){if(null===this.mySock)return;const h=u.data;if(this.bytesReceived+=h.length,this.stats_.incrementCounter("bytes_received",h.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(h);else{const _=this.extractFrameCount_(h);null!==_&&this.appendFrame_(_)}}send(u){this.resetKeepAlive();const h=(0,te.Pz)(u);this.bytesSent+=h.length,this.stats_.incrementCounter("bytes_sent",h.length);const _=to(h,16384);_.length>1&&this.sendString_(String(_.length));for(let b=0;b<_.length;b++)this.sendString_(_[b])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(u){try{this.mySock.send(u)}catch(h){this.log_("Exception thrown from WebSocket.send():",h.message||h.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return l.responsesRequiredToBeHealthy=2,l.healthyTimeout=3e4,l})(),El=(()=>{class l{constructor(u){this.initTransports_(u)}static get ALL_TRANSPORTS(){return[du,Qo]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(u){const h=Qo&&Qo.isAvailable();let _=h&&!Qo.previouslyFailed();if(u.webSocketOnly&&(h||Sr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),_=!0),_)this.transports_=[Qo];else{const b=this.transports_=[];for(const M of l.ALL_TRANSPORTS)M&&M.isAvailable()&&b.push(M);l.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return l.globalTransportInitialized_=!1,l})();class $p{constructor(o,u,h,_,b,M,$,z,ne,Ne){this.id=o,this.repoInfo_=u,this.applicationId_=h,this.appCheckToken_=_,this.authToken_=b,this.onMessage_=M,this.onReady_=$,this.onDisconnect_=z,this.onKill_=ne,this.lastSessionId=Ne,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Au("c:"+this.id+":"),this.transportManager_=new El(u),this.log_("Connection created"),this.start_()}start_(){const o=this.transportManager_.initialTransport();this.conn_=new o(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=o.responsesRequiredToBeHealthy||0;const u=this.connReceiver_(this.conn_),h=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(u,h)},Math.floor(0));const _=o.healthyTimeout||0;_>0&&(this.healthyTimeout_=Le(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(_)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(o){return u=>{o===this.conn_?this.onConnectionLost_(u):o===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(o){return u=>{2!==this.state_&&(o===this.rx_?this.onPrimaryMessageReceived_(u):o===this.secondaryConn_?this.onSecondaryMessageReceived_(u):this.log_("message on old connection"))}}sendRequest(o){this.sendData_({t:"d",d:o})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(o){if("t"in o){const u=o.t;"a"===u?this.upgradeIfSecondaryHealthy_():"r"===u?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===u&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(o){const u=Ln("t",o),h=Ln("d",o);if("c"===u)this.onSecondaryControl_(h);else{if("d"!==u)throw new Error("Unknown protocol layer: "+u);this.pendingDataMessages.push(h)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(o){const u=Ln("t",o),h=Ln("d",o);"c"===u?this.onControl_(h):"d"===u&&this.onDataMessage_(h)}onDataMessage_(o){this.onPrimaryResponse_(),this.onMessage_(o)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(o){const u=Ln("t",o);if("d"in o){const h=o.d;if("h"===u)this.onHandshake_(h);else if("n"===u){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let _=0;_<this.pendingDataMessages.length;++_)this.onDataMessage_(this.pendingDataMessages[_]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===u?this.onConnectionShutdown_(h):"r"===u?this.onReset_(h):"e"===u?Yu("Server Error: "+h):"o"===u?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Yu("Unknown control packet command: "+u)}}onHandshake_(o){const u=o.ts,h=o.v,_=o.h;this.sessionId=o.s,this.repoInfo_.host=_,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,u),"5"!==h&&Sr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const o=this.transportManager_.upgradeTransport();o&&this.startUpgrade_(o)}startUpgrade_(o){this.secondaryConn_=new o(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=o.responsesRequiredToBeHealthy||0;const u=this.connReceiver_(this.secondaryConn_),h=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(u,h),Le(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(o){this.log_("Reset packet received.  New host: "+o),this.repoInfo_.host=o,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(o,u){this.log_("Realtime connection established."),this.conn_=o,this.state_=1,this.onReady_&&(this.onReady_(u,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Le(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const o=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===o||this.rx_===o)&&this.close()}onConnectionLost_(o){this.conn_=null,o||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&($s.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(o){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(o),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(o){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(o)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class hu{put(o,u,h,_){}merge(o,u,h,_){}refreshAuthToken(o){}refreshAppCheckToken(o){}onDisconnectPut(o,u,h){}onDisconnectMerge(o,u,h){}onDisconnectCancel(o,u){}reportStats(o){}}class bl{constructor(o){this.allowedEvents_=o,this.listeners_={},(0,te.hu)(Array.isArray(o)&&o.length>0,"Requires a non-empty array")}trigger(o,...u){if(Array.isArray(this.listeners_[o])){const h=[...this.listeners_[o]];for(let _=0;_<h.length;_++)h[_].callback.apply(h[_].context,u)}}on(o,u,h){this.validateEventType_(o),this.listeners_[o]=this.listeners_[o]||[],this.listeners_[o].push({callback:u,context:h});const _=this.getInitialEvent(o);_&&u.apply(h,_)}off(o,u,h){this.validateEventType_(o);const _=this.listeners_[o]||[];for(let b=0;b<_.length;b++)if(_[b].callback===u&&(!h||h===_[b].context))return void _.splice(b,1)}validateEventType_(o){(0,te.hu)(this.allowedEvents_.find(u=>u===o),"Unknown event: "+o)}}class nc extends bl{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,te.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new nc}getInitialEvent(o){return(0,te.hu)("online"===o,"Unknown event type: "+o),[this.online_]}currentlyOnline(){return this.online_}}class pr{constructor(o,u){if(void 0===u){this.pieces_=o.split("/");let h=0;for(let _=0;_<this.pieces_.length;_++)this.pieces_[_].length>0&&(this.pieces_[h]=this.pieces_[_],h++);this.pieces_.length=h,this.pieceNum_=0}else this.pieces_=o,this.pieceNum_=u}toString(){let o="";for(let u=this.pieceNum_;u<this.pieces_.length;u++)""!==this.pieces_[u]&&(o+="/"+this.pieces_[u]);return o||"/"}}function gr(){return new pr("")}function Hn(l){return l.pieceNum_>=l.pieces_.length?null:l.pieces_[l.pieceNum_]}function va(l){return l.pieces_.length-l.pieceNum_}function ri(l){let o=l.pieceNum_;return o<l.pieces_.length&&o++,new pr(l.pieces_,o)}function xf(l){return l.pieceNum_<l.pieces_.length?l.pieces_[l.pieces_.length-1]:null}function wa(l,o=0){return l.pieces_.slice(l.pieceNum_+o)}function fu(l){if(l.pieceNum_>=l.pieces_.length)return null;const o=[];for(let u=l.pieceNum_;u<l.pieces_.length-1;u++)o.push(l.pieces_[u]);return new pr(o,0)}function ci(l,o){const u=[];for(let h=l.pieceNum_;h<l.pieces_.length;h++)u.push(l.pieces_[h]);if(o instanceof pr)for(let h=o.pieceNum_;h<o.pieces_.length;h++)u.push(o.pieces_[h]);else{const h=o.split("/");for(let _=0;_<h.length;_++)h[_].length>0&&u.push(h[_])}return new pr(u,0)}function Rn(l){return l.pieceNum_>=l.pieces_.length}function qs(l,o){const u=Hn(l),h=Hn(o);if(null===u)return o;if(u===h)return qs(ri(l),ri(o));throw new Error("INTERNAL ERROR: innerPath ("+o+") is not within outerPath ("+l+")")}function Cl(l,o){const u=wa(l,0),h=wa(o,0);for(let _=0;_<u.length&&_<h.length;_++){const b=So(u[_],h[_]);if(0!==b)return b}return u.length===h.length?0:u.length<h.length?-1:1}function sc(l,o){if(va(l)!==va(o))return!1;for(let u=l.pieceNum_,h=o.pieceNum_;u<=l.pieces_.length;u++,h++)if(l.pieces_[u]!==o.pieces_[h])return!1;return!0}function Xo(l,o){let u=l.pieceNum_,h=o.pieceNum_;if(va(l)>va(o))return!1;for(;u<l.pieces_.length;){if(l.pieces_[u]!==o.pieces_[h])return!1;++u,++h}return!0}class Hc{constructor(o,u){this.errorPrefix_=u,this.parts_=wa(o,0),this.byteLength_=Math.max(1,this.parts_.length);for(let h=0;h<this.parts_.length;h++)this.byteLength_+=(0,te.ug)(this.parts_[h]);di(this)}}function di(l){if(l.byteLength_>768)throw new Error(l.errorPrefix_+"has a key path longer than 768 bytes ("+l.byteLength_+").");if(l.parts_.length>32)throw new Error(l.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ea(l))}function Ea(l){return 0===l.parts_.length?"":"in property '"+l.parts_.join(".")+"'"}class Nu extends bl{constructor(){let o,u;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(u="visibilitychange",o="hidden"):void 0!==document.mozHidden?(u="mozvisibilitychange",o="mozHidden"):void 0!==document.msHidden?(u="msvisibilitychange",o="msHidden"):void 0!==document.webkitHidden&&(u="webkitvisibilitychange",o="webkitHidden")),this.visible_=!0,u&&document.addEventListener(u,()=>{const h=!document[o];h!==this.visible_&&(this.visible_=h,this.trigger("visible",h))},!1)}static getInstance(){return new Nu}getInitialEvent(o){return(0,te.hu)("visible"===o,"Unknown event type: "+o),[this.visible_]}}const oi=1e3;let Gc,Ia=(()=>{class l extends hu{constructor(u,h,_,b,M,$,z,ne){if(super(),this.repoInfo_=u,this.applicationId_=h,this.onDataUpdate_=_,this.onConnectStatus_=b,this.onServerInfoUpdate_=M,this.authTokenProvider_=$,this.appCheckTokenProvider_=z,this.authOverride_=ne,this.id=l.nextPersistentConnectionId_++,this.log_=Au("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=oi,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,ne&&!(0,te.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Nu.getInstance().on("visible",this.onVisible_,this),-1===u.host.indexOf("fblocal")&&nc.getInstance().on("online",this.onOnline_,this)}sendRequest(u,h,_){const b=++this.requestNumber_,M={r:b,a:u,b:h};this.log_((0,te.Pz)(M)),(0,te.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(M),_&&(this.requestCBHash_[b]=_)}get(u){this.initConnection_();const h=new te.BH,_={p:u._path.toString(),q:u._queryObject},b={action:"g",request:_,onComplete:$=>{const z=$.d;"ok"===$.s?(this.onDataUpdate_(_.p,z,!1,null),h.resolve(z)):h.reject(z)}};this.outstandingGets_.push(b),this.outstandingGetCount_++;const M=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const $=this.outstandingGets_[M];void 0===$||b!==$||(delete this.outstandingGets_[M],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+M+" timed out on connection"),h.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(M),h.promise}listen(u,h,_,b){this.initConnection_();const M=u._queryIdentifier,$=u._path.toString();this.log_("Listen called for "+$+" "+M),this.listens.has($)||this.listens.set($,new Map),(0,te.hu)(u._queryParams.isDefault()||!u._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,te.hu)(!this.listens.get($).has(M),"listen() called twice for same path/queryId.");const z={onComplete:b,hashFn:h,query:u,tag:_};this.listens.get($).set(M,z),this.connected_&&this.sendListen_(z)}sendGet_(u){const h=this.outstandingGets_[u];this.sendRequest("g",h.request,_=>{delete this.outstandingGets_[u],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),h.onComplete&&h.onComplete(_)})}sendListen_(u){const h=u.query,_=h._path.toString(),b=h._queryIdentifier;this.log_("Listen on "+_+" for "+b);const M={p:_};u.tag&&(M.q=h._queryObject,M.t=u.tag),M.h=u.hashFn(),this.sendRequest("q",M,z=>{const ne=z.d,Ne=z.s;l.warnOnListenWarnings_(ne,h),(this.listens.get(_)&&this.listens.get(_).get(b))===u&&(this.log_("listen response",z),"ok"!==Ne&&this.removeListen_(_,b),u.onComplete&&u.onComplete(Ne,ne))})}static warnOnListenWarnings_(u,h){if(u&&"object"==typeof u&&(0,te.r3)(u,"w")){const _=(0,te.DV)(u,"w");if(Array.isArray(_)&&~_.indexOf("no_index")){const b='".indexOn": "'+h._queryParams.getIndex().toString()+'"',M=h._path.toString();Sr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${b} at ${M} to your security rules for better performance.`)}}}refreshAuthToken(u){this.authToken_=u,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(u)}reduceReconnectDelayIfAdminCredential_(u){(u&&40===u.length||(0,te.GJ)(u))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(u){this.appCheckToken_=u,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const u=this.authToken_,h=(0,te.w9)(u)?"auth":"gauth",_={cred:u};null===this.authOverride_?_.noauth=!0:"object"==typeof this.authOverride_&&(_.authvar=this.authOverride_),this.sendRequest(h,_,b=>{const M=b.s,$=b.d||"error";this.authToken_===u&&("ok"===M?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(M,$))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},u=>{const h=u.s,_=u.d||"error";"ok"===h?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(h,_)})}unlisten(u,h){const _=u._path.toString(),b=u._queryIdentifier;this.log_("Unlisten called for "+_+" "+b),(0,te.hu)(u._queryParams.isDefault()||!u._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(_,b)&&this.connected_&&this.sendUnlisten_(_,b,u._queryObject,h)}sendUnlisten_(u,h,_,b){this.log_("Unlisten on "+u+" for "+h);const M={p:u};b&&(M.q=_,M.t=b),this.sendRequest("n",M)}onDisconnectPut(u,h,_){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",u,h,_):this.onDisconnectRequestQueue_.push({pathString:u,action:"o",data:h,onComplete:_})}onDisconnectMerge(u,h,_){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",u,h,_):this.onDisconnectRequestQueue_.push({pathString:u,action:"om",data:h,onComplete:_})}onDisconnectCancel(u,h){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",u,null,h):this.onDisconnectRequestQueue_.push({pathString:u,action:"oc",data:null,onComplete:h})}sendOnDisconnect_(u,h,_,b){const M={p:h,d:_};this.log_("onDisconnect "+u,M),this.sendRequest(u,M,$=>{b&&setTimeout(()=>{b($.s,$.d)},Math.floor(0))})}put(u,h,_,b){this.putInternal("p",u,h,_,b)}merge(u,h,_,b){this.putInternal("m",u,h,_,b)}putInternal(u,h,_,b,M){this.initConnection_();const $={p:h,d:_};void 0!==M&&($.h=M),this.outstandingPuts_.push({action:u,request:$,onComplete:b}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+h)}sendPut_(u){const h=this.outstandingPuts_[u].action,_=this.outstandingPuts_[u].request,b=this.outstandingPuts_[u].onComplete;this.outstandingPuts_[u].queued=this.connected_,this.sendRequest(h,_,M=>{this.log_(h+" response",M),delete this.outstandingPuts_[u],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),b&&b(M.s,M.d)})}reportStats(u){if(this.connected_){const h={c:u};this.log_("reportStats",h),this.sendRequest("s",h,_=>{"ok"!==_.s&&this.log_("reportStats","Error sending stats: "+_.d)})}}onDataMessage_(u){if("r"in u){this.log_("from server: "+(0,te.Pz)(u));const h=u.r,_=this.requestCBHash_[h];_&&(delete this.requestCBHash_[h],_(u.b))}else{if("error"in u)throw"A server-side error has occurred: "+u.error;"a"in u&&this.onDataPush_(u.a,u.b)}}onDataPush_(u,h){this.log_("handleServerMessage",u,h),"d"===u?this.onDataUpdate_(h.p,h.d,!1,h.t):"m"===u?this.onDataUpdate_(h.p,h.d,!0,h.t):"c"===u?this.onListenRevoked_(h.p,h.q):"ac"===u?this.onAuthRevoked_(h.s,h.d):"apc"===u?this.onAppCheckRevoked_(h.s,h.d):"sd"===u?this.onSecurityDebugPacket_(h):Yu("Unrecognized action received from server: "+(0,te.Pz)(u)+"\nAre you using the latest client?")}onReady_(u,h){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(u),this.lastSessionId=h,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(u){(0,te.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(u))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(u){u&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=oi,this.realtime_||this.scheduleConnect_(0)),this.visible_=u}onOnline_(u){u?(this.log_("Browser went online."),this.reconnectDelay_=oi,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=oi),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const u=(new Date).getTime()-this.lastConnectionAttemptTime_;let h=Math.max(0,this.reconnectDelay_-u);h=Math.random()*h,this.log_("Trying to reconnect in "+h+"ms"),this.scheduleConnect_(h),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var u=this;return(0,Xi.Z)(function*(){if(u.shouldReconnect_()){u.log_("Making a connection attempt"),u.lastConnectionAttemptTime_=(new Date).getTime(),u.lastConnectionEstablishedTime_=null;const h=u.onDataMessage_.bind(u),_=u.onReady_.bind(u),b=u.onRealtimeDisconnect_.bind(u),M=u.id+":"+l.nextConnectionId_++,$=u.lastSessionId;let z=!1,ne=null;const Ne=function(){ne?ne.close():(z=!0,b())};u.realtime_={close:Ne,sendRequest:function(Mt){(0,te.hu)(ne,"sendRequest call when we're not connected not allowed."),ne.sendRequest(Mt)}};const Ye=u.forceTokenRefresh_;u.forceTokenRefresh_=!1;try{const[Mt,Vt]=yield Promise.all([u.authTokenProvider_.getToken(Ye),u.appCheckTokenProvider_.getToken(Ye)]);z?Rr("getToken() completed but was canceled"):(Rr("getToken() completed. Creating connection."),u.authToken_=Mt&&Mt.accessToken,u.appCheckToken_=Vt&&Vt.token,ne=new $p(M,u.repoInfo_,u.applicationId_,u.appCheckToken_,u.authToken_,h,_,b,Cn=>{Sr(Cn+" ("+u.repoInfo_.toString()+")"),u.interrupt("server_kill")},$))}catch(Mt){u.log_("Failed to get token: "+Mt),z||(u.repoInfo_.nodeAdmin&&Sr(Mt),Ne())}}})()}interrupt(u){Rr("Interrupting connection for reason: "+u),this.interruptReasons_[u]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(u){Rr("Resuming connection for reason: "+u),delete this.interruptReasons_[u],(0,te.xb)(this.interruptReasons_)&&(this.reconnectDelay_=oi,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(u){const h=u-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:h})}cancelSentTransactions_(){for(let u=0;u<this.outstandingPuts_.length;u++){const h=this.outstandingPuts_[u];h&&"h"in h.request&&h.queued&&(h.onComplete&&h.onComplete("disconnect"),delete this.outstandingPuts_[u],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(u,h){let _;_=h?h.map(M=>Ju(M)).join("$"):"default";const b=this.removeListen_(u,_);b&&b.onComplete&&b.onComplete("permission_denied")}removeListen_(u,h){const _=new pr(u).toString();let b;if(this.listens.has(_)){const M=this.listens.get(_);b=M.get(h),M.delete(h),0===M.size&&this.listens.delete(_)}else b=void 0;return b}onAuthRevoked_(u,h){Rr("Auth token revoked: "+u+"/"+h),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===u||"permission_denied"===u)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(u,h){Rr("App check token revoked: "+u+"/"+h),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===u||"permission_denied"===u)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(u){this.securityDebugCallback_?this.securityDebugCallback_(u):"msg"in u&&console.log("FIREBASE: "+u.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const u of this.listens.values())for(const h of u.values())this.sendListen_(h);for(let u=0;u<this.outstandingPuts_.length;u++)this.outstandingPuts_[u]&&this.sendPut_(u);for(;this.onDisconnectRequestQueue_.length;){const u=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(u.action,u.pathString,u.data,u.onComplete)}for(let u=0;u<this.outstandingGets_.length;u++)this.outstandingGets_[u]&&this.sendGet_(u)}sendConnectStats_(){const u={};let h="js";(0,te.Yr)()&&(h=this.repoInfo_.nodeAdmin?"admin_node":"node"),u["sdk."+h+"."+cu.replace(/\./g,"-")]=1,(0,te.uI)()?u["framework.cordova"]=1:(0,te.b$)()&&(u["framework.reactnative"]=1),this.reportStats(u)}shouldReconnect_(){const u=nc.getInstance().currentlyOnline();return(0,te.xb)(this.interruptReasons_)&&u}}return l.nextPersistentConnectionId_=0,l.nextConnectionId_=0,l})();class Gn{constructor(o,u){this.name=o,this.node=u}static Wrap(o,u){return new Gn(o,u)}}class ku{getCompare(){return this.compare.bind(this)}indexedValueChanged(o,u){const h=new Gn(ss,o),_=new Gn(ss,u);return 0!==this.compare(h,_)}minPost(){return Gn.MIN}}class uc extends ku{static get __EMPTY_NODE(){return Gc}static set __EMPTY_NODE(o){Gc=o}compare(o,u){return So(o.name,u.name)}isDefinedOn(o){throw(0,te.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(o,u){return!1}minPost(){return Gn.MIN}maxPost(){return new Gn(fr,Gc)}makePost(o,u){return(0,te.hu)("string"==typeof o,"KeyIndex indexValue must always be a string."),new Gn(o,Gc)}toString(){return".key"}}const Fn=new uc;class qn{constructor(o,u,h,_,b=null){this.isReverse_=_,this.resultGenerator_=b,this.nodeStack_=[];let M=1;for(;!o.isEmpty();)if(o=o,M=u?h(o.key,u):1,_&&(M*=-1),M<0)o=this.isReverse_?o.left:o.right;else{if(0===M){this.nodeStack_.push(o);break}this.nodeStack_.push(o),o=this.isReverse_?o.right:o.left}}getNext(){if(0===this.nodeStack_.length)return null;let u,o=this.nodeStack_.pop();if(u=this.resultGenerator_?this.resultGenerator_(o.key,o.value):{key:o.key,value:o.value},this.isReverse_)for(o=o.left;!o.isEmpty();)this.nodeStack_.push(o),o=o.right;else for(o=o.right;!o.isEmpty();)this.nodeStack_.push(o),o=o.left;return u}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const o=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(o.key,o.value):{key:o.key,value:o.value}}}let cc,Mo=(()=>{class l{constructor(u,h,_,b,M){this.key=u,this.value=h,this.color=null!=_?_:l.RED,this.left=null!=b?b:Xn.EMPTY_NODE,this.right=null!=M?M:Xn.EMPTY_NODE}copy(u,h,_,b,M){return new l(null!=u?u:this.key,null!=h?h:this.value,null!=_?_:this.color,null!=b?b:this.left,null!=M?M:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(u){return this.left.inorderTraversal(u)||!!u(this.key,this.value)||this.right.inorderTraversal(u)}reverseTraversal(u){return this.right.reverseTraversal(u)||u(this.key,this.value)||this.left.reverseTraversal(u)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(u,h,_){let b=this;const M=_(u,b.key);return b=M<0?b.copy(null,null,null,b.left.insert(u,h,_),null):0===M?b.copy(null,h,null,null,null):b.copy(null,null,null,null,b.right.insert(u,h,_)),b.fixUp_()}removeMin_(){if(this.left.isEmpty())return Xn.EMPTY_NODE;let u=this;return!u.left.isRed_()&&!u.left.left.isRed_()&&(u=u.moveRedLeft_()),u=u.copy(null,null,null,u.left.removeMin_(),null),u.fixUp_()}remove(u,h){let _,b;if(_=this,h(u,_.key)<0)!_.left.isEmpty()&&!_.left.isRed_()&&!_.left.left.isRed_()&&(_=_.moveRedLeft_()),_=_.copy(null,null,null,_.left.remove(u,h),null);else{if(_.left.isRed_()&&(_=_.rotateRight_()),!_.right.isEmpty()&&!_.right.isRed_()&&!_.right.left.isRed_()&&(_=_.moveRedRight_()),0===h(u,_.key)){if(_.right.isEmpty())return Xn.EMPTY_NODE;b=_.right.min_(),_=_.copy(b.key,b.value,null,null,_.right.removeMin_())}_=_.copy(null,null,null,null,_.right.remove(u,h))}return _.fixUp_()}isRed_(){return this.color}fixUp_(){let u=this;return u.right.isRed_()&&!u.left.isRed_()&&(u=u.rotateLeft_()),u.left.isRed_()&&u.left.left.isRed_()&&(u=u.rotateRight_()),u.left.isRed_()&&u.right.isRed_()&&(u=u.colorFlip_()),u}moveRedLeft_(){let u=this.colorFlip_();return u.right.left.isRed_()&&(u=u.copy(null,null,null,null,u.right.rotateRight_()),u=u.rotateLeft_(),u=u.colorFlip_()),u}moveRedRight_(){let u=this.colorFlip_();return u.left.left.isRed_()&&(u=u.rotateRight_(),u=u.colorFlip_()),u}rotateLeft_(){const u=this.copy(null,null,l.RED,null,this.right.left);return this.right.copy(null,null,this.color,u,null)}rotateRight_(){const u=this.copy(null,null,l.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,u)}colorFlip_(){const u=this.left.copy(null,null,!this.left.color,null,null),h=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,u,h)}checkMaxDepth_(){const u=this.check_();return Math.pow(2,u)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const u=this.left.check_();if(u!==this.right.check_())throw new Error("Black depths differ");return u+(this.isRed_()?0:1)}}return l.RED=!0,l.BLACK=!1,l})();class Xn{constructor(o,u=Xn.EMPTY_NODE){this.comparator_=o,this.root_=u}insert(o,u){return new Xn(this.comparator_,this.root_.insert(o,u,this.comparator_).copy(null,null,Mo.BLACK,null,null))}remove(o){return new Xn(this.comparator_,this.root_.remove(o,this.comparator_).copy(null,null,Mo.BLACK,null,null))}get(o){let u,h=this.root_;for(;!h.isEmpty();){if(u=this.comparator_(o,h.key),0===u)return h.value;u<0?h=h.left:u>0&&(h=h.right)}return null}getPredecessorKey(o){let u,h=this.root_,_=null;for(;!h.isEmpty();){if(u=this.comparator_(o,h.key),0===u){if(h.left.isEmpty())return _?_.key:null;for(h=h.left;!h.right.isEmpty();)h=h.right;return h.key}u<0?h=h.left:u>0&&(_=h,h=h.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(o){return this.root_.inorderTraversal(o)}reverseTraversal(o){return this.root_.reverseTraversal(o)}getIterator(o){return new qn(this.root_,null,this.comparator_,!1,o)}getIteratorFrom(o,u){return new qn(this.root_,o,this.comparator_,!1,u)}getReverseIteratorFrom(o,u){return new qn(this.root_,o,this.comparator_,!0,u)}getReverseIterator(o){return new qn(this.root_,null,this.comparator_,!0,o)}}function lc(l,o){return So(l.name,o.name)}function Ss(l,o){return So(l,o)}Xn.EMPTY_NODE=new class qc{copy(o,u,h,_,b){return this}insert(o,u,h){return new Mo(o,u,null)}remove(o,u){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(o){return!1}reverseTraversal(o){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const so=function(l){return"number"==typeof l?"number:"+Wl(l):"string:"+l},vo=function(l){if(l.isLeafNode()){const o=l.val();(0,te.hu)("string"==typeof o||"number"==typeof o||"object"==typeof o&&(0,te.r3)(o,".sv"),"Priority must be a string or number.")}else(0,te.hu)(l===cc||l.isEmpty(),"priority of unexpected type.");(0,te.hu)(l===cc||l.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let zc,Kc,Ld,pu=(()=>{class l{constructor(u,h=l.__childrenNodeConstructor.EMPTY_NODE){this.value_=u,this.priorityNode_=h,this.lazyHash_=null,(0,te.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),vo(this.priorityNode_)}static set __childrenNodeConstructor(u){zc=u}static get __childrenNodeConstructor(){return zc}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(u){return new l(this.value_,u)}getImmediateChild(u){return".priority"===u?this.priorityNode_:l.__childrenNodeConstructor.EMPTY_NODE}getChild(u){return Rn(u)?this:".priority"===Hn(u)?this.priorityNode_:l.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(u,h){return null}updateImmediateChild(u,h){return".priority"===u?this.updatePriority(h):h.isEmpty()&&".priority"!==u?this:l.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(u,h).updatePriority(this.priorityNode_)}updateChild(u,h){const _=Hn(u);return null===_?h:h.isEmpty()&&".priority"!==_?this:((0,te.hu)(".priority"!==_||1===va(u),".priority must be the last token in a path"),this.updateImmediateChild(_,l.__childrenNodeConstructor.EMPTY_NODE.updateChild(ri(u),h)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(u,h){return!1}val(u){return u&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let u="";this.priorityNode_.isEmpty()||(u+="priority:"+so(this.priorityNode_.val())+":");const h=typeof this.value_;u+=h+":",u+="number"===h?Wl(this.value_):this.value_,this.lazyHash_=Zs(u)}return this.lazyHash_}getValue(){return this.value_}compareTo(u){return u===l.__childrenNodeConstructor.EMPTY_NODE?1:u instanceof l.__childrenNodeConstructor?-1:((0,te.hu)(u.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(u))}compareToLeafNode_(u){const h=typeof u.value_,_=typeof this.value_,b=l.VALUE_TYPE_ORDER.indexOf(h),M=l.VALUE_TYPE_ORDER.indexOf(_);return(0,te.hu)(b>=0,"Unknown leaf type: "+h),(0,te.hu)(M>=0,"Unknown leaf type: "+_),b===M?"object"===_?0:this.value_<u.value_?-1:this.value_===u.value_?0:1:M-b}withIndex(){return this}isIndexed(){return!0}equals(u){if(u===this)return!0;if(u.isLeafNode()){const h=u;return this.value_===h.value_&&this.priorityNode_.equals(h.priorityNode_)}return!1}}return l.VALUE_TYPE_ORDER=["object","boolean","number","string"],l})();const ir=new class Bd extends ku{compare(o,u){const h=o.node.getPriority(),_=u.node.getPriority(),b=h.compareTo(_);return 0===b?So(o.name,u.name):b}isDefinedOn(o){return!o.getPriority().isEmpty()}indexedValueChanged(o,u){return!o.getPriority().equals(u.getPriority())}minPost(){return Gn.MIN}maxPost(){return new Gn(fr,new pu("[PRIORITY-POST]",Ld))}makePost(o,u){const h=Kc(o);return new Gn(u,new pu("[PRIORITY-POST]",h))}toString(){return".priority"}},nl=Math.log(2);class Vd{constructor(o){this.count=parseInt(Math.log(o+1)/nl,10),this.current_=this.count-1;const _=(b=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=o+1&_}nextBitIsOne(){const o=!(this.bits_&1<<this.current_);return this.current_--,o}}const Yc=function(l,o,u,h){l.sort(o);const _=function(z,ne){const Ne=ne-z;let Fe,Ye;if(0===Ne)return null;if(1===Ne)return Fe=l[z],Ye=u?u(Fe):Fe,new Mo(Ye,Fe.node,Mo.BLACK,null,null);{const Mt=parseInt(Ne/2,10)+z,Vt=_(z,Mt),Cn=_(Mt+1,ne);return Fe=l[Mt],Ye=u?u(Fe):Fe,new Mo(Ye,Fe.node,Mo.BLACK,Vt,Cn)}},$=function(z){let ne=null,Ne=null,Fe=l.length;const Ye=function(Vt,Cn){const Wn=Fe-Vt,vs=Fe;Fe-=Vt;const Rs=_(Wn+1,vs),fi=l[Wn],zs=u?u(fi):fi;Mt(new Mo(zs,fi.node,Cn,null,Rs))},Mt=function(Vt){ne?(ne.left=Vt,ne=Vt):(Ne=Vt,ne=Vt)};for(let Vt=0;Vt<z.count;++Vt){const Cn=z.nextBitIsOne(),Wn=Math.pow(2,z.count-(Vt+1));Cn?Ye(Wn,Mo.BLACK):(Ye(Wn,Mo.BLACK),Ye(Wn,Mo.RED))}return Ne}(new Vd(l.length));return new Xn(h||o,$)};let Tl;const rl={};class Oi{constructor(o,u){this.indexes_=o,this.indexSet_=u}static get Default(){return(0,te.hu)(rl&&ir,"ChildrenNode.ts has not been loaded"),Tl=Tl||new Oi({".priority":rl},{".priority":ir}),Tl}get(o){const u=(0,te.DV)(this.indexes_,o);if(!u)throw new Error("No index defined for "+o);return u instanceof Xn?u:null}hasIndex(o){return(0,te.r3)(this.indexSet_,o.toString())}addIndex(o,u){(0,te.hu)(o!==Fn,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const h=[];let _=!1;const b=u.getIterator(Gn.Wrap);let $,M=b.getNext();for(;M;)_=_||o.isDefinedOn(M.node),h.push(M),M=b.getNext();$=_?Yc(h,o.getCompare()):rl;const z=o.toString(),ne=Object.assign({},this.indexSet_);ne[z]=o;const Ne=Object.assign({},this.indexes_);return Ne[z]=$,new Oi(Ne,ne)}addToIndexes(o,u){const h=(0,te.UI)(this.indexes_,(_,b)=>{const M=(0,te.DV)(this.indexSet_,b);if((0,te.hu)(M,"Missing index implementation for "+b),_===rl){if(M.isDefinedOn(o.node)){const $=[],z=u.getIterator(Gn.Wrap);let ne=z.getNext();for(;ne;)ne.name!==o.name&&$.push(ne),ne=z.getNext();return $.push(o),Yc($,M.getCompare())}return rl}{const $=u.get(o.name);let z=_;return $&&(z=z.remove(new Gn(o.name,$))),z.insert(o,o.node)}});return new Oi(h,this.indexSet_)}removeFromIndexes(o,u){const h=(0,te.UI)(this.indexes_,_=>{if(_===rl)return _;{const b=u.get(o.name);return b?_.remove(new Gn(o.name,b)):_}});return new Oi(h,this.indexSet_)}}let il,An=(()=>{class l{constructor(u,h,_){this.children_=u,this.priorityNode_=h,this.indexMap_=_,this.lazyHash_=null,this.priorityNode_&&vo(this.priorityNode_),this.children_.isEmpty()&&(0,te.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return il||(il=new l(new Xn(Ss),null,Oi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||il}updatePriority(u){return this.children_.isEmpty()?this:new l(this.children_,u,this.indexMap_)}getImmediateChild(u){if(".priority"===u)return this.getPriority();{const h=this.children_.get(u);return null===h?il:h}}getChild(u){const h=Hn(u);return null===h?this:this.getImmediateChild(h).getChild(ri(u))}hasChild(u){return null!==this.children_.get(u)}updateImmediateChild(u,h){if((0,te.hu)(h,"We should always be passing snapshot nodes"),".priority"===u)return this.updatePriority(h);{const _=new Gn(u,h);let b,M;h.isEmpty()?(b=this.children_.remove(u),M=this.indexMap_.removeFromIndexes(_,this.children_)):(b=this.children_.insert(u,h),M=this.indexMap_.addToIndexes(_,this.children_));const $=b.isEmpty()?il:this.priorityNode_;return new l(b,$,M)}}updateChild(u,h){const _=Hn(u);if(null===_)return h;{(0,te.hu)(".priority"!==Hn(u)||1===va(u),".priority must be the last token in a path");const b=this.getImmediateChild(_).updateChild(ri(u),h);return this.updateImmediateChild(_,b)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(u){if(this.isEmpty())return null;const h={};let _=0,b=0,M=!0;if(this.forEachChild(ir,($,z)=>{h[$]=z.val(u),_++,M&&l.INTEGER_REGEXP_.test($)?b=Math.max(b,Number($)):M=!1}),!u&&M&&b<2*_){const $=[];for(const z in h)$[z]=h[z];return $}return u&&!this.getPriority().isEmpty()&&(h[".priority"]=this.getPriority().val()),h}hash(){if(null===this.lazyHash_){let u="";this.getPriority().isEmpty()||(u+="priority:"+so(this.getPriority().val())+":"),this.forEachChild(ir,(h,_)=>{const b=_.hash();""!==b&&(u+=":"+h+":"+b)}),this.lazyHash_=""===u?"":Zs(u)}return this.lazyHash_}getPredecessorChildName(u,h,_){const b=this.resolveIndex_(_);if(b){const M=b.getPredecessorKey(new Gn(u,h));return M?M.name:null}return this.children_.getPredecessorKey(u)}getFirstChildName(u){const h=this.resolveIndex_(u);if(h){const _=h.minKey();return _&&_.name}return this.children_.minKey()}getFirstChild(u){const h=this.getFirstChildName(u);return h?new Gn(h,this.children_.get(h)):null}getLastChildName(u){const h=this.resolveIndex_(u);if(h){const _=h.maxKey();return _&&_.name}return this.children_.maxKey()}getLastChild(u){const h=this.getLastChildName(u);return h?new Gn(h,this.children_.get(h)):null}forEachChild(u,h){const _=this.resolveIndex_(u);return _?_.inorderTraversal(b=>h(b.name,b.node)):this.children_.inorderTraversal(h)}getIterator(u){return this.getIteratorFrom(u.minPost(),u)}getIteratorFrom(u,h){const _=this.resolveIndex_(h);if(_)return _.getIteratorFrom(u,b=>b);{const b=this.children_.getIteratorFrom(u.name,Gn.Wrap);let M=b.peek();for(;null!=M&&h.compare(M,u)<0;)b.getNext(),M=b.peek();return b}}getReverseIterator(u){return this.getReverseIteratorFrom(u.maxPost(),u)}getReverseIteratorFrom(u,h){const _=this.resolveIndex_(h);if(_)return _.getReverseIteratorFrom(u,b=>b);{const b=this.children_.getReverseIteratorFrom(u.name,Gn.Wrap);let M=b.peek();for(;null!=M&&h.compare(M,u)>0;)b.getNext(),M=b.peek();return b}}compareTo(u){return this.isEmpty()?u.isEmpty()?0:-1:u.isLeafNode()||u.isEmpty()?1:u===Po?-1:0}withIndex(u){if(u===Fn||this.indexMap_.hasIndex(u))return this;{const h=this.indexMap_.addIndex(u,this.children_);return new l(this.children_,this.priorityNode_,h)}}isIndexed(u){return u===Fn||this.indexMap_.hasIndex(u)}equals(u){if(u===this)return!0;if(u.isLeafNode())return!1;{const h=u;if(this.getPriority().equals(h.getPriority())){if(this.children_.count()===h.children_.count()){const _=this.getIterator(ir),b=h.getIterator(ir);let M=_.getNext(),$=b.getNext();for(;M&&$;){if(M.name!==$.name||!M.node.equals($.node))return!1;M=_.getNext(),$=b.getNext()}return null===M&&null===$}return!1}return!1}}resolveIndex_(u){return u===Fn?null:this.indexMap_.get(u.toString())}}return l.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,l})();const Po=new class Gp extends An{constructor(){super(new Xn(Ss),An.EMPTY_NODE,Oi.Default)}compareTo(o){return o===this?0:1}equals(o){return o===this}getPriority(){return this}getImmediateChild(o){return An.EMPTY_NODE}isEmpty(){return!1}};function Vr(l,o=null){if(null===l)return An.EMPTY_NODE;if("object"==typeof l&&".priority"in l&&(o=l[".priority"]),(0,te.hu)(null===o||"string"==typeof o||"number"==typeof o||"object"==typeof o&&".sv"in o,"Invalid priority type found: "+typeof o),"object"==typeof l&&".value"in l&&null!==l[".value"]&&(l=l[".value"]),"object"!=typeof l||".sv"in l)return new pu(l,Vr(o));if(l instanceof Array){let u=An.EMPTY_NODE;return Jn(l,(h,_)=>{if((0,te.r3)(l,h)&&"."!==h.substring(0,1)){const b=Vr(_);(b.isLeafNode()||!b.isEmpty())&&(u=u.updateImmediateChild(h,b))}}),u.updatePriority(Vr(o))}{const u=[];let h=!1;if(Jn(l,(M,$)=>{if("."!==M.substring(0,1)){const z=Vr($);z.isEmpty()||(h=h||!z.getPriority().isEmpty(),u.push(new Gn(M,z)))}}),0===u.length)return An.EMPTY_NODE;const b=Yc(u,lc,M=>M.name,Ss);if(h){const M=Yc(u,ir.getCompare());return new An(b,Vr(o),new Oi({".priority":M},{".priority":ir}))}return new An(b,Vr(o),Oi.Default)}}Object.defineProperties(Gn,{MIN:{value:new Gn(ss,An.EMPTY_NODE)},MAX:{value:new Gn(fr,Po)}}),uc.__EMPTY_NODE=An.EMPTY_NODE,pu.__childrenNodeConstructor=An,function Wc(l){cc=l}(Po),function Ud(l){Ld=l}(Po),function $n(l){Kc=l}(Vr);class Jc extends ku{constructor(o){super(),this.indexPath_=o,(0,te.hu)(!Rn(o)&&".priority"!==Hn(o),"Can't create PathIndex with empty path or .priority key")}extractChild(o){return o.getChild(this.indexPath_)}isDefinedOn(o){return!o.getChild(this.indexPath_).isEmpty()}compare(o,u){const h=this.extractChild(o.node),_=this.extractChild(u.node),b=h.compareTo(_);return 0===b?So(o.name,u.name):b}makePost(o,u){const h=Vr(o),_=An.EMPTY_NODE.updateChild(this.indexPath_,h);return new Gn(u,_)}maxPost(){const o=An.EMPTY_NODE.updateChild(this.indexPath_,Po);return new Gn(fr,o)}toString(){return wa(this.indexPath_,0).join("/")}}const ki=new class qp extends ku{compare(o,u){const h=o.node.compareTo(u.node);return 0===h?So(o.name,u.name):h}isDefinedOn(o){return!0}indexedValueChanged(o,u){return!o.equals(u)}minPost(){return Gn.MIN}maxPost(){return Gn.MAX}makePost(o,u){const h=Vr(o);return new Gn(u,h)}toString(){return".value"}},sl="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",E=function(){let l=0;const o=[];return function(u){const h=u===l;let _;l=u;const b=new Array(8);for(_=7;_>=0;_--)b[_]=sl.charAt(u%64),u=Math.floor(u/64);(0,te.hu)(0===u,"Cannot push at time == 0");let M=b.join("");if(h){for(_=11;_>=0&&63===o[_];_--)o[_]=0;o[_]++}else for(_=0;_<12;_++)o[_]=Math.floor(64*Math.random());for(_=0;_<12;_++)M+=sl.charAt(o[_]);return(0,te.hu)(20===M.length,"nextPushId: Length should be 20."),M}}(),p=function(l){if(l===""+U)return"-";const o=K(l);if(null!=o)return""+(o+1);const u=new Array(l.length);for(let M=0;M<u.length;M++)u[M]=l.charAt(M);if(u.length<786)return u.push("-"),u.join("");let h=u.length-1;for(;h>=0&&"z"===u[h];)h--;if(-1===h)return fr;const b=sl.charAt(sl.indexOf(u[h])+1);return u[h]=b,u.slice(0,h+1).join("")},m=function(l){if(l===""+k)return ss;const o=K(l);if(null!=o)return""+(o-1);const u=new Array(l.length);for(let h=0;h<u.length;h++)u[h]=l.charAt(h);return"-"===u[u.length-1]?1===u.length?""+U:(delete u[u.length-1],u.join("")):(u[u.length-1]=sl.charAt(sl.indexOf(u[u.length-1])-1),u.join("")+"z".repeat(786-u.length))};function D(l){return{type:"value",snapshotNode:l}}function H(l,o){return{type:"child_added",snapshotNode:o,childName:l}}function Y(l,o){return{type:"child_removed",snapshotNode:o,childName:l}}function be(l,o,u){return{type:"child_changed",snapshotNode:o,childName:l,oldSnap:u}}class St{constructor(o){this.index_=o}updateChild(o,u,h,_,b,M){(0,te.hu)(o.isIndexed(this.index_),"A node must be indexed if only a child is updated");const $=o.getImmediateChild(u);return $.getChild(_).equals(h.getChild(_))&&$.isEmpty()===h.isEmpty()||(null!=M&&(h.isEmpty()?o.hasChild(u)?M.trackChildChange(Y(u,$)):(0,te.hu)(o.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):$.isEmpty()?M.trackChildChange(H(u,h)):M.trackChildChange(be(u,h,$))),o.isLeafNode()&&h.isEmpty())?o:o.updateImmediateChild(u,h).withIndex(this.index_)}updateFullNode(o,u,h){return null!=h&&(o.isLeafNode()||o.forEachChild(ir,(_,b)=>{u.hasChild(_)||h.trackChildChange(Y(_,b))}),u.isLeafNode()||u.forEachChild(ir,(_,b)=>{if(o.hasChild(_)){const M=o.getImmediateChild(_);M.equals(b)||h.trackChildChange(be(_,b,M))}else h.trackChildChange(H(_,b))})),u.withIndex(this.index_)}updatePriority(o,u){return o.isEmpty()?An.EMPTY_NODE:o.updatePriority(u)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Ut{constructor(o){this.indexedFilter_=new St(o.getIndex()),this.index_=o.getIndex(),this.startPost_=Ut.getStartPost_(o),this.endPost_=Ut.getEndPost_(o)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(o){return this.index_.compare(this.getStartPost(),o)<=0&&this.index_.compare(o,this.getEndPost())<=0}updateChild(o,u,h,_,b,M){return this.matches(new Gn(u,h))||(h=An.EMPTY_NODE),this.indexedFilter_.updateChild(o,u,h,_,b,M)}updateFullNode(o,u,h){u.isLeafNode()&&(u=An.EMPTY_NODE);let _=u.withIndex(this.index_);_=_.updatePriority(An.EMPTY_NODE);const b=this;return u.forEachChild(ir,(M,$)=>{b.matches(new Gn(M,$))||(_=_.updateImmediateChild(M,An.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(o,_,h)}updatePriority(o,u){return o}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(o){if(o.hasStart()){const u=o.getIndexStartName();return o.getIndex().makePost(o.getIndexStartValue(),u)}return o.getIndex().minPost()}static getEndPost_(o){if(o.hasEnd()){const u=o.getIndexEndName();return o.getIndex().makePost(o.getIndexEndValue(),u)}return o.getIndex().maxPost()}}class pn{constructor(o){this.rangedFilter_=new Ut(o),this.index_=o.getIndex(),this.limit_=o.getLimit(),this.reverse_=!o.isViewFromLeft()}updateChild(o,u,h,_,b,M){return this.rangedFilter_.matches(new Gn(u,h))||(h=An.EMPTY_NODE),o.getImmediateChild(u).equals(h)?o:o.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(o,u,h,_,b,M):this.fullLimitUpdateChild_(o,u,h,b,M)}updateFullNode(o,u,h){let _;if(u.isLeafNode()||u.isEmpty())_=An.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<u.numChildren()&&u.isIndexed(this.index_)){let b;_=An.EMPTY_NODE.withIndex(this.index_),b=this.reverse_?u.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):u.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let M=0;for(;b.hasNext()&&M<this.limit_;){const $=b.getNext();let z;if(z=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),$)<=0:this.index_.compare($,this.rangedFilter_.getEndPost())<=0,!z)break;_=_.updateImmediateChild($.name,$.node),M++}}else{let b,M,$,z;if(_=u.withIndex(this.index_),_=_.updatePriority(An.EMPTY_NODE),this.reverse_){z=_.getReverseIterator(this.index_),b=this.rangedFilter_.getEndPost(),M=this.rangedFilter_.getStartPost();const Fe=this.index_.getCompare();$=(Ye,Mt)=>Fe(Mt,Ye)}else z=_.getIterator(this.index_),b=this.rangedFilter_.getStartPost(),M=this.rangedFilter_.getEndPost(),$=this.index_.getCompare();let ne=0,Ne=!1;for(;z.hasNext();){const Fe=z.getNext();!Ne&&$(b,Fe)<=0&&(Ne=!0),Ne&&ne<this.limit_&&$(Fe,M)<=0?ne++:_=_.updateImmediateChild(Fe.name,An.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(o,_,h)}updatePriority(o,u){return o}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(o,u,h,_,b){let M;if(this.reverse_){const Fe=this.index_.getCompare();M=(Ye,Mt)=>Fe(Mt,Ye)}else M=this.index_.getCompare();const $=o;(0,te.hu)($.numChildren()===this.limit_,"");const z=new Gn(u,h),ne=this.reverse_?$.getFirstChild(this.index_):$.getLastChild(this.index_),Ne=this.rangedFilter_.matches(z);if($.hasChild(u)){const Fe=$.getImmediateChild(u);let Ye=_.getChildAfterChild(this.index_,ne,this.reverse_);for(;null!=Ye&&(Ye.name===u||$.hasChild(Ye.name));)Ye=_.getChildAfterChild(this.index_,Ye,this.reverse_);const Mt=null==Ye?1:M(Ye,z);if(Ne&&!h.isEmpty()&&Mt>=0)return null!=b&&b.trackChildChange(be(u,h,Fe)),$.updateImmediateChild(u,h);{null!=b&&b.trackChildChange(Y(u,Fe));const Cn=$.updateImmediateChild(u,An.EMPTY_NODE);return null!=Ye&&this.rangedFilter_.matches(Ye)?(null!=b&&b.trackChildChange(H(Ye.name,Ye.node)),Cn.updateImmediateChild(Ye.name,Ye.node)):Cn}}return h.isEmpty()?o:Ne&&M(ne,z)>=0?(null!=b&&(b.trackChildChange(Y(ne.name,ne.node)),b.trackChildChange(H(u,h))),$.updateImmediateChild(u,h).updateImmediateChild(ne.name,An.EMPTY_NODE)):o}}class nn{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ir}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,te.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,te.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ss}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,te.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,te.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:fr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,te.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ir}copy(){const o=new nn;return o.limitSet_=this.limitSet_,o.limit_=this.limit_,o.startSet_=this.startSet_,o.indexStartValue_=this.indexStartValue_,o.startNameSet_=this.startNameSet_,o.indexStartName_=this.indexStartName_,o.endSet_=this.endSet_,o.indexEndValue_=this.indexEndValue_,o.endNameSet_=this.endNameSet_,o.indexEndName_=this.indexEndName_,o.index_=this.index_,o.viewFrom_=this.viewFrom_,o}}function fc(l,o,u){const h=l.copy();return h.startSet_=!0,void 0===o&&(o=null),h.indexStartValue_=o,null!=u?(h.startNameSet_=!0,h.indexStartName_=u):(h.startNameSet_=!1,h.indexStartName_=""),h}function Fu(l,o,u){const h=l.copy();return h.endSet_=!0,void 0===o&&(o=null),h.indexEndValue_=o,void 0!==u?(h.endNameSet_=!0,h.indexEndName_=u):(h.endNameSet_=!1,h.indexEndName_=""),h}function ba(l,o){const u=l.copy();return u.index_=o,u}function Mh(l){const o={};if(l.isDefault())return o;let u;return l.index_===ir?u="$priority":l.index_===ki?u="$value":l.index_===Fn?u="$key":((0,te.hu)(l.index_ instanceof Jc,"Unrecognized index type!"),u=l.index_.toString()),o.orderBy=(0,te.Pz)(u),l.startSet_&&(o.startAt=(0,te.Pz)(l.indexStartValue_),l.startNameSet_&&(o.startAt+=","+(0,te.Pz)(l.indexStartName_))),l.endSet_&&(o.endAt=(0,te.Pz)(l.indexEndValue_),l.endNameSet_&&(o.endAt+=","+(0,te.Pz)(l.indexEndName_))),l.limitSet_&&(l.isViewFromLeft()?o.limitToFirst=l.limit_:o.limitToLast=l.limit_),o}function Xc(l){const o={};if(l.startSet_&&(o.sp=l.indexStartValue_,l.startNameSet_&&(o.sn=l.indexStartName_)),l.endSet_&&(o.ep=l.indexEndValue_,l.endNameSet_&&(o.en=l.indexEndName_)),l.limitSet_){o.l=l.limit_;let u=l.viewFrom_;""===u&&(u=l.isViewFromLeft()?"l":"r"),o.vf=u}return l.index_!==ir&&(o.i=l.index_.toString()),o}class pc extends hu{constructor(o,u,h,_){super(),this.repoInfo_=o,this.onDataUpdate_=u,this.authTokenProvider_=h,this.appCheckTokenProvider_=_,this.log_=Au("p:rest:"),this.listens_={}}reportStats(o){throw new Error("Method not implemented.")}static getListenId_(o,u){return void 0!==u?"tag$"+u:((0,te.hu)(o._queryParams.isDefault(),"should have a tag if it's not a default query."),o._path.toString())}listen(o,u,h,_){const b=o._path.toString();this.log_("Listen called for "+b+" "+o._queryIdentifier);const M=pc.getListenId_(o,h),$={};this.listens_[M]=$;const z=Mh(o._queryParams);this.restRequest_(b+".json",z,(ne,Ne)=>{let Fe=Ne;if(404===ne&&(Fe=null,ne=null),null===ne&&this.onDataUpdate_(b,Fe,!1,h),(0,te.DV)(this.listens_,M)===$){let Ye;Ye=ne?401===ne?"permission_denied":"rest_error:"+ne:"ok",_(Ye,null)}})}unlisten(o,u){const h=pc.getListenId_(o,u);delete this.listens_[h]}get(o){const u=Mh(o._queryParams),h=o._path.toString(),_=new te.BH;return this.restRequest_(h+".json",u,(b,M)=>{let $=M;404===b&&($=null,b=null),null===b?(this.onDataUpdate_(h,$,!1,null),_.resolve($)):_.reject(new Error($))}),_.promise}refreshAuthToken(o){}restRequest_(o,u={},h){return u.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([_,b])=>{_&&_.accessToken&&(u.auth=_.accessToken),b&&b.token&&(u.ac=b.token);const M=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+o+"?ns="+this.repoInfo_.namespace+(0,te.xO)(u);this.log_("Sending REST request for "+M);const $=new XMLHttpRequest;$.onreadystatechange=()=>{if(h&&4===$.readyState){this.log_("REST Response for "+M+" received. status:",$.status,"response:",$.responseText);let z=null;if($.status>=200&&$.status<300){try{z=(0,te.cI)($.responseText)}catch(ne){Sr("Failed to parse JSON response for "+M+": "+$.responseText)}h(null,z)}else 401!==$.status&&404!==$.status&&Sr("Got unsuccessful REST response for "+M+" Status: "+$.status),h($.status);h=null}},$.open("GET",M,!0),$.send()})}}class Ph{constructor(){this.rootNode_=An.EMPTY_NODE}getNode(o){return this.rootNode_.getChild(o)}updateSnapshot(o,u){this.rootNode_=this.rootNode_.updateChild(o,u)}}function As(){return{value:null,children:new Map}}function ol(l,o,u){if(Rn(o))l.value=u,l.children.clear();else if(null!==l.value)l.value=l.value.updateChild(o,u);else{const h=Hn(o);l.children.has(h)||l.children.set(h,As()),ol(l.children.get(h),o=ri(o),u)}}function Hd(l,o){if(Rn(o))return l.value=null,l.children.clear(),!0;if(null!==l.value){if(l.value.isLeafNode())return!1;{const u=l.value;return l.value=null,u.forEachChild(ir,(h,_)=>{ol(l,new pr(h),_)}),Hd(l,o)}}if(l.children.size>0){const u=Hn(o);return o=ri(o),l.children.has(u)&&Hd(l.children.get(u),o)&&l.children.delete(u),0===l.children.size}return!0}function gu(l,o,u){null!==l.value?u(o,l.value):function Wp(l,o){l.children.forEach((u,h)=>{o(h,u)})}(l,(h,_)=>{gu(_,new pr(o.toString()+"/"+h),u)})}class $d{constructor(o){this.collection_=o,this.last_=null}get(){const o=this.collection_.get(),u=Object.assign({},o);return this.last_&&Jn(this.last_,(h,_)=>{u[h]=u[h]-_}),this.last_=o,u}}class ay{constructor(o,u){this.server_=u,this.statsToReport_={},this.statsListener_=new $d(o);const h=1e4+2e4*Math.random();Le(this.reportStats_.bind(this),Math.floor(h))}reportStats_(){const o=this.statsListener_.get(),u={};let h=!1;Jn(o,(_,b)=>{b>0&&(0,te.r3)(this.statsToReport_,_)&&(u[_]=b,h=!0)}),h&&this.server_.reportStats(u),Le(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var za=(()=>{return(l=za||(za={}))[l.OVERWRITE=0]="OVERWRITE",l[l.MERGE=1]="MERGE",l[l.ACK_USER_WRITE=2]="ACK_USER_WRITE",l[l.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",za;var l})();function Nf(l){return{fromUser:!1,fromServer:!0,queryId:l,tagged:!0}}class Nh{constructor(o,u,h){this.path=o,this.affectedTree=u,this.revert=h,this.type=za.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(o){if(Rn(this.path)){if(null!=this.affectedTree.value)return(0,te.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const u=this.affectedTree.subtree(new pr(o));return new Nh(gr(),u,this.revert)}}return(0,te.hu)(Hn(this.path)===o,"operationForChild called for unrelated child."),new Nh(ri(this.path),this.affectedTree,this.revert)}}class Oh{constructor(o,u){this.source=o,this.path=u,this.type=za.LISTEN_COMPLETE}operationForChild(o){return Rn(this.path)?new Oh(this.source,gr()):new Oh(this.source,ri(this.path))}}class al{constructor(o,u,h){this.source=o,this.path=u,this.snap=h,this.type=za.OVERWRITE}operationForChild(o){return Rn(this.path)?new al(this.source,gr(),this.snap.getImmediateChild(o)):new al(this.source,ri(this.path),this.snap)}}class Zd{constructor(o,u,h){this.source=o,this.path=u,this.children=h,this.type=za.MERGE}operationForChild(o){if(Rn(this.path)){const u=this.children.subtree(new pr(o));return u.isEmpty()?null:u.value?new al(this.source,gr(),u.value):new Zd(this.source,gr(),u)}return(0,te.hu)(Hn(this.path)===o,"Can't get a merge for a child not on the path of the operation"),new Zd(this.source,ri(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Sl{constructor(o,u,h){this.node_=o,this.fullyInitialized_=u,this.filtered_=h}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(o){if(Rn(o))return this.isFullyInitialized()&&!this.filtered_;const u=Hn(o);return this.isCompleteForChild(u)}isCompleteForChild(o){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(o)}getNode(){return this.node_}}class Wg{constructor(o){this.query_=o,this.index_=this.query_._queryParams.getIndex()}}function ed(l,o,u,h,_,b){const M=h.filter($=>$.type===u);M.sort(($,z)=>function Of(l,o,u){if(null==o.childName||null==u.childName)throw(0,te.g5)("Should only compare child_ events.");const h=new Gn(o.childName,o.snapshotNode),_=new Gn(u.childName,u.snapshotNode);return l.index_.compare(h,_)}(l,$,z)),M.forEach($=>{const z=function Kp(l,o,u){return"value"===o.type||"child_removed"===o.type||(o.prevName=u.getPredecessorChildName(o.childName,o.snapshotNode,l.index_)),o}(l,$,b);_.forEach(ne=>{ne.respondsTo($.type)&&o.push(ne.createEvent(z,l.query_))})})}function gc(l,o){return{eventCache:l,serverCache:o}}function td(l,o,u,h){return gc(new Sl(o,u,h),l.serverCache)}function kf(l,o,u,h){return gc(l.eventCache,new Sl(o,u,h))}function nd(l){return l.eventCache.isFullyInitialized()?l.eventCache.getNode():null}function hi(l){return l.serverCache.isFullyInitialized()?l.serverCache.getNode():null}let Al;class Wr{constructor(o,u=(()=>(Al||(Al=new Xn(ms)),Al))()){this.value=o,this.children=u}static fromObject(o){let u=new Wr(null);return Jn(o,(h,_)=>{u=u.set(new pr(h),_)}),u}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(o,u){if(null!=this.value&&u(this.value))return{path:gr(),value:this.value};if(Rn(o))return null;{const h=Hn(o),_=this.children.get(h);if(null!==_){const b=_.findRootMostMatchingPathAndValue(ri(o),u);return null!=b?{path:ci(new pr(h),b.path),value:b.value}:null}return null}}findRootMostValueAndPath(o){return this.findRootMostMatchingPathAndValue(o,()=>!0)}subtree(o){if(Rn(o))return this;{const u=Hn(o),h=this.children.get(u);return null!==h?h.subtree(ri(o)):new Wr(null)}}set(o,u){if(Rn(o))return new Wr(u,this.children);{const h=Hn(o),b=(this.children.get(h)||new Wr(null)).set(ri(o),u),M=this.children.insert(h,b);return new Wr(this.value,M)}}remove(o){if(Rn(o))return this.children.isEmpty()?new Wr(null):new Wr(null,this.children);{const u=Hn(o),h=this.children.get(u);if(h){const _=h.remove(ri(o));let b;return b=_.isEmpty()?this.children.remove(u):this.children.insert(u,_),null===this.value&&b.isEmpty()?new Wr(null):new Wr(this.value,b)}return this}}get(o){if(Rn(o))return this.value;{const u=Hn(o),h=this.children.get(u);return h?h.get(ri(o)):null}}setTree(o,u){if(Rn(o))return u;{const h=Hn(o),b=(this.children.get(h)||new Wr(null)).setTree(ri(o),u);let M;return M=b.isEmpty()?this.children.remove(h):this.children.insert(h,b),new Wr(this.value,M)}}fold(o){return this.fold_(gr(),o)}fold_(o,u){const h={};return this.children.inorderTraversal((_,b)=>{h[_]=b.fold_(ci(o,_),u)}),u(o,this.value,h)}findOnPath(o,u){return this.findOnPath_(o,gr(),u)}findOnPath_(o,u,h){const _=!!this.value&&h(u,this.value);if(_)return _;if(Rn(o))return null;{const b=Hn(o),M=this.children.get(b);return M?M.findOnPath_(ri(o),ci(u,b),h):null}}foreachOnPath(o,u){return this.foreachOnPath_(o,gr(),u)}foreachOnPath_(o,u,h){if(Rn(o))return this;{this.value&&h(u,this.value);const _=Hn(o),b=this.children.get(_);return b?b.foreachOnPath_(ri(o),ci(u,_),h):new Wr(null)}}foreach(o){this.foreach_(gr(),o)}foreach_(o,u){this.children.inorderTraversal((h,_)=>{_.foreach_(ci(o,h),u)}),this.value&&u(o,this.value)}foreachChild(o){this.children.inorderTraversal((u,h)=>{h.value&&o(u,h.value)})}}class ao{constructor(o){this.writeTree_=o}static empty(){return new ao(new Wr(null))}}function Gd(l,o,u){if(Rn(o))return new ao(new Wr(u));{const h=l.writeTree_.findRootMostValueAndPath(o);if(null!=h){const _=h.path;let b=h.value;const M=qs(_,o);return b=b.updateChild(M,u),new ao(l.writeTree_.set(_,b))}{const _=new Wr(u),b=l.writeTree_.setTree(o,_);return new ao(b)}}}function Ff(l,o,u){let h=l;return Jn(u,(_,b)=>{h=Gd(h,ci(o,_),b)}),h}function kh(l,o){if(Rn(o))return ao.empty();{const u=l.writeTree_.setTree(o,new Wr(null));return new ao(u)}}function rd(l,o){return null!=mu(l,o)}function mu(l,o){const u=l.writeTree_.findRootMostValueAndPath(o);return null!=u?l.writeTree_.get(u.path).getChild(qs(u.path,o)):null}function xl(l){const o=[],u=l.writeTree_.value;return null!=u?u.isLeafNode()||u.forEachChild(ir,(h,_)=>{o.push(new Gn(h,_))}):l.writeTree_.children.inorderTraversal((h,_)=>{null!=_.value&&o.push(new Gn(h,_.value))}),o}function Ca(l,o){if(Rn(o))return l;{const u=mu(l,o);return new ao(null!=u?new Wr(u):l.writeTree_.subtree(o))}}function mc(l){return l.writeTree_.isEmpty()}function id(l,o){return Lf(gr(),l.writeTree_,o)}function Lf(l,o,u){if(null!=o.value)return u.updateChild(l,o.value);{let h=null;return o.children.inorderTraversal((_,b)=>{".priority"===_?((0,te.hu)(null!==b.value,"Priority writes must always be leaf nodes"),h=b.value):u=Lf(ci(l,_),b,u)}),!u.getChild(l).isEmpty()&&null!==h&&(u=u.updateChild(ci(l,".priority"),h)),u}}function Oo(l,o){return Lh(o,l)}function Qg(l,o){if(l.snap)return Xo(l.path,o);for(const u in l.children)if(l.children.hasOwnProperty(u)&&Xo(ci(l.path,u),o))return!0;return!1}function qd(l){return l.visible}function yc(l,o,u){let h=ao.empty();for(let _=0;_<l.length;++_){const b=l[_];if(o(b)){const M=b.path;let $;if(b.snap)Xo(u,M)?($=qs(u,M),h=Gd(h,$,b.snap)):Xo(M,u)&&($=qs(M,u),h=Gd(h,gr(),b.snap.getChild($)));else{if(!b.children)throw(0,te.g5)("WriteRecord should have .snap or .children");if(Xo(u,M))$=qs(u,M),h=Ff(h,$,b.children);else if(Xo(M,u))if($=qs(M,u),Rn($))h=Ff(h,gr(),b.children);else{const z=(0,te.DV)(b.children,Hn($));if(z){const ne=z.getChild(ri($));h=Gd(h,gr(),ne)}}}}}return h}function Jg(l,o,u,h,_){if(h||_){const b=Ca(l.visibleWrites,o);return!_&&mc(b)?u:_||null!=u||rd(b,gr())?id(yc(l.allWrites,function(ne){return(ne.visible||_)&&(!h||!~h.indexOf(ne.writeId))&&(Xo(ne.path,o)||Xo(o,ne.path))},o),u||An.EMPTY_NODE):null}{const b=mu(l.visibleWrites,o);if(null!=b)return b;{const M=Ca(l.visibleWrites,o);return mc(M)?u:null!=u||rd(M,gr())?id(M,u||An.EMPTY_NODE):null}}}function xs(l,o,u,h){return Jg(l.writeTree,l.treePath,o,u,h)}function Fh(l,o){return function Xg(l,o,u){let h=An.EMPTY_NODE;const _=mu(l.visibleWrites,o);if(_)return _.isLeafNode()||_.forEachChild(ir,(b,M)=>{h=h.updateImmediateChild(b,M)}),h;if(u){const b=Ca(l.visibleWrites,o);return u.forEachChild(ir,(M,$)=>{const z=id(Ca(b,new pr(M)),$);h=h.updateImmediateChild(M,z)}),xl(b).forEach(M=>{h=h.updateImmediateChild(M.name,M.node)}),h}return xl(Ca(l.visibleWrites,o)).forEach(M=>{h=h.updateImmediateChild(M.name,M.node)}),h}(l.writeTree,l.treePath,o)}function nm(l,o,u,h){return function Un(l,o,u,h,_){(0,te.hu)(h||_,"Either existingEventSnap or existingServerSnap must exist");const b=ci(o,u);if(rd(l.visibleWrites,b))return null;{const M=Ca(l.visibleWrites,b);return mc(M)?_.getChild(u):id(M,_.getChild(u))}}(l.writeTree,l.treePath,o,u,h)}function zd(l,o){return function tm(l,o){return mu(l.visibleWrites,o)}(l.writeTree,ci(l.treePath,o))}function _c(l,o,u){return function em(l,o,u,h){const _=ci(o,u),b=mu(l.visibleWrites,_);return null!=b?b:h.isCompleteForChild(u)?id(Ca(l.visibleWrites,_),h.getNode().getImmediateChild(u)):null}(l.writeTree,l.treePath,o,u)}function Jp(l,o){return Lh(ci(l.treePath,o),l.writeTree)}function Lh(l,o){return{treePath:l,writeTree:o}}class Bf{constructor(){this.changeMap=new Map}trackChildChange(o){const u=o.type,h=o.childName;(0,te.hu)("child_added"===u||"child_changed"===u||"child_removed"===u,"Only child changes supported for tracking"),(0,te.hu)(".priority"!==h,"Only non-priority child changes can be tracked.");const _=this.changeMap.get(h);if(_){const b=_.type;if("child_added"===u&&"child_removed"===b)this.changeMap.set(h,be(h,o.snapshotNode,_.snapshotNode));else if("child_removed"===u&&"child_added"===b)this.changeMap.delete(h);else if("child_removed"===u&&"child_changed"===b)this.changeMap.set(h,Y(h,_.oldSnap));else if("child_changed"===u&&"child_added"===b)this.changeMap.set(h,H(h,o.snapshotNode));else{if("child_changed"!==u||"child_changed"!==b)throw(0,te.g5)("Illegal combination of changes: "+o+" occurred after "+_);this.changeMap.set(h,be(h,o.snapshotNode,_.oldSnap))}}else this.changeMap.set(h,o)}getChanges(){return Array.from(this.changeMap.values())}}const Bh=new class Uh{getCompleteChild(o){return null}getChildAfterChild(o,u,h){return null}};class sd{constructor(o,u,h=null){this.writes_=o,this.viewCache_=u,this.optCompleteServerCache_=h}getCompleteChild(o){const u=this.viewCache_.eventCache;if(u.isCompleteForChild(o))return u.getNode().getImmediateChild(o);{const h=null!=this.optCompleteServerCache_?new Sl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return _c(this.writes_,o,h)}}getChildAfterChild(o,u,h){const _=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:hi(this.viewCache_),b=function Uu(l,o,u,h,_,b){return function Wd(l,o,u,h,_,b,M){let $;const z=Ca(l.visibleWrites,o),ne=mu(z,gr());if(null!=ne)$=ne;else{if(null==u)return[];$=id(z,u)}if($=$.withIndex(M),$.isEmpty()||$.isLeafNode())return[];{const Ne=[],Fe=M.getCompare(),Ye=b?$.getReverseIteratorFrom(h,M):$.getIteratorFrom(h,M);let Mt=Ye.getNext();for(;Mt&&Ne.length<_;)0!==Fe(Mt,h)&&Ne.push(Mt),Mt=Ye.getNext();return Ne}}(l.writeTree,l.treePath,o,u,h,_,b)}(this.writes_,_,u,1,h,o);return 0===b.length?null:b[0]}}function jf(l,o,u,h,_,b){const M=o.eventCache;if(null!=zd(h,u))return o;{let $,z;if(Rn(u))if((0,te.hu)(o.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),o.serverCache.isFiltered()){const ne=hi(o),Fe=Fh(h,ne instanceof An?ne:An.EMPTY_NODE);$=l.filter.updateFullNode(o.eventCache.getNode(),Fe,b)}else{const ne=xs(h,hi(o));$=l.filter.updateFullNode(o.eventCache.getNode(),ne,b)}else{const ne=Hn(u);if(".priority"===ne){(0,te.hu)(1===va(u),"Can't have a priority with additional path components");const Ne=M.getNode();z=o.serverCache.getNode();const Fe=nm(h,u,Ne,z);$=null!=Fe?l.filter.updatePriority(Ne,Fe):M.getNode()}else{const Ne=ri(u);let Fe;if(M.isCompleteForChild(ne)){z=o.serverCache.getNode();const Ye=nm(h,u,M.getNode(),z);Fe=null!=Ye?M.getNode().getImmediateChild(ne).updateChild(Ne,Ye):M.getNode().getImmediateChild(ne)}else Fe=_c(h,ne,o.serverCache);$=null!=Fe?l.filter.updateChild(M.getNode(),ne,Fe,Ne,_,b):M.getNode()}}return td(o,$,M.isFullyInitialized()||Rn(u),l.filter.filtersNodes())}}function jh(l,o,u,h,_,b,M,$){const z=o.serverCache;let ne;const Ne=M?l.filter:l.filter.getIndexedFilter();if(Rn(u))ne=Ne.updateFullNode(z.getNode(),h,null);else if(Ne.filtersNodes()&&!z.isFiltered()){const Mt=z.getNode().updateChild(u,h);ne=Ne.updateFullNode(z.getNode(),Mt,null)}else{const Mt=Hn(u);if(!z.isCompleteForPath(u)&&va(u)>1)return o;const Vt=ri(u),Wn=z.getNode().getImmediateChild(Mt).updateChild(Vt,h);ne=".priority"===Mt?Ne.updatePriority(z.getNode(),Wn):Ne.updateChild(z.getNode(),Mt,Wn,Vt,Bh,null)}const Fe=kf(o,ne,z.isFullyInitialized()||Rn(u),Ne.filtersNodes());return jf(l,Fe,u,_,new sd(_,Fe,b),$)}function ll(l,o,u,h,_,b,M){const $=o.eventCache;let z,ne;const Ne=new sd(_,o,b);if(Rn(u))ne=l.filter.updateFullNode(o.eventCache.getNode(),h,M),z=td(o,ne,!0,l.filter.filtersNodes());else{const Fe=Hn(u);if(".priority"===Fe)ne=l.filter.updatePriority(o.eventCache.getNode(),h),z=td(o,ne,$.isFullyInitialized(),$.isFiltered());else{const Ye=ri(u),Mt=$.getNode().getImmediateChild(Fe);let Vt;if(Rn(Ye))Vt=h;else{const Cn=Ne.getCompleteChild(Fe);Vt=null!=Cn?".priority"===xf(Ye)&&Cn.getChild(fu(Ye)).isEmpty()?Cn:Cn.updateChild(Ye,h):An.EMPTY_NODE}z=Mt.equals(Vt)?o:td(o,l.filter.updateChild($.getNode(),Fe,Vt,Ye,Ne,M),$.isFullyInitialized(),l.filter.filtersNodes())}}return z}function od(l,o){return l.eventCache.isCompleteForChild(o)}function Rl(l,o,u){return u.foreach((h,_)=>{o=o.updateChild(h,_)}),o}function im(l,o,u,h,_,b,M,$){if(o.serverCache.getNode().isEmpty()&&!o.serverCache.isFullyInitialized())return o;let ne,z=o;ne=Rn(u)?h:new Wr(null).setTree(u,h);const Ne=o.serverCache.getNode();return ne.children.inorderTraversal((Fe,Ye)=>{if(Ne.hasChild(Fe)){const Vt=Rl(0,o.serverCache.getNode().getImmediateChild(Fe),Ye);z=jh(l,z,new pr(Fe),Vt,_,b,M,$)}}),ne.children.inorderTraversal((Fe,Ye)=>{const Mt=!o.serverCache.isCompleteForChild(Fe)&&void 0===Ye.value;if(!Ne.hasChild(Fe)&&!Mt){const Cn=Rl(0,o.serverCache.getNode().getImmediateChild(Fe),Ye);z=jh(l,z,new pr(Fe),Cn,_,b,M,$)}}),z}class Xp{constructor(o,u){this.query_=o,this.eventRegistrations_=[];const h=this.query_._queryParams,_=new St(h.getIndex()),b=function qi(l){return l.loadsAllData()?new St(l.getIndex()):l.hasLimit()?new pn(l):new Ut(l)}(h);this.processor_=function Vh(l){return{filter:l}}(b);const M=u.serverCache,$=u.eventCache,z=_.updateFullNode(An.EMPTY_NODE,M.getNode(),null),ne=b.updateFullNode(An.EMPTY_NODE,$.getNode(),null),Ne=new Sl(z,M.isFullyInitialized(),_.filtersNodes()),Fe=new Sl(ne,$.isFullyInitialized(),b.filtersNodes());this.viewCache_=gc(Fe,Ne),this.eventGenerator_=new Wg(this.query_)}get query(){return this.query_}}function n_(l,o){const u=hi(l.viewCache_);return u&&(l.query._queryParams.loadsAllData()||!Rn(o)&&!u.getImmediateChild(Hn(o)).isEmpty())?u.getChild(o):null}function dy(l){return 0===l.eventRegistrations_.length}function sm(l,o,u){const h=[];if(u){(0,te.hu)(null==o,"A cancel should cancel all event registrations.");const _=l.query._path;l.eventRegistrations_.forEach(b=>{const M=b.createCancelEvent(u,_);M&&h.push(M)})}if(o){let _=[];for(let b=0;b<l.eventRegistrations_.length;++b){const M=l.eventRegistrations_[b];if(M.matches(o)){if(o.hasAnyCallback()){_=_.concat(l.eventRegistrations_.slice(b+1));break}}else _.push(M)}l.eventRegistrations_=_}else l.eventRegistrations_=[];return h}function hy(l,o,u,h){o.type===za.MERGE&&null!==o.source.queryId&&((0,te.hu)(hi(l.viewCache_),"We should always have a full cache before handling merges"),(0,te.hu)(nd(l.viewCache_),"Missing event cache, even though we have a server cache"));const _=l.viewCache_,b=function Vf(l,o,u,h,_){const b=new Bf;let M,$;if(u.type===za.OVERWRITE){const ne=u;ne.source.fromUser?M=ll(l,o,ne.path,ne.snap,h,_,b):((0,te.hu)(ne.source.fromServer,"Unknown source."),$=ne.source.tagged||o.serverCache.isFiltered()&&!Rn(ne.path),M=jh(l,o,ne.path,ne.snap,h,_,$,b))}else if(u.type===za.MERGE){const ne=u;ne.source.fromUser?M=function rm(l,o,u,h,_,b,M){let $=o;return h.foreach((z,ne)=>{const Ne=ci(u,z);od(o,Hn(Ne))&&($=ll(l,$,Ne,ne,_,b,M))}),h.foreach((z,ne)=>{const Ne=ci(u,z);od(o,Hn(Ne))||($=ll(l,$,Ne,ne,_,b,M))}),$}(l,o,ne.path,ne.children,h,_,b):((0,te.hu)(ne.source.fromServer,"Unknown source."),$=ne.source.tagged||o.serverCache.isFiltered(),M=im(l,o,ne.path,ne.children,h,_,$,b))}else if(u.type===za.ACK_USER_WRITE){const ne=u;M=ne.revert?function Ml(l,o,u,h,_,b){let M;if(null!=zd(h,u))return o;{const $=new sd(h,o,_),z=o.eventCache.getNode();let ne;if(Rn(u)||".priority"===Hn(u)){let Ne;if(o.serverCache.isFullyInitialized())Ne=xs(h,hi(o));else{const Fe=o.serverCache.getNode();(0,te.hu)(Fe instanceof An,"serverChildren would be complete if leaf node"),Ne=Fh(h,Fe)}Ne=Ne,ne=l.filter.updateFullNode(z,Ne,b)}else{const Ne=Hn(u);let Fe=_c(h,Ne,o.serverCache);null==Fe&&o.serverCache.isCompleteForChild(Ne)&&(Fe=z.getImmediateChild(Ne)),ne=null!=Fe?l.filter.updateChild(z,Ne,Fe,ri(u),$,b):o.eventCache.getNode().hasChild(Ne)?l.filter.updateChild(z,Ne,An.EMPTY_NODE,ri(u),$,b):z,ne.isEmpty()&&o.serverCache.isFullyInitialized()&&(M=xs(h,hi(o)),M.isLeafNode()&&(ne=l.filter.updateFullNode(ne,M,b)))}return M=o.serverCache.isFullyInitialized()||null!=zd(h,gr()),td(o,ne,M,l.filter.filtersNodes())}}(l,o,ne.path,h,_,b):function Yd(l,o,u,h,_,b,M){if(null!=zd(_,u))return o;const $=o.serverCache.isFiltered(),z=o.serverCache;if(null!=h.value){if(Rn(u)&&z.isFullyInitialized()||z.isCompleteForPath(u))return jh(l,o,u,z.getNode().getChild(u),_,b,$,M);if(Rn(u)){let ne=new Wr(null);return z.getNode().forEachChild(Fn,(Ne,Fe)=>{ne=ne.set(new pr(Ne),Fe)}),im(l,o,u,ne,_,b,$,M)}return o}{let ne=new Wr(null);return h.foreach((Ne,Fe)=>{const Ye=ci(u,Ne);z.isCompleteForPath(Ye)&&(ne=ne.set(Ne,z.getNode().getChild(Ye)))}),im(l,o,u,ne,_,b,$,M)}}(l,o,ne.path,ne.affectedTree,h,_,b)}else{if(u.type!==za.LISTEN_COMPLETE)throw(0,te.g5)("Unknown operation type: "+u.type);M=function ly(l,o,u,h,_){const b=o.serverCache;return jf(l,kf(o,b.getNode(),b.isFullyInitialized()||Rn(u),b.isFiltered()),u,h,Bh,_)}(l,o,u.path,h,b)}const z=b.getChanges();return function Kd(l,o,u){const h=o.eventCache;if(h.isFullyInitialized()){const _=h.getNode().isLeafNode()||h.getNode().isEmpty(),b=nd(l);(u.length>0||!l.eventCache.isFullyInitialized()||_&&!h.getNode().equals(b)||!h.getNode().getPriority().equals(b.getPriority()))&&u.push(D(nd(o)))}}(o,M,z),{viewCache:M,changes:z}}(l.processor_,_,o,u,h);return function ko(l,o){(0,te.hu)(o.eventCache.getNode().isIndexed(l.filter.getIndex()),"Event snap not indexed"),(0,te.hu)(o.serverCache.getNode().isIndexed(l.filter.getIndex()),"Server snap not indexed")}(l.processor_,b.viewCache),(0,te.hu)(b.viewCache.serverCache.isFullyInitialized()||!_.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),l.viewCache_=b.viewCache,py(l,b.changes,b.viewCache.eventCache.getNode(),null)}function py(l,o,u,h){return function zg(l,o,u,h){const _=[],b=[];return o.forEach(M=>{"child_changed"===M.type&&l.index_.indexedValueChanged(M.oldSnap,M.snapshotNode)&&b.push(function Qe(l,o){return{type:"child_moved",snapshotNode:o,childName:l}}(M.childName,M.snapshotNode))}),ed(l,_,"child_removed",o,h,u),ed(l,_,"child_added",o,h,u),ed(l,_,"child_moved",b,h,u),ed(l,_,"child_changed",o,h,u),ed(l,_,"value",o,h,u),_}(l.eventGenerator_,o,u,h?[h]:l.eventRegistrations_)}let Hf,Hh;class ad{constructor(){this.views=new Map}}function ng(l,o,u,h){const _=o.source.queryId;if(null!==_){const b=l.views.get(_);return(0,te.hu)(null!=b,"SyncTree gave us an op for an invalid query."),hy(b,o,u,h)}{let b=[];for(const M of l.views.values())b=b.concat(hy(M,o,u,h));return b}}function Gf(l,o,u,h,_){const M=l.views.get(o._queryIdentifier);if(!M){let $=xs(u,_?h:null),z=!1;$?z=!0:h instanceof An?($=Fh(u,h),z=!1):($=An.EMPTY_NODE,z=!1);const ne=gc(new Sl($,z,!1),new Sl(h,_,!1));return new Xp(o,ne)}return M}function Qd(l){const o=[];for(const u of l.views.values())u.query._queryParams.loadsAllData()||o.push(u);return o}function Di(l,o){let u=null;for(const h of l.views.values())u=u||n_(h,o);return u}function Nl(l,o){return o._queryParams.loadsAllData()?Jd(l):l.views.get(o._queryIdentifier)}function ig(l,o){return null!=Nl(l,o)}function vc(l){return null!=Jd(l)}function Jd(l){for(const o of l.views.values())if(o.query._queryParams.loadsAllData())return o;return null}let gy=1;class ud{constructor(o){this.listenProvider_=o,this.syncPointTree_=new Wr(null),this.pendingWriteTree_=function ul(){return{visibleWrites:ao.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function cl(l,o,u,h,_){return function Kg(l,o,u,h,_){(0,te.hu)(h>l.lastWriteId,"Stacking an older write on top of newer ones"),void 0===_&&(_=!0),l.allWrites.push({path:o,snap:u,writeId:h,visible:_}),_&&(l.visibleWrites=Gd(l.visibleWrites,o,u)),l.lastWriteId=h}(l.pendingWriteTree_,o,u,h,_),_?cd(l,new al({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},o,u)):[]}function wo(l,o,u=!1){const h=function uy(l,o){for(let u=0;u<l.allWrites.length;u++){const h=l.allWrites[u];if(h.writeId===o)return h}return null}(l.pendingWriteTree_,o);if(function Yg(l,o){const u=l.allWrites.findIndex($=>$.writeId===o);(0,te.hu)(u>=0,"removeWrite called with nonexistent writeId.");const h=l.allWrites[u];l.allWrites.splice(u,1);let _=h.visible,b=!1,M=l.allWrites.length-1;for(;_&&M>=0;){const $=l.allWrites[M];$.visible&&(M>=u&&Qg($,h.path)?_=!1:Xo(h.path,$.path)&&(b=!0)),M--}return!!_&&(b?(function Uf(l){l.visibleWrites=yc(l.allWrites,qd,gr()),l.lastWriteId=l.allWrites.length>0?l.allWrites[l.allWrites.length-1].writeId:-1}(l),!0):(h.snap?l.visibleWrites=kh(l.visibleWrites,h.path):Jn(h.children,z=>{l.visibleWrites=kh(l.visibleWrites,ci(h.path,z))}),!0))}(l.pendingWriteTree_,o)){let b=new Wr(null);return null!=h.snap?b=b.set(gr(),!0):Jn(h.children,M=>{b=b.set(new pr(M),!0)}),cd(l,new Nh(h.path,b,u))}return[]}function yu(l,o,u){return cd(l,new al({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},o,u))}function Wf(l,o,u,h){const _=o._path,b=l.syncPointTree_.get(_);let M=[];if(b&&("default"===o._queryIdentifier||ig(b,o))){const $=function om(l,o,u,h){const _=o._queryIdentifier,b=[];let M=[];const $=vc(l);if("default"===_)for(const[z,ne]of l.views.entries())M=M.concat(sm(ne,u,h)),dy(ne)&&(l.views.delete(z),ne.query._queryParams.loadsAllData()||b.push(ne.query));else{const z=l.views.get(_);z&&(M=M.concat(sm(z,u,h)),dy(z)&&(l.views.delete(_),z.query._queryParams.loadsAllData()||b.push(z.query)))}return $&&!vc(l)&&b.push(new(function Pl(){return(0,te.hu)(Hf,"Reference.ts has not been loaded"),Hf}())(o._repo,o._path)),{removed:b,events:M}}(b,o,u,h);(function Zf(l){return 0===l.views.size})(b)&&(l.syncPointTree_=l.syncPointTree_.remove(_));const z=$.removed;M=$.events;const ne=-1!==z.findIndex(Fe=>Fe._queryParams.loadsAllData()),Ne=l.syncPointTree_.findOnPath(_,(Fe,Ye)=>vc(Ye));if(ne&&!Ne){const Fe=l.syncPointTree_.subtree(_);if(!Fe.isEmpty()){const Ye=function cm(l){return l.fold((o,u,h)=>{if(u&&vc(u))return[Jd(u)];{let _=[];return u&&(_=Qd(u)),Jn(h,(b,M)=>{_=_.concat(M)}),_}})}(Fe);for(let Mt=0;Mt<Ye.length;++Mt){const Vt=Ye[Mt],Cn=Vt.query,Wn=Ec(l,Vt);l.listenProvider_.startListening(Gh(Cn),Ol(l,Cn),Wn.hashFn,Wn.onComplete)}}}!Ne&&z.length>0&&!h&&(ne?l.listenProvider_.stopListening(Gh(o),null):z.forEach(Fe=>{const Ye=l.queryToTagMap.get(dd(Fe));l.listenProvider_.stopListening(Gh(Fe),Ye)})),function dm(l,o){for(let u=0;u<o.length;++u){const h=o[u];if(!h._queryParams.loadsAllData()){const _=dd(h),b=l.queryToTagMap.get(_);l.queryToTagMap.delete(_),l.tagToQueryMap.delete(b)}}}(l,z)}return M}function Zh(l,o,u){const h=o._path;let _=null,b=!1;l.syncPointTree_.foreachOnPath(h,(Fe,Ye)=>{const Mt=qs(Fe,h);_=_||Di(Ye,Mt),b=b||vc(Ye)});let $,M=l.syncPointTree_.get(h);M?(b=b||vc(M),_=_||Di(M,gr())):(M=new ad,l.syncPointTree_=l.syncPointTree_.set(h,M)),null!=_?$=!0:($=!1,_=An.EMPTY_NODE,l.syncPointTree_.subtree(h).foreachChild((Ye,Mt)=>{const Vt=Di(Mt,gr());Vt&&(_=_.updateImmediateChild(Ye,Vt))}));const z=ig(M,o);if(!z&&!o._queryParams.loadsAllData()){const Fe=dd(o);(0,te.hu)(!l.queryToTagMap.has(Fe),"View does not exist, but we have a tag");const Ye=function r_(){return gy++}();l.queryToTagMap.set(Fe,Ye),l.tagToQueryMap.set(Ye,Fe)}let Ne=function rg(l,o,u,h,_,b){const M=Gf(l,o,h,_,b);return l.views.has(o._queryIdentifier)||l.views.set(o._queryIdentifier,M),function tg(l,o){l.eventRegistrations_.push(o)}(M,u),function fy(l,o){const u=l.viewCache_.eventCache,h=[];return u.getNode().isLeafNode()||u.getNode().forEachChild(ir,(b,M)=>{h.push(H(b,M))}),u.isFullyInitialized()&&h.push(D(u.getNode())),py(l,h,u.getNode(),o)}(M,u)}(M,o,u,Oo(l.pendingWriteTree_,h),_,$);if(!z&&!b){const Fe=Nl(M,o);Ne=Ne.concat(function Qf(l,o,u){const h=o._path,_=Ol(l,o),b=Ec(l,u),M=l.listenProvider_.startListening(Gh(o),_,b.hashFn,b.onComplete),$=l.syncPointTree_.subtree(h);if(_)(0,te.hu)(!vc($.value),"If we're adding a query, it shouldn't be shadowed");else{const z=$.fold((ne,Ne,Fe)=>{if(!Rn(ne)&&Ne&&vc(Ne))return[Jd(Ne).query];{let Ye=[];return Ne&&(Ye=Ye.concat(Qd(Ne).map(Mt=>Mt.query))),Jn(Fe,(Mt,Vt)=>{Ye=Ye.concat(Vt)}),Ye}});for(let ne=0;ne<z.length;++ne){const Ne=z[ne];l.listenProvider_.stopListening(Gh(Ne),Ol(l,Ne))}}return M}(l,o,Fe))}return Ne}function ld(l,o,u){const _=l.pendingWriteTree_,b=l.syncPointTree_.findOnPath(o,(M,$)=>{const ne=Di($,qs(M,o));if(ne)return ne});return Jg(_,o,b,u,!0)}function cd(l,o){return lm(o,l.syncPointTree_,null,Oo(l.pendingWriteTree_,gr()))}function lm(l,o,u,h){if(Rn(l.path))return ag(l,o,u,h);{const _=o.get(gr());null==u&&null!=_&&(u=Di(_,gr()));let b=[];const M=Hn(l.path),$=l.operationForChild(M),z=o.children.get(M);if(z&&$){const ne=u?u.getImmediateChild(M):null,Ne=Jp(h,M);b=b.concat(lm($,z,ne,Ne))}return _&&(b=b.concat(ng(_,l,h,u))),b}}function ag(l,o,u,h){const _=o.get(gr());null==u&&null!=_&&(u=Di(_,gr()));let b=[];return o.children.inorderTraversal((M,$)=>{const z=u?u.getImmediateChild(M):null,ne=Jp(h,M),Ne=l.operationForChild(M);Ne&&(b=b.concat(ag(Ne,$,z,ne)))}),_&&(b=b.concat(ng(_,l,h,u))),b}function Ec(l,o){const u=o.query,h=Ol(l,u);return{hashFn:()=>(function cy(l){return l.viewCache_.serverCache.getNode()}(o)||An.EMPTY_NODE).hash(),onComplete:_=>{if("ok"===_)return h?function og(l,o,u){const h=Xd(l,u);if(h){const _=Yf(h),b=_.path,M=_.queryId,$=qs(b,o);return Fo(l,b,new Oh(Nf(M),$))}return[]}(l,u._path,h):function sg(l,o){return cd(l,new Oh({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},o))}(l,u._path);{const b=function Ao(l,o){let u="Unknown Error";"too_big"===l?u="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===l?u="Client doesn't have permission to access the desired data.":"unavailable"===l&&(u="The service is unavailable");const h=new Error(l+" at "+o._path.toString()+": "+u);return h.code=l.toUpperCase(),h}(_,u);return Wf(l,u,null,b)}}}}function Ol(l,o){const u=dd(o);return l.queryToTagMap.get(u)}function dd(l){return l._path.toString()+"$"+l._queryIdentifier}function Xd(l,o){return l.tagToQueryMap.get(o)}function Yf(l){const o=l.indexOf("$");return(0,te.hu)(-1!==o&&o<l.length-1,"Bad queryKey."),{queryId:l.substr(o+1),path:new pr(l.substr(0,o))}}function Fo(l,o,u){const h=l.syncPointTree_.get(o);return(0,te.hu)(h,"Missing sync point for query tag that we're tracking"),ng(h,u,Oo(l.pendingWriteTree_,o),null)}function Gh(l){return l._queryParams.loadsAllData()&&!l._queryParams.isDefault()?new(function qf(){return(0,te.hu)(Hh,"Reference.ts has not been loaded"),Hh}())(l._repo,l._path):l}class ug{constructor(o){this.node_=o}getImmediateChild(o){const u=this.node_.getImmediateChild(o);return new ug(u)}node(){return this.node_}}class Jf{constructor(o,u){this.syncTree_=o,this.path_=u}getImmediateChild(o){const u=ci(this.path_,o);return new Jf(this.syncTree_,u)}node(){return ld(this.syncTree_,this.path_)}}const eh=function(l,o,u){return l&&"object"==typeof l?((0,te.hu)(".sv"in l,"Unexpected leaf node or priority contents"),"string"==typeof l[".sv"]?Wh(l[".sv"],o,u):"object"==typeof l[".sv"]?Xf(l[".sv"],o):void(0,te.hu)(!1,"Unexpected server value: "+JSON.stringify(l,null,2))):l},Wh=function(l,o,u){if("timestamp"===l)return u.timestamp;(0,te.hu)(!1,"Unexpected server value: "+l)},Xf=function(l,o,u){l.hasOwnProperty("increment")||(0,te.hu)(!1,"Unexpected server value: "+JSON.stringify(l,null,2));const h=l.increment;"number"!=typeof h&&(0,te.hu)(!1,"Unexpected increment value: "+h);const _=o.node();if((0,te.hu)(null!=_,"Expected ChildrenNode.EMPTY_NODE for nulls"),!_.isLeafNode())return h;const M=_.getValue();return"number"!=typeof M?h:M+h},ep=function(l,o,u,h){return zh(o,new Jf(u,l),h)},th=function(l,o,u){return zh(l,new ug(o),u)};function zh(l,o,u){const h=l.getPriority().val(),_=eh(h,o.getImmediateChild(".priority"),u);let b;if(l.isLeafNode()){const M=l,$=eh(M.getValue(),o,u);return $!==M.getValue()||_!==M.getPriority().val()?new pu($,Vr(_)):l}{const M=l;return b=M,_!==M.getPriority().val()&&(b=b.updatePriority(new pu(_))),M.forEachChild(ir,($,z)=>{const ne=zh(z,o.getImmediateChild($),u);ne!==z&&(b=b.updateImmediateChild($,ne))}),b}}class Kh{constructor(o="",u=null,h={children:{},childCount:0}){this.name=o,this.parent=u,this.node=h}}function tp(l,o){let u=o instanceof pr?o:new pr(o),h=l,_=Hn(u);for(;null!==_;){const b=(0,te.DV)(h.node.children,_)||{children:{},childCount:0};h=new Kh(_,h,b),u=ri(u),_=Hn(u)}return h}function Ic(l){return l.node.value}function np(l,o){l.node.value=o,cg(l)}function lg(l){return l.node.childCount>0}function Ta(l,o){Jn(l.node.children,(u,h)=>{o(new Kh(u,l,h))})}function hd(l,o,u,h){u&&!h&&o(l),Ta(l,_=>{hd(_,o,!0,h)}),u&&h&&o(l)}function fd(l){return new pr(null===l.parent?l.name:fd(l.parent)+"/"+l.name)}function cg(l){null!==l.parent&&function hm(l,o,u){const h=function my(l){return void 0===Ic(l)&&!lg(l)}(u),_=(0,te.r3)(l.node.children,o);h&&_?(delete l.node.children[o],l.node.childCount--,cg(l)):!h&&!_&&(l.node.children[o]=u.node,l.node.childCount++,cg(l))}(l.parent,l.name,l)}const yy=/[\[\].#$\/\u0000-\u001F\u007F]/,_y=/[\[\].#$\u0000-\u001F\u007F]/,dg=10485760,nh=function(l){return"string"==typeof l&&0!==l.length&&!yy.test(l)},rh=function(l){return"string"==typeof l&&0!==l.length&&!_y.test(l)},Ka=function(l){return null===l||"string"==typeof l||"number"==typeof l&&!ma(l)||l&&"object"==typeof l&&(0,te.r3)(l,".sv")},Da=function(l,o,u,h){h&&void 0===o||bc((0,te.gK)(l,"value"),o,u)},bc=function(l,o,u){const h=u instanceof pr?new Hc(u,l):u;if(void 0===o)throw new Error(l+"contains undefined "+Ea(h));if("function"==typeof o)throw new Error(l+"contains a function "+Ea(h)+" with contents = "+o.toString());if(ma(o))throw new Error(l+"contains "+o.toString()+" "+Ea(h));if("string"==typeof o&&o.length>dg/3&&(0,te.ug)(o)>dg)throw new Error(l+"contains a string greater than "+dg+" utf8 bytes "+Ea(h)+" ('"+o.substring(0,50)+"...')");if(o&&"object"==typeof o){let _=!1,b=!1;if(Jn(o,(M,$)=>{if(".value"===M)_=!0;else if(".priority"!==M&&".sv"!==M&&(b=!0,!nh(M)))throw new Error(l+" contains an invalid key ("+M+") "+Ea(h)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Fd(l,o){l.parts_.length>0&&(l.byteLength_+=1),l.parts_.push(o),l.byteLength_+=(0,te.ug)(o),di(l)})(h,M),bc(l,$,h),function oc(l){const o=l.parts_.pop();l.byteLength_-=(0,te.ug)(o),l.parts_.length>0&&(l.byteLength_-=1)}(h)}),_&&b)throw new Error(l+' contains ".value" child '+Ea(h)+" in addition to actual children.")}},ih=function(l,o,u,h){if(h&&void 0===o)return;const _=(0,te.gK)(l,"values");if(!o||"object"!=typeof o||Array.isArray(o))throw new Error(_+" must be an object containing the children to replace.");const b=[];Jn(o,(M,$)=>{const z=new pr(M);if(bc(_,$,ci(u,z)),".priority"===xf(z)&&!Ka($))throw new Error(_+"contains an invalid value for '"+z.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");b.push(z)}),function(l,o){let u,h;for(u=0;u<o.length;u++){h=o[u];const b=wa(h);for(let M=0;M<b.length;M++)if((".priority"!==b[M]||M!==b.length-1)&&!nh(b[M]))throw new Error(l+"contains an invalid key ("+b[M]+") in path "+h.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}o.sort(Cl);let _=null;for(u=0;u<o.length;u++){if(h=o[u],null!==_&&Xo(_,h))throw new Error(l+"contains a path "+_.toString()+" that is ancestor of another path "+h.toString());_=h}}(_,b)},Qh=function(l,o,u){if(!u||void 0!==o){if(ma(o))throw new Error((0,te.gK)(l,"priority")+"is "+o.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ka(o))throw new Error((0,te.gK)(l,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},sh=function(l,o,u,h){if(!(h&&void 0===u||nh(u)))throw new Error((0,te.gK)(l,o)+'was an invalid key = "'+u+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},oh=function(l,o,u,h){if(!(h&&void 0===u||rh(u)))throw new Error((0,te.gK)(l,o)+'was an invalid path = "'+u+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},_u=function(l,o){if(".info"===Hn(o))throw new Error(l+" failed = Can't modify data under /.info/")},fm=function(l,o){const u=o.path.toString();if("string"!=typeof o.repoInfo.host||0===o.repoInfo.host.length||!nh(o.repoInfo.namespace)&&"localhost"!==o.repoInfo.host.split(":")[0]||0!==u.length&&!function(l){return l&&(l=l.replace(/^\/*\.info(\/|$)/,"/")),rh(l)}(u))throw new Error((0,te.gK)(l,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class rp{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Jh(l,o){let u=null;for(let h=0;h<o.length;h++){const _=o[h],b=_.getPath();null!==u&&!sc(b,u.path)&&(l.eventLists_.push(u),u=null),null===u&&(u={events:[],path:b}),u.events.push(_)}u&&l.eventLists_.push(u)}function ah(l,o,u){Jh(l,u),Xh(l,h=>sc(h,o))}function Ya(l,o,u){Jh(l,u),Xh(l,h=>Xo(h,o)||Xo(o,h))}function Xh(l,o){l.recursionDepth_++;let u=!0;for(let h=0;h<l.eventLists_.length;h++){const _=l.eventLists_[h];_&&(o(_.path)?(vu(l.eventLists_[h]),l.eventLists_[h]=null):u=!1)}u&&(l.eventLists_=[]),l.recursionDepth_--}function vu(l){for(let o=0;o<l.events.length;o++){const u=l.events[o];if(null!==u){l.events[o]=null;const h=u.getEventRunner();Zi&&Rr("event: "+u.toString()),oe(h)}}}const gd="repo_interrupt";class uh{constructor(o,u,h,_){this.repoInfo_=o,this.forceRestClient_=u,this.authTokenProvider_=h,this.appCheckProvider_=_,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new rp,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=As(),this.transactionQueueTree_=new Kh,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function ip(l){const u=l.infoData_.getNode(new pr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+u}function lh(l){return function(l){return(l=l||{}).timestamp=l.timestamp||(new Date).getTime(),l}({timestamp:ip(l)})}function ef(l,o,u,h,_){l.dataUpdateCount++;const b=new pr(o);u=l.interceptServerDataCallback_?l.interceptServerDataCallback_(o,u):u;let M=[];if(_)if(h){const z=(0,te.UI)(u,ne=>Vr(ne));M=function Kf(l,o,u,h){const _=Xd(l,h);if(_){const b=Yf(_),M=b.path,$=b.queryId,z=qs(M,o),ne=Wr.fromObject(u);return Fo(l,M,new Zd(Nf($),z,ne))}return[]}(l.serverSyncTree_,b,z,_)}else{const z=Vr(u);M=function zf(l,o,u,h){const _=Xd(l,h);if(null!=_){const b=Yf(_),M=b.path,$=b.queryId,z=qs(M,o);return Fo(l,M,new al(Nf($),z,u))}return[]}(l.serverSyncTree_,b,z,_)}else if(h){const z=(0,te.UI)(u,ne=>Vr(ne));M=function wc(l,o,u){const h=Wr.fromObject(u);return cd(l,new Zd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},o,h))}(l.serverSyncTree_,b,z)}else{const z=Vr(u);M=yu(l.serverSyncTree_,b,z)}let $=b;M.length>0&&($=Fl(l,b)),Ya(l.eventQueue_,$,M)}function md(l,o){yd(l,"connected",o),!1===o&&function pg(l){Bu(l,"onDisconnectEvents");const o=lh(l),u=As();gu(l.onDisconnect_,gr(),(_,b)=>{const M=ep(_,b,l.serverSyncTree_,o);ol(u,_,M)});let h=[];gu(u,gr(),(_,b)=>{h=h.concat(yu(l.serverSyncTree_,_,b));const M=sf(l,_);Fl(l,M)}),l.onDisconnect_=As(),Ya(l.eventQueue_,gr(),h)}(l)}function yd(l,o,u){const h=new pr("/.info/"+o),_=Vr(u);l.infoData_.updateSnapshot(h,_);const b=yu(l.infoSyncTree_,h,_);Ya(l.eventQueue_,h,b)}function tf(l){return l.nextWriteId_++}function op(l,o,u,h,_){Bu(l,"set",{path:o.toString(),value:u,priority:h});const b=lh(l),M=Vr(u,h),$=ld(l.serverSyncTree_,o),z=th(M,$,b),ne=tf(l),Ne=cl(l.serverSyncTree_,o,z,ne,!0);Jh(l.eventQueue_,Ne),l.server_.put(o.toString(),M.val(!0),(Ye,Mt)=>{const Vt="ok"===Ye;Vt||Sr("set at "+o+" failed: "+Ye);const Cn=wo(l.serverSyncTree_,ne,!Vt);Ya(l.eventQueue_,o,Cn),Qa(0,_,Ye,Mt)});const Fe=sf(l,o);Fl(l,Fe),Ya(l.eventQueue_,Fe,[])}function gg(l,o,u){l.server_.onDisconnectCancel(o.toString(),(h,_)=>{"ok"===h&&Hd(l.onDisconnect_,o),Qa(0,u,h,_)})}function mg(l,o,u,h){const _=Vr(u);l.server_.onDisconnectPut(o.toString(),_.val(!0),(b,M)=>{"ok"===b&&ol(l.onDisconnect_,o,_),Qa(0,h,b,M)})}function Tc(l,o,u){let h;h=".info"===Hn(o._path)?Wf(l.infoSyncTree_,o,u):Wf(l.serverSyncTree_,o,u),ah(l.eventQueue_,o._path,h)}function kl(l){l.persistentConnection_&&l.persistentConnection_.interrupt(gd)}function Bu(l,...o){let u="";l.persistentConnection_&&(u=l.persistentConnection_.id+":"),Rr(u,...o)}function Qa(l,o,u,h){o&&oe(()=>{if("ok"===u)o(null);else{const _=(u||"error").toUpperCase();let b=_;h&&(b+=": "+h);const M=new Error(b);M.code=_,o(M)}})}function Sc(l,o,u){return ld(l.serverSyncTree_,o,u)||An.EMPTY_NODE}function Ja(l,o=l.transactionQueueTree_){if(o||cp(l,o),Ic(o)){const u=rf(l,o);(0,te.hu)(u.length>0,"Sending zero length transaction queue"),u.every(_=>0===_.status)&&function yg(l,o,u){const h=u.map(ne=>ne.currentWriteId),_=Sc(l,o,h);let b=_;const M=_.hash();for(let ne=0;ne<u.length;ne++){const Ne=u[ne];(0,te.hu)(0===Ne.status,"tryToSendTransactionQueue_: items in queue should all be run."),Ne.status=1,Ne.retryCount++;const Fe=qs(o,Ne.path);b=b.updateChild(Fe,Ne.currentOutputSnapshotRaw)}const $=b.val(!0),z=o;l.server_.put(z.toString(),$,ne=>{Bu(l,"transaction put response",{path:z.toString(),status:ne});let Ne=[];if("ok"===ne){const Fe=[];for(let Ye=0;Ye<u.length;Ye++)u[Ye].status=2,Ne=Ne.concat(wo(l.serverSyncTree_,u[Ye].currentWriteId)),u[Ye].onComplete&&Fe.push(()=>u[Ye].onComplete(null,!0,u[Ye].currentOutputSnapshotResolved)),u[Ye].unwatcher();cp(l,tp(l.transactionQueueTree_,o)),Ja(l,l.transactionQueueTree_),Ya(l.eventQueue_,o,Ne);for(let Ye=0;Ye<Fe.length;Ye++)oe(Fe[Ye])}else{if("datastale"===ne)for(let Fe=0;Fe<u.length;Fe++)u[Fe].status=3===u[Fe].status?4:0;else{Sr("transaction at "+z.toString()+" failed: "+ne);for(let Fe=0;Fe<u.length;Fe++)u[Fe].status=4,u[Fe].abortReason=ne}Fl(l,o)}},M)}(l,fd(o),u)}else lg(o)&&Ta(o,u=>{Ja(l,u)})}function Fl(l,o){const u=nf(l,o),h=fd(u);return function lp(l,o,u){if(0===o.length)return;const h=[];let _=[];const M=o.filter($=>0===$.status).map($=>$.currentWriteId);for(let $=0;$<o.length;$++){const z=o[$],ne=qs(u,z.path);let Fe,Ne=!1;if((0,te.hu)(null!==ne,"rerunTransactionsUnderNode_: relativePath should not be null."),4===z.status)Ne=!0,Fe=z.abortReason,_=_.concat(wo(l.serverSyncTree_,z.currentWriteId,!0));else if(0===z.status)if(z.retryCount>=25)Ne=!0,Fe="maxretry",_=_.concat(wo(l.serverSyncTree_,z.currentWriteId,!0));else{const Ye=Sc(l,z.path,M);z.currentInputSnapshot=Ye;const Mt=o[$].update(Ye.val());if(void 0!==Mt){bc("transaction failed: Data returned ",Mt,z.path);let Vt=Vr(Mt);"object"==typeof Mt&&null!=Mt&&(0,te.r3)(Mt,".priority")||(Vt=Vt.updatePriority(Ye.getPriority()));const Wn=z.currentWriteId,vs=lh(l),Rs=th(Vt,Ye,vs);z.currentOutputSnapshotRaw=Vt,z.currentOutputSnapshotResolved=Rs,z.currentWriteId=tf(l),M.splice(M.indexOf(Wn),1),_=_.concat(cl(l.serverSyncTree_,z.path,Rs,z.currentWriteId,z.applyLocally)),_=_.concat(wo(l.serverSyncTree_,Wn,!0))}else Ne=!0,Fe="nodata",_=_.concat(wo(l.serverSyncTree_,z.currentWriteId,!0))}Ya(l.eventQueue_,u,_),_=[],Ne&&(o[$].status=2,setTimeout(o[$].unwatcher,Math.floor(0)),o[$].onComplete&&h.push("nodata"===Fe?()=>o[$].onComplete(null,!1,o[$].currentInputSnapshot):()=>o[$].onComplete(new Error(Fe),!1,null)))}cp(l,l.transactionQueueTree_);for(let $=0;$<h.length;$++)oe(h[$]);Ja(l,l.transactionQueueTree_)}(l,rf(l,u),h),h}function nf(l,o){let u,h=l.transactionQueueTree_;for(u=Hn(o);null!==u&&void 0===Ic(h);)h=tp(h,u),u=Hn(o=ri(o));return h}function rf(l,o){const u=[];return ym(l,o,u),u.sort((h,_)=>h.order-_.order),u}function ym(l,o,u){const h=Ic(o);if(h)for(let _=0;_<h.length;_++)u.push(h[_]);Ta(o,_=>{ym(l,_,u)})}function cp(l,o){const u=Ic(o);if(u){let h=0;for(let _=0;_<u.length;_++)2!==u[_].status&&(u[h]=u[_],h++);u.length=h,np(o,u.length>0?u:void 0)}Ta(o,h=>{cp(l,h)})}function sf(l,o){const u=fd(nf(l,o)),h=tp(l.transactionQueueTree_,o);return function Yh(l,o,u){let h=u?l:l.parent;for(;null!==h;){if(o(h))return!0;h=h.parent}}(h,_=>{af(l,_)}),af(l,h),hd(h,_=>{af(l,_)}),u}function af(l,o){const u=Ic(o);if(u){const h=[];let _=[],b=-1;for(let M=0;M<u.length;M++)3===u[M].status||(1===u[M].status?((0,te.hu)(b===M-1,"All SENT items should be at beginning of queue."),b=M,u[M].status=3,u[M].abortReason="set"):((0,te.hu)(0===u[M].status,"Unexpected transaction status in abort"),u[M].unwatcher(),_=_.concat(wo(l.serverSyncTree_,u[M].currentWriteId,!0)),u[M].onComplete&&h.push(u[M].onComplete.bind(null,new Error("set"),!1,null))));-1===b?np(o,void 0):u.length=b+1,Ya(l.eventQueue_,fd(o),_);for(let M=0;M<h.length;M++)oe(h[M])}}const dp=function(l,o){const u=vm(l),h=u.namespace;return"firebase.com"===u.domain&&ga(u.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!h||"undefined"===h)&&"localhost"!==u.domain&&ga("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),u.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Sr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new ro(u.host,u.secure,h,"ws"===u.scheme||"wss"===u.scheme,o,"",h!==u.subdomain),path:new pr(u.pathString)}},vm=function(l){let o="",u="",h="",_="",b="",M=!0,$="https",z=443;if("string"==typeof l){let ne=l.indexOf("//");ne>=0&&($=l.substring(0,ne-1),l=l.substring(ne+2));let Ne=l.indexOf("/");-1===Ne&&(Ne=l.length);let Fe=l.indexOf("?");-1===Fe&&(Fe=l.length),o=l.substring(0,Math.min(Ne,Fe)),Ne<Fe&&(_=function _m(l){let o="";const u=l.split("/");for(let h=0;h<u.length;h++)if(u[h].length>0){let _=u[h];try{_=decodeURIComponent(_.replace(/\+/g," "))}catch(b){}o+="/"+_}return o}(l.substring(Ne,Fe)));const Ye=function wy(l){const o={};"?"===l.charAt(0)&&(l=l.substring(1));for(const u of l.split("&")){if(0===u.length)continue;const h=u.split("=");2===h.length?o[decodeURIComponent(h[0])]=decodeURIComponent(h[1]):Sr(`Invalid query segment '${u}' in query '${l}'`)}return o}(l.substring(Math.min(l.length,Fe)));ne=o.indexOf(":"),ne>=0?(M="https"===$||"wss"===$,z=parseInt(o.substring(ne+1),10)):ne=o.length;const Mt=o.slice(0,ne);if("localhost"===Mt.toLowerCase())u="localhost";else if(Mt.split(".").length<=2)u=Mt;else{const Vt=o.indexOf(".");h=o.substring(0,Vt).toLowerCase(),u=o.substring(Vt+1),b=h}"ns"in Ye&&(b=Ye.ns)}return{host:o,port:z,domain:u,subdomain:h,secure:M,scheme:$,pathString:_,namespace:b}};class _g{constructor(o,u,h,_){this.eventType=o,this.eventRegistration=u,this.snapshot=h,this.prevName=_}getPath(){const o=this.snapshot.ref;return"value"===this.eventType?o._path:o.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,te.Pz)(this.snapshot.exportVal())}}class wm{constructor(o,u,h){this.eventRegistration=o,this.error=u,this.path=h}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Em{constructor(o,u){this.snapshotCallback=o,this.cancelCallback=u}onValue(o,u){this.snapshotCallback.call(null,o,u)}onCancel(o){return(0,te.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,o)}get hasCancelCallback(){return!!this.cancelCallback}matches(o){return this.snapshotCallback===o.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===o.snapshotCallback.userCallback&&this.snapshotCallback.context===o.snapshotCallback.context}}class hp{constructor(o,u){this._repo=o,this._path=u}cancel(){const o=new te.BH;return gg(this._repo,this._path,o.wrapCallback(()=>{})),o.promise}remove(){_u("OnDisconnect.remove",this._path);const o=new te.BH;return mg(this._repo,this._path,null,o.wrapCallback(()=>{})),o.promise}set(o){_u("OnDisconnect.set",this._path),Da("OnDisconnect.set",o,this._path,!1);const u=new te.BH;return mg(this._repo,this._path,o,u.wrapCallback(()=>{})),u.promise}setWithPriority(o,u){_u("OnDisconnect.setWithPriority",this._path),Da("OnDisconnect.setWithPriority",o,this._path,!1),Qh("OnDisconnect.setWithPriority",u,!1);const h=new te.BH;return function ap(l,o,u,h,_){const b=Vr(u,h);l.server_.onDisconnectPut(o.toString(),b.val(!0),(M,$)=>{"ok"===M&&ol(l.onDisconnect_,o,b),Qa(0,_,M,$)})}(this._repo,this._path,o,u,h.wrapCallback(()=>{})),h.promise}update(o){_u("OnDisconnect.update",this._path),ih("OnDisconnect.update",o,this._path,!1);const u=new te.BH;return function Cc(l,o,u,h){if((0,te.xb)(u))return Rr("onDisconnect().update() called with empty data.  Don't do anything."),void Qa(0,h,"ok",void 0);l.server_.onDisconnectMerge(o.toString(),u,(_,b)=>{"ok"===_&&Jn(u,(M,$)=>{const z=Vr($);ol(l.onDisconnect_,ci(o,M),z)}),Qa(0,h,_,b)})}(this._repo,this._path,o,u.wrapCallback(()=>{})),u.promise}}class Sa{constructor(o,u,h,_){this._repo=o,this._path=u,this._queryParams=h,this._orderByCalled=_}get key(){return Rn(this._path)?null:xf(this._path)}get ref(){return new Fi(this._repo,this._path)}get _queryIdentifier(){const o=Xc(this._queryParams),u=Ju(o);return"{}"===u?"default":u}get _queryObject(){return Xc(this._queryParams)}isEqual(o){if(!((o=(0,te.m9)(o))instanceof Sa))return!1;const u=this._repo===o._repo,h=sc(this._path,o._path);return u&&h&&this._queryIdentifier===o._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function ic(l){let o="";for(let u=l.pieceNum_;u<l.pieces_.length;u++)""!==l.pieces_[u]&&(o+="/"+encodeURIComponent(String(l.pieces_[u])));return o||"/"}(this._path)}}function uf(l,o){if(!0===l._orderByCalled)throw new Error(o+": You can't combine multiple orderBy calls.")}function Ll(l){let o=null,u=null;if(l.hasStart()&&(o=l.getIndexStartValue()),l.hasEnd()&&(u=l.getIndexEndValue()),l.getIndex()===Fn){const h="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",_="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(l.hasStart()){if(l.getIndexStartName()!==ss)throw new Error(h);if("string"!=typeof o)throw new Error(_)}if(l.hasEnd()){if(l.getIndexEndName()!==fr)throw new Error(h);if("string"!=typeof u)throw new Error(_)}}else if(l.getIndex()===ir){if(null!=o&&!Ka(o)||null!=u&&!Ka(u))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,te.hu)(l.getIndex()instanceof Jc||l.getIndex()===ki,"unknown index type."),null!=o&&"object"==typeof o||null!=u&&"object"==typeof u)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function lf(l){if(l.hasStart()&&l.hasEnd()&&l.hasLimit()&&!l.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Fi extends Sa{constructor(o,u){super(o,u,new nn,!1)}get parent(){const o=fu(this._path);return null===o?null:new Fi(this._repo,o)}get root(){let o=this;for(;null!==o.parent;)o=o.parent;return o}}class Ac{constructor(o,u,h){this._node=o,this.ref=u,this._index=h}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(o){const u=new pr(o),h=xc(this.ref,o);return new Ac(this._node.getChild(u),h,ir)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(o){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(h,_)=>o(new Ac(_,xc(this.ref,h),ir)))}hasChild(o){const u=new pr(o);return!this._node.getChild(u).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ey(l,o){return(l=(0,te.m9)(l))._checkNotDeleted("ref"),void 0!==o?xc(l._root,o):l._root}function cf(l,o){(l=(0,te.m9)(l))._checkNotDeleted("refFromURL");const u=dp(o,l._repo.repoInfo_.nodeAdmin);fm("refFromURL",u);const h=u.repoInfo;return!l._repo.repoInfo_.isCustomHost()&&h.host!==l._repo.repoInfo_.host&&ga("refFromURL: Host name does not match the current database: (found "+h.host+" but expected "+l._repo.repoInfo_.host+")"),Ey(l,u.path.toString())}function xc(l,o){return null===Hn((l=(0,te.m9)(l))._path)?(u=o,u&&(u=u.replace(/^\/*\.info(\/|$)/,"/")),oh("child","path",u,!1)):oh("child","path",o,!1),new Fi(l._repo,ci(l._path,o));var u}function df(l,o){l=(0,te.m9)(l),_u("set",l._path),Da("set",o,l._path,!1);const u=new te.BH;return op(l._repo,l._path,o,null,u.wrapCallback(()=>{})),u.promise}function Ig(l,o){ih("update",o,l._path,!1);const u=new te.BH;return function fg(l,o,u,h){Bu(l,"update",{path:o.toString(),value:u});let _=!0;const b=lh(l),M={};if(Jn(u,($,z)=>{_=!1,M[$]=ep(ci(o,$),Vr(z),l.serverSyncTree_,b)}),_)Rr("update() called with empty data.  Don't do anything."),Qa(0,h,"ok",void 0);else{const $=tf(l),z=function $h(l,o,u,h){!function Qp(l,o,u,h){(0,te.hu)(h>l.lastWriteId,"Stacking an older merge on top of newer ones"),l.allWrites.push({path:o,children:u,writeId:h,visible:!0}),l.visibleWrites=Ff(l.visibleWrites,o,u),l.lastWriteId=h}(l.pendingWriteTree_,o,u,h);const _=Wr.fromObject(u);return cd(l,new Zd({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},o,_))}(l.serverSyncTree_,o,M,$);Jh(l.eventQueue_,z),l.server_.merge(o.toString(),u,(ne,Ne)=>{const Fe="ok"===ne;Fe||Sr("update at "+o+" failed: "+ne);const Ye=wo(l.serverSyncTree_,$,!Fe),Mt=Ye.length>0?Fl(l,o):o;Ya(l.eventQueue_,Mt,Ye),Qa(0,h,ne,Ne)}),Jn(u,ne=>{const Ne=sf(l,ci(o,ne));Fl(l,Ne)}),Ya(l.eventQueue_,o,[])}}(l._repo,l._path,o,u.wrapCallback(()=>{})),u.promise}function bg(l){return function sp(l,o){const u=function um(l,o){const u=o._path;let h=null;l.syncPointTree_.foreachOnPath(u,(ne,Ne)=>{const Fe=qs(ne,u);h=h||Di(Ne,Fe)});let _=l.syncPointTree_.get(u);_?h=h||Di(_,gr()):(_=new ad,l.syncPointTree_=l.syncPointTree_.set(u,_));const b=null!=h,M=b?new Sl(h,!0,!1):null;return function eg(l){return nd(l.viewCache_)}(Gf(_,o,Oo(l.pendingWriteTree_,o._path),b?M.getNode():An.EMPTY_NODE,b))}(l.serverSyncTree_,o);return null!=u?Promise.resolve(u):l.server_.get(o).then(h=>{const _=Vr(h).withIndex(o._queryParams.getIndex()),b=yu(l.serverSyncTree_,o._path,_);return ah(l.eventQueue_,o._path,b),Promise.resolve(_)},h=>(Bu(l,"get for query "+(0,te.Pz)(o)+" failed: "+h),Promise.reject(new Error(h))))}((l=(0,te.m9)(l))._repo,l).then(o=>new Ac(o,new Fi(l._repo,l._path),l._queryParams.getIndex()))}class fp{constructor(o){this.callbackContext=o}respondsTo(o){return"value"===o}createEvent(o,u){const h=u._queryParams.getIndex();return new _g("value",this,new Ac(o.snapshotNode,new Fi(u._repo,u._path),h))}getEventRunner(o){return"cancel"===o.getEventType()?()=>this.callbackContext.onCancel(o.error):()=>this.callbackContext.onValue(o.snapshot,null)}createCancelEvent(o,u){return this.callbackContext.hasCancelCallback?new wm(this,o,u):null}matches(o){return o instanceof fp&&(!o.callbackContext||!this.callbackContext||o.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class ch{constructor(o,u){this.eventType=o,this.callbackContext=u}respondsTo(o){let u="children_added"===o?"child_added":o;return u="children_removed"===u?"child_removed":u,this.eventType===u}createCancelEvent(o,u){return this.callbackContext.hasCancelCallback?new wm(this,o,u):null}createEvent(o,u){(0,te.hu)(null!=o.childName,"Child events should have a childName.");const h=xc(new Fi(u._repo,u._path),o.childName),_=u._queryParams.getIndex();return new _g(o.type,this,new Ac(o.snapshotNode,h,_),o.prevName)}getEventRunner(o){return"cancel"===o.getEventType()?()=>this.callbackContext.onCancel(o.error):()=>this.callbackContext.onValue(o.snapshot,o.prevName)}matches(o){return o instanceof ch&&this.eventType===o.eventType&&(!this.callbackContext||!o.callbackContext||this.callbackContext.matches(o.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function hf(l,o,u,h,_){let b;if("object"==typeof h&&(b=void 0,_=h),"function"==typeof h&&(b=h),_&&_.onlyOnce){const z=u,ne=(Ne,Fe)=>{Tc(l._repo,l,$),z(Ne,Fe)};ne.userCallback=u.userCallback,ne.context=u.context,u=ne}const M=new Em(u,b||void 0),$="value"===o?new fp(M):new ch(o,M);return function up(l,o,u){let h;h=".info"===Hn(o._path)?Zh(l.infoSyncTree_,o,u):Zh(l.serverSyncTree_,o,u),ah(l.eventQueue_,o._path,h)}(l._repo,l,$),()=>Tc(l._repo,l,$)}function ff(l,o,u,h){return hf(l,"value",o,u,h)}function pp(l,o,u,h){return hf(l,"child_added",o,u,h)}function _d(l,o,u,h){return hf(l,"child_changed",o,u,h)}function wu(l,o,u,h){return hf(l,"child_moved",o,u,h)}function Cg(l,o,u,h){return hf(l,"child_removed",o,u,h)}function Rc(l,o,u){let h=null;const _=u?new Em(u):null;"value"===o?h=new fp(_):o&&(h=new ch(o,_)),Tc(l._repo,l,h)}class Vu{}class gp extends Vu{constructor(o,u){super(),this._value=o,this._key=u}_apply(o){Da("endAt",this._value,o._path,!0);const u=Fu(o._queryParams,this._value,this._key);if(lf(u),Ll(u),o._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Sa(o._repo,o._path,u,o._orderByCalled)}}class Eu extends Vu{constructor(o,u){super(),this._value=o,this._key=u}_apply(o){Da("endBefore",this._value,o._path,!1);const u=function Lu(l,o,u){let h,_;return l.index_===Fn?("string"==typeof o&&(o=m(o)),_=Fu(l,o,u)):(h=null==u?ss:m(u),_=Fu(l,o,h)),_.endBeforeSet_=!0,_}(o._queryParams,this._value,this._key);if(lf(u),Ll(u),o._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Sa(o._repo,o._path,u,o._orderByCalled)}}class Ws extends Vu{constructor(o,u){super(),this._value=o,this._key=u}_apply(o){Da("startAt",this._value,o._path,!0);const u=fc(o._queryParams,this._value,this._key);if(lf(u),Ll(u),o._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Sa(o._repo,o._path,u,o._orderByCalled)}}class mp extends Vu{constructor(o,u){super(),this._value=o,this._key=u}_apply(o){Da("startAfter",this._value,o._path,!1);const u=function Rf(l,o,u){let h;if(l.index_===Fn)"string"==typeof o&&(o=p(o)),h=fc(l,o,u);else{let _;_=null==u?fr:p(u),h=fc(l,o,_)}return h.startAfterSet_=!0,h}(o._queryParams,this._value,this._key);if(lf(u),Ll(u),o._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Sa(o._repo,o._path,u,o._orderByCalled)}}class Tg extends Vu{constructor(o){super(),this._limit=o}_apply(o){if(o._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Sa(o._repo,o._path,function No(l,o){const u=l.copy();return u.limitSet_=!0,u.limit_=o,u.viewFrom_="l",u}(o._queryParams,this._limit),o._orderByCalled)}}class dh extends Vu{constructor(o){super(),this._limit=o}_apply(o){if(o._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Sa(o._repo,o._path,function hc(l,o){const u=l.copy();return u.limitSet_=!0,u.limit_=o,u.viewFrom_="r",u}(o._queryParams,this._limit),o._orderByCalled)}}class hh extends Vu{constructor(o){super(),this._path=o}_apply(o){uf(o,"orderByChild");const u=new pr(this._path);if(Rn(u))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const h=new Jc(u),_=ba(o._queryParams,h);return Ll(_),new Sa(o._repo,o._path,_,!0)}}class wd extends Vu{_apply(o){uf(o,"orderByKey");const u=ba(o._queryParams,Fn);return Ll(u),new Sa(o._repo,o._path,u,!0)}}class Ed extends Vu{_apply(o){uf(o,"orderByPriority");const u=ba(o._queryParams,ir);return Ll(u),new Sa(o._repo,o._path,u,!0)}}class Cm extends Vu{_apply(o){uf(o,"orderByValue");const u=ba(o._queryParams,ki);return Ll(u),new Sa(o._repo,o._path,u,!0)}}class Tm extends Vu{constructor(o,u){super(),this._value=o,this._key=u}_apply(o){if(Da("equalTo",this._value,o._path,!1),o._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(o._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new gp(this._value,this._key)._apply(new Ws(this._value,this._key)._apply(o))}}function xa(l,...o){let u=(0,te.m9)(l);for(const h of o)u=h._apply(u);return u}(function $f(l){(0,te.hu)(!Hf,"__referenceConstructor has already been defined"),Hf=l})(Fi),function am(l){(0,te.hu)(!Hh,"__referenceConstructor has already been defined"),Hh=l}(Fi);const wp={};function Dm(l,o,u,h,_){let b=h||l.options.databaseURL;void 0===b&&(l.options.projectId||ga("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Rr("Using default host for project ",l.options.projectId),b=`${l.options.projectId}-default-rtdb.firebaseio.com`);let z,ne,M=dp(b,_),$=M.repoInfo;"undefined"!=typeof process&&process.env&&(ne=process.env.FIREBASE_DATABASE_EMULATOR_HOST),ne?(z=!0,b=`http://${ne}?ns=${$.namespace}`,M=dp(b,_),$=M.repoInfo):z=!M.repoInfo.secure;const Ne=_&&z?new Zt(Zt.OWNER):new Bt(l.name,l.options,o);fm("Invalid Firebase Database URL",M),Rn(M.path)||ga("Database URL must point to the root of a Firebase Database (not including a child path).");const Fe=function Sm(l,o,u,h){let _=wp[o.name];_||(_={},wp[o.name]=_);let b=_[l.toURLString()];return b&&ga("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),b=new uh(l,false,u,h),_[l.toURLString()]=b,b}($,l,Ne,new pt(l.name,u));return new Am(Fe,l)}class Am{constructor(o,u){this._repoInternal=o,this.app=u,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function gm(l,o,u){if(l.stats_=bh(l.repoInfo_),l.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)l.server_=new pc(l.repoInfo_,(h,_,b,M)=>{ef(l,h,_,b,M)},l.authTokenProvider_,l.appCheckProvider_),setTimeout(()=>md(l,!0),0);else{if(null!=u){if("object"!=typeof u)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,te.Pz)(u)}catch(h){throw new Error("Invalid authOverride provided: "+h)}}l.persistentConnection_=new Ia(l.repoInfo_,o,(h,_,b,M)=>{ef(l,h,_,b,M)},h=>{md(l,h)},h=>{!function vy(l,o){Jn(o,(u,h)=>{yd(l,u,h)})}(l,h)},l.authTokenProvider_,l.appCheckProvider_,u),l.server_=l.persistentConnection_}l.authTokenProvider_.addTokenChangeListener(h=>{l.server_.refreshAuthToken(h)}),l.appCheckProvider_.addTokenChangeListener(h=>{l.server_.refreshAppCheckToken(h.token)}),l.statsReporter_=function Kl(l,o){const u=l.toString();return zl[u]||(zl[u]=o()),zl[u]}(l.repoInfo_,()=>new ay(l.stats_,l.server_)),l.infoData_=new Ph,l.infoSyncTree_=new ud({startListening:(h,_,b,M)=>{let $=[];const z=l.infoData_.getNode(h._path);return z.isEmpty()||($=yu(l.infoSyncTree_,h._path,z),setTimeout(()=>{M("ok")},0)),$},stopListening:()=>{}}),yd(l,"connected",!1),l.serverSyncTree_=new ud({startListening:(h,_,b,M)=>(l.server_.listen(h,b,_,($,z)=>{const ne=M($,z);Ya(l.eventQueue_,h._path,ne)}),[]),stopListening:(h,_)=>{l.server_.unlisten(h,_)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Fi(this._repo,gr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Ip(l,o){const u=wp[o];(!u||u[l.key]!==l)&&ga(`Database ${o}(${l.repoInfo_}) has already been deleted.`),kl(l),delete u[l.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(o){null===this._rootInternal&&ga("Cannot call "+o+" on a deleted database.")}}function xm(){El.IS_TRANSPORT_INITIALIZED&&Sr("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Iy(){xm(),du.forceDisallow()}function Rm(){xm(),Qo.forceDisallow(),du.forceAllow()}function Pm(l,o){pa(l,o)}const ph={".sv":"timestamp"};class Om{constructor(o,u){this.committed=o,this.snapshot=u}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Ia.prototype.simpleListen=function(l,o){this.sendRequest("q",{p:l},o)},Ia.prototype.echo=function(l,o){this.sendRequest("echo",{d:l},o)},function Ag(l){Hs(es.SDK_VERSION),(0,es._registerComponent)(new hr.wA("database",(o,{instanceIdentifier:u})=>Dm(o.getProvider("app").getImmediate(),o.getProvider("auth-internal"),o.getProvider("app-check-internal"),u),"PUBLIC").setMultipleInstances(!0)),(0,es.registerVersion)(_l,"0.13.1",l),(0,es.registerVersion)(_l,"0.13.1","esm2017")}();const Dy=new Su.Yd("@firebase/database-compat"),Id=function(l){Dy.warn("FIREBASE WARNING: "+l)};class Lm{constructor(o){this._delegate=o}cancel(o){(0,te.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,te.Wj)("OnDisconnect.cancel","onComplete",o,!0);const u=this._delegate.cancel();return o&&u.then(()=>o(null),h=>o(h)),u}remove(o){(0,te.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,te.Wj)("OnDisconnect.remove","onComplete",o,!0);const u=this._delegate.remove();return o&&u.then(()=>o(null),h=>o(h)),u}set(o,u){(0,te.Dv)("OnDisconnect.set",1,2,arguments.length),(0,te.Wj)("OnDisconnect.set","onComplete",u,!0);const h=this._delegate.set(o);return u&&h.then(()=>u(null),_=>u(_)),h}setWithPriority(o,u,h){(0,te.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,te.Wj)("OnDisconnect.setWithPriority","onComplete",h,!0);const _=this._delegate.setWithPriority(o,u);return h&&_.then(()=>h(null),b=>h(b)),_}update(o,u){if((0,te.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(o)){const _={};for(let b=0;b<o.length;++b)_[""+b]=o[b];o=_,Id("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,te.Wj)("OnDisconnect.update","onComplete",u,!0);const h=this._delegate.update(o);return u&&h.then(()=>u(null),_=>u(_)),h}}class Um{constructor(o,u){this.committed=o,this.snapshot=u}toJSON(){return(0,te.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Hu{constructor(o,u){this._database=o,this._delegate=u}val(){return(0,te.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,te.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,te.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,te.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(o){return(0,te.Dv)("DataSnapshot.child",0,1,arguments.length),o=String(o),oh("DataSnapshot.child","path",o,!1),new Hu(this._database,this._delegate.child(o))}hasChild(o){return(0,te.Dv)("DataSnapshot.hasChild",1,1,arguments.length),oh("DataSnapshot.hasChild","path",o,!1),this._delegate.hasChild(o)}getPriority(){return(0,te.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(o){return(0,te.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,te.Wj)("DataSnapshot.forEach","action",o,!1),this._delegate.forEach(u=>o(new Hu(this._database,u)))}hasChildren(){return(0,te.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,te.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,te.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ra(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Eo{constructor(o,u){this.database=o,this._delegate=u}on(o,u,h,_){var b;(0,te.Dv)("Query.on",2,4,arguments.length),(0,te.Wj)("Query.on","callback",u,!1);const M=Eo.getCancelAndContextArgs_("Query.on",h,_),$=(ne,Ne)=>{u.call(M.context,new Hu(this.database,ne),Ne)};$.userCallback=u,$.context=M.context;const z=null===(b=M.cancel)||void 0===b?void 0:b.bind(M.context);switch(o){case"value":return ff(this._delegate,$,z),u;case"child_added":return pp(this._delegate,$,z),u;case"child_removed":return Cg(this._delegate,$,z),u;case"child_changed":return _d(this._delegate,$,z),u;case"child_moved":return wu(this._delegate,$,z),u;default:throw new Error((0,te.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(o,u,h){if((0,te.Dv)("Query.off",0,3,arguments.length),function(l,o,u){if(void 0!==o)switch(o){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,te.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,o),(0,te.Wj)("Query.off","callback",u,!0),(0,te.lb)("Query.off","context",h,!0),u){const _=()=>{};_.userCallback=u,_.context=h,Rc(this._delegate,o,_)}else Rc(this._delegate,o)}get(){return bg(this._delegate).then(o=>new Hu(this.database,o))}once(o,u,h,_){(0,te.Dv)("Query.once",1,4,arguments.length),(0,te.Wj)("Query.once","callback",u,!0);const b=Eo.getCancelAndContextArgs_("Query.once",h,_),M=new te.BH,$=(ne,Ne)=>{const Fe=new Hu(this.database,ne);u&&u.call(b.context,Fe,Ne),M.resolve(Fe)};$.userCallback=u,$.context=b.context;const z=ne=>{b.cancel&&b.cancel.call(b.context,ne),M.reject(ne)};switch(o){case"value":ff(this._delegate,$,z,{onlyOnce:!0});break;case"child_added":pp(this._delegate,$,z,{onlyOnce:!0});break;case"child_removed":Cg(this._delegate,$,z,{onlyOnce:!0});break;case"child_changed":_d(this._delegate,$,z,{onlyOnce:!0});break;case"child_moved":wu(this._delegate,$,z,{onlyOnce:!0});break;default:throw new Error((0,te.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return M.promise}limitToFirst(o){return(0,te.Dv)("Query.limitToFirst",1,1,arguments.length),new Eo(this.database,xa(this._delegate,function Mc(l){if("number"!=typeof l||Math.floor(l)!==l||l<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Tg(l)}(o)))}limitToLast(o){return(0,te.Dv)("Query.limitToLast",1,1,arguments.length),new Eo(this.database,xa(this._delegate,function Pc(l){if("number"!=typeof l||Math.floor(l)!==l||l<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new dh(l)}(o)))}orderByChild(o){return(0,te.Dv)("Query.orderByChild",1,1,arguments.length),new Eo(this.database,xa(this._delegate,function Nc(l){if("$key"===l)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===l)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===l)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return oh("orderByChild","path",l,!1),new hh(l)}(o)))}orderByKey(){return(0,te.Dv)("Query.orderByKey",0,0,arguments.length),new Eo(this.database,xa(this._delegate,function Oc(){return new wd}()))}orderByPriority(){return(0,te.Dv)("Query.orderByPriority",0,0,arguments.length),new Eo(this.database,xa(this._delegate,function fh(){return new Ed}()))}orderByValue(){return(0,te.Dv)("Query.orderByValue",0,0,arguments.length),new Eo(this.database,xa(this._delegate,function yp(){return new Cm}()))}startAt(o=null,u){return(0,te.Dv)("Query.startAt",0,2,arguments.length),new Eo(this.database,xa(this._delegate,function vd(l=null,o){return sh("startAt","key",o,!0),new Ws(l,o)}(o,u)))}startAfter(o=null,u){return(0,te.Dv)("Query.startAfter",0,2,arguments.length),new Eo(this.database,xa(this._delegate,function Aa(l,o){return sh("startAfter","key",o,!0),new mp(l,o)}(o,u)))}endAt(o=null,u){return(0,te.Dv)("Query.endAt",0,2,arguments.length),new Eo(this.database,xa(this._delegate,function ju(l,o){return sh("endAt","key",o,!0),new gp(l,o)}(o,u)))}endBefore(o=null,u){return(0,te.Dv)("Query.endBefore",0,2,arguments.length),new Eo(this.database,xa(this._delegate,function pf(l,o){return sh("endBefore","key",o,!0),new Eu(l,o)}(o,u)))}equalTo(o,u){return(0,te.Dv)("Query.equalTo",1,2,arguments.length),new Eo(this.database,xa(this._delegate,function _p(l,o){return sh("equalTo","key",o,!0),new Tm(l,o)}(o,u)))}toString(){return(0,te.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,te.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(o){if((0,te.Dv)("Query.isEqual",1,1,arguments.length),!(o instanceof Eo))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(o._delegate)}static getCancelAndContextArgs_(o,u,h){const _={cancel:void 0,context:void 0};if(u&&h)_.cancel=u,(0,te.Wj)(o,"cancel",_.cancel,!0),_.context=h,(0,te.lb)(o,"context",_.context,!0);else if(u)if("object"==typeof u&&null!==u)_.context=u;else{if("function"!=typeof u)throw new Error((0,te.gK)(o,"cancelOrContext")+" must either be a cancel callback or a context object.");_.cancel=u}return _}get ref(){return new Ra(this.database,new Fi(this._delegate._repo,this._delegate._path))}}class Ra extends Eo{constructor(o,u){super(o,new Sa(u._repo,u._path,new nn,!1)),this.database=o,this._delegate=u}getKey(){return(0,te.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(o){return(0,te.Dv)("Reference.child",1,1,arguments.length),"number"==typeof o&&(o=String(o)),new Ra(this.database,xc(this._delegate,o))}getParent(){(0,te.Dv)("Reference.parent",0,0,arguments.length);const o=this._delegate.parent;return o?new Ra(this.database,o):null}getRoot(){return(0,te.Dv)("Reference.root",0,0,arguments.length),new Ra(this.database,this._delegate.root)}set(o,u){(0,te.Dv)("Reference.set",1,2,arguments.length),(0,te.Wj)("Reference.set","onComplete",u,!0);const h=df(this._delegate,o);return u&&h.then(()=>u(null),_=>u(_)),h}update(o,u){if((0,te.Dv)("Reference.update",1,2,arguments.length),Array.isArray(o)){const _={};for(let b=0;b<o.length;++b)_[""+b]=o[b];o=_,Id("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}_u("Reference.update",this._delegate._path),(0,te.Wj)("Reference.update","onComplete",u,!0);const h=Ig(this._delegate,o);return u&&h.then(()=>u(null),_=>u(_)),h}setWithPriority(o,u,h){(0,te.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,te.Wj)("Reference.setWithPriority","onComplete",h,!0);const _=function Eg(l,o,u){if(_u("setWithPriority",l._path),Da("setWithPriority",o,l._path,!1),Qh("setWithPriority",u,!1),".length"===l.key||".keys"===l.key)throw"setWithPriority failed: "+l.key+" is a read-only object.";const h=new te.BH;return op(l._repo,l._path,o,u,h.wrapCallback(()=>{})),h.promise}(this._delegate,o,u);return h&&_.then(()=>h(null),b=>h(b)),_}remove(o){(0,te.Dv)("Reference.remove",0,1,arguments.length),(0,te.Wj)("Reference.remove","onComplete",o,!0);const u=function bm(l){return _u("remove",l._path),df(l,null)}(this._delegate);return o&&u.then(()=>o(null),h=>o(h)),u}transaction(o,u,h){(0,te.Dv)("Reference.transaction",1,3,arguments.length),(0,te.Wj)("Reference.transaction","transactionUpdate",o,!1),(0,te.Wj)("Reference.transaction","onComplete",u,!0),function(l,o,u,h){if(void 0!==u&&"boolean"!=typeof u)throw new Error((0,te.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,h);const _=function Cy(l,o,u){var h;if(l=(0,te.m9)(l),_u("Reference.transaction",l._path),".length"===l.key||".keys"===l.key)throw"Reference.transaction failed: "+l.key+" is a read-only object.";const _=null===(h=null==u?void 0:u.applyLocally)||void 0===h||h,b=new te.BH,$=ff(l,()=>{});return function mm(l,o,u,h,_,b){Bu(l,"transaction on "+o);const M={path:o,update:u,onComplete:h,status:null,order:gs(),applyLocally:b,retryCount:0,unwatcher:_,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},$=Sc(l,o,void 0);M.currentInputSnapshot=$;const z=M.update($.val());if(void 0===z)M.unwatcher(),M.currentOutputSnapshotRaw=null,M.currentOutputSnapshotResolved=null,M.onComplete&&M.onComplete(null,!1,M.currentInputSnapshot);else{bc("transaction failed: Data returned ",z,M.path),M.status=0;const ne=tp(l.transactionQueueTree_,o),Ne=Ic(ne)||[];let Fe;Ne.push(M),np(ne,Ne),"object"==typeof z&&null!==z&&(0,te.r3)(z,".priority")?(Fe=(0,te.DV)(z,".priority"),(0,te.hu)(Ka(Fe),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Fe=(ld(l.serverSyncTree_,o)||An.EMPTY_NODE).getPriority().val();const Ye=lh(l),Mt=Vr(z,Fe),Vt=th(Mt,$,Ye);M.currentOutputSnapshotRaw=Mt,M.currentOutputSnapshotResolved=Vt,M.currentWriteId=tf(l);const Cn=cl(l.serverSyncTree_,o,Vt,M.currentWriteId,M.applyLocally);Ya(l.eventQueue_,o,Cn),Ja(l,l.transactionQueueTree_)}}(l._repo,l._path,o,(z,ne,Ne)=>{let Fe=null;z?b.reject(z):(Fe=new Ac(Ne,new Fi(l._repo,l._path),ir),b.resolve(new Om(ne,Fe)))},$,_),b.promise}(this._delegate,o,{applyLocally:h}).then(b=>new Um(b.committed,new Hu(this.database,b.snapshot)));return u&&_.then(b=>u(null,b.committed,b.snapshot),b=>u(b,!1,null)),_}setPriority(o,u){(0,te.Dv)("Reference.setPriority",1,2,arguments.length),(0,te.Wj)("Reference.setPriority","onComplete",u,!0);const h=function wg(l,o){l=(0,te.m9)(l),_u("setPriority",l._path),Qh("setPriority",o,!1);const u=new te.BH;return op(l._repo,ci(l._path,".priority"),o,null,u.wrapCallback(()=>{})),u.promise}(this._delegate,o);return u&&h.then(()=>u(null),_=>u(_)),h}push(o,u){(0,te.Dv)("Reference.push",0,2,arguments.length),(0,te.Wj)("Reference.push","onComplete",u,!0);const h=function Im(l,o){l=(0,te.m9)(l),_u("push",l._path),Da("push",o,l._path,!0);const u=ip(l._repo),h=E(u),_=xc(l,h),b=xc(l,h);let M;return M=null!=o?df(b,o).then(()=>b):Promise.resolve(b),_.then=M.then.bind(M),_.catch=M.then.bind(M,void 0),_}(this._delegate,o),_=h.then(M=>new Ra(this.database,M));u&&_.then(()=>u(null),M=>u(M));const b=new Ra(this.database,h);return b.then=_.then.bind(_),b.catch=_.catch.bind(_,void 0),b}onDisconnect(){return _u("Reference.onDisconnect",this._delegate._path),new Lm(new hp(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class gh{constructor(o,u){this._delegate=o,this.app=u,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Iy,forceLongPolling:Rm}}useEmulator(o,u,h={}){!function Cp(l,o,u,h={}){(l=(0,te.m9)(l))._checkNotDeleted("useEmulator"),l._instanceStarted&&ga("Cannot call useEmulator() after instance has already been initialized.");const _=l._repoInternal;let b;if(_.repoInfo_.nodeAdmin)h.mockUserToken&&ga('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),b=new Zt(Zt.OWNER);else if(h.mockUserToken){const M="string"==typeof h.mockUserToken?h.mockUserToken:(0,te.Sg)(h.mockUserToken,l.app.options.projectId);b=new Zt(M)}!function Dg(l,o,u,h){l.repoInfo_=new ro(`${o}:${u}`,!1,l.repoInfo_.namespace,l.repoInfo_.webSocketOnly,l.repoInfo_.nodeAdmin,l.repoInfo_.persistenceKey,l.repoInfo_.includeNamespaceInQueryParams),h&&(l.authTokenProvider_=h)}(_,o,u,b)}(this._delegate,o,u,h)}ref(o){if((0,te.Dv)("database.ref",0,1,arguments.length),o instanceof Ra){const u=cf(this._delegate,o.toString());return new Ra(this,u)}{const u=Ey(this._delegate,o);return new Ra(this,u)}}refFromURL(o){(0,te.Dv)("database.refFromURL",1,1,arguments.length);const h=cf(this._delegate,o);return new Ra(this,h)}goOffline(){return(0,te.Dv)("database.goOffline",0,0,arguments.length),function Mm(l){(l=(0,te.m9)(l))._checkNotDeleted("goOffline"),kl(l._repo)}(this._delegate)}goOnline(){return(0,te.Dv)("database.goOnline",0,0,arguments.length),function Sg(l){(l=(0,te.m9)(l))._checkNotDeleted("goOnline"),function Dc(l){l.persistentConnection_&&l.persistentConnection_.resume(gd)}(l._repo)}(this._delegate)}}gh.ServerValue={TIMESTAMP:function gf(){return ph}(),increment:l=>function Nm(l){return{".sv":{increment:l}}}(l)};var Bm=Object.freeze({__proto__:null,initStandalone:function xg({app:l,url:o,version:u,customAuthImpl:h,namespace:_,nodeAdmin:b=!1}){Hs(u);const M=new hr.zt("auth-internal",new hr.H0("database-standalone"));return M.setComponent(new hr.wA("auth-internal",()=>h,"PRIVATE")),{instance:new gh(Dm(l,M,void 0,o,b),l),namespace:_}}});const Vm=gh.ServerValue;function Dp(l){return null==l}function Sp(l){return"function"==typeof l.set}function kc(l,o){return Sp(o)?o:l.ref(o)}function Sy(l,o){if(function yf(l){return"string"==typeof l}(l))return o.stringCase();if(Sp(l))return o.firebaseCase();if(function vr(l){return"function"==typeof l.exportVal}(l))return o.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof l)}function kr(l,o,u="on",h=Ji.z){return new Ht.y(_=>{let b=null;return b=l[u](o,(M,$)=>{h.schedule(()=>{_.next({snapshot:M,prevKey:$})}),"once"===u&&h.schedule(()=>_.complete())},M=>{h.schedule(()=>_.error(M))}),"on"===u?{unsubscribe(){null!=b&&l.off(o,b)}}:{unsubscribe(){}}}).pipe((0,Zr.U)(_=>{const{snapshot:b,prevKey:M}=_;let $=null;return b.exists()&&($=b.key),{type:o,payload:b,prevKey:M,key:$}}),(0,Or.B)())}function hl(l,o){const u=l.length;for(let h=0;h<u;h++)if(l[h].payload.key===o)return h;return-1}function Hm(l,o){const{payload:u,prevKey:h,key:_}=o,b=hl(l,_),M=function mh(l,o){if(Dp(o))return 0;{const u=hl(l,o);return-1===u?l.length:u+1}}(l,h);switch(o.type){case"value":if(o.payload&&o.payload.exists()){let $=null;o.payload.forEach(z=>{const ne={payload:z,type:"value",prevKey:$,key:z.key};return $=z.key,l=[...l,ne],!1})}return l;case"child_added":if(b>-1){const $=l[b-1];($&&$.key||null)!==h&&(l=l.filter(z=>z.payload.key!==u.key)).splice(M,0,o)}else{if(null==h)return[o,...l];(l=l.slice()).splice(M,0,o)}return l;case"child_removed":return l.filter($=>$.payload.key!==u.key);case"child_changed":return l.map($=>$.payload.key===_?o:$);case"child_moved":if(b>-1){const $=l.splice(b,1)[0];return(l=l.slice()).splice(M,0,$),l}return l;default:return l}}function bd(l){return(Dp(l)||0===l.length)&&(l=["child_added","child_removed","child_changed","child_moved"]),l}function _f(l,o,u){return function Lo(l,o,u){return kr(l,"value","once",u).pipe((0,Tr.w)(h=>{const _=[(0,Bn.of)(h)];return o.forEach(b=>_.push(kr(l,b,"on",u))),(0,da.T)(..._).pipe((0,yn.R)(Hm,[]))}),(0,ha.x)())}(l,o=bd(o),u)}function Rg(l,o,u){const h=(o=bd(o)).map(_=>kr(l,_,"on",u));return(0,da.T)(...h)}function Ay(l,o){return function(h,_){return Sy(h,{stringCase:()=>l.child(h)[o](_),firebaseCase:()=>h[o](_),snapshotCase:()=>h.ref[o](_)})}}function Li(l){return function(u){return u?Sy(u,{stringCase:()=>l.child(u).remove(),firebaseCase:()=>u.remove(),snapshotCase:()=>u.ref.remove()}):l.remove()}}function Pg(l,o){return function(){return kr(l,"value","on",o)}}!function jm(l){l.INTERNAL.registerComponent(new hr.wA("database-compat",(o,{instanceIdentifier:u})=>{const h=o.getProvider("app-compat").getImmediate(),_=o.getProvider("database").getImmediate({identifier:u});return new gh(_,h)},"PUBLIC").setServiceProps({Reference:Ra,Query:Eo,Database:gh,DataSnapshot:Hu,enableLogging:Pm,INTERNAL:Bm,ServerValue:Vm}).setMultipleInstances(!0)),l.registerVersion("@firebase/database-compat","0.2.1")}(ws.Z);const Zm=new v.OlP("angularfire2.realtimeDatabaseURL"),Ng=new v.OlP("angularfire2.database.use-emulator");let Gm=(()=>{class l{constructor(u,h,_,b,M,$,z,ne,Ne,Fe,Ye,Mt,Vt,Cn,Wn){this.schedulers=$;const vs=z,Rs=(0,Tn.on)(u,M,h);ne&&(0,_t.nw)(Rs,M,Ne,Ye,Mt,Vt,Fe,Cn),this.database=(0,Tn.cc)(`${Rs.name}.database.${_}`,"AngularFireDatabase",Rs.name,()=>{const fi=M.runOutsideAngular(()=>Rs.database(_||void 0));return vs&&fi.useEmulator(...vs),fi},[vs])}list(u,h){const _=this.schedulers.ngZone.runOutsideAngular(()=>kc(this.database,u));let b=_;return h&&(b=h(_)),function $m(l,o){const u=o.schedulers.outsideAngular,h=o.schedulers.ngZone.run(()=>l.ref);return{query:l,update:Ay(h,"update"),set:Ay(h,"set"),push:_=>h.push(_),remove:Li(h),snapshotChanges:_=>_f(l,_,u).pipe(Xt.iC),stateChanges:_=>Rg(l,_,u).pipe(Xt.iC),auditTrail:_=>function Ap(l,o,u){return function Mg(l,o,u){return function yh(l,o){return kr(l,"value","on",o).pipe((0,Zr.U)(u=>{let h;return u.payload.forEach(_=>(h=_.key,!1)),{data:u,lastKeyToLoad:h}}))}(l,u).pipe(function Md(...l){const o=(0,kt.jO)(l);return(0,Cr.e)((u,h)=>{const _=l.length,b=new Array(_);let M=l.map(()=>!1),$=!1;for(let z=0;z<_;z++)(0,nr.Xf)(l[z]).subscribe((0,Ai.x)(h,ne=>{b[z]=ne,!$&&!M[z]&&(M[z]=!0,($=M.every(Rd.y))&&(M=null))},kn.Z));u.subscribe((0,Ai.x)(h,z=>{if($){const ne=[z,...b];h.next(o?o(...ne):ne)}}))})}(o),(0,Zr.U)(([_,b])=>{const M=_.lastKeyToLoad,$=b.map(z=>z.key);return{actions:b,lastKeyToLoad:M,loadedKeys:$}}),function Pd(l){return(0,Cr.e)((o,u)=>{let h=!1,_=0;o.subscribe((0,Ai.x)(u,b=>(h||(h=!l(b,_++)))&&u.next(b)))})}(_=>-1===_.loadedKeys.indexOf(_.lastKeyToLoad)),(0,Zr.U)(_=>_.actions))}(l,Rg(l,o).pipe((0,yn.R)((_,b)=>[..._,b],[])),u)}(l,_,u).pipe(Xt.iC),valueChanges:(_,b)=>_f(l,_,u).pipe((0,Zr.U)($=>$.map(z=>b&&b.idField?Object.assign(Object.assign({},z.payload.val()),{[b.idField]:z.key}):z.payload.val())),Xt.iC)}}(b,this)}object(u){return function _s(l,o){return{query:l,snapshotChanges:()=>Pg(l,o.schedulers.outsideAngular)().pipe(Xt.iC),update:u=>l.ref.update(u),set:u=>l.ref.set(u),remove:()=>l.ref.remove(),valueChanges:()=>Pg(l,o.schedulers.outsideAngular)().pipe(Xt.iC,(0,Zr.U)(h=>h.payload.exists()?h.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>kc(this.database,u)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return l.\u0275fac=function(u){return new(u||l)(v.LFG(Tn.Dh),v.LFG(Tn.xv,8),v.LFG(Zm,8),v.LFG(v.Lbi),v.LFG(v.R0b),v.LFG(Xt.HU),v.LFG(Ng,8),v.LFG(_t.zQ,8),v.LFG(_t.Qv,8),v.LFG(_t.L6,8),v.LFG(_t._Q,8),v.LFG(_t.rT,8),v.LFG(_t.lh,8),v.LFG(_t.f7,8),v.LFG(re.nm,8))},l.\u0275prov=v.Yz7({token:l,factory:l.\u0275fac,providedIn:"any"}),l})(),Og=(()=>{class l{constructor(){ge.Z.registerVersion("angularfire",Xt.q4.full,"rtdb-compat")}}return l.\u0275fac=function(u){return new(u||l)},l.\u0275mod=v.oAB({type:l}),l.\u0275inj=v.cJS({providers:[Gm]}),l})(),kg=(()=>{class l{}return l.\u0275fac=function(u){return new(u||l)},l.\u0275mod=v.oAB({type:l}),l.\u0275inj=v.cJS({providers:[vn.e],imports:[[S.ez]]}),l})(),qm=(()=>{class l{}return l.\u0275fac=function(u){return new(u||l)},l.\u0275mod=v.oAB({type:l}),l.\u0275inj=v.cJS({imports:[[S.ez]]}),l})();var xy=V(520);let Wm=(()=>{class l{}return l.\u0275fac=function(u){return new(u||l)},l.\u0275mod=v.oAB({type:l,bootstrap:[Lr]}),l.\u0275inj=v.cJS({providers:[vn.e],imports:[[wr,wi,_t.ww,Tn.hO,ln,yo.yb,Og,Tn.hO.initializeApp(Si_firebaseConfig),kg,qm,xy.JF]]}),l})();(0,v.G48)(),Mr().bootstrapModule(Wm).catch(l=>console.error(l))},5867:(Rt,Ve,V)=>{V.d(Ve,{C6:()=>S.getApps,Mq:()=>S.getApp});var S=V(9681);(0,S.registerVersion)("firebase","9.8.3","app")},127:(Rt,Ve,V)=>{V.d(Ve,{Z:()=>S.Z});var S=V(3942);S.Z.registerVersion("firebase","9.8.3","app-compat")},9916:(Rt,Ve,V)=>{V.r(Ve);var S=V(5861),v=V(3942),J=V(2090),Ce=V(9681),Ee=V(655),ve=V(1877),Me=V(4859);const at=function It(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},bt=function nt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ze=new J.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ie=new ve.Yd("@firebase/auth");function At(E,...p){Ie.logLevel<=ve.in.ERROR&&Ie.error(`Auth (${Ce.SDK_VERSION}): ${E}`,...p)}function Xe(E,...p){throw yt(E,...p)}function Ke(E,...p){return yt(E,...p)}function je(E,p,m){const D=Object.assign(Object.assign({},bt()),{[p]:m});return new J.LL("auth","Firebase",D).create(p,{appName:E.name})}function Je(E,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&Xe(E,"argument-error"),je(E,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function yt(E,...p){if("string"!=typeof E){const m=p[0],D=[...p.slice(1)];return D[0]&&(D[0].appName=E.name),E._errorFactory.create(m,...D)}return Ze.create(E,...p)}function X(E,p,...m){if(!E)throw yt(p,...m)}function ze(E){const p="INTERNAL ASSERTION FAILED: "+E;throw At(p),new Error(p)}function ue(E,p){E||ze(p)}const Se=new Map;function Ae(E){ue(E instanceof Function,"Expected a class definition");let p=Se.get(E);return p?(ue(p instanceof E,"Instance stored in cache mismatched with class"),p):(p=new E,Se.set(E,p),p)}function mt(){var E;return"undefined"!=typeof self&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function Tt(){return"http:"===xt()||"https:"===xt()}function xt(){var E;return"undefined"!=typeof self&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class cn{constructor(p,m){this.shortDelay=p,this.longDelay=m,ue(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,J.uI)()||(0,J.b$)()}get(){return function Lt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Tt()||(0,J.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Yt(E,p){ue(E.emulator,"Emulator should always be set here");const{url:m}=E.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class Wt{static initialize(p,m,D){this.fetchImpl=p,m&&(this.headersImpl=m),D&&(this.responseImpl=D)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ze("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ze("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ze("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const $t={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},mn=new cn(3e4,6e4);function sn(E,p){return E.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:E.tenantId}):p}function _n(E,p,m,D){return mr.apply(this,arguments)}function mr(){return(mr=(0,S.Z)(function*(E,p,m,D,H={}){return er(E,H,(0,S.Z)(function*(){let Y={},be={};D&&("GET"===p?be=D:Y={body:JSON.stringify(D)});const Qe=(0,J.xO)(Object.assign({key:E.config.apiKey},be)).slice(1),St=yield E._getAdditionalHeaders();return St["Content-Type"]="application/json",E.languageCode&&(St["X-Firebase-Locale"]=E.languageCode),Wt.fetch()(Kn(E,E.config.apiHost,m,Qe),Object.assign({method:p,headers:St,referrerPolicy:"no-referrer"},Y))}))})).apply(this,arguments)}function er(E,p,m){return cr.apply(this,arguments)}function cr(){return(cr=(0,S.Z)(function*(E,p,m){E._canInitEmulator=!1;const D=Object.assign(Object.assign({},$t),p);try{const H=new wr(E),Y=yield Promise.race([m(),H.promise]);H.clearNetworkTimeout();const be=yield Y.json();if("needConfirmation"in be)throw Yn(E,"account-exists-with-different-credential",be);if(Y.ok&&!("errorMessage"in be))return be;{const Qe=Y.ok?be.errorMessage:be.error.message,[St,Ut]=Qe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===St)throw Yn(E,"credential-already-in-use",be);if("EMAIL_EXISTS"===St)throw Yn(E,"email-already-in-use",be);if("USER_DISABLED"===St)throw Yn(E,"user-disabled",be);const pn=D[St]||St.toLowerCase().replace(/[_\s]+/g,"-");if(Ut)throw je(E,pn,Ut);Xe(E,pn)}}catch(H){if(H instanceof J.ZR)throw H;Xe(E,"network-request-failed")}})).apply(this,arguments)}function zn(E,p,m,D){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,S.Z)(function*(E,p,m,D,H={}){const Y=yield _n(E,p,m,D,H);return"mfaPendingCredential"in Y&&Xe(E,"multi-factor-auth-required",{_serverResponse:Y}),Y})).apply(this,arguments)}function Kn(E,p,m,D){const H=`${p}${m}?${D}`;return E.config.emulator?Yt(E.config,H):`${E.config.apiScheme}://${H}`}class wr{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,D)=>{this.timer=setTimeout(()=>D(Ke(this.auth,"network-request-failed")),mn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Yn(E,p,m){const D={appName:E.name};m.email&&(D.email=m.email),m.phoneNumber&&(D.phoneNumber=m.phoneNumber);const H=Ke(E,p,D);return H.customData._tokenResponse=m,H}function xn(){return(xn=(0,S.Z)(function*(E,p){return _n(E,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Mn(E,p){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,S.Z)(function*(E,p){return _n(E,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Yi(E,p){return mi.apply(this,arguments)}function mi(){return(mi=(0,S.Z)(function*(E,p){return _n(E,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function tt(E){if(E)try{const p=new Date(Number(E));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function dt(){return(dt=(0,S.Z)(function*(E,p=!1){const m=(0,J.m9)(E),D=yield m.getIdToken(p),H=ft(D);X(H&&H.exp&&H.auth_time&&H.iat,m.auth,"internal-error");const Y="object"==typeof H.firebase?H.firebase:void 0,be=null==Y?void 0:Y.sign_in_provider;return{claims:H,token:D,authTime:tt(ke(H.auth_time)),issuedAtTime:tt(ke(H.iat)),expirationTime:tt(ke(H.exp)),signInProvider:be||null,signInSecondFactor:(null==Y?void 0:Y.sign_in_second_factor)||null}})).apply(this,arguments)}function ke(E){return 1e3*Number(E)}function ft(E){const[p,m,D]=E.split(".");if(void 0===p||void 0===m||void 0===D)return At("JWT malformed, contained fewer than 3 sections"),null;try{const H=(0,J.tV)(m);return H?JSON.parse(H):(At("Failed to decode base64 JWT payload"),null)}catch(H){return At("Caught error parsing JWT payload as JSON",H),null}}function Sn(E,p){return on.apply(this,arguments)}function on(){return(on=(0,S.Z)(function*(E,p,m=!1){if(m)return p;try{return yield p}catch(D){throw D instanceof J.ZR&&en(D)&&E.auth.currentUser===E&&(yield E.auth.signOut()),D}})).apply(this,arguments)}function en({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}class zr{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const D=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),D}{this.errorBackoff=3e4;const H=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,H)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const D=this.getInterval(p);this.timerId=setTimeout((0,S.Z)(function*(){yield m.iteration()}),D)}iteration(){var p=this;return(0,S.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&p.schedule(!0))}p.schedule()})()}}class Er{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=tt(this.lastLoginAt),this.creationTime=tt(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Nn(E){return se.apply(this,arguments)}function se(){return(se=(0,S.Z)(function*(E){var p;const m=E.auth,D=yield E.getIdToken(),H=yield Sn(E,Yi(m,{idToken:D}));X(null==H?void 0:H.users.length,m,"internal-error");const Y=H.users[0];E._notifyReloadListener(Y);const be=(null===(p=Y.providerUserInfo)||void 0===p?void 0:p.length)?ce(Y.providerUserInfo):[],Qe=st(E.providerData,be),pn=!!E.isAnonymous&&!(E.email&&Y.passwordHash||(null==Qe?void 0:Qe.length)),nn={uid:Y.localId,displayName:Y.displayName||null,photoURL:Y.photoUrl||null,email:Y.email||null,emailVerified:Y.emailVerified||!1,phoneNumber:Y.phoneNumber||null,tenantId:Y.tenantId||null,providerData:Qe,metadata:new Er(Y.createdAt,Y.lastLoginAt),isAnonymous:pn};Object.assign(E,nn)})).apply(this,arguments)}function ye(){return(ye=(0,S.Z)(function*(E){const p=(0,J.m9)(E);yield Nn(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function st(E,p){return[...E.filter(D=>!p.some(H=>H.providerId===D.providerId)),...p]}function ce(E){return E.map(p=>{var{providerId:m}=p,D=(0,Ee._T)(p,["providerId"]);return{providerId:m,uid:D.rawId||"",displayName:D.displayName||null,email:D.email||null,phoneNumber:D.phoneNumber||null,photoURL:D.photoUrl||null}})}function it(){return(it=(0,S.Z)(function*(E,p){const m=yield er(E,{},(0,S.Z)(function*(){const D=(0,J.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:H,apiKey:Y}=E.config,be=Kn(E,H,"/v1/token",`key=${Y}`),Qe=yield E._getAdditionalHeaders();return Qe["Content-Type"]="application/x-www-form-urlencoded",Wt.fetch()(be,{method:"POST",headers:Qe,body:D})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Ot{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){X(p.idToken,"internal-error"),X(void 0!==p.idToken,"internal-error"),X(void 0!==p.refreshToken,"internal-error");const m="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function Dt(E){const p=ft(E);return X(p,"internal-error"),X(void 0!==p.exp,"internal-error"),X(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var D=this;return(0,S.Z)(function*(){return X(!D.accessToken||D.refreshToken,p,"user-token-expired"),m||!D.accessToken||D.isExpired?D.refreshToken?(yield D.refresh(p,D.refreshToken),D.accessToken):null:D.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var D=this;return(0,S.Z)(function*(){const{accessToken:H,refreshToken:Y,expiresIn:be}=yield function Re(E,p){return it.apply(this,arguments)}(p,m);D.updateTokensAndExpiration(H,Y,Number(be))})()}updateTokensAndExpiration(p,m,D){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*D}static fromJSON(p,m){const{refreshToken:D,accessToken:H,expirationTime:Y}=m,be=new Ot;return D&&(X("string"==typeof D,"internal-error",{appName:p}),be.refreshToken=D),H&&(X("string"==typeof H,"internal-error",{appName:p}),be.accessToken=H),Y&&(X("number"==typeof Y,"internal-error",{appName:p}),be.expirationTime=Y),be}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Ot,this.toJSON())}_performRefresh(){return ze("not implemented")}}function Jt(E,p){X("string"==typeof E||void 0===E,"internal-error",{appName:p})}class tn{constructor(p){var{uid:m,auth:D,stsTokenManager:H}=p,Y=(0,Ee._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=D,this.stsTokenManager=H,this.accessToken=H.accessToken,this.displayName=Y.displayName||null,this.email=Y.email||null,this.emailVerified=Y.emailVerified||!1,this.phoneNumber=Y.phoneNumber||null,this.photoURL=Y.photoURL||null,this.isAnonymous=Y.isAnonymous||!1,this.tenantId=Y.tenantId||null,this.providerData=Y.providerData?[...Y.providerData]:[],this.metadata=new Er(Y.createdAt||void 0,Y.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,S.Z)(function*(){const D=yield Sn(m,m.stsTokenManager.getToken(m.auth,p));return X(D,m.auth,"internal-error"),m.accessToken!==D&&(m.accessToken=D,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),D})()}getIdTokenResult(p){return function we(E){return dt.apply(this,arguments)}(this,p)}reload(){return function he(E){return ye.apply(this,arguments)}(this)}_assign(p){this!==p&&(X(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new tn(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var D=this;return(0,S.Z)(function*(){let H=!1;p.idToken&&p.idToken!==D.stsTokenManager.accessToken&&(D.stsTokenManager.updateFromServerResponse(p),H=!0),m&&(yield Nn(D)),yield D.auth._persistUserIfCurrent(D),H&&D.auth._notifyListenersIfCurrent(D)})()}delete(){var p=this;return(0,S.Z)(function*(){const m=yield p.getIdToken();return yield Sn(p,function Qt(E,p){return xn.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var D,H,Y,be,Qe,St,Ut,pn;const nn=null!==(D=m.displayName)&&void 0!==D?D:void 0,qi=null!==(H=m.email)&&void 0!==H?H:void 0,No=null!==(Y=m.phoneNumber)&&void 0!==Y?Y:void 0,hc=null!==(be=m.photoURL)&&void 0!==be?be:void 0,fc=null!==(Qe=m.tenantId)&&void 0!==Qe?Qe:void 0,Rf=null!==(St=m._redirectEventId)&&void 0!==St?St:void 0,Fu=null!==(Ut=m.createdAt)&&void 0!==Ut?Ut:void 0,Lu=null!==(pn=m.lastLoginAt)&&void 0!==pn?pn:void 0,{uid:ba,emailVerified:Mh,isAnonymous:Xc,providerData:pc,stsTokenManager:Ph}=m;X(ba&&Ph,p,"internal-error");const As=Ot.fromJSON(this.name,Ph);X("string"==typeof ba,p,"internal-error"),Jt(nn,p.name),Jt(qi,p.name),X("boolean"==typeof Mh,p,"internal-error"),X("boolean"==typeof Xc,p,"internal-error"),Jt(No,p.name),Jt(hc,p.name),Jt(fc,p.name),Jt(Rf,p.name),Jt(Fu,p.name),Jt(Lu,p.name);const ol=new tn({uid:ba,auth:p,email:qi,emailVerified:Mh,displayName:nn,isAnonymous:Xc,photoURL:hc,phoneNumber:No,tenantId:fc,stsTokenManager:As,createdAt:Fu,lastLoginAt:Lu});return pc&&Array.isArray(pc)&&(ol.providerData=pc.map(Hd=>Object.assign({},Hd))),Rf&&(ol._redirectEventId=Rf),ol}static _fromIdTokenResponse(p,m,D=!1){return(0,S.Z)(function*(){const H=new Ot;H.updateFromServerResponse(m);const Y=new tn({uid:m.localId,auth:p,stsTokenManager:H,isAnonymous:D});return yield Nn(Y),Y})()}}const dn=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,S.Z)(function*(){return!0})()}_set(m,D){var H=this;return(0,S.Z)(function*(){H.storage[m]=D})()}_get(m){var D=this;return(0,S.Z)(function*(){const H=D.storage[m];return void 0===H?null:H})()}_remove(m){var D=this;return(0,S.Z)(function*(){delete D.storage[m]})()}_addListener(m,D){}_removeListener(m,D){}}return E.type="NONE",E})();function Fr(E,p,m){return`firebase:${E}:${p}:${m}`}class Hr{constructor(p,m,D){this.persistence=p,this.auth=m,this.userKey=D;const{config:H,name:Y}=this.auth;this.fullUserKey=Fr(this.userKey,H.apiKey,Y),this.fullPersistenceKey=Fr("persistence",H.apiKey,Y),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,S.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?tn._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,S.Z)(function*(){if(m.persistence===p)return;const D=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,D?m.setCurrentUser(D):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,D="authUser"){return(0,S.Z)(function*(){if(!m.length)return new Hr(Ae(dn),p,D);const H=(yield Promise.all(m.map(function(){var Ut=(0,S.Z)(function*(pn){if(yield pn._isAvailable())return pn});return function(pn){return Ut.apply(this,arguments)}}()))).filter(Ut=>Ut);let Y=H[0]||Ae(dn);const be=Fr(D,p.config.apiKey,p.name);let Qe=null;for(const Ut of m)try{const pn=yield Ut._get(be);if(pn){const nn=tn._fromJSON(p,pn);Ut!==Y&&(Qe=nn),Y=Ut;break}}catch(pn){}const St=H.filter(Ut=>Ut._shouldAllowMigration);return Y._shouldAllowMigration&&St.length?(Y=St[0],Qe&&(yield Y._set(be,Qe.toJSON())),yield Promise.all(m.map(function(){var Ut=(0,S.Z)(function*(pn){if(pn!==Y)try{yield pn._remove(be)}catch(nn){}});return function(pn){return Ut.apply(this,arguments)}}())),new Hr(Y,p,D)):new Hr(Y,p,D)})()}}function Ms(E){const p=E.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(br(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(yi(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(_i(p))return"Blackberry";if($r(p))return"Webos";if(Qi(p))return"Safari";if((p.includes("chrome/")||vn(p))&&!p.includes("edge/"))return"Chrome";if(ai(p))return"Android";{const D=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==D?void 0:D.length))return D[1]}return"Other"}function yi(E=(0,J.z$)()){return/firefox\//i.test(E)}function Qi(E=(0,J.z$)()){const p=E.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function vn(E=(0,J.z$)()){return/crios\//i.test(E)}function br(E=(0,J.z$)()){return/iemobile/i.test(E)}function ai(E=(0,J.z$)()){return/android/i.test(E)}function _i(E=(0,J.z$)()){return/blackberry/i.test(E)}function $r(E=(0,J.z$)()){return/webos/i.test(E)}function vi(E=(0,J.z$)()){return/iphone|ipad|ipod/i.test(E)}function wi(E=(0,J.z$)()){return vi(E)||ai(E)||$r(E)||_i(E)||/windows phone/i.test(E)||br(E)}function Si(E,p=[]){let m;switch(E){case"Browser":m=Ms((0,J.z$)());break;case"Worker":m=`${Ms((0,J.z$)())}-${E}`;break;default:m=E}const D=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${Ce.SDK_VERSION}/${D}`}class Tn{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const D=Y=>new Promise((be,Qe)=>{try{be(p(Y))}catch(St){Qe(St)}});D.onAbort=m,this.queue.push(D);const H=this.queue.length-1;return()=>{this.queue[H]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,S.Z)(function*(){var D;if(m.auth.currentUser===p)return;const H=[];try{for(const Y of m.queue)yield Y(p),Y.onAbort&&H.push(Y.onAbort)}catch(Y){H.reverse();for(const be of H)try{be()}catch(Qe){}throw m.auth._errorFactory.create("login-blocked",{originalMessage:null===(D=Y)||void 0===D?void 0:D.message})}})()}}class _t{constructor(p,m,D){this.app=p,this.heartbeatServiceProvider=m,this.config=D,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bn(this),this.idTokenSubscription=new Bn(this),this.beforeStateQueue=new Tn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ze,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=D.sdkClientVersion}_initializeWithPersistence(p,m){var D=this;return m&&(this._popupRedirectResolver=Ae(m)),this._initializationPromise=this.queue((0,S.Z)(function*(){var H,Y;if(!D._deleted&&(D.persistenceManager=yield Hr.create(D,p),!D._deleted)){if(null===(H=D._popupRedirectResolver)||void 0===H?void 0:H._shouldInitProactively)try{yield D._popupRedirectResolver._initialize(D)}catch(be){}yield D.initializeCurrentUser(m),D.lastNotifiedUid=(null===(Y=D.currentUser)||void 0===Y?void 0:Y.uid)||null,!D._deleted&&(D._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,S.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,S.Z)(function*(){var D;const H=yield m.assertedPersistence.getCurrentUser();let Y=H,be=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const Qe=null===(D=m.redirectUser)||void 0===D?void 0:D._redirectEventId,St=null==Y?void 0:Y._redirectEventId,Ut=yield m.tryRedirectSignIn(p);(!Qe||Qe===St)&&(null==Ut?void 0:Ut.user)&&(Y=Ut.user,be=!0)}if(!Y)return m.directlySetCurrentUser(null);if(!Y._redirectEventId){if(be)try{yield m.beforeStateQueue.runMiddleware(Y)}catch(Qe){Y=H,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(Qe))}return Y?m.reloadAndSetCurrentUserOrClear(Y):m.directlySetCurrentUser(null)}return X(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===Y._redirectEventId?m.directlySetCurrentUser(Y):m.reloadAndSetCurrentUserOrClear(Y)})()}tryRedirectSignIn(p){var m=this;return(0,S.Z)(function*(){let D=null;try{D=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch(H){yield m._setRedirectUser(null)}return D})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,S.Z)(function*(){try{yield Nn(p)}catch(D){if("auth/network-request-failed"!==D.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function ut(){if("undefined"==typeof navigator)return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var p=this;return(0,S.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,S.Z)(function*(){const D=p?(0,J.m9)(p):null;return D&&X(D.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(D&&D._clone(m))})()}_updateCurrentUser(p,m=!1){var D=this;return(0,S.Z)(function*(){if(!D._deleted)return p&&X(D.tenantId===p.tenantId,D,"tenant-id-mismatch"),m||(yield D.beforeStateQueue.runMiddleware(p)),D.queue((0,S.Z)(function*(){yield D.directlySetCurrentUser(p),D.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,S.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,S.Z)(function*(){yield m.assertedPersistence.setPersistence(Ae(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new J.LL("auth","Firebase",p())}onAuthStateChanged(p,m,D){return this.registerStateListener(this.authStateSubscription,p,m,D)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,D){return this.registerStateListener(this.idTokenSubscription,p,m,D)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var D=this;return(0,S.Z)(function*(){const H=yield D.getOrInitRedirectPersistenceManager(m);return null===p?H.removeCurrentUser():H.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,S.Z)(function*(){if(!m.redirectPersistenceManager){const D=p&&Ae(p)||m._popupRedirectResolver;X(D,m,"argument-error"),m.redirectPersistenceManager=yield Hr.create(m,[Ae(D._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,S.Z)(function*(){var D,H;return m._isInitialized&&(yield m.queue((0,S.Z)(function*(){}))),(null===(D=m._currentUser)||void 0===D?void 0:D._redirectEventId)===p?m._currentUser:(null===(H=m.redirectUser)||void 0===H?void 0:H._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,S.Z)(function*(){if(p===m.currentUser)return m.queue((0,S.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const D=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==D&&(this.lastNotifiedUid=D,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,D,H){if(this._deleted)return()=>{};const Y="function"==typeof m?m:m.next.bind(m),be=this._isInitialized?Promise.resolve():this._initializationPromise;return X(be,this,"internal-error"),be.then(()=>Y(this.currentUser)),"function"==typeof m?p.addObserver(m,D,H):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,S.Z)(function*(){m.currentUser&&m.currentUser!==p&&(m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh()),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Si(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,S.Z)(function*(){var m;const D={"X-Client-Version":p.clientVersion};p.app.options.appId&&(D["X-Firebase-gmpid"]=p.app.options.appId);const H=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return H&&(D["X-Firebase-Client"]=H),D})()}}function Ht(E){return(0,J.m9)(E)}class Bn{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,J.ne)(m=>this.observer=m)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ji(E){const p=E.indexOf(":");return p<0?"":E.substr(0,p+1)}function Ai(E){if(!E)return null;const p=Number(E);return isNaN(p)?null:p}class Zr{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return ze("not implemented")}_getIdTokenResponse(p){return ze("not implemented")}_linkToIdToken(p,m){return ze("not implemented")}_getReauthenticationResolver(p){return ze("not implemented")}}function Tr(E,p){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,S.Z)(function*(E,p){return _n(E,"POST","/v1/accounts:resetPassword",sn(E,p))})).apply(this,arguments)}function ws(E,p){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,S.Z)(function*(E,p){return _n(E,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function es(E,p){return te.apply(this,arguments)}function te(){return(te=(0,S.Z)(function*(E,p){return _n(E,"POST","/v1/accounts:update",sn(E,p))})).apply(this,arguments)}function Gr(){return(Gr=(0,S.Z)(function*(E,p){return zn(E,"POST","/v1/accounts:signInWithPassword",sn(E,p))})).apply(this,arguments)}function ii(E,p){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,S.Z)(function*(E,p){return _n(E,"POST","/v1/accounts:sendOobCode",sn(E,p))})).apply(this,arguments)}function Qn(E,p){return sr.apply(this,arguments)}function sr(){return(sr=(0,S.Z)(function*(E,p){return ii(E,p)})).apply(this,arguments)}function ts(E,p){return si.apply(this,arguments)}function si(){return(si=(0,S.Z)(function*(E,p){return ii(E,p)})).apply(this,arguments)}function ns(E,p){return uo.apply(this,arguments)}function uo(){return(uo=(0,S.Z)(function*(E,p){return ii(E,p)})).apply(this,arguments)}function Na(E,p){return ui.apply(this,arguments)}function ui(){return(ui=(0,S.Z)(function*(E,p){return ii(E,p)})).apply(this,arguments)}function Io(){return(Io=(0,S.Z)(function*(E,p){return zn(E,"POST","/v1/accounts:signInWithEmailLink",sn(E,p))})).apply(this,arguments)}function eu(){return(eu=(0,S.Z)(function*(E,p){return zn(E,"POST","/v1/accounts:signInWithEmailLink",sn(E,p))})).apply(this,arguments)}class Pr extends Zr{constructor(p,m,D,H=null){super("password",D),this._email=p,this._password=m,this._tenantId=H}static _fromEmailAndPassword(p,m){return new Pr(p,m,"password")}static _fromEmailAndCode(p,m,D=null){return new Pr(p,m,"emailLink",D)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,S.Z)(function*(){switch(m.signInMethod){case"password":return function hr(E,p){return Gr.apply(this,arguments)}(p,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function Es(E,p){return Io.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:Xe(p,"internal-error")}})()}_linkToIdToken(p,m){var D=this;return(0,S.Z)(function*(){switch(D.signInMethod){case"password":return ws(p,{idToken:m,returnSecureToken:!0,email:D._email,password:D._password});case"emailLink":return function Ks(E,p){return eu.apply(this,arguments)}(p,{idToken:m,email:D._email,oobCode:D._password});default:Xe(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Ys(E,p){return bo.apply(this,arguments)}function bo(){return(bo=(0,S.Z)(function*(E,p){return zn(E,"POST","/v1/accounts:signInWithIdp",sn(E,p))})).apply(this,arguments)}class pe extends Zr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new pe(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):Xe("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:D,signInMethod:H}=m,Y=(0,Ee._T)(m,["providerId","signInMethod"]);if(!D||!H)return null;const be=new pe(D,H);return be.idToken=Y.idToken||void 0,be.accessToken=Y.accessToken||void 0,be.secret=Y.secret,be.nonce=Y.nonce,be.pendingToken=Y.pendingToken||null,be}_getIdTokenResponse(p){return Ys(p,this.buildRequest())}_linkToIdToken(p,m){const D=this.buildRequest();return D.idToken=m,Ys(p,D)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,Ys(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,J.xO)(m)}return p}}function He(E,p){return ot.apply(this,arguments)}function ot(){return(ot=(0,S.Z)(function*(E,p){return _n(E,"POST","/v1/accounts:sendVerificationCode",sn(E,p))})).apply(this,arguments)}function Pt(){return(Pt=(0,S.Z)(function*(E,p){return zn(E,"POST","/v1/accounts:signInWithPhoneNumber",sn(E,p))})).apply(this,arguments)}function Vn(){return(Vn=(0,S.Z)(function*(E,p){const m=yield zn(E,"POST","/v1/accounts:signInWithPhoneNumber",sn(E,p));if(m.temporaryProof)throw Yn(E,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const tr={USER_NOT_FOUND:"user-not-found"};function lo(){return(lo=(0,S.Z)(function*(E,p){return zn(E,"POST","/v1/accounts:signInWithPhoneNumber",sn(E,Object.assign(Object.assign({},p),{operation:"REAUTH"})),tr)})).apply(this,arguments)}class Ns extends Zr{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new Ns({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new Ns({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function Ct(E,p){return Pt.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function or(E,p){return Vn.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Bi(E,p){return lo.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:D,verificationCode:H}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:D,code:H}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:D,phoneNumber:H,temporaryProof:Y}=p;return D||m||H||Y?new Ns({verificationId:m,verificationCode:D,phoneNumber:H,temporaryProof:Y}):null}}class cs{constructor(p){var m,D,H,Y,be,Qe;const St=(0,J.zd)((0,J.pd)(p)),Ut=null!==(m=St.apiKey)&&void 0!==m?m:null,pn=null!==(D=St.oobCode)&&void 0!==D?D:null,nn=function co(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(H=St.mode)&&void 0!==H?H:null);X(Ut&&pn&&nn,"argument-error"),this.apiKey=Ut,this.operation=nn,this.code=pn,this.continueUrl=null!==(Y=St.continueUrl)&&void 0!==Y?Y:null,this.languageCode=null!==(be=St.languageCode)&&void 0!==be?be:null,this.tenantId=null!==(Qe=St.tenantId)&&void 0!==Qe?Qe:null}static parseLink(p){const m=function Vi(E){const p=(0,J.zd)((0,J.pd)(E)).link,m=p?(0,J.zd)((0,J.pd)(p)).deep_link_id:null,D=(0,J.zd)((0,J.pd)(E)).deep_link_id;return(D?(0,J.zd)((0,J.pd)(D)).link:null)||D||m||p||E}(p);try{return new cs(m)}catch(D){return null}}}let Oa=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(m,D){return Pr._fromEmailAndPassword(m,D)}static credentialWithLink(m,D){const H=cs.parseLink(D);return X(H,"argument-error"),Pr._fromEmailAndCode(m,H.code,H.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class Qr{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class li extends Qr{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class ds extends li{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return X("providerId"in m&&"signInMethod"in m,"argument-error"),pe._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return X(p.idToken||p.accessToken,"argument-error"),pe._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return ds.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return ds.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:D,oauthTokenSecret:H,pendingToken:Y,nonce:be,providerId:Qe}=p;if(!D&&!H&&!m&&!Y||!Qe)return null;try{return new ds(Qe)._credential({idToken:m,accessToken:D,nonce:be,pendingToken:Y})}catch(St){return null}}}let rs=(()=>{class E extends li{constructor(){super("facebook.com")}static credential(m){return pe._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return E.credentialFromTaggedObject(m)}static credentialFromError(m){return E.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return E.credential(m.oauthAccessToken)}catch(D){return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),ka=(()=>{class E extends li{constructor(){super("google.com"),this.addScope("profile")}static credential(m,D){return pe._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:D})}static credentialFromResult(m){return E.credentialFromTaggedObject(m)}static credentialFromError(m){return E.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:D,oauthAccessToken:H}=m;if(!D&&!H)return null;try{return E.credential(D,H)}catch(Y){return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),Is=(()=>{class E extends li{constructor(){super("github.com")}static credential(m){return pe._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return E.credentialFromTaggedObject(m)}static credentialFromError(m){return E.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return E.credential(m.oauthAccessToken)}catch(D){return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class Ei extends Zr{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return Ys(p,this.buildRequest())}_linkToIdToken(p,m){const D=this.buildRequest();return D.idToken=m,Ys(p,D)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,Ys(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:D,signInMethod:H,pendingToken:Y}=m;return D&&H&&Y&&D===H?new Ei(D,Y):null}static _create(p,m){return new Ei(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ii extends Qr{constructor(p){X(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Ii.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Ii.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=Ei.fromJSON(p);return X(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:D}=p;if(!m||!D)return null;try{return Ei._create(D,m)}catch(H){return null}}}let ta=(()=>{class E extends li{constructor(){super("twitter.com")}static credential(m,D){return pe._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:D})}static credentialFromResult(m){return E.credentialFromTaggedObject(m)}static credentialFromError(m){return E.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:D,oauthTokenSecret:H}=m;if(!D||!H)return null;try{return E.credential(D,H)}catch(Y){return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function Jr(E,p){return Os.apply(this,arguments)}function Os(){return(Os=(0,S.Z)(function*(E,p){return zn(E,"POST","/v1/accounts:signUp",sn(E,p))})).apply(this,arguments)}class xi{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,D,H=!1){return(0,S.Z)(function*(){const Y=yield tn._fromIdTokenResponse(p,D,H),be=Fa(D);return new xi({user:Y,providerId:be,_tokenResponse:D,operationType:m})})()}static _forOperation(p,m,D){return(0,S.Z)(function*(){yield p._updateTokensIfNecessary(D,!0);const H=Fa(D);return new xi({user:p,providerId:H,_tokenResponse:D,operationType:m})})()}}function Fa(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function ho(){return(ho=(0,S.Z)(function*(E){var p;const m=Ht(E);if(yield m._initializationPromise,null===(p=m.currentUser)||void 0===p?void 0:p.isAnonymous)return new xi({user:m.currentUser,providerId:null,operationType:"signIn"});const D=yield Jr(m,{returnSecureToken:!0}),H=yield xi._fromIdTokenResponse(m,"signIn",D,!0);return yield m._updateCurrentUser(H.user),H})).apply(this,arguments)}class is extends J.ZR{constructor(p,m,D,H){var Y;super(m.code,m.message),this.operationType=D,this.user=H,Object.setPrototypeOf(this,is.prototype),this.customData={appName:p.name,tenantId:null!==(Y=p.tenantId)&&void 0!==Y?Y:void 0,_serverResponse:m.customData._serverResponse,operationType:D}}static _fromErrorAndOperation(p,m,D,H){return new is(p,m,D,H)}}function na(E,p,m,D){return("reauthenticate"===p?m._getReauthenticationResolver(E):m._getIdTokenResponse(E)).catch(Y=>{throw"auth/multi-factor-auth-required"===Y.code?is._fromErrorAndOperation(E,Y,p,D):Y})}function ks(E){return new Set(E.map(({providerId:p})=>p).filter(p=>!!p))}function jn(){return(jn=(0,S.Z)(function*(E,p){const m=(0,J.m9)(E);yield F(!0,m,p);const{providerUserInfo:D}=yield Mn(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),H=ks(D||[]);return m.providerData=m.providerData.filter(Y=>H.has(Y.providerId)),H.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function L(E,p){return q.apply(this,arguments)}function q(){return(q=(0,S.Z)(function*(E,p,m=!1){const D=yield Sn(E,p._linkToIdToken(E.auth,yield E.getIdToken()),m);return xi._forOperation(E,"link",D)})).apply(this,arguments)}function F(E,p,m){return Q.apply(this,arguments)}function Q(){return(Q=(0,S.Z)(function*(E,p,m){yield Nn(p);const H=!1===E?"provider-already-linked":"no-such-provider";X(ks(p.providerData).has(m)===E,p.auth,H)})).apply(this,arguments)}function de(E,p){return We.apply(this,arguments)}function We(){return(We=(0,S.Z)(function*(E,p,m=!1){const{auth:D}=E,H="reauthenticate";try{const Y=yield Sn(E,na(D,H,p,E),m);X(Y.idToken,D,"internal-error");const be=ft(Y.idToken);X(be,D,"internal-error");const{sub:Qe}=be;return X(E.uid===Qe,D,"user-mismatch"),xi._forOperation(E,H,Y)}catch(Y){throw"auth/user-not-found"===(null==Y?void 0:Y.code)&&Xe(D,"user-mismatch"),Y}})).apply(this,arguments)}function ht(E,p){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,S.Z)(function*(E,p,m=!1){const D="signIn",H=yield na(E,D,p),Y=yield xi._fromIdTokenResponse(E,D,H);return m||(yield E._updateCurrentUser(Y.user)),Y})).apply(this,arguments)}function hn(E,p){return fn.apply(this,arguments)}function fn(){return(fn=(0,S.Z)(function*(E,p){return ht(Ht(E),p)})).apply(this,arguments)}function En(E,p){return On.apply(this,arguments)}function On(){return(On=(0,S.Z)(function*(E,p){const m=(0,J.m9)(E);return yield F(!1,m,p.providerId),L(m,p)})).apply(this,arguments)}function Ir(E,p){return lr.apply(this,arguments)}function lr(){return(lr=(0,S.Z)(function*(E,p){return de((0,J.m9)(E),p)})).apply(this,arguments)}function Dr(E,p){return ji.apply(this,arguments)}function ji(){return(ji=(0,S.Z)(function*(E,p){return zn(E,"POST","/v1/accounts:signInWithCustomToken",sn(E,p))})).apply(this,arguments)}function Kt(){return(Kt=(0,S.Z)(function*(E,p){const m=Ht(E),D=yield Dr(m,{token:p,returnSecureToken:!0}),H=yield xi._fromIdTokenResponse(m,"signIn",D);return yield m._updateCurrentUser(H.user),H})).apply(this,arguments)}class hs{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?La._fromServerResponse(p,m):Xe(p,"internal-error")}}class La extends hs{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new La(m)}}function jo(E,p,m){var D;X((null===(D=m.url)||void 0===D?void 0:D.length)>0,E,"invalid-continue-uri"),X(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(X(m.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(X(m.android.packageName.length>0,E,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function fs(){return(fs=(0,S.Z)(function*(E,p,m){const D=(0,J.m9)(E),H={requestType:"PASSWORD_RESET",email:p};m&&jo(D,H,m),yield ts(D,H)})).apply(this,arguments)}function ra(){return(ra=(0,S.Z)(function*(E,p,m){yield Tr((0,J.m9)(E),{oobCode:p,newPassword:m})})).apply(this,arguments)}function gt(){return(gt=(0,S.Z)(function*(E,p){yield es((0,J.m9)(E),{oobCode:p})})).apply(this,arguments)}function Dn(E,p){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,S.Z)(function*(E,p){const m=(0,J.m9)(E),D=yield Tr(m,{oobCode:p}),H=D.requestType;switch(X(H,m,"internal-error"),H){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":X(D.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":X(D.mfaInfo,m,"internal-error");default:X(D.email,m,"internal-error")}let Y=null;return D.mfaInfo&&(Y=hs._fromServerResponse(Ht(m),D.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.newEmail:D.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.email:D.newEmail)||null,multiFactorInfo:Y},operation:H}})).apply(this,arguments)}function Ho(){return(Ho=(0,S.Z)(function*(E,p){const{data:m}=yield Dn((0,J.m9)(E),p);return m.email})).apply(this,arguments)}function bs(){return(bs=(0,S.Z)(function*(E,p,m){const D=Ht(E),H=yield Jr(D,{returnSecureToken:!0,email:p,password:m}),Y=yield xi._fromIdTokenResponse(D,"signIn",H);return yield D._updateCurrentUser(Y.user),Y})).apply(this,arguments)}function jl(){return(jl=(0,S.Z)(function*(E,p,m){const D=(0,J.m9)(E),H={requestType:"EMAIL_SIGNIN",email:p};X(m.handleCodeInApp,D,"argument-error"),m&&jo(D,H,m),yield ns(D,H)})).apply(this,arguments)}function Cs(){return(Cs=(0,S.Z)(function*(E,p,m){const D=(0,J.m9)(E),H=Oa.credentialWithLink(p,m||mt());return X(H._tenantId===(D.tenantId||null),D,"tenant-id-mismatch"),hn(D,H)})).apply(this,arguments)}function bi(E,p){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,S.Z)(function*(E,p){return _n(E,"POST","/v1/accounts:createAuthUri",sn(E,p))})).apply(this,arguments)}function Us(){return(Us=(0,S.Z)(function*(E,p){const D={identifier:p,continueUri:Tt()?mt():"http://localhost"},{signinMethods:H}=yield bi((0,J.m9)(E),D);return H||[]})).apply(this,arguments)}function Xr(){return(Xr=(0,S.Z)(function*(E,p){const m=(0,J.m9)(E),H={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};p&&jo(m.auth,H,p);const{email:Y}=yield Qn(m.auth,H);Y!==E.email&&(yield E.reload())})).apply(this,arguments)}function iu(){return(iu=(0,S.Z)(function*(E,p,m){const D=(0,J.m9)(E),Y={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:p};m&&jo(D.auth,Y,m);const{email:be}=yield Na(D.auth,Y);be!==E.email&&(yield E.reload())})).apply(this,arguments)}function gl(E,p){return To.apply(this,arguments)}function To(){return(To=(0,S.Z)(function*(E,p){return _n(E,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Gu(){return(Gu=(0,S.Z)(function*(E,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const D=(0,J.m9)(E),Y={idToken:yield D.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},be=yield Sn(D,gl(D.auth,Y));D.displayName=be.displayName||null,D.photoURL=be.photoUrl||null;const Qe=D.providerData.find(({providerId:St})=>"password"===St);Qe&&(Qe.displayName=D.displayName,Qe.photoURL=D.photoURL),yield D._updateTokensIfNecessary(be)})).apply(this,arguments)}function oa(E,p,m){return $o.apply(this,arguments)}function $o(){return($o=(0,S.Z)(function*(E,p,m){const{auth:D}=E,Y={idToken:yield E.getIdToken(),returnSecureToken:!0};p&&(Y.email=p),m&&(Y.password=m);const be=yield Sn(E,ws(D,Y));yield E._updateTokensIfNecessary(be,!0)})).apply(this,arguments)}class aa{constructor(p,m,D={}){this.isNewUser=p,this.providerId=m,this.profile=D}}class qu extends aa{constructor(p,m,D,H){super(p,m,D),this.username=H}}class po extends aa{constructor(p,m){super(p,"facebook.com",m)}}class go extends qu{constructor(p,m){super(p,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class Hl extends aa{constructor(p,m){super(p,"google.com",m)}}class ua extends qu{constructor(p,m,D){super(p,"twitter.com",m,D)}}function Mi(E){const{user:p,_tokenResponse:m}=E;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Do(E){var p,m;if(!E)return null;const{providerId:D}=E,H=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},Y=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!D&&(null==E?void 0:E.idToken)){const be=null===(m=null===(p=ft(E.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(be)return new aa(Y,"anonymous"!==be&&"custom"!==be?be:null)}if(!D)return null;switch(D){case"facebook.com":return new po(Y,H);case"github.com":return new go(Y,H);case"google.com":return new Hl(Y,H);case"twitter.com":return new ua(Y,H,E.screenName||null);case"custom":case"anonymous":return new aa(Y,null);default:return new aa(Y,D,H)}}(m)}class Bs{constructor(p,m){this.type=p,this.credential=m}static _fromIdtoken(p){return new Bs("enroll",p)}static _fromMfaPendingCredential(p){return new Bs("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,D;if(null==p?void 0:p.multiFactorSession){if(null===(m=p.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return Bs._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(D=p.multiFactorSession)||void 0===D?void 0:D.idToken)return Bs._fromIdtoken(p.multiFactorSession.idToken)}return null}}class la{constructor(p,m,D){this.session=p,this.hints=m,this.signInResolver=D}static _fromError(p,m){const D=Ht(p),H=m.customData._serverResponse,Y=(H.mfaInfo||[]).map(Qe=>hs._fromServerResponse(D,Qe));X(H.mfaPendingCredential,D,"internal-error");const be=Bs._fromMfaPendingCredential(H.mfaPendingCredential);return new la(be,Y,function(){var Qe=(0,S.Z)(function*(St){const Ut=yield St._process(D,be);delete H.mfaInfo,delete H.mfaPendingCredential;const pn=Object.assign(Object.assign({},H),{idToken:Ut.idToken,refreshToken:Ut.refreshToken});switch(m.operationType){case"signIn":const nn=yield xi._fromIdTokenResponse(D,m.operationType,pn);return yield D._updateCurrentUser(nn.user),nn;case"reauthenticate":return X(m.user,D,"internal-error"),xi._forOperation(m.user,m.operationType,pn);default:Xe(D,"internal-error")}});return function(St){return Qe.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,S.Z)(function*(){return m.signInResolver(p)})()}}function Cu(E,p){return _n(E,"POST","/v2/accounts/mfaEnrollment:start",sn(E,p))}class mo{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(D=>hs._fromServerResponse(p.auth,D)))})}static _fromUser(p){return new mo(p)}getSession(){var p=this;return(0,S.Z)(function*(){return Bs._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,m){var D=this;return(0,S.Z)(function*(){const H=p,Y=yield D.getSession(),be=yield Sn(D.user,H._process(D.user.auth,Y,m));return yield D.user._updateTokensIfNecessary(be),D.user.reload()})()}unenroll(p){var m=this;return(0,S.Z)(function*(){const D="string"==typeof p?p:p.uid,H=yield m.user.getIdToken(),Y=yield Sn(m.user,function Hi(E,p){return _n(E,"POST","/v2/accounts/mfaEnrollment:withdraw",sn(E,p))}(m.user.auth,{idToken:H,mfaEnrollmentId:D}));m.enrolledFactors=m.enrolledFactors.filter(({uid:be})=>be!==D),yield m.user._updateTokensIfNecessary(Y);try{yield m.user.reload()}catch(be){if("auth/user-token-expired"!==be.code)throw be}})()}}const Vs=new WeakMap,Xs="__sak";class qo{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Xs,"1"),this.storage.removeItem(Xs),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const su=(()=>{class E extends qo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,D)=>this.onStorageEvent(m,D),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function eo(){const E=(0,J.z$)();return Qi(E)||vi(E)}()&&function Lr(){try{return!(!window||window===window.top)}catch(E){return!1}}(),this.fallbackToPolling=wi(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const D of Object.keys(this.listeners)){const H=this.storage.getItem(D),Y=this.localCache[D];H!==Y&&m(D,Y,H)}}onStorageEvent(m,D=!1){if(!m.key)return void this.forAllChangedKeys((Qe,St,Ut)=>{this.notifyListeners(Qe,Ut)});const H=m.key;if(D?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Qe=this.storage.getItem(H);if(m.newValue!==Qe)null!==m.newValue?this.storage.setItem(H,m.newValue):this.storage.removeItem(H);else if(this.localCache[H]===m.newValue&&!D)return}const Y=()=>{const Qe=this.storage.getItem(H);!D&&this.localCache[H]===Qe||this.notifyListeners(H,Qe)},be=this.storage.getItem(H);!function ls(){return(0,J.w1)()&&10===document.documentMode}()||be===m.newValue||m.newValue===m.oldValue?Y():setTimeout(Y,10)}notifyListeners(m,D){this.localCache[m]=D;const H=this.listeners[m];if(H)for(const Y of Array.from(H))Y(D&&JSON.parse(D))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,D,H)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:D,newValue:H}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,D){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(D)}_removeListener(m,D){this.listeners[m]&&(this.listeners[m].delete(D),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,D){var H=()=>super._set,Y=this;return(0,S.Z)(function*(){yield H().call(Y,m,D),Y.localCache[m]=JSON.stringify(D)})()}_get(m){var D=()=>super._get,H=this;return(0,S.Z)(function*(){const Y=yield D().call(H,m);return H.localCache[m]=JSON.stringify(Y),Y})()}_remove(m){var D=()=>super._remove,H=this;return(0,S.Z)(function*(){yield D().call(H,m),delete H.localCache[m]})()}}return E.type="LOCAL",E})(),js=(()=>{class E extends qo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,D){}_removeListener(m,D){}}return E.type="SESSION",E})();let ql=(()=>{class E{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const D=this.receivers.find(Y=>Y.isListeningto(m));if(D)return D;const H=new E(m);return this.receivers.push(H),H}isListeningto(m){return this.eventTarget===m}handleEvent(m){var D=this;return(0,S.Z)(function*(){const H=m,{eventId:Y,eventType:be,data:Qe}=H.data,St=D.handlersMap[be];if(!(null==St?void 0:St.size))return;H.ports[0].postMessage({status:"ack",eventId:Y,eventType:be});const Ut=Array.from(St).map(function(){var nn=(0,S.Z)(function*(qi){return qi(H.origin,Qe)});return function(qi){return nn.apply(this,arguments)}}()),pn=yield function Tu(E){return Promise.all(E.map(function(){var p=(0,S.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(D){return{fulfilled:!1,reason:D}}});return function(m){return p.apply(this,arguments)}}()))}(Ut);H.ports[0].postMessage({status:"done",eventId:Y,eventType:be,response:pn})})()}_subscribe(m,D){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(D)}_unsubscribe(m,D){this.handlersMap[m]&&D&&this.handlersMap[m].delete(D),(!D||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function $a(E="",p=10){let m="";for(let D=0;D<p;D++)m+=Math.floor(10*Math.random());return E+m}class Wo{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,D=50){var H=this;return(0,S.Z)(function*(){const Y="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!Y)throw new Error("connection_unavailable");let be,Qe;return new Promise((St,Ut)=>{const pn=$a("",20);Y.port1.start();const nn=setTimeout(()=>{Ut(new Error("unsupported_event"))},D);Qe={messageChannel:Y,onMessage(qi){const No=qi;if(No.data.eventId===pn)switch(No.data.status){case"ack":clearTimeout(nn),be=setTimeout(()=>{Ut(new Error("timeout"))},3e3);break;case"done":clearTimeout(be),St(No.data.response);break;default:clearTimeout(nn),clearTimeout(be),Ut(new Error("invalid_response"))}}},H.handlers.add(Qe),Y.port1.addEventListener("message",Qe.onMessage),H.target.postMessage({eventType:p,eventId:pn,data:m},[Y.port2])}).finally(()=>{Qe&&H.removeMessageHandler(Qe)})})()}}function ti(){return window}function ca(){return void 0!==ti().WorkerGlobalScope&&"function"==typeof ti().importScripts}function ou(){return(ou=(0,S.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(E){return null}})).apply(this,arguments)}const Du="firebaseLocalStorageDb",_r="firebaseLocalStorage",Ni="fbase_key";class Ko{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function A(E,p){return E.transaction([_r],p?"readwrite":"readonly").objectStore(_r)}function C(){const E=indexedDB.open(Du,1);return new Promise((p,m)=>{E.addEventListener("error",()=>{m(E.error)}),E.addEventListener("upgradeneeded",()=>{const D=E.result;try{D.createObjectStore(_r,{keyPath:Ni})}catch(H){m(H)}}),E.addEventListener("success",(0,S.Z)(function*(){const D=E.result;D.objectStoreNames.contains(_r)?p(D):(D.close(),yield function T(){const E=indexedDB.deleteDatabase(Du);return new Ko(E).toPromise()}(),p(yield C()))}))})}function P(E,p,m){return N.apply(this,arguments)}function N(){return(N=(0,S.Z)(function*(E,p,m){const D=A(E,!0).put({[Ni]:p,value:m});return new Ko(D).toPromise()})).apply(this,arguments)}function re(){return(re=(0,S.Z)(function*(E,p){const m=A(E,!1).get(p),D=yield new Ko(m).toPromise();return void 0===D?null:D.value})).apply(this,arguments)}function ge(E,p){const m=A(E,!0).delete(p);return new Ko(m).toPromise()}const qt=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,S.Z)(function*(){return m.db||(m.db=yield C()),m.db})()}_withRetries(m){var D=this;return(0,S.Z)(function*(){let H=0;for(;;)try{const Y=yield D._openDb();return yield m(Y)}catch(Y){if(H++>3)throw Y;D.db&&(D.db.close(),D.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,S.Z)(function*(){return ca()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,S.Z)(function*(){m.receiver=ql._getInstance(function au(){return ca()?self:null}()),m.receiver._subscribe("keyChanged",function(){var D=(0,S.Z)(function*(H,Y){return{keyProcessed:(yield m._poll()).includes(Y.key)}});return function(H,Y){return D.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var D=(0,S.Z)(function*(H,Y){return["keyChanged"]});return function(H,Y){return D.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,S.Z)(function*(){var D,H;if(m.activeServiceWorker=yield function ni(){return ou.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Wo(m.activeServiceWorker);const Y=yield m.sender._send("ping",{},800);!Y||(null===(D=Y[0])||void 0===D?void 0:D.fulfilled)&&(null===(H=Y[0])||void 0===H?void 0:H.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var D=this;return(0,S.Z)(function*(){if(D.sender&&D.activeServiceWorker&&function zo(){var E;return(null===(E=null==navigator?void 0:navigator.serviceWorker)||void 0===E?void 0:E.controller)||null}()===D.activeServiceWorker)try{yield D.sender._send("keyChanged",{key:m},D.serviceWorkerReceiverAvailable?800:50)}catch(H){}})()}_isAvailable(){return(0,S.Z)(function*(){try{if(!indexedDB)return!1;const m=yield C();return yield P(m,Xs,"1"),yield ge(m,Xs),!0}catch(m){}return!1})()}_withPendingWrite(m){var D=this;return(0,S.Z)(function*(){D.pendingWrites++;try{yield m()}finally{D.pendingWrites--}})()}_set(m,D){var H=this;return(0,S.Z)(function*(){return H._withPendingWrite((0,S.Z)(function*(){return yield H._withRetries(Y=>P(Y,m,D)),H.localCache[m]=D,H.notifyServiceWorker(m)}))})()}_get(m){var D=this;return(0,S.Z)(function*(){const H=yield D._withRetries(Y=>function j(E,p){return re.apply(this,arguments)}(Y,m));return D.localCache[m]=H,H})()}_remove(m){var D=this;return(0,S.Z)(function*(){return D._withPendingWrite((0,S.Z)(function*(){return yield D._withRetries(H=>ge(H,m)),delete D.localCache[m],D.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,S.Z)(function*(){const D=yield m._withRetries(be=>{const Qe=A(be,!1).getAll();return new Ko(Qe).toPromise()});if(!D)return[];if(0!==m.pendingWrites)return[];const H=[],Y=new Set;for(const{fbase_key:be,value:Qe}of D)Y.add(be),JSON.stringify(m.localCache[be])!==JSON.stringify(Qe)&&(m.notifyListeners(be,Qe),H.push(be));for(const be of Object.keys(m.localCache))m.localCache[be]&&!Y.has(be)&&(m.notifyListeners(be,null),H.push(be));return H})()}notifyListeners(m,D){this.localCache[m]=D;const H=this.listeners[m];if(H)for(const Y of Array.from(H))Y(D)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,S.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,D){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(D)}_removeListener(m,D){this.listeners[m]&&(this.listeners[m].delete(D),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})();function ar(E,p){return _n(E,"POST","/v2/accounts/mfaSignIn:start",sn(E,p))}function Yo(){return(Yo=(0,S.Z)(function*(E){return(yield _n(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function lu(E){return new Promise((p,m)=>{const D=document.createElement("script");D.setAttribute("src",E),D.onload=p,D.onerror=H=>{const Y=Ke("internal-error");Y.customData=H,m(Y)},D.type="text/javascript",D.charset="UTF-8",function uu(){var E,p;return null!==(p=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==p?p:document}().appendChild(D)})}function ln(E){return`__${E}${Math.floor(1e6*Math.random())}`}const Or=1e12;class yn{constructor(p){this.auth=p,this.counter=Or,this._widgets=new Map}render(p,m){const D=this.counter;return this._widgets.set(D,new ha(p,this.auth.name,m||{})),this.counter++,D}reset(p){var m;const D=p||Or;null===(m=this._widgets.get(D))||void 0===m||m.delete(),this._widgets.delete(D)}getResponse(p){var m;return(null===(m=this._widgets.get(p||Or))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,S.Z)(function*(){var D;return null===(D=m._widgets.get(p||Or))||void 0===D||D.execute(),""})()}}class ha{constructor(p,m,D){this.params=D,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const H="string"==typeof p?document.getElementById(p):p;X(H,"argument-error",{appName:m}),this.container=H,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function nr(E){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let D=0;D<E;D++)p.push(m.charAt(Math.floor(Math.random()*m.length)));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch(D){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(D){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Rd=ln("rcb"),kn=new cn(3e4,6e4);class Md{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!ti().grecaptcha}load(p,m=""){return X(function Pd(E){return E.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E)}(m),p,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(ti().grecaptcha):new Promise((D,H)=>{const Y=ti().setTimeout(()=>{H(Ke(p,"network-request-failed"))},kn.get());ti()[Rd]=()=>{ti().clearTimeout(Y),delete ti()[Rd];const Qe=ti().grecaptcha;if(!Qe)return void H(Ke(p,"internal-error"));const St=Qe.render;Qe.render=(Ut,pn)=>{const nn=St(Ut,pn);return this.counter++,nn},this.hostLanguage=m,D(Qe)},lu(`https://www.google.com/recaptcha/api.js??${(0,J.xO)({onload:Rd,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(Y),H(Ke(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){return!!ti().grecaptcha&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Wu{load(p){return(0,S.Z)(function*(){return new yn(p)})()}clearedOneInstance(){}}const Su="recaptcha",_l={theme:"light",type:"image"};class Nd{constructor(p,m=Object.assign({},_l),D){this.parameters=m,this.type=Su,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ht(D),this.isInvisible="invisible"===this.parameters.size,X("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const H="string"==typeof p?document.getElementById(p):p;X(H,this.auth,"argument-error"),this.container=H,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Wu:new Md,this.validateStartingState()}verify(){var p=this;return(0,S.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),D=p.getAssertedRecaptcha();return D.getResponse(m)||new Promise(Y=>{const be=Qe=>{!Qe||(p.tokenChangeListeners.delete(be),Y(Qe))};p.tokenChangeListeners.add(be),p.isInvisible&&D.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){X(!this.parameters.sitekey,this.auth,"argument-error"),X(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),X("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(D=>D(m)),"function"==typeof p)p(m);else if("string"==typeof p){const D=ti()[p];"function"==typeof D&&D(m)}}}assertNotDestroyed(){X(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,S.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const D=document.createElement("div");m.appendChild(D),m=D}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,S.Z)(function*(){X(Tt()&&!ca(),p.auth,"internal-error"),yield function cu(){let E=null;return new Promise(p=>{"complete"!==document.readyState?(E=()=>p(),window.addEventListener("load",E)):p()}).catch(p=>{throw E&&window.removeEventListener("load",E),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function $i(E){return Yo.apply(this,arguments)}(p.auth);X(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return X(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Hs{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=Ns._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function zu(){return(zu=(0,S.Z)(function*(E,p,m){const D=Ht(E),H=yield gs(D,p,(0,J.m9)(m));return new Hs(H,Y=>hn(D,Y))})).apply(this,arguments)}function $s(){return($s=(0,S.Z)(function*(E,p,m){const D=(0,J.m9)(E);yield F(!1,D,"phone");const H=yield gs(D.auth,p,(0,J.m9)(m));return new Hs(H,Y=>En(D,Y))})).apply(this,arguments)}function Ue(){return(Ue=(0,S.Z)(function*(E,p,m){const D=(0,J.m9)(E),H=yield gs(D.auth,p,(0,J.m9)(m));return new Hs(H,Y=>Ir(D,Y))})).apply(this,arguments)}function gs(E,p,m){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,S.Z)(function*(E,p,m){var D;const H=yield m.verify();try{let Y;if(X("string"==typeof H,E,"argument-error"),X(m.type===Su,E,"argument-error"),Y="string"==typeof p?{phoneNumber:p}:p,"session"in Y){const be=Y.session;if("phoneNumber"in Y)return X("enroll"===be.type,E,"internal-error"),(yield Cu(E,{idToken:be.credential,phoneEnrollmentInfo:{phoneNumber:Y.phoneNumber,recaptchaToken:H}})).phoneSessionInfo.sessionInfo;{X("signin"===be.type,E,"internal-error");const Qe=(null===(D=Y.multiFactorHint)||void 0===D?void 0:D.uid)||Y.multiFactorUid;return X(Qe,E,"missing-multi-factor-info"),(yield ar(E,{mfaPendingCredential:be.credential,mfaEnrollmentId:Qe,phoneSignInInfo:{recaptchaToken:H}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:be}=yield He(E,{phoneNumber:Y.phoneNumber,recaptchaToken:H});return be}}finally{m._reset()}})).apply(this,arguments)}function Zi(){return(Zi=(0,S.Z)(function*(E,p){yield L((0,J.m9)(E),p)})).apply(this,arguments)}let Ts=(()=>{class E{constructor(m){this.providerId=E.PROVIDER_ID,this.auth=Ht(m)}verifyPhoneNumber(m,D){return gs(this.auth,m,(0,J.m9)(D))}static credential(m,D){return Ns._fromVerification(m,D)}static credentialFromResult(m){return E.credentialFromTaggedObject(m)}static credentialFromError(m){return E.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:D,temporaryProof:H}=m;return D&&H?Ns._fromTokenResponse(D,H):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function pa(E,p){return p?Ae(p):(X(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class Rr extends Zr{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Ys(p,this._buildIdpRequest())}_linkToIdToken(p,m){return Ys(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return Ys(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function Au(E){return ht(E.auth,new Rr(E),E.bypassAuthState)}function Yu(E){const{auth:p,user:m}=E;return X(m,p,"internal-error"),de(m,new Rr(E),E.bypassAuthState)}function ga(E){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,S.Z)(function*(E){const{auth:p,user:m}=E;return X(m,p,"internal-error"),L(m,new Rr(E),E.bypassAuthState)})).apply(this,arguments)}class Ds{constructor(p,m,D,H,Y=!1){this.auth=p,this.resolver=D,this.user=H,this.bypassAuthState=Y,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,S.Z)(function*(D,H){p.pendingPromise={resolve:D,reject:H};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(Y){p.reject(Y)}});return function(D,H){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,S.Z)(function*(){const{urlResponse:D,sessionId:H,postBody:Y,tenantId:be,error:Qe,type:St}=p;if(Qe)return void m.reject(Qe);const Ut={auth:m.auth,requestUri:D,sessionId:H,tenantId:be||void 0,postBody:Y||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(St)(Ut))}catch(pn){m.reject(pn)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Au;case"linkViaPopup":case"linkViaRedirect":return ga;case"reauthViaPopup":case"reauthViaRedirect":return Yu;default:Xe(this.auth,"internal-error")}}resolve(p){ue(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){ue(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ma=new cn(2e3,1e4);function ss(){return(ss=(0,S.Z)(function*(E,p,m){const D=Ht(E);Je(E,p,Qr);const H=pa(D,m);return new Ju(D,"signInViaPopup",p,H).executeNotNull()})).apply(this,arguments)}function So(){return(So=(0,S.Z)(function*(E,p,m){const D=(0,J.m9)(E);Je(D.auth,p,Qr);const H=pa(D.auth,m);return new Ju(D.auth,"reauthViaPopup",p,H,D).executeNotNull()})).apply(this,arguments)}function Ln(){return(Ln=(0,S.Z)(function*(E,p,m){const D=(0,J.m9)(E);Je(D.auth,p,Qr);const H=pa(D.auth,m);return new Ju(D.auth,"linkViaPopup",p,H,D).executeNotNull()})).apply(this,arguments)}let Ju=(()=>{class E extends Ds{constructor(m,D,H,Y,be){super(m,D,Y,be),this.provider=H,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var m=this;return(0,S.Z)(function*(){const D=yield m.execute();return X(D,m.auth,"internal-error"),D})()}onExecution(){var m=this;return(0,S.Z)(function*(){ue(1===m.filter.length,"Popup operations only handle one event");const D=$a();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],D),m.authWindow.associatedEvent=D,m.resolver._originValidation(m.auth).catch(H=>{m.reject(H)}),m.resolver._isIframeWebStorageSupported(m.auth,H=>{H||m.reject(Ke(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Ke(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const m=()=>{var D,H;this.pollId=(null===(H=null===(D=this.authWindow)||void 0===D?void 0:D.window)||void 0===H?void 0:H.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ke(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,ma.get())};m()}}return E.currentPopupAction=null,E})();const Jn=new Map;class Wl extends Ds{constructor(p,m,D=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,D),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,S.Z)(function*(){let D=Jn.get(m.auth._key());if(!D){try{const Y=(yield function Gi(E,p){return xu.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;D=()=>Promise.resolve(Y)}catch(H){D=()=>Promise.reject(H)}Jn.set(m.auth._key(),D)}return m.bypassAuthState||Jn.set(m.auth._key(),()=>Promise.resolve(null)),D()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,D=this;return(0,S.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(D,p);if("unknown"!==p.type){if(p.eventId){const H=yield D.auth._redirectUserForId(p.eventId);if(H)return D.user=H,m().call(D,p);D.resolve(null)}}else D.resolve(null)})()}onExecution(){return(0,S.Z)(function*(){})()}cleanUp(){}}function xu(){return(xu=(0,S.Z)(function*(E,p){const m=oe(p),D=K(E);if(!(yield D._isAvailable()))return!1;const H="true"===(yield D._get(m));return yield D._remove(m),H})).apply(this,arguments)}function Ao(E,p){return Br.apply(this,arguments)}function Br(){return(Br=(0,S.Z)(function*(E,p){return K(E)._set(oe(p),"true")})).apply(this,arguments)}function U(E,p){Jn.set(E._key(),p)}function K(E){return Ae(E._redirectPersistence)}function oe(E){return Fr("pendingRedirect",E.config.apiKey,E.name)}function pt(){return(pt=(0,S.Z)(function*(E,p,m){const D=Ht(E);Je(E,p,Qr);const H=pa(D,m);return yield Ao(H,D),H._openRedirect(D,p,"signInViaRedirect")})).apply(this,arguments)}function wn(){return(wn=(0,S.Z)(function*(E,p,m){const D=(0,J.m9)(E);Je(D.auth,p,Qr);const H=pa(D.auth,m);yield Ao(H,D.auth);const Y=yield _a(D);return H._openRedirect(D.auth,p,"reauthViaRedirect",Y)})).apply(this,arguments)}function Ar(){return(Ar=(0,S.Z)(function*(E,p,m){const D=(0,J.m9)(E);Je(D.auth,p,Qr);const H=pa(D.auth,m);yield F(!1,D,p.providerId),yield Ao(H,D.auth);const Y=yield _a(D);return H._openRedirect(D.auth,p,"linkViaRedirect",Y)})).apply(this,arguments)}function no(){return(no=(0,S.Z)(function*(E,p){return yield Ht(E)._initializationPromise,ya(E,p,!1)})).apply(this,arguments)}function ya(E,p){return ys.apply(this,arguments)}function ys(){return(ys=(0,S.Z)(function*(E,p,m=!1){const D=Ht(E),H=pa(D,p),be=yield new Wl(D,H,m).execute();return be&&!m&&(delete be.user._redirectEventId,yield D._persistUserIfCurrent(be.user),yield D._setRedirectUser(null,p)),be})).apply(this,arguments)}function _a(E){return _o.apply(this,arguments)}function _o(){return(_o=(0,S.Z)(function*(E){const p=$a(`${E.uid}:::`);return E._redirectEventId=p,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),p})).apply(this,arguments)}class ro{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(D=>{this.isEventForConsumer(p,D)&&(m=!0,this.sendToConsumer(p,D),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function wl(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ru(E);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var D;if(p.error&&!Ru(p)){const H=(null===(D=p.error.code)||void 0===D?void 0:D.split("auth/")[1])||"internal-error";m.onError(Ke(this.auth,H))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const D=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&D}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ga(p))}saveEventToCache(p){this.cachedEventUids.add(Ga(p)),this.lastProcessedEventTime=Date.now()}}function Ga(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(p=>p).join("-")}function Ru({type:E,error:p}){return"unknown"===E&&"auth/no-auth-event"===(null==p?void 0:p.code)}function Mu(E){return zl.apply(this,arguments)}function zl(){return(zl=(0,S.Z)(function*(E,p={}){return _n(E,"GET","/v1/projects",p)})).apply(this,arguments)}const bh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Kl=/^https?/;function Bc(){return(Bc=(0,S.Z)(function*(E){if(E.config.emulator)return;const{authorizedDomains:p}=yield Mu(E);for(const m of p)try{if(io(m))return}catch(D){}Xe(E,"unauthorized-domain")})).apply(this,arguments)}function io(E){const p=mt(),{protocol:m,hostname:D}=new URL(p);if(E.startsWith("chrome-extension://")){const be=new URL(E);return""===be.hostname&&""===D?"chrome-extension:"===m&&E.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&be.hostname===D}if(!Kl.test(m))return!1;if(bh.test(E))return D===E;const H=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+H+"|"+H+")$","i").test(D)}const Ch=new cn(3e4,6e4);function qr(){const E=ti().___jsl;if(null==E?void 0:E.H)for(const p of Object.keys(E.H))if(E.H[p].r=E.H[p].r||[],E.H[p].L=E.H[p].L||[],E.H[p].r=[...E.H[p].L],E.CP)for(let m=0;m<E.CP.length;m++)E.CP[m]=null}let Ql=null;function Xu(E){return Ql=Ql||function Vp(E){return new Promise((p,m)=>{var D,H,Y;function be(){qr(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{qr(),m(Ke(E,"network-request-failed"))},timeout:Ch.get()})}if(null===(H=null===(D=ti().gapi)||void 0===D?void 0:D.iframes)||void 0===H?void 0:H.Iframe)p(gapi.iframes.getContext());else{if(!(null===(Y=ti().gapi)||void 0===Y?void 0:Y.load)){const Qe=ln("iframefcb");return ti()[Qe]=()=>{gapi.load?be():m(Ke(E,"network-request-failed"))},lu(`https://apis.google.com/js/api.js?onload=${Qe}`).catch(St=>m(St))}be()}}).catch(p=>{throw Ql=null,p})}(E),Ql}const jp=new cn(5e3,15e3),Pu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Cf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Th(E){const p=E.config;X(p.authDomain,E,"auth-domain-config-required");const m=p.emulator?Yt(p,"emulator/auth/iframe"):`https://${E.config.authDomain}/__/auth/iframe`,D={apiKey:p.apiKey,appName:E.name,v:Ce.SDK_VERSION},H=Cf.get(E.config.apiHost);H&&(D.eid=H);const Y=E._getFrameworks();return Y.length&&(D.fw=Y.join(",")),`${m}?${(0,J.xO)(D).slice(1)}`}function Xl(){return Xl=(0,S.Z)(function*(E){const p=yield Xu(E),m=ti().gapi;return X(m,E,"internal-error"),p.open({where:document.body,url:Th(E),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Pu,dontclear:!0},D=>new Promise(function(){var H=(0,S.Z)(function*(Y,be){yield D.restyle({setHideOnLeave:!1});const Qe=Ke(E,"network-request-failed"),St=ti().setTimeout(()=>{be(Qe)},jp.get());function Ut(){ti().clearTimeout(St),Y(D)}D.ping(Ut).then(Ut,()=>{be(Qe)})});return function(Y,be){return H.apply(this,arguments)}}()))}),Xl.apply(this,arguments)}const Dh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Sf{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function qa(E,p,m,D,H,Y){X(E.config.authDomain,E,"auth-domain-config-required"),X(E.config.apiKey,E,"invalid-api-key");const be={apiKey:E.config.apiKey,appName:E.name,authType:m,redirectUrl:D,v:Ce.SDK_VERSION,eventId:H};if(p instanceof Qr){p.setDefaultLanguage(E.languageCode),be.providerId=p.providerId||"",(0,J.xb)(p.getCustomParameters())||(be.customParameters=JSON.stringify(p.getCustomParameters()));for(const[St,Ut]of Object.entries(Y||{}))be[St]=Ut}if(p instanceof li){const St=p.getScopes().filter(Ut=>""!==Ut);St.length>0&&(be.scopes=St.join(","))}E.tenantId&&(be.tid=E.tenantId);const Qe=be;for(const St of Object.keys(Qe))void 0===Qe[St]&&delete Qe[St];return`${function ec({config:E}){return E.emulator?Yt(E,"emulator/auth/handler"):`https://${E.authDomain}/__/auth/handler`}(E)}?${(0,J.xO)(Qe).slice(1)}`}const Wa="webStorageSupport";class Vc extends class qg{constructor(p){this.factorId=p}_process(p,m,D){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,D);case"signin":return this._finalizeSignIn(p,m.credential);default:return ze("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Vc(p)}_finalizeEnroll(p,m,D){return function ml(E,p){return _n(E,"POST","/v2/accounts/mfaEnrollment:finalize",sn(E,p))}(p,{idToken:m,displayName:D,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function ur(E,p){return _n(E,"POST","/v2/accounts/mfaSignIn:finalize",sn(E,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Af=(()=>{class E{constructor(){}static assertion(m){return Vc._fromCredential(m)}}return E.FACTOR_ID="phone",E})();var tc="@firebase/auth";class Jo{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,S.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(D=>{var H;p((null===(H=D)||void 0===H?void 0:H.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);!m||(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function hu(){return window}function Ro(){return(Ro=(0,S.Z)(function*(E,p,m){var D;const{BuildInfo:H}=hu();ue(p.sessionId,"AuthEvent did not contain a session ID");const Y=yield xf(p.sessionId),be={};return vi()?be.ibi=H.packageName:ai()?be.apn=H.packageName:Xe(E,"operation-not-supported-in-this-environment"),H.displayName&&(be.appDisplayName=H.displayName),be.sessionId=Y,qa(E,m,p.type,void 0,null!==(D=p.eventId)&&void 0!==D?D:void 0,be)})).apply(this,arguments)}function pr(){return(pr=(0,S.Z)(function*(E){const{BuildInfo:p}=hu(),m={};vi()?m.iosBundleId=p.packageName:ai()?m.androidPackageName=p.packageName:Xe(E,"operation-not-supported-in-this-environment"),yield Mu(E,m)})).apply(this,arguments)}function va(){return(va=(0,S.Z)(function*(E,p,m){const{cordova:D}=hu();let H=()=>{};try{yield new Promise((Y,be)=>{let Qe=null;function St(){var nn;Y();const qi=null===(nn=D.plugins.browsertab)||void 0===nn?void 0:nn.close;"function"==typeof qi&&qi(),"function"==typeof(null==m?void 0:m.close)&&m.close()}function Ut(){Qe||(Qe=window.setTimeout(()=>{be(Ke(E,"redirect-cancelled-by-user"))},2e3))}function pn(){"visible"===(null==document?void 0:document.visibilityState)&&Ut()}p.addPassiveListener(St),document.addEventListener("resume",Ut,!1),ai()&&document.addEventListener("visibilitychange",pn,!1),H=()=>{p.removePassiveListener(St),document.removeEventListener("resume",Ut,!1),document.removeEventListener("visibilitychange",pn,!1),Qe&&window.clearTimeout(Qe)}})}finally{H()}})).apply(this,arguments)}function xf(E){return ic.apply(this,arguments)}function ic(){return(ic=(0,S.Z)(function*(E){const p=wa(E),m=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(m)).map(H=>H.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function wa(E){if(ue(/[0-9a-zA-Z]+/.test(E),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(E);const p=new ArrayBuffer(E.length),m=new Uint8Array(p);for(let D=0;D<E.length;D++)m[D]=E.charCodeAt(D);return m}!function jc(E){(0,Ce._registerComponent)(new Me.wA("auth",(p,{options:m})=>{const D=p.getProvider("app").getImmediate(),H=p.getProvider("heartbeat"),{apiKey:Y,authDomain:be}=D.options;return((Qe,St)=>{X(Y&&!Y.includes(":"),"invalid-api-key",{appName:Qe.name}),X(!(null==be?void 0:be.includes(":")),"argument-error",{appName:Qe.name});const Ut={apiKey:Y,authDomain:be,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Si(E)},pn=new _t(Qe,St,Ut);return function $e(E,p){const m=(null==p?void 0:p.persistence)||[],D=(Array.isArray(m)?m:[m]).map(Ae);(null==p?void 0:p.errorMap)&&E._updateErrorMap(p.errorMap),E._initializeWithPersistence(D,null==p?void 0:p.popupRedirectResolver)}(pn,m),pn})(D,H)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,D)=>{p.getProvider("auth-internal").initialize()})),(0,Ce._registerComponent)(new Me.wA("auth-internal",p=>{const m=Ht(p.getProvider("auth").getImmediate());return new Jo(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ce.registerVersion)(tc,"0.20.3",function Ah(E){switch(E){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(E)),(0,Ce.registerVersion)(tc,"0.20.3","esm2017")}("Browser");class ci extends ro{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(p)),super.onEvent(p)}initialized(){var p=this;return(0,S.Z)(function*(){yield p.initPromise})()}}function Cl(E){return sc.apply(this,arguments)}function sc(){return(sc=(0,S.Z)(function*(E){const p=yield Fd()._get(oc(E));return p&&(yield Fd()._remove(oc(E))),p})).apply(this,arguments)}function Hc(){const E=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const D=Math.floor(Math.random()*p.length);E.push(p.charAt(D))}return E.join("")}function Fd(){return Ae(su)}function oc(E){return Fr("authEvent",E.config.apiKey,E.name)}function Nu(E){if(!(null==E?void 0:E.includes("?")))return{};const[p,...m]=E.split("?");return(0,J.zd)(m.join("?"))}function Zc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ke("no-auth-event")}}function Ia(){var E;return(null===(E=null==self?void 0:self.location)||void 0===E?void 0:E.protocol)||null}function ku(E=(0,J.z$)()){return!("file:"!==Ia()&&"ionic:"!==Ia()&&"capacitor:"!==Ia()||!E.toLowerCase().match(/iphone|ipad|ipod|android/))}function Mo(){try{const E=self.localStorage,p=$a();if(E)return E.setItem(p,"1"),E.removeItem(p),!function qn(E=(0,J.z$)()){return function uc(){return(0,J.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Fn(E=(0,J.z$)()){return/Edge\/\d+/.test(E)}(E)}()||(0,J.hl)()}catch(E){return qc()&&(0,J.hl)()}return!1}function qc(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Xn(){return(function Gn(){return"http:"===Ia()||"https:"===Ia()}()||(0,J.ru)()||ku())&&!function Gc(){return(0,J.b$)()||(0,J.UG)()}()&&Mo()&&!qc()}function lc(){return ku()&&"undefined"!=typeof document}function cc(){return(cc=(0,S.Z)(function*(){return!!lc()&&new Promise(E=>{const p=setTimeout(()=>{E(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),E(!0)})})})).apply(this,arguments)}const so={LOCAL:"local",NONE:"none",SESSION:"session"},vo=X,zc="persistence";function Kc(E){return Ld.apply(this,arguments)}function Ld(){return(Ld=(0,S.Z)(function*(E){yield E._initializationPromise;const p=Ud(),m=Fr(zc,E.config.apiKey,E.name);p&&p.setItem(m,E._getPersistence())})).apply(this,arguments)}function Ud(){var E;try{return(null===(E=function Wc(){return"undefined"!=typeof window?window:null}())||void 0===E?void 0:E.sessionStorage)||null}catch(p){return null}}const Bd=X;class ir{constructor(){this.browserResolver=Ae(class Sh{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=js,this._completeRedirectFn=ya,this._overrideRedirectResult=U}_openPopup(p,m,D,H){var Y=this;return(0,S.Z)(function*(){var be;ue(null===(be=Y.eventManagers[p._key()])||void 0===be?void 0:be.manager,"_initialize() not called before _openPopup()");const Qe=qa(p,m,D,mt(),H);return function kd(E,p,m,D=500,H=600){const Y=Math.max((window.screen.availHeight-H)/2,0).toString(),be=Math.max((window.screen.availWidth-D)/2,0).toString();let Qe="";const St=Object.assign(Object.assign({},Dh),{width:D.toString(),height:H.toString(),top:Y,left:be}),Ut=(0,J.z$)().toLowerCase();m&&(Qe=vn(Ut)?"_blank":m),yi(Ut)&&(p=p||"http://localhost",St.scrollbars="yes");const pn=Object.entries(St).reduce((qi,[No,hc])=>`${qi}${No}=${hc},`,"");if(function Ps(E=(0,J.z$)()){var p;return vi(E)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(Ut)&&"_self"!==Qe)return function Qo(E,p){const m=document.createElement("a");m.href=E,m.target=p;const D=document.createEvent("MouseEvent");D.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(D)}(p||"",Qe),new Sf(null);const nn=window.open(p||"",Qe,pn);X(nn,E,"popup-blocked");try{nn.focus()}catch(qi){}return new Sf(nn)}(p,Qe,$a())})()}_openRedirect(p,m,D,H){var Y=this;return(0,S.Z)(function*(){return yield Y._originValidation(p),function Za(E){ti().location.href=E}(qa(p,m,D,mt(),H)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:H,promise:Y}=this.eventManagers[m];return H?Promise.resolve(H):(ue(Y,"If manager is not set, promise should be"),Y)}const D=this.initAndGetManager(p);return this.eventManagers[m]={promise:D},D.catch(()=>{delete this.eventManagers[m]}),D}initAndGetManager(p){var m=this;return(0,S.Z)(function*(){const D=yield function Gs(E){return Xl.apply(this,arguments)}(p),H=new ro(p);return D.register("authEvent",Y=>(X(null==Y?void 0:Y.authEvent,p,"invalid-auth-event"),{status:H.onEvent(Y.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:H},m.iframes[p._key()]=D,H})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(Wa,{type:Wa},H=>{var Y;const be=null===(Y=null==H?void 0:H[0])||void 0===Y?void 0:Y[Wa];void 0!==be&&m(!!be),Xe(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Yl(E){return Bc.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return wi()||Qi()||vi()}}),this.cordovaResolver=Ae(class Zp{constructor(){this._redirectPersistence=js,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ya,this._overrideRedirectResult=U}_initialize(p){var m=this;return(0,S.Z)(function*(){const D=p._key();let H=m.eventManagers.get(D);return H||(H=new ci(p),m.eventManagers.set(D,H),m.attachCallbackListeners(p,H)),H})()}_openPopup(p){Xe(p,"operation-not-supported-in-this-environment")}_openRedirect(p,m,D,H){var Y=this;return(0,S.Z)(function*(){!function ri(E){var p,m,D,H,Y,be,Qe,St,Ut,pn;const nn=hu();X("function"==typeof(null===(p=null==nn?void 0:nn.universalLinks)||void 0===p?void 0:p.subscribe),E,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),X(void 0!==(null===(m=null==nn?void 0:nn.BuildInfo)||void 0===m?void 0:m.packageName),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),X("function"==typeof(null===(Y=null===(H=null===(D=null==nn?void 0:nn.cordova)||void 0===D?void 0:D.plugins)||void 0===H?void 0:H.browsertab)||void 0===Y?void 0:Y.openUrl),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),X("function"==typeof(null===(St=null===(Qe=null===(be=null==nn?void 0:nn.cordova)||void 0===be?void 0:be.plugins)||void 0===Qe?void 0:Qe.browsertab)||void 0===St?void 0:St.isAvailable),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),X("function"==typeof(null===(pn=null===(Ut=null==nn?void 0:nn.cordova)||void 0===Ut?void 0:Ut.InAppBrowser)||void 0===pn?void 0:pn.open),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const be=yield Y._initialize(p);yield be.initialized(),be.resetRedirect(),function k(){Jn.clear()}(),yield Y._originValidation(p);const Qe=function Rn(E,p,m=null){return{type:p,eventId:m,urlResponse:null,sessionId:Hc(),postBody:null,tenantId:E.tenantId,error:Ke(E,"no-auth-event")}}(p,D,H);yield function qs(E,p){return Fd()._set(oc(E),p)}(p,Qe);const St=yield function nc(E,p,m){return Ro.apply(this,arguments)}(p,Qe,m),Ut=yield function gr(E){const{cordova:p}=hu();return new Promise(m=>{p.plugins.browsertab.isAvailable(D=>{let H=null;D?p.plugins.browsertab.openUrl(E):H=p.InAppBrowser.open(E,function Bo(E=(0,J.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}()?"_blank":"_system","location=yes"),m(H)})})}(St);return function Hn(E,p,m){return va.apply(this,arguments)}(p,be,Ut)})()}_isIframeWebStorageSupported(p,m){throw new Error("Method not implemented.")}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function rc(E){return pr.apply(this,arguments)}(p)),this.originValidationPromises[m]}attachCallbackListeners(p,m){const{universalLinks:D,handleOpenURL:H,BuildInfo:Y}=hu(),be=setTimeout((0,S.Z)(function*(){yield Cl(p),m.onEvent(Zc())}),500),Qe=function(){var pn=(0,S.Z)(function*(nn){clearTimeout(be);const qi=yield Cl(p);let No=null;qi&&(null==nn?void 0:nn.url)&&(No=function Xo(E,p){var m,D;const H=function Ea(E){const p=Nu(E),m=p.link?decodeURIComponent(p.link):void 0,D=Nu(m).link,H=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return Nu(H).link||H||D||m||E}(p);if(H.includes("/__/auth/callback")){const Y=Nu(H),be=Y.firebaseError?function di(E){try{return JSON.parse(E)}catch(p){return null}}(decodeURIComponent(Y.firebaseError)):null,Qe=null===(D=null===(m=null==be?void 0:be.code)||void 0===m?void 0:m.split("auth/"))||void 0===D?void 0:D[1],St=Qe?Ke(Qe):null;return St?{type:E.type,eventId:E.eventId,tenantId:E.tenantId,error:St,urlResponse:null,sessionId:null,postBody:null}:{type:E.type,eventId:E.eventId,tenantId:E.tenantId,sessionId:E.sessionId,urlResponse:H,postBody:null}}return null}(qi,nn.url)),m.onEvent(No||Zc())});return function(qi){return pn.apply(this,arguments)}}();void 0!==D&&"function"==typeof D.subscribe&&D.subscribe(null,Qe);const St=H,Ut=`${Y.packageName.toLowerCase()}://`;hu().handleOpenURL=function(){var pn=(0,S.Z)(function*(nn){if(nn.toLowerCase().startsWith(Ut)&&Qe({url:nn}),"function"==typeof St)try{St(nn)}catch(qi){console.error(qi)}});return function(nn){return pn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=js,this._completeRedirectFn=ya,this._overrideRedirectResult=U}_initialize(p){var m=this;return(0,S.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,m,D,H){var Y=this;return(0,S.Z)(function*(){return yield Y.selectUnderlyingResolver(),Y.assertedUnderlyingResolver._openPopup(p,m,D,H)})()}_openRedirect(p,m,D,H){var Y=this;return(0,S.Z)(function*(){return yield Y.selectUnderlyingResolver(),Y.assertedUnderlyingResolver._openRedirect(p,m,D,H)})()}_isIframeWebStorageSupported(p,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,m)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return lc()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Bd(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,S.Z)(function*(){if(p.underlyingResolver)return;const m=yield function Ss(){return cc.apply(this,arguments)}();p.underlyingResolver=m?p.cordovaResolver:p.browserResolver})()}}function nl(E){return E.unwrap()}function Yc(E){return rl(E)}function rl(E){const{_tokenResponse:p}=E instanceof J.ZR?E.customData:E;if(!p)return null;if(!(E instanceof J.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return Ts.credentialFromResult(E);const m=p.providerId;if(!m||"password"===m)return null;let D;switch(m){case"google.com":D=ka;break;case"facebook.com":D=rs;break;case"github.com":D=Is;break;case"twitter.com":D=ta;break;default:const{oauthIdToken:H,oauthAccessToken:Y,oauthTokenSecret:be,pendingToken:Qe,nonce:St}=p;return Y||be||H||Qe?Qe?m.startsWith("saml.")?Ei._create(m,Qe):pe._fromParams({providerId:m,signInMethod:m,pendingToken:Qe,idToken:H,accessToken:Y}):new ds(m).credential({idToken:H,accessToken:Y,rawNonce:St}):null}return E instanceof J.ZR?D.credentialFromError(E):D.credentialFromResult(E)}function Oi(E,p){return p.catch(m=>{throw m instanceof J.ZR&&function Tl(E,p){var m;const D=null===(m=p.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===p.code)p.resolver=new Gp(E,function Zn(E,p){var m;const D=(0,J.m9)(E),H=p;return X(p.customData.operationType,D,"argument-error"),X(null===(m=H.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,D,"argument-error"),la._fromError(D,H)}(E,p));else if(D){const H=rl(p),Y=p;H&&(Y.credential=H,Y.tenantId=D.tenantId||void 0,Y.email=D.email||void 0,Y.phoneNumber=D.phoneNumber||void 0)}}(E,m),m}).then(m=>{const H=m.user;return{operationType:m.operationType,credential:Yc(m),additionalUserInfo:Mi(m),user:Po.getOrCreate(H)}})}function il(E,p){return An.apply(this,arguments)}function An(){return(An=(0,S.Z)(function*(E,p){const m=yield p;return{verificationId:m.verificationId,confirm:D=>Oi(E,m.confirm(D))}})).apply(this,arguments)}class Gp{constructor(p,m){this.resolver=m,this.auth=function Vd(E){return E.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return Oi(nl(this.auth),this.resolver.resolveSignIn(p))}}class Po{constructor(p){this._delegate=p,this.multiFactor=function yl(E){const p=(0,J.m9)(E);return Vs.has(p)||Vs.set(p,mo._fromUser(p)),Vs.get(p)}(p)}static getOrCreate(p){return Po.USER_MAP.has(p)||Po.USER_MAP.set(p,new Po(p)),Po.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var m=this;return(0,S.Z)(function*(){return Oi(m.auth,En(m._delegate,p))})()}linkWithPhoneNumber(p,m){var D=this;return(0,S.Z)(function*(){return il(D.auth,function Ku(E,p,m){return $s.apply(this,arguments)}(D._delegate,p,m))})()}linkWithPopup(p){var m=this;return(0,S.Z)(function*(){return Oi(m.auth,function ms(E,p,m){return Ln.apply(this,arguments)}(m._delegate,p,ir))})()}linkWithRedirect(p){var m=this;return(0,S.Z)(function*(){return yield Kc(Ht(m.auth)),function rr(E,p,m){return function an(E,p,m){return Ar.apply(this,arguments)}(E,p,m)}(m._delegate,p,ir)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var m=this;return(0,S.Z)(function*(){return Oi(m.auth,Ir(m._delegate,p))})()}reauthenticateWithPhoneNumber(p,m){return il(this.auth,function vl(E,p,m){return Ue.apply(this,arguments)}(this._delegate,p,m))}reauthenticateWithPopup(p){return Oi(this.auth,function fr(E,p,m){return So.apply(this,arguments)}(this._delegate,p,ir))}reauthenticateWithRedirect(p){var m=this;return(0,S.Z)(function*(){return yield Kc(Ht(m.auth)),function Bt(E,p,m){return function Zt(E,p,m){return wn.apply(this,arguments)}(E,p,m)}(m._delegate,p,ir)})()}sendEmailVerification(p){return function Js(E,p){return Xr.apply(this,arguments)}(this._delegate,p)}unlink(p){var m=this;return(0,S.Z)(function*(){return yield function Co(E,p){return jn.apply(this,arguments)}(m._delegate,p),m})()}updateEmail(p){return function bu(E,p){return oa((0,J.m9)(E),p,null)}(this._delegate,p)}updatePassword(p){return function ps(E,p){return oa((0,J.m9)(E),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function fa(E,p){return Zi.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function Ba(E,p){return Gu.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,m){return function Ci(E,p,m){return iu.apply(this,arguments)}(this._delegate,p,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Po.USER_MAP=new WeakMap;const Qc=X;let Vr=(()=>{class E{constructor(m,D){if(this.app=m,D.isInitialized())return this._delegate=D.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:H}=m.options;Qc(H,"invalid-api-key",{appName:m.name}),Qc(H,"invalid-api-key",{appName:m.name});const Y="undefined"!=typeof window?ir:void 0;this._delegate=D.initialize({options:{persistence:qp(H,m.name),popupRedirectResolver:Y}}),this._delegate._updateErrorMap(at),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Po.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,D){!function Kr(E,p,m){const D=Ht(E);X(D._canInitEmulator,D,"emulator-config-failed"),X(/^https?:\/\//.test(p),D,"invalid-emulator-scheme");const H=!!(null==m?void 0:m.disableWarnings),Y=Ji(p),{host:be,port:Qe}=function Cr(E){const p=Ji(E),m=/(\/\/)?([^?#/]+)/.exec(E.substr(p.length));if(!m)return{host:"",port:null};const D=m[2].split("@").pop()||"",H=/^(\[[^\]]+\])(:|$)/.exec(D);if(H){const Y=H[1];return{host:Y,port:Ai(D.substr(Y.length+1))}}{const[Y,be]=D.split(":");return{host:Y,port:Ai(be)}}}(p);D.config.emulator={url:`${Y}//${be}${null===Qe?"":`:${Qe}`}/`},D.settings.appVerificationDisabledForTesting=!0,D.emulatorConfig=Object.freeze({host:be,port:Qe,protocol:Y.replace(":",""),options:Object.freeze({disableWarnings:H})}),H||function dr(){function E(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",E):E())}()}(this._delegate,m,D)}applyActionCode(m){return function nu(E,p){return gt.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Dn(this._delegate,m)}confirmPasswordReset(m,D){return function Fs(E,p,m){return ra.apply(this,arguments)}(this._delegate,m,D)}createUserWithEmailAndPassword(m,D){var H=this;return(0,S.Z)(function*(){return Oi(H._delegate,function ia(E,p,m){return bs.apply(this,arguments)}(H._delegate,m,D))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function sa(E,p){return Us.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function ru(E,p){const m=cs.parseLink(p);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}(0,m)}getRedirectResult(){var m=this;return(0,S.Z)(function*(){Qc(Xn(),m._delegate,"operation-not-supported-in-this-environment");const D=yield function os(E,p){return no.apply(this,arguments)}(m._delegate,ir);return D?Oi(m._delegate,Promise.resolve(D)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function xh(E,p){Ht(E)._logFramework(p)}(this._delegate,m)}onAuthStateChanged(m,D,H){const{next:Y,error:be,complete:Qe}=Jc(m,D,H);return this._delegate.onAuthStateChanged(Y,be,Qe)}onIdTokenChanged(m,D,H){const{next:Y,error:be,complete:Qe}=Jc(m,D,H);return this._delegate.onIdTokenChanged(Y,be,Qe)}sendSignInLinkToEmail(m,D){return function pl(E,p,m){return jl.apply(this,arguments)}(this._delegate,m,D)}sendPasswordResetEmail(m,D){return function fo(E,p,m){return fs.apply(this,arguments)}(this._delegate,m,D||void 0)}setPersistence(m){var D=this;return(0,S.Z)(function*(){let H;switch(function pu(E,p){vo(Object.values(so).includes(p),E,"invalid-persistence-type"),(0,J.b$)()?vo(p!==so.SESSION,E,"unsupported-persistence-type"):(0,J.UG)()?vo(p===so.NONE,E,"unsupported-persistence-type"):qc()?vo(p===so.NONE||p===so.LOCAL&&(0,J.hl)(),E,"unsupported-persistence-type"):vo(p===so.NONE||Mo(),E,"unsupported-persistence-type")}(D._delegate,m),m){case so.SESSION:H=js;break;case so.LOCAL:H=(yield Ae(qt)._isAvailable())?qt:su;break;case so.NONE:H=dn;break;default:return Xe("argument-error",{appName:D._delegate.name})}return D._delegate.setPersistence(H)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return Oi(this._delegate,function Nr(E){return ho.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return Oi(this._delegate,hn(this._delegate,m))}signInWithCustomToken(m){return Oi(this._delegate,function Ri(E,p){return Kt.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,D){return Oi(this._delegate,function Ua(E,p,m){return hn((0,J.m9)(E),Oa.credential(p,m))}(this._delegate,m,D))}signInWithEmailLink(m,D){return Oi(this._delegate,function Iu(E,p,m){return Cs.apply(this,arguments)}(this._delegate,m,D))}signInWithPhoneNumber(m,D){return il(this._delegate,function Ti(E,p,m){return zu.apply(this,arguments)}(this._delegate,m,D))}signInWithPopup(m){var D=this;return(0,S.Z)(function*(){return Qc(Xn(),D._delegate,"operation-not-supported-in-this-environment"),Oi(D._delegate,function Qu(E,p,m){return ss.apply(this,arguments)}(D._delegate,m,ir))})()}signInWithRedirect(m){var D=this;return(0,S.Z)(function*(){return Qc(Xn(),D._delegate,"operation-not-supported-in-this-environment"),yield Kc(D._delegate),function Pe(E,p,m){return function Le(E,p,m){return pt.apply(this,arguments)}(E,p,m)}(D._delegate,m,ir)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function Ur(E,p){return Ho.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return E.Persistence=so,E})();function Jc(E,p,m){let D=E;"function"!=typeof E&&({next:D,error:p,complete:m}=E);const H=D;return{next:be=>H(be&&Po.getOrCreate(be)),error:p,complete:m}}function qp(E,p){const m=function $n(E,p){const m=Ud();if(!m)return[];const D=Fr(zc,E,p);switch(m.getItem(D)){case so.NONE:return[dn];case so.LOCAL:return[qt,js];case so.SESSION:return[js];default:return[]}}(E,p);if("undefined"!=typeof self&&!m.includes(qt)&&m.push(qt),"undefined"!=typeof window)for(const D of[su,js])m.includes(D)||m.push(D);return m.includes(dn)||m.push(dn),m}class ki{constructor(){this.providerId="phone",this._delegate=new Ts(nl(v.Z.auth()))}static credential(p,m){return Ts.credential(p,m)}verifyPhoneNumber(p,m){return this._delegate.verifyPhoneNumber(p,m)}unwrap(){return this._delegate}}ki.PHONE_SIGN_IN_METHOD=Ts.PHONE_SIGN_IN_METHOD,ki.PROVIDER_ID=Ts.PROVIDER_ID;const sl=X;class jd{constructor(p,m,D=v.Z.app()){var H;sl(null===(H=D.options)||void 0===H?void 0:H.apiKey,"invalid-api-key",{appName:D.name}),this._delegate=new Nd(p,m,D.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function oo(E){E.INTERNAL.registerComponent(new Me.wA("auth-compat",p=>{const m=p.getProvider("app-compat").getImmediate(),D=p.getProvider("auth");return new Vr(m,D)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Oa,FacebookAuthProvider:rs,GithubAuthProvider:Is,GoogleAuthProvider:ka,OAuthProvider:ds,SAMLAuthProvider:Ii,PhoneAuthProvider:ki,PhoneMultiFactorGenerator:Af,RecaptchaVerifier:jd,TwitterAuthProvider:ta,Auth:Vr,AuthCredential:Zr,Error:J.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),E.registerVersion("@firebase/auth-compat","0.2.16")}(v.Z)},8306:(Rt,Ve,V)=>{V.d(Ve,{y:()=>le});var S=V(930),v=V(727),J=V(8822),Ce=V(4671);var Me=V(2416),xe=V(576),Oe=V(2806);let le=(()=>{class nt{constructor(bt){bt&&(this._subscribe=bt)}lift(bt){const Ze=new nt;return Ze.source=this,Ze.operator=bt,Ze}subscribe(bt,Ze,rt){const Ie=function It(nt){return nt&&nt instanceof S.Lv||function De(nt){return nt&&(0,xe.m)(nt.next)&&(0,xe.m)(nt.error)&&(0,xe.m)(nt.complete)}(nt)&&(0,v.Nn)(nt)}(bt)?bt:new S.Hp(bt,Ze,rt);return(0,Oe.x)(()=>{const{operator:At,source:Xe}=this;Ie.add(At?At.call(Ie,Xe):Xe?this._subscribe(Ie):this._trySubscribe(Ie))}),Ie}_trySubscribe(bt){try{return this._subscribe(bt)}catch(Ze){bt.error(Ze)}}forEach(bt,Ze){return new(Ze=ae(Ze))((rt,Ie)=>{const At=new S.Hp({next:Xe=>{try{bt(Xe)}catch(Ke){Ie(Ke),At.unsubscribe()}},error:Ie,complete:rt});this.subscribe(At)})}_subscribe(bt){var Ze;return null===(Ze=this.source)||void 0===Ze?void 0:Ze.subscribe(bt)}[J.L](){return this}pipe(...bt){return function ve(nt){return 0===nt.length?Ce.y:1===nt.length?nt[0]:function(bt){return nt.reduce((Ze,rt)=>rt(Ze),bt)}}(bt)(this)}toPromise(bt){return new(bt=ae(bt))((Ze,rt)=>{let Ie;this.subscribe(At=>Ie=At,At=>rt(At),()=>Ze(Ie))})}}return nt.create=at=>new nt(at),nt})();function ae(nt){var at;return null!==(at=null!=nt?nt:Me.v.Promise)&&void 0!==at?at:Promise}},7579:(Rt,Ve,V)=>{V.d(Ve,{x:()=>Me});var S=V(8306),v=V(727);const Ce=(0,V(3888).d)(Oe=>function(){Oe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ee=V(8737),ve=V(2806);let Me=(()=>{class Oe extends S.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ae){const De=new xe(this,this);return De.operator=ae,De}_throwIfClosed(){if(this.closed)throw new Ce}next(ae){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const De of this.currentObservers)De.next(ae)}})}error(ae){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ae;const{observers:De}=this;for(;De.length;)De.shift().error(ae)}})}complete(){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ae}=this;for(;ae.length;)ae.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ae;return(null===(ae=this.observers)||void 0===ae?void 0:ae.length)>0}_trySubscribe(ae){return this._throwIfClosed(),super._trySubscribe(ae)}_subscribe(ae){return this._throwIfClosed(),this._checkFinalizedStatuses(ae),this._innerSubscribe(ae)}_innerSubscribe(ae){const{hasError:De,isStopped:It,observers:nt}=this;return De||It?v.Lc:(this.currentObservers=null,nt.push(ae),new v.w0(()=>{this.currentObservers=null,(0,Ee.P)(nt,ae)}))}_checkFinalizedStatuses(ae){const{hasError:De,thrownError:It,isStopped:nt}=this;De?ae.error(It):nt&&ae.complete()}asObservable(){const ae=new S.y;return ae.source=this,ae}}return Oe.create=(le,ae)=>new xe(le,ae),Oe})();class xe extends Me{constructor(le,ae){super(),this.destination=le,this.source=ae}next(le){var ae,De;null===(De=null===(ae=this.destination)||void 0===ae?void 0:ae.next)||void 0===De||De.call(ae,le)}error(le){var ae,De;null===(De=null===(ae=this.destination)||void 0===ae?void 0:ae.error)||void 0===De||De.call(ae,le)}complete(){var le,ae;null===(ae=null===(le=this.destination)||void 0===le?void 0:le.complete)||void 0===ae||ae.call(le)}_subscribe(le){var ae,De;return null!==(De=null===(ae=this.source)||void 0===ae?void 0:ae.subscribe(le))&&void 0!==De?De:v.Lc}}},930:(Rt,Ve,V)=>{V.d(Ve,{Hp:()=>bt,Lv:()=>De});var S=V(576),v=V(727),J=V(2416),Ce=V(7849),Ee=V(5032);const ve=Oe("C",void 0,void 0);function Oe(Xe,Ke,je){return{kind:Xe,value:Ke,error:je}}var le=V(3410),ae=V(2806);class De extends v.w0{constructor(Ke){super(),this.isStopped=!1,Ke?(this.destination=Ke,(0,v.Nn)(Ke)&&Ke.add(this)):this.destination=At}static create(Ke,je,Je){return new bt(Ke,je,Je)}next(Ke){this.isStopped?Ie(function xe(Xe){return Oe("N",Xe,void 0)}(Ke),this):this._next(Ke)}error(Ke){this.isStopped?Ie(function Me(Xe){return Oe("E",void 0,Xe)}(Ke),this):(this.isStopped=!0,this._error(Ke))}complete(){this.isStopped?Ie(ve,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ke){this.destination.next(Ke)}_error(Ke){try{this.destination.error(Ke)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const It=Function.prototype.bind;function nt(Xe,Ke){return It.call(Xe,Ke)}class at{constructor(Ke){this.partialObserver=Ke}next(Ke){const{partialObserver:je}=this;if(je.next)try{je.next(Ke)}catch(Je){Ze(Je)}}error(Ke){const{partialObserver:je}=this;if(je.error)try{je.error(Ke)}catch(Je){Ze(Je)}else Ze(Ke)}complete(){const{partialObserver:Ke}=this;if(Ke.complete)try{Ke.complete()}catch(je){Ze(je)}}}class bt extends De{constructor(Ke,je,Je){let yt;if(super(),(0,S.m)(Ke)||!Ke)yt={next:null!=Ke?Ke:void 0,error:null!=je?je:void 0,complete:null!=Je?Je:void 0};else{let X;this&&J.v.useDeprecatedNextContext?(X=Object.create(Ke),X.unsubscribe=()=>this.unsubscribe(),yt={next:Ke.next&&nt(Ke.next,X),error:Ke.error&&nt(Ke.error,X),complete:Ke.complete&&nt(Ke.complete,X)}):yt=Ke}this.destination=new at(yt)}}function Ze(Xe){J.v.useDeprecatedSynchronousErrorHandling?(0,ae.O)(Xe):(0,Ce.h)(Xe)}function Ie(Xe,Ke){const{onStoppedNotification:je}=J.v;je&&le.z.setTimeout(()=>je(Xe,Ke))}const At={closed:!0,next:Ee.Z,error:function rt(Xe){throw Xe},complete:Ee.Z}},727:(Rt,Ve,V)=>{V.d(Ve,{Lc:()=>ve,w0:()=>Ee,Nn:()=>Me});var S=V(576);const J=(0,V(3888).d)(Oe=>function(ae){Oe(this),this.message=ae?`${ae.length} errors occurred during unsubscription:\n${ae.map((De,It)=>`${It+1}) ${De.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ae});var Ce=V(8737);class Ee{constructor(le){this.initialTeardown=le,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let le;if(!this.closed){this.closed=!0;const{_parentage:ae}=this;if(ae)if(this._parentage=null,Array.isArray(ae))for(const nt of ae)nt.remove(this);else ae.remove(this);const{initialTeardown:De}=this;if((0,S.m)(De))try{De()}catch(nt){le=nt instanceof J?nt.errors:[nt]}const{_finalizers:It}=this;if(It){this._finalizers=null;for(const nt of It)try{xe(nt)}catch(at){le=null!=le?le:[],at instanceof J?le=[...le,...at.errors]:le.push(at)}}if(le)throw new J(le)}}add(le){var ae;if(le&&le!==this)if(this.closed)xe(le);else{if(le instanceof Ee){if(le.closed||le._hasParent(this))return;le._addParent(this)}(this._finalizers=null!==(ae=this._finalizers)&&void 0!==ae?ae:[]).push(le)}}_hasParent(le){const{_parentage:ae}=this;return ae===le||Array.isArray(ae)&&ae.includes(le)}_addParent(le){const{_parentage:ae}=this;this._parentage=Array.isArray(ae)?(ae.push(le),ae):ae?[ae,le]:le}_removeParent(le){const{_parentage:ae}=this;ae===le?this._parentage=null:Array.isArray(ae)&&(0,Ce.P)(ae,le)}remove(le){const{_finalizers:ae}=this;ae&&(0,Ce.P)(ae,le),le instanceof Ee&&le._removeParent(this)}}Ee.EMPTY=(()=>{const Oe=new Ee;return Oe.closed=!0,Oe})();const ve=Ee.EMPTY;function Me(Oe){return Oe instanceof Ee||Oe&&"closed"in Oe&&(0,S.m)(Oe.remove)&&(0,S.m)(Oe.add)&&(0,S.m)(Oe.unsubscribe)}function xe(Oe){(0,S.m)(Oe)?Oe():Oe.unsubscribe()}},2416:(Rt,Ve,V)=>{V.d(Ve,{v:()=>S});const S={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(Rt,Ve,V)=>{V.d(Ve,{z:()=>Ee});var S=V(8189),J=V(7669),Ce=V(8996);function Ee(...ve){return function v(){return(0,S.J)(1)}()((0,Ce.D)(ve,(0,J.yG)(ve)))}},515:(Rt,Ve,V)=>{V.d(Ve,{E:()=>v});const v=new(V(8306).y)(Ee=>Ee.complete())},8996:(Rt,Ve,V)=>{V.d(Ve,{D:()=>Ke});var S=V(8421),v=V(5363),J=V(9468),ve=V(8306),xe=V(2202),Oe=V(576),le=V(9672);function De(je,Je){if(!je)throw new Error("Iterable cannot be null");return new ve.y(yt=>{(0,le.f)(yt,Je,()=>{const X=je[Symbol.asyncIterator]();(0,le.f)(yt,Je,()=>{X.next().then(ze=>{ze.done?yt.complete():yt.next(ze.value)})},0,!0)})})}var It=V(3670),nt=V(8239),at=V(1144),bt=V(6495),Ze=V(2206),rt=V(4532),Ie=V(3260);function Ke(je,Je){return Je?function Xe(je,Je){if(null!=je){if((0,It.c)(je))return function Ce(je,Je){return(0,S.Xf)(je).pipe((0,J.R)(Je),(0,v.Q)(Je))}(je,Je);if((0,at.z)(je))return function Me(je,Je){return new ve.y(yt=>{let X=0;return Je.schedule(function(){X===je.length?yt.complete():(yt.next(je[X++]),yt.closed||this.schedule())})})}(je,Je);if((0,nt.t)(je))return function Ee(je,Je){return(0,S.Xf)(je).pipe((0,J.R)(Je),(0,v.Q)(Je))}(je,Je);if((0,Ze.D)(je))return De(je,Je);if((0,bt.T)(je))return function ae(je,Je){return new ve.y(yt=>{let X;return(0,le.f)(yt,Je,()=>{X=je[xe.h](),(0,le.f)(yt,Je,()=>{let ze,ue;try{({value:ze,done:ue}=X.next())}catch(Se){return void yt.error(Se)}ue?yt.complete():yt.next(ze)},0,!0)}),()=>(0,Oe.m)(null==X?void 0:X.return)&&X.return()})}(je,Je);if((0,Ie.L)(je))return function At(je,Je){return De((0,Ie.Q)(je),Je)}(je,Je)}throw(0,rt.z)(je)}(je,Je):(0,S.Xf)(je)}},8421:(Rt,Ve,V)=>{V.d(Ve,{Xf:()=>It});var S=V(655),v=V(1144),J=V(8239),Ce=V(8306),Ee=V(3670),ve=V(2206),Me=V(4532),xe=V(6495),Oe=V(3260),le=V(576),ae=V(7849),De=V(8822);function It(Xe){if(Xe instanceof Ce.y)return Xe;if(null!=Xe){if((0,Ee.c)(Xe))return function nt(Xe){return new Ce.y(Ke=>{const je=Xe[De.L]();if((0,le.m)(je.subscribe))return je.subscribe(Ke);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Xe);if((0,v.z)(Xe))return function at(Xe){return new Ce.y(Ke=>{for(let je=0;je<Xe.length&&!Ke.closed;je++)Ke.next(Xe[je]);Ke.complete()})}(Xe);if((0,J.t)(Xe))return function bt(Xe){return new Ce.y(Ke=>{Xe.then(je=>{Ke.closed||(Ke.next(je),Ke.complete())},je=>Ke.error(je)).then(null,ae.h)})}(Xe);if((0,ve.D)(Xe))return rt(Xe);if((0,xe.T)(Xe))return function Ze(Xe){return new Ce.y(Ke=>{for(const je of Xe)if(Ke.next(je),Ke.closed)return;Ke.complete()})}(Xe);if((0,Oe.L)(Xe))return function Ie(Xe){return rt((0,Oe.Q)(Xe))}(Xe)}throw(0,Me.z)(Xe)}function rt(Xe){return new Ce.y(Ke=>{(function At(Xe,Ke){var je,Je,yt,X;return(0,S.mG)(this,void 0,void 0,function*(){try{for(je=(0,S.KL)(Xe);!(Je=yield je.next()).done;)if(Ke.next(Je.value),Ke.closed)return}catch(ze){yt={error:ze}}finally{try{Je&&!Je.done&&(X=je.return)&&(yield X.call(je))}finally{if(yt)throw yt.error}}Ke.complete()})})(Xe,Ke).catch(je=>Ke.error(je))})}},6451:(Rt,Ve,V)=>{V.d(Ve,{T:()=>ve});var S=V(8189),v=V(8421),J=V(515),Ce=V(7669),Ee=V(8996);function ve(...Me){const xe=(0,Ce.yG)(Me),Oe=(0,Ce._6)(Me,1/0),le=Me;return le.length?1===le.length?(0,v.Xf)(le[0]):(0,S.J)(Oe)((0,Ee.D)(le,xe)):J.E}},9646:(Rt,Ve,V)=>{V.d(Ve,{of:()=>J});var S=V(7669),v=V(8996);function J(...Ce){const Ee=(0,S.yG)(Ce);return(0,v.D)(Ce,Ee)}},5403:(Rt,Ve,V)=>{V.d(Ve,{x:()=>v});var S=V(930);function v(Ce,Ee,ve,Me,xe){return new J(Ce,Ee,ve,Me,xe)}class J extends S.Lv{constructor(Ee,ve,Me,xe,Oe,le){super(Ee),this.onFinalize=Oe,this.shouldUnsubscribe=le,this._next=ve?function(ae){try{ve(ae)}catch(De){Ee.error(De)}}:super._next,this._error=xe?function(ae){try{xe(ae)}catch(De){Ee.error(De)}finally{this.unsubscribe()}}:super._error,this._complete=Me?function(){try{Me()}catch(ae){Ee.error(ae)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Ee;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ve}=this;super.unsubscribe(),!ve&&(null===(Ee=this.onFinalize)||void 0===Ee||Ee.call(this))}}}},4351:(Rt,Ve,V)=>{V.d(Ve,{b:()=>J});var S=V(5577),v=V(576);function J(Ce,Ee){return(0,v.m)(Ee)?(0,S.z)(Ce,Ee,1):(0,S.z)(Ce,1)}},6590:(Rt,Ve,V)=>{V.d(Ve,{d:()=>J});var S=V(4482),v=V(5403);function J(Ce){return(0,S.e)((Ee,ve)=>{let Me=!1;Ee.subscribe((0,v.x)(ve,xe=>{Me=!0,ve.next(xe)},()=>{Me||ve.next(Ce),ve.complete()}))})}},1884:(Rt,Ve,V)=>{V.d(Ve,{x:()=>Ce});var S=V(4671),v=V(4482),J=V(5403);function Ce(ve,Me=S.y){return ve=null!=ve?ve:Ee,(0,v.e)((xe,Oe)=>{let le,ae=!0;xe.subscribe((0,J.x)(Oe,De=>{const It=Me(De);(ae||!ve(le,It))&&(ae=!1,le=It,Oe.next(De))}))})}function Ee(ve,Me){return ve===Me}},9300:(Rt,Ve,V)=>{V.d(Ve,{h:()=>J});var S=V(4482),v=V(5403);function J(Ce,Ee){return(0,S.e)((ve,Me)=>{let xe=0;ve.subscribe((0,v.x)(Me,Oe=>Ce.call(Ee,Oe,xe++)&&Me.next(Oe)))})}},590:(Rt,Ve,V)=>{V.d(Ve,{P:()=>Me});var S=V(6805),v=V(9300),J=V(5698),Ce=V(6590),Ee=V(8068),ve=V(4671);function Me(xe,Oe){const le=arguments.length>=2;return ae=>ae.pipe(xe?(0,v.h)((De,It)=>xe(De,It,ae)):ve.y,(0,J.q)(1),le?(0,Ce.d)(Oe):(0,Ee.T)(()=>new S.K))}},4004:(Rt,Ve,V)=>{V.d(Ve,{U:()=>J});var S=V(4482),v=V(5403);function J(Ce,Ee){return(0,S.e)((ve,Me)=>{let xe=0;ve.subscribe((0,v.x)(Me,Oe=>{Me.next(Ce.call(Ee,Oe,xe++))}))})}},8189:(Rt,Ve,V)=>{V.d(Ve,{J:()=>J});var S=V(5577),v=V(4671);function J(Ce=1/0){return(0,S.z)(v.y,Ce)}},5577:(Rt,Ve,V)=>{V.d(Ve,{z:()=>xe});var S=V(4004),v=V(8421),J=V(4482),Ce=V(9672),Ee=V(5403),Me=V(576);function xe(Oe,le,ae=1/0){return(0,Me.m)(le)?xe((De,It)=>(0,S.U)((nt,at)=>le(De,nt,It,at))((0,v.Xf)(Oe(De,It))),ae):("number"==typeof le&&(ae=le),(0,J.e)((De,It)=>function ve(Oe,le,ae,De,It,nt,at,bt){const Ze=[];let rt=0,Ie=0,At=!1;const Xe=()=>{At&&!Ze.length&&!rt&&le.complete()},Ke=Je=>rt<De?je(Je):Ze.push(Je),je=Je=>{nt&&le.next(Je),rt++;let yt=!1;(0,v.Xf)(ae(Je,Ie++)).subscribe((0,Ee.x)(le,X=>{null==It||It(X),nt?Ke(X):le.next(X)},()=>{yt=!0},void 0,()=>{if(yt)try{for(rt--;Ze.length&&rt<De;){const X=Ze.shift();at?(0,Ce.f)(le,at,()=>je(X)):je(X)}Xe()}catch(X){le.error(X)}}))};return Oe.subscribe((0,Ee.x)(le,Ke,()=>{At=!0,Xe()})),()=>{null==bt||bt()}}(De,It,Oe,ae)))}},5363:(Rt,Ve,V)=>{V.d(Ve,{Q:()=>Ce});var S=V(9672),v=V(4482),J=V(5403);function Ce(Ee,ve=0){return(0,v.e)((Me,xe)=>{Me.subscribe((0,J.x)(xe,Oe=>(0,S.f)(xe,Ee,()=>xe.next(Oe),ve),()=>(0,S.f)(xe,Ee,()=>xe.complete(),ve),Oe=>(0,S.f)(xe,Ee,()=>xe.error(Oe),ve)))})}},5026:(Rt,Ve,V)=>{V.d(Ve,{R:()=>Ce});var S=V(4482),v=V(5403);function J(Ee,ve,Me,xe,Oe){return(le,ae)=>{let De=Me,It=ve,nt=0;le.subscribe((0,v.x)(ae,at=>{const bt=nt++;It=De?Ee(It,at,bt):(De=!0,at),xe&&ae.next(It)},Oe&&(()=>{De&&ae.next(It),ae.complete()})))}}function Ce(Ee,ve){return(0,S.e)(J(Ee,ve,arguments.length>=2,!0))}},3099:(Rt,Ve,V)=>{V.d(Ve,{B:()=>ve});var S=V(8996),v=V(5698),J=V(7579),Ce=V(930),Ee=V(4482);function ve(xe={}){const{connector:Oe=(()=>new J.x),resetOnError:le=!0,resetOnComplete:ae=!0,resetOnRefCountZero:De=!0}=xe;return It=>{let nt=null,at=null,bt=null,Ze=0,rt=!1,Ie=!1;const At=()=>{null==at||at.unsubscribe(),at=null},Xe=()=>{At(),nt=bt=null,rt=Ie=!1},Ke=()=>{const je=nt;Xe(),null==je||je.unsubscribe()};return(0,Ee.e)((je,Je)=>{Ze++,!Ie&&!rt&&At();const yt=bt=null!=bt?bt:Oe();Je.add(()=>{Ze--,0===Ze&&!Ie&&!rt&&(at=Me(Ke,De))}),yt.subscribe(Je),nt||(nt=new Ce.Hp({next:X=>yt.next(X),error:X=>{Ie=!0,At(),at=Me(Xe,le,X),yt.error(X)},complete:()=>{rt=!0,At(),at=Me(Xe,ae),yt.complete()}}),(0,S.D)(je).subscribe(nt))})(It)}}function Me(xe,Oe,...le){return!0===Oe?(xe(),null):!1===Oe?null:Oe(...le).pipe((0,v.q)(1)).subscribe(()=>xe())}},8675:(Rt,Ve,V)=>{V.d(Ve,{O:()=>Ce});var S=V(7272),v=V(7669),J=V(4482);function Ce(...Ee){const ve=(0,v.yG)(Ee);return(0,J.e)((Me,xe)=>{(ve?(0,S.z)(Ee,Me,ve):(0,S.z)(Ee,Me)).subscribe(xe)})}},9468:(Rt,Ve,V)=>{V.d(Ve,{R:()=>v});var S=V(4482);function v(J,Ce=0){return(0,S.e)((Ee,ve)=>{ve.add(J.schedule(()=>Ee.subscribe(ve),Ce))})}},3900:(Rt,Ve,V)=>{V.d(Ve,{w:()=>Ce});var S=V(8421),v=V(4482),J=V(5403);function Ce(Ee,ve){return(0,v.e)((Me,xe)=>{let Oe=null,le=0,ae=!1;const De=()=>ae&&!Oe&&xe.complete();Me.subscribe((0,J.x)(xe,It=>{null==Oe||Oe.unsubscribe();let nt=0;const at=le++;(0,S.Xf)(Ee(It,at)).subscribe(Oe=(0,J.x)(xe,bt=>xe.next(ve?ve(It,bt,at,nt++):bt),()=>{Oe=null,De()}))},()=>{ae=!0,De()}))})}},5698:(Rt,Ve,V)=>{V.d(Ve,{q:()=>Ce});var S=V(515),v=V(4482),J=V(5403);function Ce(Ee){return Ee<=0?()=>S.E:(0,v.e)((ve,Me)=>{let xe=0;ve.subscribe((0,J.x)(Me,Oe=>{++xe<=Ee&&(Me.next(Oe),Ee<=xe&&Me.complete())}))})}},8505:(Rt,Ve,V)=>{V.d(Ve,{b:()=>Ee});var S=V(576),v=V(4482),J=V(5403),Ce=V(4671);function Ee(ve,Me,xe){const Oe=(0,S.m)(ve)||Me||xe?{next:ve,error:Me,complete:xe}:ve;return Oe?(0,v.e)((le,ae)=>{var De;null===(De=Oe.subscribe)||void 0===De||De.call(Oe);let It=!0;le.subscribe((0,J.x)(ae,nt=>{var at;null===(at=Oe.next)||void 0===at||at.call(Oe,nt),ae.next(nt)},()=>{var nt;It=!1,null===(nt=Oe.complete)||void 0===nt||nt.call(Oe),ae.complete()},nt=>{var at;It=!1,null===(at=Oe.error)||void 0===at||at.call(Oe,nt),ae.error(nt)},()=>{var nt,at;It&&(null===(nt=Oe.unsubscribe)||void 0===nt||nt.call(Oe)),null===(at=Oe.finalize)||void 0===at||at.call(Oe)}))}):Ce.y}},8068:(Rt,Ve,V)=>{V.d(Ve,{T:()=>Ce});var S=V(6805),v=V(4482),J=V(5403);function Ce(ve=Ee){return(0,v.e)((Me,xe)=>{let Oe=!1;Me.subscribe((0,J.x)(xe,le=>{Oe=!0,xe.next(le)},()=>Oe?xe.complete():xe.error(ve())))})}function Ee(){return new S.K}},4408:(Rt,Ve,V)=>{V.d(Ve,{o:()=>Ee});var S=V(727);class v extends S.w0{constructor(Me,xe){super()}schedule(Me,xe=0){return this}}const J={setInterval(ve,Me,...xe){const{delegate:Oe}=J;return(null==Oe?void 0:Oe.setInterval)?Oe.setInterval(ve,Me,...xe):setInterval(ve,Me,...xe)},clearInterval(ve){const{delegate:Me}=J;return((null==Me?void 0:Me.clearInterval)||clearInterval)(ve)},delegate:void 0};var Ce=V(8737);class Ee extends v{constructor(Me,xe){super(Me,xe),this.scheduler=Me,this.work=xe,this.pending=!1}schedule(Me,xe=0){if(this.closed)return this;this.state=Me;const Oe=this.id,le=this.scheduler;return null!=Oe&&(this.id=this.recycleAsyncId(le,Oe,xe)),this.pending=!0,this.delay=xe,this.id=this.id||this.requestAsyncId(le,this.id,xe),this}requestAsyncId(Me,xe,Oe=0){return J.setInterval(Me.flush.bind(Me,this),Oe)}recycleAsyncId(Me,xe,Oe=0){if(null!=Oe&&this.delay===Oe&&!1===this.pending)return xe;J.clearInterval(xe)}execute(Me,xe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Oe=this._execute(Me,xe);if(Oe)return Oe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Me,xe){let le,Oe=!1;try{this.work(Me)}catch(ae){Oe=!0,le=ae||new Error("Scheduled action threw falsy error")}if(Oe)return this.unsubscribe(),le}unsubscribe(){if(!this.closed){const{id:Me,scheduler:xe}=this,{actions:Oe}=xe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Ce.P)(Oe,this),null!=Me&&(this.id=this.recycleAsyncId(xe,Me,null)),this.delay=null,super.unsubscribe()}}}},7565:(Rt,Ve,V)=>{V.d(Ve,{v:()=>J});var S=V(6063);class v{constructor(Ee,ve=v.now){this.schedulerActionCtor=Ee,this.now=ve}schedule(Ee,ve=0,Me){return new this.schedulerActionCtor(this,Ee).schedule(Me,ve)}}v.now=S.l.now;class J extends v{constructor(Ee,ve=v.now){super(Ee,ve),this.actions=[],this._active=!1,this._scheduled=void 0}flush(Ee){const{actions:ve}=this;if(this._active)return void ve.push(Ee);let Me;this._active=!0;do{if(Me=Ee.execute(Ee.state,Ee.delay))break}while(Ee=ve.shift());if(this._active=!1,Me){for(;Ee=ve.shift();)Ee.unsubscribe();throw Me}}}},4986:(Rt,Ve,V)=>{V.d(Ve,{z:()=>J});var S=V(4408);const J=new(V(7565).v)(S.o)},6063:(Rt,Ve,V)=>{V.d(Ve,{l:()=>S});const S={now:()=>(S.delegate||Date).now(),delegate:void 0}},3410:(Rt,Ve,V)=>{V.d(Ve,{z:()=>S});const S={setTimeout(v,J,...Ce){const{delegate:Ee}=S;return(null==Ee?void 0:Ee.setTimeout)?Ee.setTimeout(v,J,...Ce):setTimeout(v,J,...Ce)},clearTimeout(v){const{delegate:J}=S;return((null==J?void 0:J.clearTimeout)||clearTimeout)(v)},delegate:void 0}},2202:(Rt,Ve,V)=>{V.d(Ve,{h:()=>v});const v=function S(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Rt,Ve,V)=>{V.d(Ve,{L:()=>S});const S="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Rt,Ve,V)=>{V.d(Ve,{K:()=>v});const v=(0,V(3888).d)(J=>function(){J(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(Rt,Ve,V)=>{V.d(Ve,{_6:()=>ve,jO:()=>Ce,yG:()=>Ee});var S=V(576);function J(Me){return Me[Me.length-1]}function Ce(Me){return(0,S.m)(J(Me))?Me.pop():void 0}function Ee(Me){return function v(Me){return Me&&(0,S.m)(Me.schedule)}(J(Me))?Me.pop():void 0}function ve(Me,xe){return"number"==typeof J(Me)?Me.pop():xe}},4742:(Rt,Ve,V)=>{V.d(Ve,{D:()=>Ee});const{isArray:S}=Array,{getPrototypeOf:v,prototype:J,keys:Ce}=Object;function Ee(Me){if(1===Me.length){const xe=Me[0];if(S(xe))return{args:xe,keys:null};if(function ve(Me){return Me&&"object"==typeof Me&&v(Me)===J}(xe)){const Oe=Ce(xe);return{args:Oe.map(le=>xe[le]),keys:Oe}}}return{args:Me,keys:null}}},8737:(Rt,Ve,V)=>{function S(v,J){if(v){const Ce=v.indexOf(J);0<=Ce&&v.splice(Ce,1)}}V.d(Ve,{P:()=>S})},3888:(Rt,Ve,V)=>{function S(v){const Ce=v(Ee=>{Error.call(Ee),Ee.stack=(new Error).stack});return Ce.prototype=Object.create(Error.prototype),Ce.prototype.constructor=Ce,Ce}V.d(Ve,{d:()=>S})},1810:(Rt,Ve,V)=>{function S(v,J){return v.reduce((Ce,Ee,ve)=>(Ce[Ee]=J[ve],Ce),{})}V.d(Ve,{n:()=>S})},2806:(Rt,Ve,V)=>{V.d(Ve,{O:()=>Ce,x:()=>J});var S=V(2416);let v=null;function J(Ee){if(S.v.useDeprecatedSynchronousErrorHandling){const ve=!v;if(ve&&(v={errorThrown:!1,error:null}),Ee(),ve){const{errorThrown:Me,error:xe}=v;if(v=null,Me)throw xe}}else Ee()}function Ce(Ee){S.v.useDeprecatedSynchronousErrorHandling&&v&&(v.errorThrown=!0,v.error=Ee)}},9672:(Rt,Ve,V)=>{function S(v,J,Ce,Ee=0,ve=!1){const Me=J.schedule(function(){Ce(),ve?v.add(this.schedule(null,Ee)):this.unsubscribe()},Ee);if(v.add(Me),!ve)return Me}V.d(Ve,{f:()=>S})},4671:(Rt,Ve,V)=>{function S(v){return v}V.d(Ve,{y:()=>S})},1144:(Rt,Ve,V)=>{V.d(Ve,{z:()=>S});const S=v=>v&&"number"==typeof v.length&&"function"!=typeof v},2206:(Rt,Ve,V)=>{V.d(Ve,{D:()=>v});var S=V(576);function v(J){return Symbol.asyncIterator&&(0,S.m)(null==J?void 0:J[Symbol.asyncIterator])}},576:(Rt,Ve,V)=>{function S(v){return"function"==typeof v}V.d(Ve,{m:()=>S})},3670:(Rt,Ve,V)=>{V.d(Ve,{c:()=>J});var S=V(8822),v=V(576);function J(Ce){return(0,v.m)(Ce[S.L])}},6495:(Rt,Ve,V)=>{V.d(Ve,{T:()=>J});var S=V(2202),v=V(576);function J(Ce){return(0,v.m)(null==Ce?void 0:Ce[S.h])}},8239:(Rt,Ve,V)=>{V.d(Ve,{t:()=>v});var S=V(576);function v(J){return(0,S.m)(null==J?void 0:J.then)}},3260:(Rt,Ve,V)=>{V.d(Ve,{L:()=>Ce,Q:()=>J});var S=V(655),v=V(576);function J(Ee){return(0,S.FC)(this,arguments,function*(){const Me=Ee.getReader();try{for(;;){const{value:xe,done:Oe}=yield(0,S.qq)(Me.read());if(Oe)return yield(0,S.qq)(void 0);yield yield(0,S.qq)(xe)}}finally{Me.releaseLock()}})}function Ce(Ee){return(0,v.m)(null==Ee?void 0:Ee.getReader)}},4482:(Rt,Ve,V)=>{V.d(Ve,{A:()=>v,e:()=>J});var S=V(576);function v(Ce){return(0,S.m)(null==Ce?void 0:Ce.lift)}function J(Ce){return Ee=>{if(v(Ee))return Ee.lift(function(ve){try{return Ce(ve,this)}catch(Me){this.error(Me)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Rt,Ve,V)=>{V.d(Ve,{Z:()=>Ce});var S=V(4004);const{isArray:v}=Array;function Ce(Ee){return(0,S.U)(ve=>function J(Ee,ve){return v(ve)?Ee(...ve):Ee(ve)}(Ee,ve))}},5032:(Rt,Ve,V)=>{function S(){}V.d(Ve,{Z:()=>S})},7849:(Rt,Ve,V)=>{V.d(Ve,{h:()=>J});var S=V(2416),v=V(3410);function J(Ce){v.z.setTimeout(()=>{const{onUnhandledError:Ee}=S.v;if(!Ee)throw Ce;Ee(Ce)})}},4532:(Rt,Ve,V)=>{function S(v){return new TypeError(`You provided ${null!==v&&"object"==typeof v?"an invalid object":`'${v}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(Ve,{z:()=>S})},655:(Rt,Ve,V)=>{function Ce(ue,Se){var Ae={};for(var Ge in ue)Object.prototype.hasOwnProperty.call(ue,Ge)&&Se.indexOf(Ge)<0&&(Ae[Ge]=ue[Ge]);if(null!=ue&&"function"==typeof Object.getOwnPropertySymbols){var $e=0;for(Ge=Object.getOwnPropertySymbols(ue);$e<Ge.length;$e++)Se.indexOf(Ge[$e])<0&&Object.prototype.propertyIsEnumerable.call(ue,Ge[$e])&&(Ae[Ge[$e]]=ue[Ge[$e]])}return Ae}function xe(ue,Se,Ae,Ge){return new(Ae||(Ae=Promise))(function(mt,Tt){function xt(cn){try{ut(Ge.next(cn))}catch(Yt){Tt(Yt)}}function Lt(cn){try{ut(Ge.throw(cn))}catch(Yt){Tt(Yt)}}function ut(cn){cn.done?mt(cn.value):function $e(mt){return mt instanceof Ae?mt:new Ae(function(Tt){Tt(mt)})}(cn.value).then(xt,Lt)}ut((Ge=Ge.apply(ue,Se||[])).next())})}function Ze(ue){return this instanceof Ze?(this.v=ue,this):new Ze(ue)}function rt(ue,Se,Ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var $e,Ge=Ae.apply(ue,Se||[]),mt=[];return $e={},Tt("next"),Tt("throw"),Tt("return"),$e[Symbol.asyncIterator]=function(){return this},$e;function Tt(Wt){Ge[Wt]&&($e[Wt]=function($t){return new Promise(function(mn,sn){mt.push([Wt,$t,mn,sn])>1||xt(Wt,$t)})})}function xt(Wt,$t){try{!function Lt(Wt){Wt.value instanceof Ze?Promise.resolve(Wt.value.v).then(ut,cn):Yt(mt[0][2],Wt)}(Ge[Wt]($t))}catch(mn){Yt(mt[0][3],mn)}}function ut(Wt){xt("next",Wt)}function cn(Wt){xt("throw",Wt)}function Yt(Wt,$t){Wt($t),mt.shift(),mt.length&&xt(mt[0][0],mt[0][1])}}function At(ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ae,Se=ue[Symbol.asyncIterator];return Se?Se.call(ue):(ue=function De(ue){var Se="function"==typeof Symbol&&Symbol.iterator,Ae=Se&&ue[Se],Ge=0;if(Ae)return Ae.call(ue);if(ue&&"number"==typeof ue.length)return{next:function(){return ue&&Ge>=ue.length&&(ue=void 0),{value:ue&&ue[Ge++],done:!ue}}};throw new TypeError(Se?"Object is not iterable.":"Symbol.iterator is not defined.")}(ue),Ae={},Ge("next"),Ge("throw"),Ge("return"),Ae[Symbol.asyncIterator]=function(){return this},Ae);function Ge(mt){Ae[mt]=ue[mt]&&function(Tt){return new Promise(function(xt,Lt){!function $e(mt,Tt,xt,Lt){Promise.resolve(Lt).then(function(ut){mt({value:ut,done:xt})},Tt)}(xt,Lt,(Tt=ue[mt](Tt)).done,Tt.value)})}}}V.d(Ve,{FC:()=>rt,KL:()=>At,_T:()=>Ce,mG:()=>xe,qq:()=>Ze})},9808:(Rt,Ve,V)=>{V.d(Ve,{Do:()=>Xe,EM:()=>ho,HT:()=>Ee,JF:()=>jn,K0:()=>Me,Mx:()=>ws,O5:()=>Yr,PC:()=>Io,PM:()=>Os,S$:()=>Ze,V_:()=>le,Ye:()=>Ke,b0:()=>At,bD:()=>Ei,ez:()=>Zu,lw:()=>xe,mr:()=>Ie,q:()=>J,w_:()=>ve});var S=V(5e3);let v=null;function J(){return v}function Ee(L){v||(v=L)}class ve{}const Me=new S.OlP("DocumentToken");let xe=(()=>{class L{historyGo(F){throw new Error("Not implemented")}}return L.\u0275fac=function(F){return new(F||L)},L.\u0275prov=S.Yz7({token:L,factory:function(){return function Oe(){return(0,S.LFG)(ae)}()},providedIn:"platform"}),L})();const le=new S.OlP("Location Initialized");let ae=(()=>{class L extends xe{constructor(F){super(),this._doc=F,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return J().getBaseHref(this._doc)}onPopState(F){const Q=J().getGlobalEventTarget(this._doc,"window");return Q.addEventListener("popstate",F,!1),()=>Q.removeEventListener("popstate",F)}onHashChange(F){const Q=J().getGlobalEventTarget(this._doc,"window");return Q.addEventListener("hashchange",F,!1),()=>Q.removeEventListener("hashchange",F)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(F){this.location.pathname=F}pushState(F,Q,de){De()?this._history.pushState(F,Q,de):this.location.hash=de}replaceState(F,Q,de){De()?this._history.replaceState(F,Q,de):this.location.hash=de}forward(){this._history.forward()}back(){this._history.back()}historyGo(F=0){this._history.go(F)}getState(){return this._history.state}}return L.\u0275fac=function(F){return new(F||L)(S.LFG(Me))},L.\u0275prov=S.Yz7({token:L,factory:function(){return function It(){return new ae((0,S.LFG)(Me))}()},providedIn:"platform"}),L})();function De(){return!!window.history.pushState}function nt(L,q){if(0==L.length)return q;if(0==q.length)return L;let F=0;return L.endsWith("/")&&F++,q.startsWith("/")&&F++,2==F?L+q.substring(1):1==F?L+q:L+"/"+q}function at(L){const q=L.match(/#|\?|$/),F=q&&q.index||L.length;return L.slice(0,F-("/"===L[F-1]?1:0))+L.slice(F)}function bt(L){return L&&"?"!==L[0]?"?"+L:L}let Ze=(()=>{class L{historyGo(F){throw new Error("Not implemented")}}return L.\u0275fac=function(F){return new(F||L)},L.\u0275prov=S.Yz7({token:L,factory:function(){return function rt(L){const q=(0,S.LFG)(Me).location;return new At((0,S.LFG)(xe),q&&q.origin||"")}()},providedIn:"root"}),L})();const Ie=new S.OlP("appBaseHref");let At=(()=>{class L extends Ze{constructor(F,Q){if(super(),this._platformLocation=F,this._removeListenerFns=[],null==Q&&(Q=this._platformLocation.getBaseHrefFromDOM()),null==Q)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=Q}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(F){this._removeListenerFns.push(this._platformLocation.onPopState(F),this._platformLocation.onHashChange(F))}getBaseHref(){return this._baseHref}prepareExternalUrl(F){return nt(this._baseHref,F)}path(F=!1){const Q=this._platformLocation.pathname+bt(this._platformLocation.search),de=this._platformLocation.hash;return de&&F?`${Q}${de}`:Q}pushState(F,Q,de,We){const ht=this.prepareExternalUrl(de+bt(We));this._platformLocation.pushState(F,Q,ht)}replaceState(F,Q,de,We){const ht=this.prepareExternalUrl(de+bt(We));this._platformLocation.replaceState(F,Q,ht)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(F=0){var Q,de;null===(de=(Q=this._platformLocation).historyGo)||void 0===de||de.call(Q,F)}}return L.\u0275fac=function(F){return new(F||L)(S.LFG(xe),S.LFG(Ie,8))},L.\u0275prov=S.Yz7({token:L,factory:L.\u0275fac}),L})(),Xe=(()=>{class L extends Ze{constructor(F,Q){super(),this._platformLocation=F,this._baseHref="",this._removeListenerFns=[],null!=Q&&(this._baseHref=Q)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(F){this._removeListenerFns.push(this._platformLocation.onPopState(F),this._platformLocation.onHashChange(F))}getBaseHref(){return this._baseHref}path(F=!1){let Q=this._platformLocation.hash;return null==Q&&(Q="#"),Q.length>0?Q.substring(1):Q}prepareExternalUrl(F){const Q=nt(this._baseHref,F);return Q.length>0?"#"+Q:Q}pushState(F,Q,de,We){let ht=this.prepareExternalUrl(de+bt(We));0==ht.length&&(ht=this._platformLocation.pathname),this._platformLocation.pushState(F,Q,ht)}replaceState(F,Q,de,We){let ht=this.prepareExternalUrl(de+bt(We));0==ht.length&&(ht=this._platformLocation.pathname),this._platformLocation.replaceState(F,Q,ht)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(F=0){var Q,de;null===(de=(Q=this._platformLocation).historyGo)||void 0===de||de.call(Q,F)}}return L.\u0275fac=function(F){return new(F||L)(S.LFG(xe),S.LFG(Ie,8))},L.\u0275prov=S.Yz7({token:L,factory:L.\u0275fac}),L})(),Ke=(()=>{class L{constructor(F,Q){this._subject=new S.vpe,this._urlChangeListeners=[],this._platformStrategy=F;const de=this._platformStrategy.getBaseHref();this._platformLocation=Q,this._baseHref=at(yt(de)),this._platformStrategy.onPopState(We=>{this._subject.emit({url:this.path(!0),pop:!0,state:We.state,type:We.type})})}path(F=!1){return this.normalize(this._platformStrategy.path(F))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(F,Q=""){return this.path()==this.normalize(F+bt(Q))}normalize(F){return L.stripTrailingSlash(function Je(L,q){return L&&q.startsWith(L)?q.substring(L.length):q}(this._baseHref,yt(F)))}prepareExternalUrl(F){return F&&"/"!==F[0]&&(F="/"+F),this._platformStrategy.prepareExternalUrl(F)}go(F,Q="",de=null){this._platformStrategy.pushState(de,"",F,Q),this._notifyUrlChangeListeners(this.prepareExternalUrl(F+bt(Q)),de)}replaceState(F,Q="",de=null){this._platformStrategy.replaceState(de,"",F,Q),this._notifyUrlChangeListeners(this.prepareExternalUrl(F+bt(Q)),de)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(F=0){var Q,de;null===(de=(Q=this._platformStrategy).historyGo)||void 0===de||de.call(Q,F)}onUrlChange(F){this._urlChangeListeners.push(F),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Q=>{this._notifyUrlChangeListeners(Q.url,Q.state)}))}_notifyUrlChangeListeners(F="",Q){this._urlChangeListeners.forEach(de=>de(F,Q))}subscribe(F,Q,de){return this._subject.subscribe({next:F,error:Q,complete:de})}}return L.normalizeQueryParams=bt,L.joinWithSlash=nt,L.stripTrailingSlash=at,L.\u0275fac=function(F){return new(F||L)(S.LFG(Ze),S.LFG(xe))},L.\u0275prov=S.Yz7({token:L,factory:function(){return function je(){return new Ke((0,S.LFG)(Ze),(0,S.LFG)(xe))}()},providedIn:"root"}),L})();function yt(L){return L.replace(/\/index.html$/,"")}function ws(L,q){q=encodeURIComponent(q);for(const F of L.split(";")){const Q=F.indexOf("="),[de,We]=-1==Q?[F,""]:[F.slice(0,Q),F.slice(Q+1)];if(de.trim()===q)return decodeURIComponent(We)}return null}let Yr=(()=>{class L{constructor(F,Q){this._viewContainer=F,this._context=new Qn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Q}set ngIf(F){this._context.$implicit=this._context.ngIf=F,this._updateView()}set ngIfThen(F){sr("ngIfThen",F),this._thenTemplateRef=F,this._thenViewRef=null,this._updateView()}set ngIfElse(F){sr("ngIfElse",F),this._elseTemplateRef=F,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(F,Q){return!0}}return L.\u0275fac=function(F){return new(F||L)(S.Y36(S.s_b),S.Y36(S.Rgc))},L.\u0275dir=S.lG2({type:L,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),L})();class Qn{constructor(){this.$implicit=null,this.ngIf=null}}function sr(L,q){if(q&&!q.createEmbeddedView)throw new Error(`${L} must be a TemplateRef, but received '${(0,S.AaK)(q)}'.`)}let Io=(()=>{class L{constructor(F,Q,de){this._ngEl=F,this._differs=Q,this._renderer=de,this._ngStyle=null,this._differ=null}set ngStyle(F){this._ngStyle=F,!this._differ&&F&&(this._differ=this._differs.find(F).create())}ngDoCheck(){if(this._differ){const F=this._differ.diff(this._ngStyle);F&&this._applyChanges(F)}}_setStyle(F,Q){const[de,We]=F.split(".");null!=(Q=null!=Q&&We?`${Q}${We}`:Q)?this._renderer.setStyle(this._ngEl.nativeElement,de,Q):this._renderer.removeStyle(this._ngEl.nativeElement,de)}_applyChanges(F){F.forEachRemovedItem(Q=>this._setStyle(Q.key,null)),F.forEachAddedItem(Q=>this._setStyle(Q.key,Q.currentValue)),F.forEachChangedItem(Q=>this._setStyle(Q.key,Q.currentValue))}}return L.\u0275fac=function(F){return new(F||L)(S.Y36(S.SBq),S.Y36(S.aQg),S.Y36(S.Qsj))},L.\u0275dir=S.lG2({type:L,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),L})(),Zu=(()=>{class L{}return L.\u0275fac=function(F){return new(F||L)},L.\u0275mod=S.oAB({type:L}),L.\u0275inj=S.cJS({}),L})();const Ei="browser";function Os(L){return"server"===L}let ho=(()=>{class L{}return L.\u0275prov=(0,S.Yz7)({token:L,providedIn:"root",factory:()=>new is((0,S.LFG)(Me),window)}),L})();class is{constructor(q,F){this.document=q,this.window=F,this.offset=()=>[0,0]}setOffset(q){this.offset=Array.isArray(q)?()=>q:q}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(q){this.supportsScrolling()&&this.window.scrollTo(q[0],q[1])}scrollToAnchor(q){if(!this.supportsScrolling())return;const F=function ks(L,q){const F=L.getElementById(q)||L.getElementsByName(q)[0];if(F)return F;if("function"==typeof L.createTreeWalker&&L.body&&(L.body.createShadowRoot||L.body.attachShadow)){const Q=L.createTreeWalker(L.body,NodeFilter.SHOW_ELEMENT);let de=Q.currentNode;for(;de;){const We=de.shadowRoot;if(We){const ht=We.getElementById(q)||We.querySelector(`[name="${q}"]`);if(ht)return ht}de=Q.nextNode()}}return null}(this.document,q);F&&(this.scrollToElement(F),F.focus())}setHistoryScrollRestoration(q){if(this.supportScrollRestoration()){const F=this.window.history;F&&F.scrollRestoration&&(F.scrollRestoration=q)}}scrollToElement(q){const F=q.getBoundingClientRect(),Q=F.left+this.window.pageXOffset,de=F.top+this.window.pageYOffset,We=this.offset();this.window.scrollTo(Q-We[0],de-We[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const q=na(this.window.history)||na(Object.getPrototypeOf(this.window.history));return!(!q||!q.writable&&!q.set)}catch(q){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(q){return!1}}}function na(L){return Object.getOwnPropertyDescriptor(L,"scrollRestoration")}class jn{}},520:(Rt,Ve,V)=>{V.d(Ve,{JF:()=>Pn,eN:()=>$e});var S=V(9808),v=V(5e3),J=V(9646),Ce=V(8306),Ee=V(4351),ve=V(9300),Me=V(4004);class xe{}class Oe{}class le{constructor(me){this.normalizedNames=new Map,this.lazyUpdate=null,me?this.lazyInit="string"==typeof me?()=>{this.headers=new Map,me.split("\n").forEach(we=>{const dt=we.indexOf(":");if(dt>0){const ke=we.slice(0,dt),ft=ke.toLowerCase(),Dt=we.slice(dt+1).trim();this.maybeSetNormalizedName(ke,ft),this.headers.has(ft)?this.headers.get(ft).push(Dt):this.headers.set(ft,[Dt])}})}:()=>{this.headers=new Map,Object.keys(me).forEach(we=>{let dt=me[we];const ke=we.toLowerCase();"string"==typeof dt&&(dt=[dt]),dt.length>0&&(this.headers.set(ke,dt),this.maybeSetNormalizedName(we,ke))})}:this.headers=new Map}has(me){return this.init(),this.headers.has(me.toLowerCase())}get(me){this.init();const we=this.headers.get(me.toLowerCase());return we&&we.length>0?we[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(me){return this.init(),this.headers.get(me.toLowerCase())||null}append(me,we){return this.clone({name:me,value:we,op:"a"})}set(me,we){return this.clone({name:me,value:we,op:"s"})}delete(me,we){return this.clone({name:me,value:we,op:"d"})}maybeSetNormalizedName(me,we){this.normalizedNames.has(we)||this.normalizedNames.set(we,me)}init(){this.lazyInit&&(this.lazyInit instanceof le?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(me=>this.applyUpdate(me)),this.lazyUpdate=null))}copyFrom(me){me.init(),Array.from(me.headers.keys()).forEach(we=>{this.headers.set(we,me.headers.get(we)),this.normalizedNames.set(we,me.normalizedNames.get(we))})}clone(me){const we=new le;return we.lazyInit=this.lazyInit&&this.lazyInit instanceof le?this.lazyInit:this,we.lazyUpdate=(this.lazyUpdate||[]).concat([me]),we}applyUpdate(me){const we=me.name.toLowerCase();switch(me.op){case"a":case"s":let dt=me.value;if("string"==typeof dt&&(dt=[dt]),0===dt.length)return;this.maybeSetNormalizedName(me.name,we);const ke=("a"===me.op?this.headers.get(we):void 0)||[];ke.push(...dt),this.headers.set(we,ke);break;case"d":const ft=me.value;if(ft){let Dt=this.headers.get(we);if(!Dt)return;Dt=Dt.filter(Sn=>-1===ft.indexOf(Sn)),0===Dt.length?(this.headers.delete(we),this.normalizedNames.delete(we)):this.headers.set(we,Dt)}else this.headers.delete(we),this.normalizedNames.delete(we)}}forEach(me){this.init(),Array.from(this.normalizedNames.keys()).forEach(we=>me(this.normalizedNames.get(we),this.headers.get(we)))}}class ae{encodeKey(me){return at(me)}encodeValue(me){return at(me)}decodeKey(me){return decodeURIComponent(me)}decodeValue(me){return decodeURIComponent(me)}}const It=/%(\d[a-f0-9])/gi,nt={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function at(tt){return encodeURIComponent(tt).replace(It,(me,we)=>{var dt;return null!==(dt=nt[we])&&void 0!==dt?dt:me})}function bt(tt){return`${tt}`}class Ze{constructor(me={}){if(this.updates=null,this.cloneFrom=null,this.encoder=me.encoder||new ae,me.fromString){if(me.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function De(tt,me){const we=new Map;return tt.length>0&&tt.replace(/^\?/,"").split("&").forEach(ke=>{const ft=ke.indexOf("="),[Dt,Sn]=-1==ft?[me.decodeKey(ke),""]:[me.decodeKey(ke.slice(0,ft)),me.decodeValue(ke.slice(ft+1))],on=we.get(Dt)||[];on.push(Sn),we.set(Dt,on)}),we}(me.fromString,this.encoder)}else me.fromObject?(this.map=new Map,Object.keys(me.fromObject).forEach(we=>{const dt=me.fromObject[we];this.map.set(we,Array.isArray(dt)?dt:[dt])})):this.map=null}has(me){return this.init(),this.map.has(me)}get(me){this.init();const we=this.map.get(me);return we?we[0]:null}getAll(me){return this.init(),this.map.get(me)||null}keys(){return this.init(),Array.from(this.map.keys())}append(me,we){return this.clone({param:me,value:we,op:"a"})}appendAll(me){const we=[];return Object.keys(me).forEach(dt=>{const ke=me[dt];Array.isArray(ke)?ke.forEach(ft=>{we.push({param:dt,value:ft,op:"a"})}):we.push({param:dt,value:ke,op:"a"})}),this.clone(we)}set(me,we){return this.clone({param:me,value:we,op:"s"})}delete(me,we){return this.clone({param:me,value:we,op:"d"})}toString(){return this.init(),this.keys().map(me=>{const we=this.encoder.encodeKey(me);return this.map.get(me).map(dt=>we+"="+this.encoder.encodeValue(dt)).join("&")}).filter(me=>""!==me).join("&")}clone(me){const we=new Ze({encoder:this.encoder});return we.cloneFrom=this.cloneFrom||this,we.updates=(this.updates||[]).concat(me),we}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(me=>this.map.set(me,this.cloneFrom.map.get(me))),this.updates.forEach(me=>{switch(me.op){case"a":case"s":const we=("a"===me.op?this.map.get(me.param):void 0)||[];we.push(bt(me.value)),this.map.set(me.param,we);break;case"d":if(void 0===me.value){this.map.delete(me.param);break}{let dt=this.map.get(me.param)||[];const ke=dt.indexOf(bt(me.value));-1!==ke&&dt.splice(ke,1),dt.length>0?this.map.set(me.param,dt):this.map.delete(me.param)}}}),this.cloneFrom=this.updates=null)}}class Ie{constructor(){this.map=new Map}set(me,we){return this.map.set(me,we),this}get(me){return this.map.has(me)||this.map.set(me,me.defaultValue()),this.map.get(me)}delete(me){return this.map.delete(me),this}has(me){return this.map.has(me)}keys(){return this.map.keys()}}function Xe(tt){return"undefined"!=typeof ArrayBuffer&&tt instanceof ArrayBuffer}function Ke(tt){return"undefined"!=typeof Blob&&tt instanceof Blob}function je(tt){return"undefined"!=typeof FormData&&tt instanceof FormData}class yt{constructor(me,we,dt,ke){let ft;if(this.url=we,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=me.toUpperCase(),function At(tt){switch(tt){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||ke?(this.body=void 0!==dt?dt:null,ft=ke):ft=dt,ft&&(this.reportProgress=!!ft.reportProgress,this.withCredentials=!!ft.withCredentials,ft.responseType&&(this.responseType=ft.responseType),ft.headers&&(this.headers=ft.headers),ft.context&&(this.context=ft.context),ft.params&&(this.params=ft.params)),this.headers||(this.headers=new le),this.context||(this.context=new Ie),this.params){const Dt=this.params.toString();if(0===Dt.length)this.urlWithParams=we;else{const Sn=we.indexOf("?");this.urlWithParams=we+(-1===Sn?"?":Sn<we.length-1?"&":"")+Dt}}else this.params=new Ze,this.urlWithParams=we}serializeBody(){return null===this.body?null:Xe(this.body)||Ke(this.body)||je(this.body)||function Je(tt){return"undefined"!=typeof URLSearchParams&&tt instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ze?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||je(this.body)?null:Ke(this.body)?this.body.type||null:Xe(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ze?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(me={}){var we;const dt=me.method||this.method,ke=me.url||this.url,ft=me.responseType||this.responseType,Dt=void 0!==me.body?me.body:this.body,Sn=void 0!==me.withCredentials?me.withCredentials:this.withCredentials,on=void 0!==me.reportProgress?me.reportProgress:this.reportProgress;let en=me.headers||this.headers,zr=me.params||this.params;const Er=null!==(we=me.context)&&void 0!==we?we:this.context;return void 0!==me.setHeaders&&(en=Object.keys(me.setHeaders).reduce((Nn,se)=>Nn.set(se,me.setHeaders[se]),en)),me.setParams&&(zr=Object.keys(me.setParams).reduce((Nn,se)=>Nn.set(se,me.setParams[se]),zr)),new yt(dt,ke,Dt,{params:zr,headers:en,context:Er,reportProgress:on,responseType:ft,withCredentials:Sn})}}var X=(()=>((X=X||{})[X.Sent=0]="Sent",X[X.UploadProgress=1]="UploadProgress",X[X.ResponseHeader=2]="ResponseHeader",X[X.DownloadProgress=3]="DownloadProgress",X[X.Response=4]="Response",X[X.User=5]="User",X))();class ze{constructor(me,we=200,dt="OK"){this.headers=me.headers||new le,this.status=void 0!==me.status?me.status:we,this.statusText=me.statusText||dt,this.url=me.url||null,this.ok=this.status>=200&&this.status<300}}class ue extends ze{constructor(me={}){super(me),this.type=X.ResponseHeader}clone(me={}){return new ue({headers:me.headers||this.headers,status:void 0!==me.status?me.status:this.status,statusText:me.statusText||this.statusText,url:me.url||this.url||void 0})}}class Se extends ze{constructor(me={}){super(me),this.type=X.Response,this.body=void 0!==me.body?me.body:null}clone(me={}){return new Se({body:void 0!==me.body?me.body:this.body,headers:me.headers||this.headers,status:void 0!==me.status?me.status:this.status,statusText:me.statusText||this.statusText,url:me.url||this.url||void 0})}}class Ae extends ze{constructor(me){super(me,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${me.url||"(unknown url)"}`:`Http failure response for ${me.url||"(unknown url)"}: ${me.status} ${me.statusText}`,this.error=me.error||null}}function Ge(tt,me){return{body:me,headers:tt.headers,context:tt.context,observe:tt.observe,params:tt.params,reportProgress:tt.reportProgress,responseType:tt.responseType,withCredentials:tt.withCredentials}}let $e=(()=>{class tt{constructor(we){this.handler=we}request(we,dt,ke={}){let ft;if(we instanceof yt)ft=we;else{let on,en;on=ke.headers instanceof le?ke.headers:new le(ke.headers),ke.params&&(en=ke.params instanceof Ze?ke.params:new Ze({fromObject:ke.params})),ft=new yt(we,dt,void 0!==ke.body?ke.body:null,{headers:on,context:ke.context,params:en,reportProgress:ke.reportProgress,responseType:ke.responseType||"json",withCredentials:ke.withCredentials})}const Dt=(0,J.of)(ft).pipe((0,Ee.b)(on=>this.handler.handle(on)));if(we instanceof yt||"events"===ke.observe)return Dt;const Sn=Dt.pipe((0,ve.h)(on=>on instanceof Se));switch(ke.observe||"body"){case"body":switch(ft.responseType){case"arraybuffer":return Sn.pipe((0,Me.U)(on=>{if(null!==on.body&&!(on.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return on.body}));case"blob":return Sn.pipe((0,Me.U)(on=>{if(null!==on.body&&!(on.body instanceof Blob))throw new Error("Response is not a Blob.");return on.body}));case"text":return Sn.pipe((0,Me.U)(on=>{if(null!==on.body&&"string"!=typeof on.body)throw new Error("Response is not a string.");return on.body}));default:return Sn.pipe((0,Me.U)(on=>on.body))}case"response":return Sn;default:throw new Error(`Unreachable: unhandled observe type ${ke.observe}}`)}}delete(we,dt={}){return this.request("DELETE",we,dt)}get(we,dt={}){return this.request("GET",we,dt)}head(we,dt={}){return this.request("HEAD",we,dt)}jsonp(we,dt){return this.request("JSONP",we,{params:(new Ze).append(dt,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(we,dt={}){return this.request("OPTIONS",we,dt)}patch(we,dt,ke={}){return this.request("PATCH",we,Ge(ke,dt))}post(we,dt,ke={}){return this.request("POST",we,Ge(ke,dt))}put(we,dt,ke={}){return this.request("PUT",we,Ge(ke,dt))}}return tt.\u0275fac=function(we){return new(we||tt)(v.LFG(xe))},tt.\u0275prov=v.Yz7({token:tt,factory:tt.\u0275fac}),tt})();class mt{constructor(me,we){this.next=me,this.interceptor=we}handle(me){return this.interceptor.intercept(me,this.next)}}const Tt=new v.OlP("HTTP_INTERCEPTORS");let xt=(()=>{class tt{intercept(we,dt){return dt.handle(we)}}return tt.\u0275fac=function(we){return new(we||tt)},tt.\u0275prov=v.Yz7({token:tt,factory:tt.\u0275fac}),tt})();const _n=/^\)\]\}',?\n/;let er=(()=>{class tt{constructor(we){this.xhrFactory=we}handle(we){if("JSONP"===we.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Ce.y(dt=>{const ke=this.xhrFactory.build();if(ke.open(we.method,we.urlWithParams),we.withCredentials&&(ke.withCredentials=!0),we.headers.forEach((se,he)=>ke.setRequestHeader(se,he.join(","))),we.headers.has("Accept")||ke.setRequestHeader("Accept","application/json, text/plain, */*"),!we.headers.has("Content-Type")){const se=we.detectContentTypeHeader();null!==se&&ke.setRequestHeader("Content-Type",se)}if(we.responseType){const se=we.responseType.toLowerCase();ke.responseType="json"!==se?se:"text"}const ft=we.serializeBody();let Dt=null;const Sn=()=>{if(null!==Dt)return Dt;const se=ke.statusText||"OK",he=new le(ke.getAllResponseHeaders()),ye=function mr(tt){return"responseURL"in tt&&tt.responseURL?tt.responseURL:/^X-Request-URL:/m.test(tt.getAllResponseHeaders())?tt.getResponseHeader("X-Request-URL"):null}(ke)||we.url;return Dt=new ue({headers:he,status:ke.status,statusText:se,url:ye}),Dt},on=()=>{let{headers:se,status:he,statusText:ye,url:st}=Sn(),ce=null;204!==he&&(ce=void 0===ke.response?ke.responseText:ke.response),0===he&&(he=ce?200:0);let Re=he>=200&&he<300;if("json"===we.responseType&&"string"==typeof ce){const it=ce;ce=ce.replace(_n,"");try{ce=""!==ce?JSON.parse(ce):null}catch(Ot){ce=it,Re&&(Re=!1,ce={error:Ot,text:ce})}}Re?(dt.next(new Se({body:ce,headers:se,status:he,statusText:ye,url:st||void 0})),dt.complete()):dt.error(new Ae({error:ce,headers:se,status:he,statusText:ye,url:st||void 0}))},en=se=>{const{url:he}=Sn(),ye=new Ae({error:se,status:ke.status||0,statusText:ke.statusText||"Unknown Error",url:he||void 0});dt.error(ye)};let zr=!1;const Er=se=>{zr||(dt.next(Sn()),zr=!0);let he={type:X.DownloadProgress,loaded:se.loaded};se.lengthComputable&&(he.total=se.total),"text"===we.responseType&&!!ke.responseText&&(he.partialText=ke.responseText),dt.next(he)},Nn=se=>{let he={type:X.UploadProgress,loaded:se.loaded};se.lengthComputable&&(he.total=se.total),dt.next(he)};return ke.addEventListener("load",on),ke.addEventListener("error",en),ke.addEventListener("timeout",en),ke.addEventListener("abort",en),we.reportProgress&&(ke.addEventListener("progress",Er),null!==ft&&ke.upload&&ke.upload.addEventListener("progress",Nn)),ke.send(ft),dt.next({type:X.Sent}),()=>{ke.removeEventListener("error",en),ke.removeEventListener("abort",en),ke.removeEventListener("load",on),ke.removeEventListener("timeout",en),we.reportProgress&&(ke.removeEventListener("progress",Er),null!==ft&&ke.upload&&ke.upload.removeEventListener("progress",Nn)),ke.readyState!==ke.DONE&&ke.abort()}})}}return tt.\u0275fac=function(we){return new(we||tt)(v.LFG(S.JF))},tt.\u0275prov=v.Yz7({token:tt,factory:tt.\u0275fac}),tt})();const cr=new v.OlP("XSRF_COOKIE_NAME"),zn=new v.OlP("XSRF_HEADER_NAME");class Mr{}let Kn=(()=>{class tt{constructor(we,dt,ke){this.doc=we,this.platform=dt,this.cookieName=ke,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const we=this.doc.cookie||"";return we!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,S.Mx)(we,this.cookieName),this.lastCookieString=we),this.lastToken}}return tt.\u0275fac=function(we){return new(we||tt)(v.LFG(S.K0),v.LFG(v.Lbi),v.LFG(cr))},tt.\u0275prov=v.Yz7({token:tt,factory:tt.\u0275fac}),tt})(),wr=(()=>{class tt{constructor(we,dt){this.tokenService=we,this.headerName=dt}intercept(we,dt){const ke=we.url.toLowerCase();if("GET"===we.method||"HEAD"===we.method||ke.startsWith("http://")||ke.startsWith("https://"))return dt.handle(we);const ft=this.tokenService.getToken();return null!==ft&&!we.headers.has(this.headerName)&&(we=we.clone({headers:we.headers.set(this.headerName,ft)})),dt.handle(we)}}return tt.\u0275fac=function(we){return new(we||tt)(v.LFG(Mr),v.LFG(zn))},tt.\u0275prov=v.Yz7({token:tt,factory:tt.\u0275fac}),tt})(),Yn=(()=>{class tt{constructor(we,dt){this.backend=we,this.injector=dt,this.chain=null}handle(we){if(null===this.chain){const dt=this.injector.get(Tt,[]);this.chain=dt.reduceRight((ke,ft)=>new mt(ke,ft),this.backend)}return this.chain.handle(we)}}return tt.\u0275fac=function(we){return new(we||tt)(v.LFG(Oe),v.LFG(v.zs3))},tt.\u0275prov=v.Yz7({token:tt,factory:tt.\u0275fac}),tt})(),Mn=(()=>{class tt{static disable(){return{ngModule:tt,providers:[{provide:wr,useClass:xt}]}}static withOptions(we={}){return{ngModule:tt,providers:[we.cookieName?{provide:cr,useValue:we.cookieName}:[],we.headerName?{provide:zn,useValue:we.headerName}:[]]}}}return tt.\u0275fac=function(we){return new(we||tt)},tt.\u0275mod=v.oAB({type:tt}),tt.\u0275inj=v.cJS({providers:[wr,{provide:Tt,useExisting:wr,multi:!0},{provide:Mr,useClass:Kn},{provide:cr,useValue:"XSRF-TOKEN"},{provide:zn,useValue:"X-XSRF-TOKEN"}]}),tt})(),Pn=(()=>{class tt{}return tt.\u0275fac=function(we){return new(we||tt)},tt.\u0275mod=v.oAB({type:tt}),tt.\u0275inj=v.cJS({providers:[$e,{provide:xe,useClass:Yn},er,{provide:Oe,useExisting:er}],imports:[[Mn.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),tt})()},5e3:(Rt,Ve,V)=>{V.d(Ve,{$8M:()=>lu,$Z:()=>Hm,AFp:()=>fw,AaK:()=>xe,CRH:()=>q0,CZH:()=>Vv,CqO:()=>Og,DdM:()=>N0,EJc:()=>CI,F4k:()=>Gm,FYo:()=>C0,FiY:()=>_a,G48:()=>WI,GfV:()=>T0,Gpc:()=>ae,JOm:()=>Y,LFG:()=>Zt,LSH:()=>Zc,Lbi:()=>EI,NdJ:()=>kg,O4$:()=>Zo,OlP:()=>kn,PXZ:()=>BI,Q6J:()=>bd,QGY:()=>Ng,Qsj:()=>gE,R0b:()=>xd,RDi:()=>na,Rgc:()=>e_,SBq:()=>Yy,Sil:()=>DI,Suo:()=>G0,TTD:()=>ds,TgZ:()=>Ap,VLi:()=>FI,X6Q:()=>qI,XFs:()=>Qt,Xpm:()=>Jt,Y36:()=>mh,YKP:()=>x0,YNc:()=>Ip,Yjl:()=>vn,Yz7:()=>$t,ZZ4:()=>e0,_Bn:()=>E0,_UZ:()=>Mg,_Vd:()=>F_,_c5:()=>lb,_uU:()=>Fy,aQg:()=>t0,c2e:()=>II,cJS:()=>sn,cg1:()=>Op,dDg:()=>vw,deG:()=>kt,dqk:()=>en,eFA:()=>Iw,ekj:()=>xp,g9A:()=>gw,h0i:()=>ry,hGG:()=>cb,iGM:()=>Z0,ifc:()=>ke,ip1:()=>hw,kL8:()=>Gy,kcU:()=>Zl,lG2:()=>Qi,n5z:()=>Yo,oAB:()=>Hr,q4F:()=>D0,qLn:()=>Tl,qOj:()=>wg,qZA:()=>yh,sBO:()=>zI,sIi:()=>Rc,s_b:()=>B_,soG:()=>Hv,tBr:()=>ys,tb:()=>mw,tp0:()=>xo,uIk:()=>Tg,vHH:()=>at,vpe:()=>Ih,wAp:()=>un,xp6:()=>em,z2F:()=>zv,zSh:()=>ef,zs3:()=>Ja});var S=V(7579),v=V(727),J=V(8306),Ce=V(6451),Ee=V(3099);function ve(n){for(let r in n)if(n[r]===ve)return r;throw Error("Could not find renamed property on target object.")}function Me(n,r){for(const a in r)r.hasOwnProperty(a)&&!n.hasOwnProperty(a)&&(n[a]=r[a])}function xe(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(xe).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const a=r.indexOf("\n");return-1===a?r:r.substring(0,a)}function Oe(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const le=ve({__forward_ref__:ve});function ae(n){return n.__forward_ref__=ae,n.toString=function(){return xe(this())},n}function De(n){return It(n)?n():n}function It(n){return"function"==typeof n&&n.hasOwnProperty(le)&&n.__forward_ref__===ae}class at extends Error{constructor(r,a){super(function bt(n,r){return`NG0${Math.abs(n)}${r?": "+r:""}`}(r,a)),this.code=r}}function Ze(n){return"string"==typeof n?n:null==n?"":String(n)}function rt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ze(n)}function Ke(n,r){const a=r?` in ${r}`:"";throw new at(-201,`No provider for ${rt(n)} found${a}`)}function Lt(n,r){null==n&&function ut(n,r,a,c){throw new Error(`ASSERTION ERROR: ${n}`+(null==c?"":` [Expected=> ${a} ${c} ${r} <=Actual]`))}(r,n,null,"!=")}function $t(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function sn(n){return{providers:n.providers||[],imports:n.imports||[]}}function _n(n){return mr(n,Mr)||mr(n,wr)}function mr(n,r){return n.hasOwnProperty(r)?n[r]:null}function zn(n){return n&&(n.hasOwnProperty(Kn)||n.hasOwnProperty(Yn))?n[Kn]:null}const Mr=ve({\u0275prov:ve}),Kn=ve({\u0275inj:ve}),wr=ve({ngInjectableDef:ve}),Yn=ve({ngInjectorDef:ve});var Qt=(()=>((Qt=Qt||{})[Qt.Default=0]="Default",Qt[Qt.Host=1]="Host",Qt[Qt.Self=2]="Self",Qt[Qt.SkipSelf=4]="SkipSelf",Qt[Qt.Optional=8]="Optional",Qt))();let xn;function Pn(n){const r=xn;return xn=n,r}function Yi(n,r,a){const c=_n(n);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&Qt.Optional?null:void 0!==r?r:void Ke(xe(n),"Injector")}function tt(n){return{toString:n}.toString()}var me=(()=>((me=me||{})[me.OnPush=0]="OnPush",me[me.Default=1]="Default",me))(),ke=(()=>{return(n=ke||(ke={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",ke;var n})();const ft="undefined"!=typeof globalThis&&globalThis,Dt="undefined"!=typeof window&&window,Sn="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,en=ft||"undefined"!=typeof global&&global||Dt||Sn,Nn={},se=[],he=ve({\u0275cmp:ve}),ye=ve({\u0275dir:ve}),st=ve({\u0275pipe:ve}),ce=ve({\u0275mod:ve}),Re=ve({\u0275fac:ve}),it=ve({__NG_ELEMENT_ID__:ve});let Ot=0;function Jt(n){return tt(()=>{const a={},c={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===me.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||se,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||ke.Emulated,id:"c",styles:n.styles||se,_:null,setInput:null,schemas:n.schemas||null,tView:null},f=n.directives,y=n.features,I=n.pipes;return c.id+=Ot++,c.inputs=yi(n.inputs,a),c.outputs=yi(n.outputs),y&&y.forEach(x=>x(c)),c.directiveDefs=f?()=>("function"==typeof f?f():f).map(yr):null,c.pipeDefs=I?()=>("function"==typeof I?I():I).map(dn):null,c})}function yr(n){return br(n)||function ai(n){return n[ye]||null}(n)}function dn(n){return function _i(n){return n[st]||null}(n)}const Fr={};function Hr(n){return tt(()=>{const r={type:n.type,bootstrap:n.bootstrap||se,declarations:n.declarations||se,imports:n.imports||se,exports:n.exports||se,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(Fr[n.id]=n.type),r})}function yi(n,r){if(null==n)return Nn;const a={};for(const c in n)if(n.hasOwnProperty(c)){let f=n[c],y=f;Array.isArray(f)&&(y=f[1],f=f[0]),a[f]=c,r&&(r[f]=y)}return a}const Qi=Jt;function vn(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function br(n){return n[he]||null}function $r(n,r){const a=n[ce]||null;if(!a&&!0===r)throw new Error(`Type ${xe(n)} does not have '\u0275mod' property.`);return a}function si(n){return Array.isArray(n)&&"object"==typeof n[1]}function ns(n){return Array.isArray(n)&&!0===n[1]}function uo(n){return 0!=(8&n.flags)}function Na(n){return 2==(2&n.flags)}function ui(n){return 1==(1&n.flags)}function Es(n){return null!==n.template}function Io(n){return 0!=(512&n[2])}function Qr(n,r){return n.hasOwnProperty(Re)?n[Re]:null}class li{constructor(r,a,c){this.previousValue=r,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function ds(){return rs}function rs(n){return n.type.prototype.ngOnChanges&&(n.setInput=Is),ka}function ka(){const n=Ei(this),r=null==n?void 0:n.current;if(r){const a=n.previous;if(a===Nn)n.previous=r;else for(let c in r)a[c]=r[c];n.current=null,this.ngOnChanges(r)}}function Is(n,r,a,c){const f=Ei(n)||function Vo(n,r){return n[Zu]=r}(n,{previous:Nn,current:null}),y=f.current||(f.current={}),I=f.previous,x=this.declaredInputs[a],O=I[x];y[x]=new li(O&&O.currentValue,r,I===Nn),n[c]=r}ds.ngInherit=!0;const Zu="__ngSimpleChanges__";function Ei(n){return n[Zu]||null}let is;function na(n){is=n}function jn(n){return!!n.listen}const L={createRenderer:(n,r)=>function ks(){return void 0!==is?is:"undefined"!=typeof document?document:void 0}()};function F(n){for(;Array.isArray(n);)n=n[0];return n}function ht(n,r){return F(r[n.index])}function hn(n,r){return n.data[r]}function En(n,r){const a=r[n];return si(a)?a:a[0]}function On(n){return 4==(4&n[2])}function Ir(n){return 128==(128&n[2])}function Dr(n,r){return null==r?null:n[r]}function ji(n){n[18]=0}function Ri(n,r){n[5]+=r;let a=n,c=n[3];for(;null!==c&&(1===r&&1===a[5]||-1===r&&0===a[5]);)c[5]+=r,a=c,c=c[3]}const Kt={lFrame:aa(null),bindingsEnabled:!0};function Fs(){return Kt.bindingsEnabled}function gt(){return Kt.lFrame.lView}function Dn(){return Kt.lFrame.tView}function Ur(){let n=Ho();for(;null!==n&&64===n.type;)n=n.parent;return n}function Ho(){return Kt.lFrame.currentTNode}function bs(n,r){const a=Kt.lFrame;a.currentTNode=n,a.isParent=r}function Ua(){return Kt.lFrame.isParent}function Us(){return Kt.lFrame.bindingIndex++}function iu(n,r){const a=Kt.lFrame;a.bindingIndex=a.bindingRootIndex=n,To(r)}function To(n){Kt.lFrame.currentDirectiveIndex=n}function Gu(){return Kt.lFrame.currentQueryIndex}function bu(n){Kt.lFrame.currentQueryIndex=n}function ps(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function oa(n,r,a){if(a&Qt.SkipSelf){let f=r,y=n;for(;!(f=f.parent,null!==f||a&Qt.Host||(f=ps(y),null===f||(y=y[15],10&f.type))););if(null===f)return!1;r=f,n=y}const c=Kt.lFrame=Do();return c.currentTNode=r,c.lView=n,!0}function $o(n){const r=Do(),a=n[1];Kt.lFrame=r,r.currentTNode=a.firstChild,r.lView=n,r.tView=a,r.contextLView=n,r.bindingIndex=a.bindingStartIndex,r.inI18n=!1}function Do(){const n=Kt.lFrame,r=null===n?null:n.child;return null===r?aa(n):r}function aa(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function qu(){const n=Kt.lFrame;return Kt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const po=qu;function go(){const n=qu();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Mi(){return Kt.lFrame.selectedIndex}function Va(n){Kt.lFrame.selectedIndex=n}function ei(){const n=Kt.lFrame;return hn(n.tView,n.selectedIndex)}function Zo(){Kt.lFrame.currentNamespace="svg"}function Zl(){!function ja(){Kt.lFrame.currentNamespace=null}()}function Go(n,r){for(let a=r.directiveStart,c=r.directiveEnd;a<c;a++){const y=n.data[a].type.prototype,{ngAfterContentInit:I,ngAfterContentChecked:x,ngAfterViewInit:O,ngAfterViewChecked:Z,ngOnDestroy:W}=y;I&&(n.contentHooks||(n.contentHooks=[])).push(-a,I),x&&((n.contentHooks||(n.contentHooks=[])).push(a,x),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(a,x)),O&&(n.viewHooks||(n.viewHooks=[])).push(-a,O),Z&&((n.viewHooks||(n.viewHooks=[])).push(a,Z),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(a,Z)),null!=W&&(n.destroyHooks||(n.destroyHooks=[])).push(a,W)}}function Bs(n,r,a){Cu(n,r,3,a)}function la(n,r,a,c){(3&n[2])===a&&Cu(n,r,a,c)}function Zn(n,r){let a=n[2];(3&a)===r&&(a&=2047,a+=1,n[2]=a)}function Cu(n,r,a,c){const y=null!=c?c:-1,I=r.length-1;let x=0;for(let O=void 0!==c?65535&n[18]:0;O<I;O++)if("number"==typeof r[O+1]){if(x=r[O],null!=c&&x>=c)break}else r[O]<0&&(n[18]+=65536),(x<y||-1==y)&&(ml(n,a,r,O),n[18]=(4294901760&n[18])+O+2),O++}function ml(n,r,a,c){const f=a[c]<0,y=a[c+1],x=n[f?-a[c]:a[c]];if(f){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{y.call(x)}finally{}}}else try{y.call(x)}finally{}}class mo{constructor(r,a,c){this.factory=r,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function su(n,r,a){const c=jn(n);let f=0;for(;f<a.length;){const y=a[f];if("number"==typeof y){if(0!==y)break;f++;const I=a[f++],x=a[f++],O=a[f++];c?n.setAttribute(r,x,O,I):r.setAttributeNS(I,x,O)}else{const I=y,x=a[++f];js(I)?c&&n.setProperty(r,I,x):c?n.setAttribute(r,I,x):r.setAttribute(I,x),f++}}return f}function Ha(n){return 3===n||4===n||6===n}function js(n){return 64===n.charCodeAt(0)}function Tu(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let a=-1;for(let c=0;c<r.length;c++){const f=r[c];"number"==typeof f?a=f:0===a||ql(n,a,f,null,-1===a||2===a?r[++c]:null)}}return n}function ql(n,r,a,c,f){let y=0,I=n.length;if(-1===r)I=-1;else for(;y<n.length;){const x=n[y++];if("number"==typeof x){if(x===r){I=-1;break}if(x>r){I=y-1;break}}}for(;y<n.length;){const x=n[y];if("number"==typeof x)break;if(x===a){if(null===c)return void(null!==f&&(n[y+1]=f));if(c===n[y+1])return void(n[y+2]=f)}y++,null!==c&&y++,null!==f&&y++}-1!==I&&(n.splice(I,0,r),y=I+1),n.splice(y++,0,a),null!==c&&n.splice(y++,0,c),null!==f&&n.splice(y++,0,f)}function $a(n){return-1!==n}function Wo(n){return 32767&n}function Za(n,r){let a=function ti(n){return n>>16}(n),c=r;for(;a>0;)c=c[15],a--;return c}let ca=!0;function ni(n){const r=ca;return ca=n,r}let Du=0;function _r(n,r){const a=Ko(n,r);if(-1!==a)return a;const c=r[1];c.firstCreatePass&&(n.injectorIndex=r.length,Ni(c.data,n),Ni(r,null),Ni(c.blueprint,null));const f=A(n,r),y=n.injectorIndex;if($a(f)){const I=Wo(f),x=Za(f,r),O=x[1].data;for(let Z=0;Z<8;Z++)r[y+Z]=x[I+Z]|O[I+Z]}return r[y+8]=f,y}function Ni(n,r){n.push(0,0,0,0,0,0,0,0,r)}function Ko(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function A(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let a=0,c=null,f=r;for(;null!==f;){const y=f[1],I=y.type;if(c=2===I?y.declTNode:1===I?f[6]:null,null===c)return-1;if(a++,f=f[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function T(n,r,a){!function wt(n,r,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(it)&&(c=a[it]),null==c&&(c=a[it]=Du++);const f=255&c;r.data[n+(f>>5)]|=1<<f}(n,r,a)}function P(n,r,a){if(a&Qt.Optional)return n;Ke(r,"NodeInjector")}function N(n,r,a,c){if(a&Qt.Optional&&void 0===c&&(c=null),0==(a&(Qt.Self|Qt.Host))){const f=n[9],y=Pn(void 0);try{return f?f.get(r,c,a&Qt.Optional):Yi(r,c,a&Qt.Optional)}finally{Pn(y)}}return P(c,r,a)}function j(n,r,a,c=Qt.Default,f){if(null!==n){const y=function qt(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(it)?n[it]:void 0;return"number"==typeof r?r>=0?255&r:ge:r}(a);if("function"==typeof y){if(!oa(r,n,c))return c&Qt.Host?P(f,a,c):N(r,a,c,f);try{const I=y(c);if(null!=I||c&Qt.Optional)return I;Ke(a)}finally{po()}}else if("number"==typeof y){let I=null,x=Ko(n,r),O=-1,Z=c&Qt.Host?r[16][6]:null;for((-1===x||c&Qt.SkipSelf)&&(O=-1===x?A(n,r):r[x+8],-1!==O&&ur(c,!1)?(I=r[1],x=Wo(O),r=Za(O,r)):x=-1);-1!==x;){const W=r[1];if(ar(y,x,W.data)){const ie=et(x,r,a,I,c,Z);if(ie!==re)return ie}O=r[x+8],-1!==O&&ur(c,r[1].data[x+8]===Z)&&ar(y,x,r)?(I=W,x=Wo(O),r=Za(O,r)):x=-1}}}return N(r,a,c,f)}const re={};function ge(){return new $i(Ur(),gt())}function et(n,r,a,c,f,y){const I=r[1],x=I.data[n+8],W=Ft(x,I,a,null==c?Na(x)&&ca:c!=I&&0!=(3&x.type),f&Qt.Host&&y===x);return null!==W?In(r,I,W,x):re}function Ft(n,r,a,c,f){const y=n.providerIndexes,I=r.data,x=1048575&y,O=n.directiveStart,W=y>>20,_e=f?x+W:n.directiveEnd;for(let Be=c?x:x+W;Be<_e;Be++){const lt=I[Be];if(Be<O&&a===lt||Be>=O&&lt.type===a)return Be}if(f){const Be=I[O];if(Be&&Es(Be)&&Be.type===a)return O}return null}function In(n,r,a,c){let f=n[a];const y=r.data;if(function Vs(n){return n instanceof mo}(f)){const I=f;I.resolving&&function Ie(n,r){const a=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new at(-200,`Circular dependency in DI detected for ${n}${a}`)}(rt(y[a]));const x=ni(I.canSeeViewProviders);I.resolving=!0;const O=I.injectImpl?Pn(I.injectImpl):null;oa(n,c,Qt.Default);try{f=n[a]=I.factory(void 0,y,n,c),r.firstCreatePass&&a>=c.directiveStart&&function Lc(n,r,a){const{ngOnChanges:c,ngOnInit:f,ngDoCheck:y}=r.type.prototype;if(c){const I=rs(r);(a.preOrderHooks||(a.preOrderHooks=[])).push(n,I),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(n,I)}f&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-n,f),y&&((a.preOrderHooks||(a.preOrderHooks=[])).push(n,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(n,y))}(a,y[a],r)}finally{null!==O&&Pn(O),ni(x),I.resolving=!1,po()}}return f}function ar(n,r,a){return!!(a[r+(n>>5)]&1<<n)}function ur(n,r){return!(n&Qt.Self||n&Qt.Host&&r)}class $i{constructor(r,a){this._tNode=r,this._lView=a}get(r,a,c){return j(this._tNode,this._lView,r,c,a)}}function Yo(n){return tt(()=>{const r=n.prototype.constructor,a=r[Re]||uu(r),c=Object.prototype;let f=Object.getPrototypeOf(n.prototype).constructor;for(;f&&f!==c;){const y=f[Re]||uu(f);if(y&&y!==a)return y;f=Object.getPrototypeOf(f)}return y=>new y})}function uu(n){return It(n)?()=>{const r=uu(De(n));return r&&r()}:Qr(n)}function lu(n){return function C(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const a=n.attrs;if(a){const c=a.length;let f=0;for(;f<c;){const y=a[f];if(Ha(y))break;if(0===y)f+=2;else if("number"==typeof y)for(f++;f<c&&"string"==typeof a[f];)f++;else{if(y===r)return a[f+1];f+=2}}}return null}(Ur(),n)}const yo="__parameters__";function ha(n,r,a){return tt(()=>{const c=function yn(n){return function(...a){if(n){const c=n(...a);for(const f in c)this[f]=c[f]}}}(r);function f(...y){if(this instanceof f)return c.apply(this,y),this;const I=new f(...y);return x.annotation=I,x;function x(O,Z,W){const ie=O.hasOwnProperty(yo)?O[yo]:Object.defineProperty(O,yo,{value:[]})[yo];for(;ie.length<=W;)ie.push(null);return(ie[W]=ie[W]||[]).push(I),O}}return a&&(f.prototype=Object.create(a.prototype)),f.prototype.ngMetadataName=n,f.annotationCls=f,f})}class kn{constructor(r,a){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=$t({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const kt=new kn("AnalyzeForEntryComponents");function Ue(n,r){void 0===r&&(r=n);for(let a=0;a<n.length;a++){let c=n[a];Array.isArray(c)?(r===n&&(r=n.slice(0,a)),Ue(c,r)):r!==n&&r.push(c)}return r}function gs(n,r){n.forEach(a=>Array.isArray(a)?gs(a,r):r(a))}function Zs(n,r,a){r>=n.length?n.push(a):n.splice(r,0,a)}function fa(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function Sr(n,r,a){let c=ma(n,r);return c>=0?n[1|c]=a:(c=~c,function Rr(n,r,a,c){let f=n.length;if(f==r)n.push(a,c);else if(1===f)n.push(c,n[0]),n[0]=a;else{for(f--,n.push(n[f-1],n[f]);f>r;)n[f]=n[f-2],f--;n[r]=a,n[r+1]=c}}(n,c,r,a)),c}function Ds(n,r){const a=ma(n,r);if(a>=0)return n[1|a]}function ma(n,r){return function ss(n,r,a){let c=0,f=n.length>>a;for(;f!==c;){const y=c+(f-c>>1),I=n[y<<a];if(r===I)return y<<a;I>r?f=y:c=y+1}return~(f<<a)}(n,r,1)}const xu={},Ao="__NG_DI_FLAG__",Br="ngTempTokenPath",U=/\n/gm,oe="__source",Pe=ve({provide:String,useValue:ve});let Le;function pt(n){const r=Le;return Le=n,r}function Bt(n,r=Qt.Default){if(void 0===Le)throw new at(203,"");return null===Le?Yi(n,void 0,r):Le.get(n,r&Qt.Optional?null:void 0,r)}function Zt(n,r=Qt.Default){return(function Mn(){return xn}()||Bt)(De(n),r)}const rr=Zt;function an(n){const r=[];for(let a=0;a<n.length;a++){const c=De(n[a]);if(Array.isArray(c)){if(0===c.length)throw new at(900,"");let f,y=Qt.Default;for(let I=0;I<c.length;I++){const x=c[I],O=os(x);"number"==typeof O?-1===O?f=x.token:y|=O:f=x}r.push(Zt(f,y))}else r.push(Zt(c))}return r}function Ar(n,r){return n[Ao]=r,n.prototype[Ao]=r,n}function os(n){return n[Ao]}const ys=Ar(ha("Inject",n=>({token:n})),-1),_a=Ar(ha("Optional"),8),xo=Ar(ha("SkipSelf"),4);class Df{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function qa(n){return n instanceof Df?n.changingThisBreaksApplicationSecurity:n}const jc=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,hu=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var oi=(()=>((oi=oi||{})[oi.NONE=0]="NONE",oi[oi.HTML=1]="HTML",oi[oi.STYLE=2]="STYLE",oi[oi.SCRIPT=3]="SCRIPT",oi[oi.URL=4]="URL",oi[oi.RESOURCE_URL=5]="RESOURCE_URL",oi))();function Zc(n){const r=function uc(){const n=gt();return n&&n[12]}();return r?r.sanitize(oi.URL,n)||"":function ec(n,r){const a=function Wa(n){return n instanceof Df&&n.getTypeName()||null}(n);if(null!=a&&a!==r){if("ResourceURL"===a&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===r}(n,"URL")?qa(n):function bl(n){return(n=String(n)).match(jc)||n.match(hu)?n:"unsafe:"+n}(Ze(n))}const qc="__ngContext__";function Xn(n,r){n[qc]=r}function Ss(n){const r=function lc(n){return n[qc]||null}(n);return r?Array.isArray(r)?r:r.lView:null}function nl(n){return n.ngOriginalError}function Yc(n,...r){n.error(...r)}class Tl{constructor(){this._console=console}handleError(r){const a=this._findOriginalError(r),c=function Vd(n){return n&&n.ngErrorLogger||Yc}(r);c(this._console,"ERROR",r),a&&c(this._console,"ORIGINAL ERROR",a)}_findOriginalError(r){let a=r&&nl(r);for(;a&&nl(a);)a=nl(a);return a||null}}const ki=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(en))();function E(n){return n instanceof Function?n():n}var Y=(()=>((Y=Y||{})[Y.Important=1]="Important",Y[Y.DashCase=2]="DashCase",Y))();function Qe(n,r){return undefined(n,r)}function pn(n){const r=n[3];return ns(r)?r[3]:r}function No(n){return fc(n[13])}function hc(n){return fc(n[4])}function fc(n){for(;null!==n&&!ns(n);)n=n[4];return n}function Fu(n,r,a,c,f){if(null!=c){let y,I=!1;ns(c)?y=c:si(c)&&(I=!0,c=c[0]);const x=F(c);0===n&&null!==a?null==f?Nf(r,a,x):Dl(r,a,x,f||null,!0):1===n&&null!==a?Dl(r,a,x,f||null,!0):2===n?function nd(n,r,a){const c=al(n,r);c&&function Oh(n,r,a,c){jn(n)?n.removeChild(r,a,c):r.removeChild(a)}(n,c,r,a)}(r,x,I):3===n&&r.destroyNode(x),null!=y&&function ao(n,r,a,c,f){const y=a[7];y!==F(a)&&Fu(r,n,c,y,f);for(let x=10;x<a.length;x++){const O=a[x];Al(O[1],O,n,r,c,y)}}(r,n,y,a,f)}}function Xc(n,r,a){if(jn(n))return n.createElement(r,a);{const c=null!==a?function ho(n){const r=n.toLowerCase();return"svg"===r?"http://www.w3.org/2000/svg":"math"===r?"http://www.w3.org/1998/MathML/":null}(a):null;return null===c?n.createElement(r):n.createElementNS(c,r)}}function Wp(n,r){const a=n[9],c=a.indexOf(r),f=r[3];1024&r[2]&&(r[2]&=-1025,Ri(f,-1)),a.splice(c,1)}function $d(n,r){if(n.length<=10)return;const a=10+r,c=n[a];if(c){const f=c[17];null!==f&&f!==n&&Wp(f,c),r>0&&(n[a-1][4]=c[4]);const y=fa(n,10+r);!function pc(n,r){Al(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(c[1],c);const I=y[19];null!==I&&I.detachView(y[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function Mf(n,r){if(!(256&r[2])){const a=r[11];jn(a)&&a.destroyNode&&Al(n,r,a,3,null,null),function ol(n){let r=n[13];if(!r)return zp(n[1],n);for(;r;){let a=null;if(si(r))a=r[13];else{const c=r[10];c&&(a=c)}if(!a){for(;r&&!r[4]&&r!==n;)si(r)&&zp(r[1],r),r=r[3];null===r&&(r=n),si(r)&&zp(r[1],r),a=r&&r[4]}r=a}}(r)}}function zp(n,r){if(!(256&r[2])){r[2]&=-129,r[2]|=256,function ay(n,r){let a;if(null!=n&&null!=(a=n.destroyHooks))for(let c=0;c<a.length;c+=2){const f=r[a[c]];if(!(f instanceof mo)){const y=a[c+1];if(Array.isArray(y))for(let I=0;I<y.length;I+=2){const x=f[y[I]],O=y[I+1];try{O.call(x)}finally{}}else try{y.call(f)}finally{}}}}(n,r),function oy(n,r){const a=n.cleanup,c=r[7];let f=-1;if(null!==a)for(let y=0;y<a.length-1;y+=2)if("string"==typeof a[y]){const I=a[y+1],x="function"==typeof I?I(r):F(r[I]),O=c[f=a[y+2]],Z=a[y+3];"boolean"==typeof Z?x.removeEventListener(a[y],O,Z):Z>=0?c[f=Z]():c[f=-Z].unsubscribe(),y+=2}else{const I=c[f=a[y+1]];a[y].call(I)}if(null!==c){for(let y=f+1;y<c.length;y++)c[y]();r[7]=null}}(n,r),1===r[1].type&&jn(r[11])&&r[11].destroy();const a=r[17];if(null!==a&&ns(r[3])){a!==r[3]&&Wp(a,r);const c=r[19];null!==c&&c.detachView(n)}}}function za(n,r,a){return function Pf(n,r,a){let c=r;for(;null!==c&&40&c.type;)c=(r=c).parent;if(null===c)return a[0];if(2&c.flags){const f=n.data[c.directiveStart].encapsulation;if(f===ke.None||f===ke.Emulated)return null}return ht(c,a)}(n,r.parent,a)}function Dl(n,r,a,c,f){jn(n)?n.insertBefore(r,a,c,f):r.insertBefore(a,c,f)}function Nf(n,r,a){jn(n)?n.appendChild(r,a):r.appendChild(a)}function Nh(n,r,a,c,f){null!==c?Dl(n,r,a,c,f):Nf(n,r,a)}function al(n,r){return jn(n)?n.parentNode(r):r.parentNode}let zg=function Wg(n,r,a){return 40&n.type?ht(n,a):null};function Of(n,r,a,c){const f=za(n,c,r),y=r[11],x=function Sl(n,r,a){return zg(n,r,a)}(c.parent||r[6],c,r);if(null!=f)if(Array.isArray(a))for(let O=0;O<a.length;O++)Nh(y,f,a[O],x,!1);else Nh(y,f,a,x,!1)}function gc(n,r){if(null!==r){const a=r.type;if(3&a)return ht(r,n);if(4&a)return kf(-1,n[r.index]);if(8&a){const c=r.child;if(null!==c)return gc(n,c);{const f=n[r.index];return ns(f)?kf(-1,f):F(f)}}if(32&a)return Qe(r,n)()||F(n[r.index]);{const c=td(n,r);return null!==c?Array.isArray(c)?c[0]:gc(pn(n[16]),c):gc(n,r.next)}}return null}function td(n,r){return null!==r?n[16][6].projection[r.projection]:null}function kf(n,r){const a=10+n+1;if(a<r.length){const c=r[a],f=c[1].firstChild;if(null!==f)return gc(c,f)}return r[7]}function hi(n,r,a,c,f,y,I){for(;null!=a;){const x=c[a.index],O=a.type;if(I&&0===r&&(x&&Xn(F(x),c),a.flags|=4),64!=(64&a.flags))if(8&O)hi(n,r,a.child,c,f,y,!1),Fu(r,n,f,x,y);else if(32&O){const Z=Qe(a,c);let W;for(;W=Z();)Fu(r,n,f,W,y);Fu(r,n,f,x,y)}else 16&O?Wr(n,r,c,a,f,y):Fu(r,n,f,x,y);a=I?a.projectionNext:a.next}}function Al(n,r,a,c,f,y){hi(a,c,n.firstChild,r,f,y,!1)}function Wr(n,r,a,c,f,y){const I=a[16],O=I[6].projection[c.projection];if(Array.isArray(O))for(let Z=0;Z<O.length;Z++)Fu(r,n,f,O[Z],y);else hi(n,r,O,I[3],f,y,!0)}function Ff(n,r,a){jn(n)?n.setAttribute(r,"style",a):r.style.cssText=a}function kh(n,r,a){jn(n)?""===a?n.removeAttribute(r,"class"):n.setAttribute(r,"class",a):r.className=a}function rd(n,r,a){let c=n.length;for(;;){const f=n.indexOf(r,a);if(-1===f)return f;if(0===f||n.charCodeAt(f-1)<=32){const y=r.length;if(f+y===c||n.charCodeAt(f+y)<=32)return f}a=f+1}}const xl="ng-template";function Ca(n,r,a){let c=0;for(;c<n.length;){let f=n[c++];if(a&&"class"===f){if(f=n[c],-1!==rd(f.toLowerCase(),r,0))return!0}else if(1===f){for(;c<n.length&&"string"==typeof(f=n[c++]);)if(f.toLowerCase()===r)return!0;return!1}}return!1}function mc(n){return 4===n.type&&n.value!==xl}function id(n,r,a){return r===(4!==n.type||a?n.value:xl)}function Lf(n,r,a){let c=4;const f=n.attrs||[],y=function Yg(n){for(let r=0;r<n.length;r++)if(Ha(n[r]))return r;return n.length}(f);let I=!1;for(let x=0;x<r.length;x++){const O=r[x];if("number"!=typeof O){if(!I)if(4&c){if(c=2|1&c,""!==O&&!id(n,O,a)||""===O&&1===r.length){if(Oo(c))return!1;I=!0}}else{const Z=8&c?O:r[++x];if(8&c&&null!==n.attrs){if(!Ca(n.attrs,Z,a)){if(Oo(c))return!1;I=!0}continue}const ie=Kg(8&c?"class":O,f,mc(n),a);if(-1===ie){if(Oo(c))return!1;I=!0;continue}if(""!==Z){let _e;_e=ie>y?"":f[ie+1].toLowerCase();const Be=8&c?_e:null;if(Be&&-1!==rd(Be,Z,0)||2&c&&Z!==_e){if(Oo(c))return!1;I=!0}}}}else{if(!I&&!Oo(c)&&!Oo(O))return!1;if(I&&Oo(O))continue;I=!1,c=O|1&c}}return Oo(c)||I}function Oo(n){return 0==(1&n)}function Kg(n,r,a,c){if(null===r)return-1;let f=0;if(c||!a){let y=!1;for(;f<r.length;){const I=r[f];if(I===n)return f;if(3===I||6===I)y=!0;else{if(1===I||2===I){let x=r[++f];for(;"string"==typeof x;)x=r[++f];continue}if(4===I)break;if(0===I){f+=4;continue}}f+=y?1:2}return-1}return function Qg(n,r){let a=n.indexOf(4);if(a>-1)for(a++;a<n.length;){const c=n[a];if("number"==typeof c)return-1;if(c===r)return a;a++}return-1}(r,n)}function Qp(n,r,a=!1){for(let c=0;c<r.length;c++)if(Lf(n,r[c],a))return!0;return!1}function qd(n,r){return n?":not("+r.trim()+")":r}function yc(n){let r=n[0],a=1,c=2,f="",y=!1;for(;a<n.length;){let I=n[a];if("string"==typeof I)if(2&c){const x=n[++a];f+="["+I+(x.length>0?'="'+x+'"':"")+"]"}else 8&c?f+="."+I:4&c&&(f+=" "+I);else""!==f&&!Oo(I)&&(r+=qd(y,f),f=""),c=I,y=y||!Oo(c);a++}return""!==f&&(r+=qd(y,f)),r}const Un={};function em(n){tm(Dn(),gt(),Mi()+n,!1)}function tm(n,r,a,c){if(!c)if(3==(3&r[2])){const y=n.preOrderCheckHooks;null!==y&&Bs(r,y,a)}else{const y=n.preOrderHooks;null!==y&&la(r,y,0,a)}Va(a)}function ul(n,r){return n<<17|r<<2}function xs(n){return n>>17&32767}function zd(n){return 2|n}function Uu(n){return(131068&n)>>2}function _c(n,r){return-131069&n|r<<2}function Lh(n){return 1|n}function am(n,r){const a=n.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const f=a[c],y=a[c+1];if(-1!==y){const I=n.data[y];bu(f),I.contentQueries(2,r[y],y)}}}function ud(n,r,a,c,f,y,I,x,O,Z){const W=r.blueprint.slice();return W[0]=f,W[2]=140|c,ji(W),W[3]=W[15]=n,W[8]=a,W[10]=I||n&&n[10],W[11]=x||n&&n[11],W[12]=O||n&&n[12]||null,W[9]=Z||n&&n[9]||null,W[6]=y,W[16]=2==r.type?n[16]:W,W}function cl(n,r,a,c,f){let y=n.data[r];if(null===y)y=function $h(n,r,a,c,f){const y=Ho(),I=Ua(),O=n.data[r]=function Ol(n,r,a,c,f,y){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:y,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,I?y:y&&y.parent,a,r,c,f);return null===n.firstChild&&(n.firstChild=O),null!==y&&(I?null==y.child&&null!==O.parent&&(y.child=O):null===y.next&&(y.next=O)),O}(n,r,a,c,f),function Xr(){return Kt.lFrame.inI18n}()&&(y.flags|=64);else if(64&y.type){y.type=a,y.value=c,y.attrs=f;const I=function ia(){const n=Kt.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();y.injectorIndex=null===I?-1:I.injectorIndex}return bs(y,!0),y}function wo(n,r,a,c){if(0===a)return-1;const f=r.length;for(let y=0;y<a;y++)r.push(c),n.blueprint.push(c),n.data.push(null);return f}function yu(n,r,a){$o(r);try{const c=n.viewQuery;null!==c&&dl(1,c,a);const f=n.template;null!==f&&og(n,r,f,1,a),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&am(n,r),n.staticViewQueries&&dl(2,n.viewQuery,a);const y=n.components;null!==y&&function gy(n,r){for(let a=0;a<r.length;a++)rh(n,r[a])}(r,y)}catch(c){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),c}finally{r[2]&=-5,go()}}function wc(n,r,a,c){const f=r[2];if(256!=(256&f)){$o(r);try{ji(r),function sa(n){return Kt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==a&&og(n,r,a,2,c);const I=3==(3&f);if(I){const Z=n.preOrderCheckHooks;null!==Z&&Bs(r,Z,null)}else{const Z=n.preOrderHooks;null!==Z&&la(r,Z,0,null),Zn(r,0)}if(function _y(n){for(let r=No(n);null!==r;r=hc(r)){if(!r[2])continue;const a=r[9];for(let c=0;c<a.length;c++){const f=a[c],y=f[3];0==(1024&f[2])&&Ri(y,1),f[2]|=1024}}}(r),function yy(n){for(let r=No(n);null!==r;r=hc(r))for(let a=10;a<r.length;a++){const c=r[a],f=c[1];Ir(c)&&wc(f,c,f.template,c[8])}}(r),null!==n.contentQueries&&am(n,r),I){const Z=n.contentCheckHooks;null!==Z&&Bs(r,Z)}else{const Z=n.contentHooks;null!==Z&&la(r,Z,1),Zn(r,1)}!function Hh(n,r){const a=n.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const f=a[c];if(f<0)Va(~f);else{const y=f,I=a[++c],x=a[++c];iu(I,y),x(2,r[y])}}}finally{Va(-1)}}(n,r);const x=n.components;null!==x&&function qf(n,r){for(let a=0;a<r.length;a++)dg(n,r[a])}(r,x);const O=n.viewQuery;if(null!==O&&dl(2,O,c),I){const Z=n.viewCheckHooks;null!==Z&&Bs(r,Z)}else{const Z=n.viewHooks;null!==Z&&la(r,Z,2),Zn(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-73,1024&r[2]&&(r[2]&=-1025,Ri(r[3],-1))}finally{go()}}}function sg(n,r,a,c){const f=r[10],I=On(r);try{!I&&f.begin&&f.begin(),I&&yu(n,r,c),wc(n,r,a,c)}finally{!I&&f.end&&f.end()}}function og(n,r,a,c,f){const y=Mi(),I=2&c;try{Va(-1),I&&r.length>20&&tm(n,r,20,!1),a(c,f)}finally{Va(y)}}function zf(n,r,a){!Fs()||(function Xf(n,r,a,c){const f=a.directiveStart,y=a.directiveEnd;n.firstCreatePass||_r(a,r),Xn(c,r);const I=a.initialInputs;for(let x=f;x<y;x++){const O=n.data[x],Z=Es(O);Z&&my(r,a,O);const W=In(r,n,x,a);Xn(W,r),null!==I&&Yh(0,x-f,W,O,0,I),Z&&(En(a.index,r)[8]=W)}}(n,r,a,ht(a,r)),128==(128&a.flags)&&function ep(n,r,a){const c=a.directiveStart,f=a.directiveEnd,I=a.index,x=function gl(){return Kt.lFrame.currentDirectiveIndex}();try{Va(I);for(let O=c;O<f;O++){const Z=n.data[O],W=r[O];To(O),(null!==Z.hostBindings||0!==Z.hostVars||null!==Z.hostAttrs)&&th(Z,W)}}finally{Va(-1),To(x)}}(n,r,a))}function Kf(n,r,a=ht){const c=r.localNames;if(null!==c){let f=r.index+1;for(let y=0;y<c.length;y+=2){const I=c[y+1],x=-1===I?a(r,n):n[I];n[f++]=x}}}function Zh(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=ld(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function ld(n,r,a,c,f,y,I,x,O,Z){const W=20+c,ie=W+f,_e=function um(n,r){const a=[];for(let c=0;c<r;c++)a.push(c<n?null:Un);return a}(W,ie),Be="function"==typeof Z?Z():Z;return _e[1]={type:n,blueprint:_e,template:a,queries:null,viewQuery:x,declTNode:r,data:_e.slice().fill(null,W),bindingStartIndex:W,expandoStartIndex:ie,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof y?y():y,pipeRegistry:"function"==typeof I?I():I,firstChild:null,schemas:O,consts:Be,incompleteFirstPass:!1}}function Ec(n,r,a,c){const f=rp(r);null===a?f.push(c):(f.push(a),n.firstCreatePass&&Jh(n).push(c,f.length-1))}function dd(n,r,a){for(let c in n)if(n.hasOwnProperty(c)){const f=n[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(r,f):a[c]=[r,f]}return a}function qh(n,r,a,c){let f=!1;if(Fs()){const y=function zh(n,r,a){const c=n.directiveRegistry;let f=null;if(c)for(let y=0;y<c.length;y++){const I=c[y];Qp(a,I.selectors,!1)&&(f||(f=[]),T(_r(a,r),n,I.type),Es(I)?(Kh(n,a),f.unshift(I)):f.push(I))}return f}(n,r,a),I=null===c?null:{"":-1};if(null!==y){f=!0,np(a,n.data.length,y.length);for(let W=0;W<y.length;W++){const ie=y[W];ie.providersResolver&&ie.providersResolver(ie)}let x=!1,O=!1,Z=wo(n,r,y.length,null);for(let W=0;W<y.length;W++){const ie=y[W];a.mergedAttrs=Tu(a.mergedAttrs,ie.hostAttrs),lg(n,a,r,Z,ie),Ic(Z,ie,I),null!==ie.contentQueries&&(a.flags|=8),(null!==ie.hostBindings||null!==ie.hostAttrs||0!==ie.hostVars)&&(a.flags|=128);const _e=ie.type.prototype;!x&&(_e.ngOnChanges||_e.ngOnInit||_e.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(a.index),x=!0),!O&&(_e.ngOnChanges||_e.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(a.index),O=!0),Z++}!function Xd(n,r){const c=r.directiveEnd,f=n.data,y=r.attrs,I=[];let x=null,O=null;for(let Z=r.directiveStart;Z<c;Z++){const W=f[Z],ie=W.inputs,_e=null===y||mc(r)?null:fd(ie,y);I.push(_e),x=dd(ie,Z,x),O=dd(W.outputs,Z,O)}null!==x&&(x.hasOwnProperty("class")&&(r.flags|=16),x.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=I,r.inputs=x,r.outputs=O}(n,a)}I&&function tp(n,r,a){if(r){const c=n.localNames=[];for(let f=0;f<r.length;f+=2){const y=a[r[f+1]];if(null==y)throw new at(-301,!1);c.push(r[f],y)}}}(a,c,I)}return a.mergedAttrs=Tu(a.mergedAttrs,a.attrs),f}function eh(n,r,a,c,f,y){const I=y.hostBindings;if(I){let x=n.hostBindingOpCodes;null===x&&(x=n.hostBindingOpCodes=[]);const O=~r.index;(function Wh(n){let r=n.length;for(;r>0;){const a=n[--r];if("number"==typeof a&&a<0)return a}return 0})(x)!=O&&x.push(O),x.push(c,f,I)}}function th(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function Kh(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function Ic(n,r,a){if(a){if(r.exportAs)for(let c=0;c<r.exportAs.length;c++)a[r.exportAs[c]]=n;Es(r)&&(a[""]=n)}}function np(n,r,a){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+a,n.providerIndexes=r}function lg(n,r,a,c,f){n.data[c]=f;const y=f.factory||(f.factory=Qr(f.type)),I=new mo(y,Es(f),null);n.blueprint[c]=I,a[c]=I,eh(n,r,0,c,wo(n,a,f.hostVars,Un),f)}function my(n,r,a){const c=ht(r,n),f=Zh(a),y=n[10],I=Ka(n,ud(n,f,null,a.onPush?64:16,c,r,y,y.createRenderer(c,a),null,null));n[r.index]=I}function Ta(n,r,a,c,f,y){const I=ht(n,r);!function hd(n,r,a,c,f,y,I){if(null==y)jn(n)?n.removeAttribute(r,f,a):r.removeAttribute(f);else{const x=null==I?Ze(y):I(y,c||"",f);jn(n)?n.setAttribute(r,f,x,a):a?r.setAttributeNS(a,f,x):r.setAttribute(f,x)}}(r[11],I,y,n.value,a,c,f)}function Yh(n,r,a,c,f,y){const I=y[r];if(null!==I){const x=c.setInput;for(let O=0;O<I.length;){const Z=I[O++],W=I[O++],ie=I[O++];null!==x?c.setInput(a,ie,Z,W):a[W]=ie}}}function fd(n,r){let a=null,c=0;for(;c<r.length;){const f=r[c];if(0!==f)if(5!==f){if("number"==typeof f)break;n.hasOwnProperty(f)&&(null===a&&(a=[]),a.push(f,n[f],r[c+1])),c+=2}else c+=2;else c+=4}return a}function hm(n,r,a,c){return new Array(n,!0,!1,r,null,0,c,a,null,null)}function dg(n,r){const a=En(r,n);if(Ir(a)){const c=a[1];80&a[2]?wc(c,a,c.template,a[8]):a[5]>0&&nh(a)}}function nh(n){for(let c=No(n);null!==c;c=hc(c))for(let f=10;f<c.length;f++){const y=c[f];if(1024&y[2]){const I=y[1];wc(I,y,I.template,y[8])}else y[5]>0&&nh(y)}const a=n[1].components;if(null!==a)for(let c=0;c<a.length;c++){const f=En(a[c],n);Ir(f)&&f[5]>0&&nh(f)}}function rh(n,r){const a=En(r,n),c=a[1];(function hg(n,r){for(let a=r.length;a<n.blueprint.length;a++)r.push(n.blueprint[a])})(c,a),yu(c,a,a[8])}function Ka(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function Da(n){for(;n;){n[2]|=64;const r=pn(n);if(Io(n)&&!r)return n;n=r}return null}function Qh(n){!function pd(n){for(let r=0;r<n.components.length;r++){const a=n.components[r],c=Ss(a),f=c[1];sg(f,c,f.template,a)}}(n[8])}function dl(n,r,a){bu(0),r(n,a)}const fm=(()=>Promise.resolve(null))();function rp(n){return n[7]||(n[7]=[])}function Jh(n){return n.cleanup||(n.cleanup=[])}function Ya(n,r){const a=n[9],c=a?a.get(Tl,null):null;c&&c.handleError(r)}function Xh(n,r,a,c,f){for(let y=0;y<a.length;){const I=a[y++],x=a[y++],O=r[I],Z=n.data[I];null!==Z.setInput?Z.setInput(O,f,c,x):O[x]=f}}function gd(n,r,a){let c=a?n.styles:null,f=a?n.classes:null,y=0;if(null!==r)for(let I=0;I<r.length;I++){const x=r[I];"number"==typeof x?y=x:1==y?f=Oe(f,x):2==y&&(c=Oe(c,x+": "+r[++I]+";"))}a?n.styles=c:n.stylesWithoutHost=c,a?n.classes=f:n.classesWithoutHost=f}const ip=new kn("INJECTOR",-1);class lh{get(r,a=xu){if(a===xu){const c=new Error(`NullInjectorError: No provider for ${xe(r)}!`);throw c.name="NullInjectorError",c}return a}}const ef=new kn("Set Injector scope."),md={},vy={};let yd;function tf(){return void 0===yd&&(yd=new lh),yd}function sp(n,r=null,a=null,c){const f=op(n,r,a,c);return f._resolveInjectorDefTypes(),f}function op(n,r=null,a=null,c){return new fg(n,a,r||tf(),c)}class fg{constructor(r,a,c,f=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const y=[];a&&gs(a,x=>this.processProvider(x,r,a)),gs([r],x=>this.processInjectorType(x,[],y)),this.records.set(ip,Cc(void 0,this));const I=this.records.get(ef);this.scope=null!=I?I.value:null,this.source=f||("object"==typeof r?null:xe(r))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(r=>r.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(r,a=xu,c=Qt.Default){this.assertNotDestroyed();const f=pt(this),y=Pn(void 0);try{if(!(c&Qt.SkipSelf)){let x=this.records.get(r);if(void 0===x){const O=function Sc(n){return"function"==typeof n||"object"==typeof n&&n instanceof kn}(r)&&_n(r);x=O&&this.injectableDefInScope(O)?Cc(pg(r),md):null,this.records.set(r,x)}if(null!=x)return this.hydrate(r,x)}return(c&Qt.Self?tf():this.parent).get(r,a=c&Qt.Optional&&a===xu?null:a)}catch(I){if("NullInjectorError"===I.name){if((I[Br]=I[Br]||[]).unshift(xe(r)),f)throw I;return function no(n,r,a,c){const f=n[Br];throw r[oe]&&f.unshift(r[oe]),n.message=function ya(n,r,a,c=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let f=xe(r);if(Array.isArray(r))f=r.map(xe).join(" -> ");else if("object"==typeof r){let y=[];for(let I in r)if(r.hasOwnProperty(I)){let x=r[I];y.push(I+":"+("string"==typeof x?JSON.stringify(x):xe(x)))}f=`{${y.join(", ")}}`}return`${a}${c?"("+c+")":""}[${f}]: ${n.replace(U,"\n  ")}`}("\n"+n.message,f,a,c),n.ngTokenPath=f,n[Br]=null,n}(I,r,"R3InjectorError",this.source)}throw I}finally{Pn(y),pt(f)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(r=>this.get(r))}toString(){const r=[];return this.records.forEach((c,f)=>r.push(xe(f))),`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new at(205,!1)}processInjectorType(r,a,c){if(!(r=De(r)))return!1;let f=zn(r);const y=null==f&&r.ngModule||void 0,I=void 0===y?r:y,x=-1!==c.indexOf(I);if(void 0!==y&&(f=zn(y)),null==f)return!1;if(null!=f.imports&&!x){let W;c.push(I);try{gs(f.imports,ie=>{this.processInjectorType(ie,a,c)&&(void 0===W&&(W=[]),W.push(ie))})}finally{}if(void 0!==W)for(let ie=0;ie<W.length;ie++){const{ngModule:_e,providers:Be}=W[ie];gs(Be,lt=>this.processProvider(lt,_e,Be||se))}}this.injectorDefTypes.add(I);const O=Qr(I)||(()=>new I);this.records.set(I,Cc(O,md));const Z=f.providers;if(null!=Z&&!x){const W=r;gs(Z,ie=>this.processProvider(ie,W,Z))}return void 0!==y&&void 0!==r.providers}processProvider(r,a,c){let f=Dc(r=De(r))?r:De(r&&r.provide);const y=function mg(n,r,a){return up(n)?Cc(void 0,n.useValue):Cc(ap(n),md)}(r);if(Dc(r)||!0!==r.multi)this.records.get(f);else{let I=this.records.get(f);I||(I=Cc(void 0,md,!0),I.factory=()=>an(I.multi),this.records.set(f,I)),f=r,I.multi.push(r)}this.records.set(f,y)}hydrate(r,a){return a.value===md&&(a.value=vy,a.value=a.factory()),"object"==typeof a.value&&a.value&&function mm(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(r){if(!r.providedIn)return!1;const a=De(r.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function pg(n){const r=_n(n),a=null!==r?r.factory:Qr(n);if(null!==a)return a;if(n instanceof kn)throw new at(204,!1);if(n instanceof Function)return function gg(n){const r=n.length;if(r>0)throw function Zi(n,r){const a=[];for(let c=0;c<n;c++)a.push(r);return a}(r,"?"),new at(204,!1);const a=function er(n){const r=n&&(n[Mr]||n[wr]);if(r){const a=function cr(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),r}return null}(n);return null!==a?()=>a.factory(n):()=>new n}(n);throw new at(204,!1)}function ap(n,r,a){let c;if(Dc(n)){const f=De(n);return Qr(f)||pg(f)}if(up(n))c=()=>De(n.useValue);else if(function kl(n){return!(!n||!n.useFactory)}(n))c=()=>n.useFactory(...an(n.deps||[]));else if(function Tc(n){return!(!n||!n.useExisting)}(n))c=()=>Zt(De(n.useExisting));else{const f=De(n&&(n.useClass||n.provide));if(!function Qa(n){return!!n.deps}(n))return Qr(f)||pg(f);c=()=>new f(...an(n.deps))}return c}function Cc(n,r,a=!1){return{factory:n,value:r,multi:a?[]:void 0}}function up(n){return null!==n&&"object"==typeof n&&Pe in n}function Dc(n){return"function"==typeof n}let Ja=(()=>{class n{static create(a,c){var f;if(Array.isArray(a))return sp({name:""},c,a,"");{const y=null!==(f=a.name)&&void 0!==f?f:"";return sp({name:y},a.parent,a.providers,y)}}}return n.THROW_IF_NOT_FOUND=xu,n.NULL=new lh,n.\u0275prov=$t({token:n,providedIn:"any",factory:()=>Zt(ip)}),n.__NG_ELEMENT_ID__=-1,n})();function Im(n,r){Go(Ss(n)[1],Ur())}function wg(n){let r=function df(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),a=!0;const c=[n];for(;r;){let f;if(Es(n))f=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new at(903,"");f=r.\u0275dir}if(f){if(a){c.push(f);const I=n;I.inputs=Ig(n.inputs),I.declaredInputs=Ig(n.declaredInputs),I.outputs=Ig(n.outputs);const x=f.hostBindings;x&&ch(n,x);const O=f.viewQuery,Z=f.contentQueries;if(O&&bg(n,O),Z&&fp(n,Z),Me(n.inputs,f.inputs),Me(n.declaredInputs,f.declaredInputs),Me(n.outputs,f.outputs),Es(f)&&f.data.animation){const W=n.data;W.animation=(W.animation||[]).concat(f.data.animation)}}const y=f.features;if(y)for(let I=0;I<y.length;I++){const x=y[I];x&&x.ngInherit&&x(n),x===wg&&(a=!1)}}r=Object.getPrototypeOf(r)}!function Eg(n){let r=0,a=null;for(let c=n.length-1;c>=0;c--){const f=n[c];f.hostVars=r+=f.hostVars,f.hostAttrs=Tu(f.hostAttrs,a=Tu(a,f.hostAttrs))}}(c)}function Ig(n){return n===Nn?{}:n===se?[]:n}function bg(n,r){const a=n.viewQuery;n.viewQuery=a?(c,f)=>{r(c,f),a(c,f)}:r}function fp(n,r){const a=n.contentQueries;n.contentQueries=a?(c,f,y)=>{r(c,f,y),a(c,f,y)}:r}function ch(n,r){const a=n.hostBindings;n.hostBindings=a?(c,f)=>{r(c,f),a(c,f)}:r}let _d=null;function wu(){if(!_d){const n=en.Symbol;if(n&&n.iterator)_d=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<r.length;++a){const c=r[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(_d=c)}}}return _d}function Rc(n){return!!ju(n)&&(Array.isArray(n)||!(n instanceof Map)&&wu()in n)}function ju(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Ws(n,r,a){return!Object.is(n[r],a)&&(n[r]=a,!0)}function Tg(n,r,a,c){const f=gt();return Ws(f,Us(),r)&&(Dn(),Ta(ei(),f,n,r,a,c)),Tg}function Ip(n,r,a,c,f,y,I,x){const O=gt(),Z=Dn(),W=n+20,ie=Z.firstCreatePass?function Dm(n,r,a,c,f,y,I,x,O){const Z=r.consts,W=cl(r,n,4,I||null,Dr(Z,x));qh(r,a,W,Dr(Z,O)),Go(r,W);const ie=W.tViews=ld(2,W,c,f,y,r.directiveRegistry,r.pipeRegistry,null,r.schemas,Z);return null!==r.queries&&(r.queries.template(r,W),ie.queries=r.queries.embeddedTView(W)),W}(W,Z,O,r,a,c,f,y,I):Z.data[W];bs(ie,!1);const _e=O[11].createComment("");Of(Z,O,_e,ie),Xn(_e,O),Ka(O,O[W]=hm(_e,O,_e,ie)),ui(ie)&&zf(Z,O,ie),null!=I&&Kf(O,ie,x)}function mh(n,r=Qt.Default){const a=gt();return null===a?Zt(n,r):j(Ur(),a,De(n),r)}function Hm(){throw new Error("invalid")}function bd(n,r,a){const c=gt();return Ws(c,Us(),r)&&function Fo(n,r,a,c,f,y,I,x){const O=ht(r,a);let W,Z=r.inputs;!x&&null!=Z&&(W=Z[c])?(Xh(n,a,W,c,f),Na(r)&&function cm(n,r){const a=En(r,n);16&a[2]||(a[2]|=64)}(a,r.index)):3&r.type&&(c=function Yf(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(c),f=null!=I?I(f,r.value||"",c):f,jn(y)?y.setProperty(O,c,f):js(c)||(O.setProperty?O.setProperty(c,f):O[c]=f))}(Dn(),ei(),c,n,r,c[11],a,!1),bd}function _f(n,r,a,c,f){const I=f?"class":"style";Xh(n,a,r.inputs[I],I,c)}function Ap(n,r,a,c){const f=gt(),y=Dn(),I=20+n,x=f[11],O=f[I]=Xc(x,r,function Fc(){return Kt.lFrame.currentNamespace}()),Z=y.firstCreatePass?function Rg(n,r,a,c,f,y,I){const x=r.consts,Z=cl(r,n,2,f,Dr(x,y));return qh(r,a,Z,Dr(x,I)),null!==Z.attrs&&gd(Z,Z.attrs,!1),null!==Z.mergedAttrs&&gd(Z,Z.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,Z),Z}(I,y,f,0,r,a,c):y.data[I];bs(Z,!0);const W=Z.mergedAttrs;null!==W&&su(x,O,W);const ie=Z.classes;null!==ie&&kh(x,O,ie);const _e=Z.styles;return null!==_e&&Ff(x,O,_e),64!=(64&Z.flags)&&Of(y,f,O,Z),0===function jo(){return Kt.lFrame.elementDepthCount}()&&Xn(O,f),function fo(){Kt.lFrame.elementDepthCount++}(),ui(Z)&&(zf(y,f,Z),function Wf(n,r,a){if(uo(r)){const f=r.directiveEnd;for(let y=r.directiveStart;y<f;y++){const I=n.data[y];I.contentQueries&&I.contentQueries(1,a[y],y)}}}(y,Z,f)),null!==c&&Kf(f,Z),Ap}function yh(){let n=Ur();Ua()?function pl(){Kt.lFrame.isParent=!1}():(n=n.parent,bs(n,!1));const r=n;!function fs(){Kt.lFrame.elementDepthCount--}();const a=Dn();return a.firstCreatePass&&(Go(a,n),uo(n)&&a.queries.elementEnd(n)),null!=r.classesWithoutHost&&function eo(n){return 0!=(16&n.flags)}(r)&&_f(a,r,gt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function Gl(n){return 0!=(32&n.flags)}(r)&&_f(a,r,gt(),r.stylesWithoutHost,!1),yh}function Mg(n,r,a,c){return Ap(n,r,a,c),yh(),Mg}function Ng(n){return!!n&&"function"==typeof n.then}function Gm(n){return!!n&&"function"==typeof n.subscribe}const Og=Gm;function kg(n,r,a,c){const f=gt(),y=Dn(),I=Ur();return function Wm(n,r,a,c,f,y,I,x){const O=ui(c),W=n.firstCreatePass&&Jh(n),ie=r[8],_e=rp(r);let Be=!0;if(3&c.type||x){const jt=ht(c,r),rn=x?x(jt):jt,vt=_e.length,bn=x?xr=>x(F(xr[c.index])):c.index;if(jn(a)){let xr=null;if(!x&&O&&(xr=function xy(n,r,a,c){const f=n.cleanup;if(null!=f)for(let y=0;y<f.length-1;y+=2){const I=f[y];if(I===a&&f[y+1]===c){const x=r[7],O=f[y+2];return x.length>O?x[O]:null}"string"==typeof I&&(y+=2)}return null}(n,r,f,c.index)),null!==xr)(xr.__ngLastListenerFn__||xr).__ngNextListenerFn__=y,xr.__ngLastListenerFn__=y,Be=!1;else{y=o(c,r,ie,y,!1);const gi=a.listen(rn,f,y);_e.push(y,gi),W&&W.push(f,bn,vt,vt+1)}}else y=o(c,r,ie,y,!0),rn.addEventListener(f,y,I),_e.push(y),W&&W.push(f,bn,vt,I)}else y=o(c,r,ie,y,!1);const lt=c.outputs;let Nt;if(Be&&null!==lt&&(Nt=lt[f])){const jt=Nt.length;if(jt)for(let rn=0;rn<jt;rn+=2){const Vl=r[Nt[rn]][Nt[rn+1]].subscribe(y),Gg=_e.length;_e.push(y,Vl),W&&W.push(f,c.index,Gg,-(Gg+1))}}}(y,f,f[11],I,n,r,!!a,c),kg}function l(n,r,a,c){try{return!1!==a(c)}catch(f){return Ya(n,f),!1}}function o(n,r,a,c,f){return function y(I){if(I===Function)return c;const x=2&n.flags?En(n.index,r):r;0==(32&r[2])&&Da(x);let O=l(r,0,c,I),Z=y.__ngNextListenerFn__;for(;Z;)O=l(r,0,Z,I)&&O,Z=Z.__ngNextListenerFn__;return f&&!1===O&&(I.preventDefault(),I.returnValue=!1),O}}function fi(n,r,a,c,f){const y=n[a+1],I=null===r;let x=c?xs(y):Uu(y),O=!1;for(;0!==x&&(!1===O||I);){const W=n[x+1];zs(n[x],r)&&(O=!0,n[x+1]=c?Lh(W):zd(W)),x=c?xs(W):Uu(W)}O&&(n[a+1]=c?zd(y):Lh(y))}function zs(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&ma(n,r)>=0}function xp(n,r){return function Ul(n,r,a,c){const f=gt(),y=Dn(),I=function Js(n){const r=Kt.lFrame,a=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,a}(2);y.firstUpdatePass&&function Rp(n,r,a,c){const f=n.data;if(null===f[a+1]){const y=f[Mi()],I=function Oy(n,r){return r>=n.expandoStartIndex}(n,a);(function c_(n,r){return 0!=(n.flags&(r?16:32))})(y,c)&&null===r&&!I&&(r=!1),r=function vh(n,r,a,c){const f=function Ba(n){const r=Kt.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let y=c?r.residualClasses:r.residualStyles;if(null===f)0===(c?r.classBindings:r.styleBindings)&&(a=Mp(a=ky(null,n,r,a,c),r.attrs,c),y=null);else{const I=r.directiveStylingLast;if(-1===I||n[I]!==f)if(a=ky(f,n,r,a,c),null===y){let O=function q_(n,r,a){const c=a?r.classBindings:r.styleBindings;if(0!==Uu(c))return n[xs(c)]}(n,r,c);void 0!==O&&Array.isArray(O)&&(O=ky(null,n,r,O[1],c),O=Mp(O,r.attrs,c),function W_(n,r,a,c){n[xs(a?r.classBindings:r.styleBindings)]=c}(n,r,c,O))}else y=function z_(n,r,a){let c;const f=r.directiveEnd;for(let y=1+r.directiveStylingLast;y<f;y++)c=Mp(c,n[y].hostAttrs,a);return Mp(c,r.attrs,a)}(n,r,c)}return void 0!==y&&(c?r.residualClasses=y:r.residualStyles=y),a}(f,y,r,c),function vs(n,r,a,c,f,y){let I=y?r.classBindings:r.styleBindings,x=xs(I),O=Uu(I);n[c]=a;let W,Z=!1;if(Array.isArray(a)){const ie=a;W=ie[1],(null===W||ma(ie,W)>0)&&(Z=!0)}else W=a;if(f)if(0!==O){const _e=xs(n[x+1]);n[c+1]=ul(_e,x),0!==_e&&(n[_e+1]=_c(n[_e+1],c)),n[x+1]=function nm(n,r){return 131071&n|r<<17}(n[x+1],c)}else n[c+1]=ul(x,0),0!==x&&(n[x+1]=_c(n[x+1],c)),x=c;else n[c+1]=ul(O,0),0===x?x=c:n[O+1]=_c(n[O+1],c),O=c;Z&&(n[c+1]=zd(n[c+1])),fi(n,W,c,!0),fi(n,W,c,!1),function Rs(n,r,a,c,f){const y=f?n.residualClasses:n.residualStyles;null!=y&&"string"==typeof r&&ma(y,r)>=0&&(a[c+1]=Lh(a[c+1]))}(r,W,n,c,y),I=ul(x,O),y?r.classBindings=I:r.styleBindings=I}(f,y,r,a,I,c)}}(y,n,I,c),r!==Un&&Ws(f,I,r)&&function u_(n,r,a,c,f,y,I,x){if(!(3&r.type))return;const O=n.data,Z=O[x+1];Ug(function Jp(n){return 1==(1&n)}(Z)?l_(O,r,a,f,Uu(Z),I):void 0)||(Ug(y)||function Fh(n){return 2==(2&n)}(Z)&&(y=l_(O,null,a,f,x,I)),function Gd(n,r,a,c,f){const y=jn(n);if(r)f?y?n.addClass(a,c):a.classList.add(c):y?n.removeClass(a,c):a.classList.remove(c);else{let I=-1===c.indexOf("-")?void 0:Y.DashCase;if(null==f)y?n.removeStyle(a,c,I):a.style.removeProperty(c);else{const x="string"==typeof f&&f.endsWith("!important");x&&(f=f.slice(0,-10),I|=Y.Important),y?n.setStyle(a,c,f,I):a.style.setProperty(c,f,x?"important":"")}}}(c,I,function We(n,r){return F(r[n])}(Mi(),a),f,y))}(y,y.data[Mi()],f,f[11],n,f[I+1]=function Y_(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=xe(qa(n)))),n}(r,a),c,I)}(n,r,null,!0),xp}function ky(n,r,a,c,f){let y=null;const I=a.directiveEnd;let x=a.directiveStylingLast;for(-1===x?x=a.directiveStart:x++;x<I&&(y=r[x],c=Mp(c,y.hostAttrs,f),y!==n);)x++;return null!==n&&(a.directiveStylingLast=x),c}function Mp(n,r,a){const c=a?1:2;let f=-1;if(null!==r)for(let y=0;y<r.length;y++){const I=r[y];"number"==typeof I?f=I:f===c&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Sr(n,I,!!a||r[++y]))}return void 0===n?null:n}function l_(n,r,a,c,f,y){const I=null===r;let x;for(;f>0;){const O=n[f],Z=Array.isArray(O),W=Z?O[1]:O,ie=null===W;let _e=a[f+1];_e===Un&&(_e=ie?se:void 0);let Be=ie?Ds(_e,c):W===c?_e:void 0;if(Z&&!Ug(Be)&&(Be=Ds(O,c)),Ug(Be)&&(x=Be,I))return x;const lt=n[f+1];f=I?xs(lt):Uu(lt)}if(null!==r){let O=y?r.residualClasses:r.residualStyles;null!=O&&(x=Ds(O,c))}return x}function Ug(n){return void 0!==n}function Fy(n,r=""){const a=gt(),c=Dn(),f=n+20,y=c.firstCreatePass?cl(c,f,1,r,null):c.data[f],I=a[f]=function Lu(n,r){return jn(n)?n.createText(r):n.createTextNode(r)}(a[11],r);Of(c,a,I,y),bs(y,!1)}const Bl=void 0;var dv=["en",[["a","p"],["AM","PM"],Bl],[["AM","PM"],Bl,Bl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Bl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Bl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Bl,"{1} 'at' {0}",Bl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Zy(n){const a=Math.floor(Math.abs(n)),c=n.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let Np={};function Op(n){const r=function Xa(n){return n.toLowerCase().replace(/_/g,"-")}(n);let a=qy(r);if(a)return a;const c=r.split("-")[0];if(a=qy(c),a)return a;if("en"===c)return dv;throw new Error(`Missing locale data for the locale "${n}".`)}function Gy(n){return Op(n)[un.PluralCase]}function qy(n){return n in Np||(Np[n]=en.ng&&en.ng.common&&en.ng.common.locales&&en.ng.common.locales[n]),Np[n]}var un=(()=>((un=un||{})[un.LocaleId=0]="LocaleId",un[un.DayPeriodsFormat=1]="DayPeriodsFormat",un[un.DayPeriodsStandalone=2]="DayPeriodsStandalone",un[un.DaysFormat=3]="DaysFormat",un[un.DaysStandalone=4]="DaysStandalone",un[un.MonthsFormat=5]="MonthsFormat",un[un.MonthsStandalone=6]="MonthsStandalone",un[un.Eras=7]="Eras",un[un.FirstDayOfWeek=8]="FirstDayOfWeek",un[un.WeekendRange=9]="WeekendRange",un[un.DateFormat=10]="DateFormat",un[un.TimeFormat=11]="TimeFormat",un[un.DateTimeFormat=12]="DateTimeFormat",un[un.NumberSymbols=13]="NumberSymbols",un[un.NumberFormats=14]="NumberFormats",un[un.CurrencyCode=15]="CurrencyCode",un[un.CurrencySymbol=16]="CurrencySymbol",un[un.CurrencyName=17]="CurrencyName",un[un.Currencies=18]="Currencies",un[un.Directionality=19]="Directionality",un[un.PluralCase=20]="PluralCase",un[un.ExtraData=21]="ExtraData",un))();const wh="en-US";let Eh=wh;function wv(n,r,a,c,f){if(n=De(n),Array.isArray(n))for(let y=0;y<n.length;y++)wv(n[y],r,a,c,f);else{const y=Dn(),I=gt();let x=Dc(n)?n:De(n.provide),O=ap(n);const Z=Ur(),W=1048575&Z.providerIndexes,ie=Z.directiveStart,_e=Z.providerIndexes>>20;if(Dc(n)||!n.multi){const Be=new mo(O,f,mh),lt=Iv(x,r,f?W:W+_e,ie);-1===lt?(T(_r(Z,I),y,x),Ev(y,n,r.length),r.push(x),Z.directiveStart++,Z.directiveEnd++,f&&(Z.providerIndexes+=1048576),a.push(Be),I.push(Be)):(a[lt]=Be,I[lt]=Be)}else{const Be=Iv(x,r,W+_e,ie),lt=Iv(x,r,W,W+_e),Nt=Be>=0&&a[Be],jt=lt>=0&&a[lt];if(f&&!jt||!f&&!Nt){T(_r(Z,I),y,x);const rn=function lE(n,r,a,c,f){const y=new mo(n,a,mh);return y.multi=[],y.index=r,y.componentProviders=0,w0(y,f,c&&!a),y}(f?uE:aE,a.length,f,c,O);!f&&jt&&(a[lt].providerFactory=rn),Ev(y,n,r.length,0),r.push(x),Z.directiveStart++,Z.directiveEnd++,f&&(Z.providerIndexes+=1048576),a.push(rn),I.push(rn)}else Ev(y,n,Be>-1?Be:lt,w0(a[f?lt:Be],O,!f&&c));!f&&c&&jt&&a[lt].componentProviders++}}}function Ev(n,r,a,c){const f=Dc(r),y=function Bu(n){return!!n.useClass}(r);if(f||y){const O=(y?De(r.useClass):r).prototype.ngOnDestroy;if(O){const Z=n.destroyHooks||(n.destroyHooks=[]);if(!f&&r.multi){const W=Z.indexOf(a);-1===W?Z.push(a,[c,O]):Z[W+1].push(c,O)}else Z.push(a,O)}}}function w0(n,r,a){return a&&n.componentProviders++,n.multi.push(r)-1}function Iv(n,r,a,c){for(let f=a;f<c;f++)if(r[f]===n)return f;return-1}function aE(n,r,a,c){return bv(this.multi,[])}function uE(n,r,a,c){const f=this.multi;let y;if(this.providerFactory){const I=this.providerFactory.componentProviders,x=In(a,a[1],this.providerFactory.index,c);y=x.slice(0,I),bv(f,y);for(let O=I;O<x.length;O++)y.push(x[O])}else y=[],bv(f,y);return y}function bv(n,r){for(let a=0;a<n.length;a++)r.push((0,n[a])());return r}function E0(n,r=[]){return a=>{a.providersResolver=(c,f)=>function oE(n,r,a){const c=Dn();if(c.firstCreatePass){const f=Es(n);wv(a,c.data,c.blueprint,f,!0),wv(r,c.data,c.blueprint,f,!1)}}(c,f?f(n):n,r)}}class I0{}class hE{resolveComponentFactory(r){throw function dE(n){const r=Error(`No component factory found for ${xe(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let F_=(()=>{class n{}return n.NULL=new hE,n})();function fE(){return ny(Ur(),gt())}function ny(n,r){return new Yy(ht(n,r))}let Yy=(()=>{class n{constructor(a){this.nativeElement=a}}return n.__NG_ELEMENT_ID__=fE,n})();function pE(n){return n instanceof Yy?n.nativeElement:n}class C0{}let gE=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function yE(){const n=gt(),a=En(Ur().index,n);return function mE(n){return n[11]}(si(a)?a:n)}(),n})(),_E=(()=>{class n{}return n.\u0275prov=$t({token:n,providedIn:"root",factory:()=>null}),n})();class T0{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const D0=new T0("13.3.11"),Cv={};function L_(n,r,a,c,f=!1){for(;null!==a;){const y=r[a.index];if(null!==y&&c.push(F(y)),ns(y))for(let x=10;x<y.length;x++){const O=y[x],Z=O[1].firstChild;null!==Z&&L_(O[1],O,Z,c)}const I=a.type;if(8&I)L_(n,r,a.child,c);else if(32&I){const x=Qe(a,r);let O;for(;O=x();)c.push(O)}else if(16&I){const x=td(r,a);if(Array.isArray(x))c.push(...x);else{const O=pn(r[16]);L_(O[1],O,x,c,!0)}}a=f?a.projectionNext:a.next}return c}class Qy{constructor(r,a){this._lView=r,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,a=r[1];return L_(a,r,a.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(ns(r)){const a=r[8],c=a?a.indexOf(this):-1;c>-1&&($d(r,c),fa(a,c))}this._attachedToViewContainer=!1}Mf(this._lView[1],this._lView)}onDestroy(r){Ec(this._lView[1],this._lView,null,r)}markForCheck(){Da(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function ih(n,r,a){const c=r[10];c.begin&&c.begin();try{wc(n,r,n.template,a)}catch(f){throw Ya(r,f),f}finally{c.end&&c.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new at(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function As(n,r){Al(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new at(902,"");this._appRef=r}}class vE extends Qy{constructor(r){super(r),this._view=r}detectChanges(){Qh(this._view)}checkNoChanges(){}get context(){return null}}class S0 extends F_{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const a=br(r);return new Tv(a,this.ngModule)}}function A0(n){const r=[];for(let a in n)n.hasOwnProperty(a)&&r.push({propName:n[a],templateName:a});return r}class Tv extends I0{constructor(r,a){super(),this.componentDef=r,this.ngModule=a,this.componentType=r.type,this.selector=function Jg(n){return n.map(yc).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return A0(this.componentDef.inputs)}get outputs(){return A0(this.componentDef.outputs)}create(r,a,c,f){const y=(f=f||this.ngModule)?function EE(n,r){return{get:(a,c,f)=>{const y=n.get(a,Cv,f);return y!==Cv||c===Cv?y:r.get(a,c,f)}}}(r,f.injector):r,I=y.get(C0,L),x=y.get(_E,null),O=I.createRenderer(null,this.componentDef),Z=this.componentDef.selectors[0][0]||"div",W=c?function ag(n,r,a){if(jn(n))return n.selectRootElement(r,a===ke.ShadowDom);let c="string"==typeof r?n.querySelector(r):r;return c.textContent="",c}(O,c,this.componentDef.encapsulation):Xc(I.createRenderer(null,this.componentDef),Z,function wE(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(Z)),ie=this.componentDef.onPush?576:528,_e=function vg(n,r){return{components:[],scheduler:n||ki,clean:fm,playerHandler:r||null,flags:0}}(),Be=ld(0,null,null,1,0,null,null,null,null,null),lt=ud(null,Be,_e,ie,null,null,I,O,x,y);let Nt,jt;$o(lt);try{const rn=function cf(n,r,a,c,f,y){const I=a[1];a[20]=n;const O=cl(I,20,2,"#host",null),Z=O.mergedAttrs=r.hostAttrs;null!==Z&&(gd(O,Z,!0),null!==n&&(su(f,n,Z),null!==O.classes&&kh(f,n,O.classes),null!==O.styles&&Ff(f,n,O.styles)));const W=c.createRenderer(n,r),ie=ud(a,Zh(r),null,r.onPush?64:16,a[20],O,c,W,y||null,null);return I.firstCreatePass&&(T(_r(O,a),I,r.type),Kh(I,O),np(O,a.length,1)),Ka(a,ie),a[20]=ie}(W,this.componentDef,lt,I,O);if(W)if(c)su(O,W,["ng-version",D0.full]);else{const{attrs:vt,classes:bn}=function Xg(n){const r=[],a=[];let c=1,f=2;for(;c<n.length;){let y=n[c];if("string"==typeof y)2===f?""!==y&&r.push(y,n[++c]):8===f&&a.push(y);else{if(!Oo(f))break;f=y}c++}return{attrs:r,classes:a}}(this.componentDef.selectors[0]);vt&&su(O,W,vt),bn&&bn.length>0&&kh(O,W,bn.join(" "))}if(jt=hn(Be,20),void 0!==a){const vt=jt.projection=[];for(let bn=0;bn<this.ngContentSelectors.length;bn++){const xr=a[bn];vt.push(null!=xr?Array.from(xr):null)}}Nt=function xc(n,r,a,c,f){const y=a[1],I=function Jf(n,r,a){const c=Ur();n.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),lg(n,c,r,wo(n,r,1,null),a));const f=In(r,n,c.directiveStart,c);Xn(f,r);const y=ht(c,r);return y&&Xn(y,r),f}(y,a,r);if(c.components.push(I),n[8]=I,f&&f.forEach(O=>O(I,r)),r.contentQueries){const O=Ur();r.contentQueries(1,I,O.directiveStart)}const x=Ur();return!y.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(Va(x.index),eh(a[1],x,0,x.directiveStart,x.directiveEnd,r),th(r,I)),I}(rn,this.componentDef,lt,_e,[Im]),yu(Be,lt,null)}finally{go()}return new bE(this.componentType,Nt,ny(jt,lt),lt,jt)}}class bE extends class cE{}{constructor(r,a,c,f,y){super(),this.location=c,this._rootLView=f,this._tNode=y,this.instance=a,this.hostView=this.changeDetectorRef=new vE(f),this.componentType=r}get injector(){return new $i(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}class ry{}class x0{}const iy=new Map;class P0 extends ry{constructor(r,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new S0(this);const c=$r(r);this._bootstrapComponents=E(c.bootstrap),this._r3Injector=op(r,a,[{provide:ry,useValue:this},{provide:F_,useValue:this.componentFactoryResolver}],xe(r)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(r)}get(r,a=Ja.THROW_IF_NOT_FOUND,c=Qt.Default){return r===Ja||r===ry||r===ip?this:this._r3Injector.get(r,a,c)}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class Dv extends x0{constructor(r){super(),this.moduleType=r,null!==$r(r)&&function TE(n){const r=new Set;!function a(c){const f=$r(c,!0),y=f.id;null!==y&&(function R0(n,r,a){if(r&&r!==a)throw new Error(`Duplicate module registered for ${n} - ${xe(r)} vs ${xe(r.name)}`)}(y,iy.get(y),c),iy.set(y,c));const I=E(f.imports);for(const x of I)r.has(x)||(r.add(x),a(x))}(n)}(r)}create(r){return new P0(this.moduleType,r)}}function N0(n,r,a){const c=function bi(){const n=Kt.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}()+n,f=gt();return f[c]===Un?function Eu(n,r,a){return n[r]=a}(f,c,a?r.call(a):r()):function pf(n,r){return n[r]}(f,c)}function Sv(n){return r=>{setTimeout(n,void 0,r)}}const Ih=class HE extends S.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,a,c){var f,y,I;let x=r,O=a||(()=>null),Z=c;if(r&&"object"==typeof r){const ie=r;x=null===(f=ie.next)||void 0===f?void 0:f.bind(ie),O=null===(y=ie.error)||void 0===y?void 0:y.bind(ie),Z=null===(I=ie.complete)||void 0===I?void 0:I.bind(ie)}this.__isAsync&&(O=Sv(O),x&&(x=Sv(x)),Z&&(Z=Sv(Z)));const W=super.subscribe({next:x,error:O,complete:Z});return r instanceof v.w0&&r.add(W),W}};function $E(){return this._results[wu()]()}class Av{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=wu(),c=Av.prototype;c[a]||(c[a]=$E)}get changes(){return this._changes||(this._changes=new Ih)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,a){return this._results.reduce(r,a)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,a){const c=this;c.dirty=!1;const f=Ue(r);(this._changesDetected=!function vl(n,r,a){if(n.length!==r.length)return!1;for(let c=0;c<n.length;c++){let f=n[c],y=r[c];if(a&&(f=a(f),y=a(y)),y!==f)return!1}return!0}(c._results,f,a))&&(c._results=f,c.length=f.length,c.last=f[this.length-1],c.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let e_=(()=>{class n{}return n.__NG_ELEMENT_ID__=qE,n})();const ZE=e_,GE=class extends ZE{constructor(r,a,c){super(),this._declarationLView=r,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(r){const a=this._declarationTContainer.tViews,c=ud(this._declarationLView,a,r,16,null,a.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(c[19]=y.createEmbeddedView(a)),yu(a,c,r),new Qy(c)}};function qE(){return U_(Ur(),gt())}function U_(n,r){return 4&n.type?new GE(r,n,ny(n,r)):null}let B_=(()=>{class n{}return n.__NG_ELEMENT_ID__=WE,n})();function WE(){return j0(Ur(),gt())}const zE=B_,B0=class extends zE{constructor(r,a,c){super(),this._lContainer=r,this._hostTNode=a,this._hostLView=c}get element(){return ny(this._hostTNode,this._hostLView)}get injector(){return new $i(this._hostTNode,this._hostLView)}get parentInjector(){const r=A(this._hostTNode,this._hostLView);if($a(r)){const a=Za(r,this._hostLView),c=Wo(r);return new $i(a[1].data[c+8],a)}return new $i(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const a=V0(this._lContainer);return null!==a&&a[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,a,c){const f=r.createEmbeddedView(a||{});return this.insert(f,c),f}createComponent(r,a,c,f,y){const I=r&&!function Ku(n){return"function"==typeof n}(r);let x;if(I)x=a;else{const ie=a||{};x=ie.index,c=ie.injector,f=ie.projectableNodes,y=ie.ngModuleRef}const O=I?r:new Tv(br(r)),Z=c||this.parentInjector;if(!y&&null==O.ngModule){const _e=(I?Z:this.parentInjector).get(ry,null);_e&&(y=_e)}const W=O.create(Z,f,void 0,y);return this.insert(W.hostView,x),W}insert(r,a){const c=r._lView,f=c[1];if(function lr(n){return ns(n[3])}(c)){const W=this.indexOf(r);if(-1!==W)this.detach(W);else{const ie=c[3],_e=new B0(ie,ie[6],ie[3]);_e.detach(_e.indexOf(r))}}const y=this._adjustIndex(a),I=this._lContainer;!function Hd(n,r,a,c){const f=10+c,y=a.length;c>0&&(a[f-1][4]=r),c<y-10?(r[4]=a[f],Zs(a,10+c,r)):(a.push(r),r[4]=null),r[3]=a;const I=r[17];null!==I&&a!==I&&function gu(n,r){const a=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===a?n[9]=[r]:a.push(r)}(I,r);const x=r[19];null!==x&&x.insertView(n),r[2]|=128}(f,c,I,y);const x=kf(y,I),O=c[11],Z=al(O,I[7]);return null!==Z&&function Ph(n,r,a,c,f,y){c[0]=f,c[6]=r,Al(n,c,a,1,f,y)}(f,I[6],O,c,Z,x),r.attachToViewContainerRef(),Zs(xv(I),y,r),r}move(r,a){return this.insert(r,a)}indexOf(r){const a=V0(this._lContainer);return null!==a?a.indexOf(r):-1}remove(r){const a=this._adjustIndex(r,-1),c=$d(this._lContainer,a);c&&(fa(xv(this._lContainer),a),Mf(c[1],c))}detach(r){const a=this._adjustIndex(r,-1),c=$d(this._lContainer,a);return c&&null!=fa(xv(this._lContainer),a)?new Qy(c):null}_adjustIndex(r,a=0){return null==r?this.length+a:r}};function V0(n){return n[8]}function xv(n){return n[8]||(n[8]=[])}function j0(n,r){let a;const c=r[n.index];if(ns(c))a=c;else{let f;if(8&n.type)f=F(c);else{const y=r[11];f=y.createComment("");const I=ht(n,r);Dl(y,al(y,I),f,function Zd(n,r){return jn(n)?n.nextSibling(r):r.nextSibling}(y,I),!1)}r[n.index]=a=hm(c,r,f,n),Ka(r,a)}return new B0(a,n,r)}class Rv{constructor(r){this.queryList=r,this.matches=null}clone(){return new Rv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Mv{constructor(r=[]){this.queries=r}createEmbeddedView(r){const a=r.queries;if(null!==a){const c=null!==r.contentQueries?r.contentQueries[0]:a.length,f=[];for(let y=0;y<c;y++){const I=a.getByIndex(y);f.push(this.queries[I.indexInDeclarationView].clone())}return new Mv(f)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let a=0;a<this.queries.length;a++)null!==K0(r,a).matches&&this.queries[a].setDirty()}}class H0{constructor(r,a,c=null){this.predicate=r,this.flags=a,this.read=c}}class Pv{constructor(r=[]){this.queries=r}elementStart(r,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(r,a)}elementEnd(r){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(r)}embeddedTView(r){let a=null;for(let c=0;c<this.length;c++){const f=null!==a?a.length:0,y=this.getByIndex(c).embeddedTView(r,f);y&&(y.indexInDeclarationView=c,null!==a?a.push(y):a=[y])}return null!==a?new Pv(a):null}template(r,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(r,a)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class Nv{constructor(r,a=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(r,a){this.isApplyingToNode(a)&&this.matchTNode(r,a)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,a){this.elementStart(r,a)}embeddedTView(r,a){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,a),new Nv(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=r.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(r,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let f=0;f<c.length;f++){const y=c[f];this.matchTNodeWithReadOption(r,a,QE(a,y)),this.matchTNodeWithReadOption(r,a,Ft(a,r,y,!1,!1))}else c===e_?4&a.type&&this.matchTNodeWithReadOption(r,a,-1):this.matchTNodeWithReadOption(r,a,Ft(a,r,c,!1,!1))}matchTNodeWithReadOption(r,a,c){if(null!==c){const f=this.metadata.read;if(null!==f)if(f===Yy||f===B_||f===e_&&4&a.type)this.addMatch(a.index,-2);else{const y=Ft(a,r,f,!1,!1);null!==y&&this.addMatch(a.index,y)}else this.addMatch(a.index,c)}}addMatch(r,a){null===this.matches?this.matches=[r,a]:this.matches.push(r,a)}}function QE(n,r){const a=n.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===r)return a[c+1];return null}function XE(n,r,a,c){return-1===a?function JE(n,r){return 11&n.type?ny(n,r):4&n.type?U_(n,r):null}(r,n):-2===a?function eI(n,r,a){return a===Yy?ny(r,n):a===e_?U_(r,n):a===B_?j0(r,n):void 0}(n,r,c):In(n,n[1],a,r)}function $0(n,r,a,c){const f=r[19].queries[c];if(null===f.matches){const y=n.data,I=a.matches,x=[];for(let O=0;O<I.length;O+=2){const Z=I[O];x.push(Z<0?null:XE(r,y[Z],I[O+1],a.metadata.read))}f.matches=x}return f.matches}function Ov(n,r,a,c){const f=n.queries.getByIndex(a),y=f.matches;if(null!==y){const I=$0(n,r,f,a);for(let x=0;x<y.length;x+=2){const O=y[x];if(O>0)c.push(I[x/2]);else{const Z=y[x+1],W=r[-O];for(let ie=10;ie<W.length;ie++){const _e=W[ie];_e[17]===_e[3]&&Ov(_e[1],_e,Z,c)}if(null!==W[9]){const ie=W[9];for(let _e=0;_e<ie.length;_e++){const Be=ie[_e];Ov(Be[1],Be,Z,c)}}}}}return c}function Z0(n){const r=gt(),a=Dn(),c=Gu();bu(c+1);const f=K0(a,c);if(n.dirty&&On(r)===(2==(2&f.metadata.flags))){if(null===f.matches)n.reset([]);else{const y=f.crossesNgTemplate?Ov(a,r,c,[]):$0(a,r,f,c);n.reset(y,pE),n.notifyOnChanges()}return!0}return!1}function G0(n,r,a,c){const f=Dn();if(f.firstCreatePass){const y=Ur();(function z0(n,r,a){null===n.queries&&(n.queries=new Pv),n.queries.track(new Nv(r,a))})(f,new H0(r,a,c),y.index),function rI(n,r){const a=n.contentQueries||(n.contentQueries=[]);r!==(a.length?a[a.length-1]:-1)&&a.push(n.queries.length-1,r)}(f,n),2==(2&a)&&(f.staticContentQueries=!0)}!function W0(n,r,a){const c=new Av(4==(4&a));Ec(n,r,c,c.destroy),null===r[19]&&(r[19]=new Mv),r[19].queries.push(new Rv(c))}(f,gt(),a)}function q0(){return function nI(n,r){return n[19].queries[r].queryList}(gt(),Gu())}function K0(n,r){return n.queries.getByIndex(r)}function H_(...n){}const hw=new kn("Application Initializer");let Vv=(()=>{class n{constructor(a){this.appInits=a,this.resolve=H_,this.reject=H_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,f)=>{this.resolve=c,this.reject=f})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const y=this.appInits[f]();if(Ng(y))a.push(y);else if(Og(y)){const I=new Promise((x,O)=>{y.subscribe({complete:x,error:O})});a.push(I)}}Promise.all(a).then(()=>{c()}).catch(f=>{this.reject(f)}),0===a.length&&c(),this.initialized=!0}}return n.\u0275fac=function(a){return new(a||n)(Zt(hw,8))},n.\u0275prov=$t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const fw=new kn("AppId",{providedIn:"root",factory:function pw(){return`${jv()}${jv()}${jv()}`}});function jv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const gw=new kn("Platform Initializer"),EI=new kn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),mw=new kn("appBootstrapListener");let II=(()=>{class n{log(a){console.log(a)}warn(a){console.warn(a)}}return n.\u0275fac=function(a){return new(a||n)},n.\u0275prov=$t({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Hv=new kn("LocaleId",{providedIn:"root",factory:()=>rr(Hv,Qt.Optional|Qt.SkipSelf)||function bI(){return"undefined"!=typeof $localize&&$localize.locale||wh}()}),CI=new kn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class TI{constructor(r,a){this.ngModuleFactory=r,this.componentFactories=a}}let DI=(()=>{class n{compileModuleSync(a){return new Dv(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),y=E($r(a).declarations).reduce((I,x)=>{const O=br(x);return O&&I.push(new Tv(O)),I},[]);return new TI(c,y)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return n.\u0275fac=function(a){return new(a||n)},n.\u0275prov=$t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const AI=(()=>Promise.resolve(0))();function $v(n){"undefined"==typeof Zone?AI.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class xd{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ih(!1),this.onMicrotaskEmpty=new Ih(!1),this.onStable=new Ih(!1),this.onError=new Ih(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!c&&a,f.shouldCoalesceRunChangeDetection=c,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function xI(){let n=en.requestAnimationFrame,r=en.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&r){const a=n[Zone.__symbol__("OriginalDelegate")];a&&(n=a);const c=r[Zone.__symbol__("OriginalDelegate")];c&&(r=c)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function PI(n){const r=()=>{!function MI(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(en,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Gv(n),n.isCheckStableRunning=!0,Zv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Gv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,f,y,I,x)=>{try{return yw(n),a.invokeTask(f,y,I,x)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===y.type||n.shouldCoalesceRunChangeDetection)&&r(),_w(n)}},onInvoke:(a,c,f,y,I,x,O)=>{try{return yw(n),a.invoke(f,y,I,x,O)}finally{n.shouldCoalesceRunChangeDetection&&r(),_w(n)}},onHasTask:(a,c,f,y)=>{a.hasTask(f,y),c===f&&("microTask"==y.change?(n._hasPendingMicrotasks=y.microTask,Gv(n),Zv(n)):"macroTask"==y.change&&(n.hasPendingMacrotasks=y.macroTask))},onHandleError:(a,c,f,y)=>(a.handleError(f,y),n.runOutsideAngular(()=>n.onError.emit(y)),!1)})}(f)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!xd.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(xd.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(r,a,c){return this._inner.run(r,a,c)}runTask(r,a,c,f){const y=this._inner,I=y.scheduleEventTask("NgZoneEvent: "+f,r,RI,H_,H_);try{return y.runTask(I,a,c)}finally{y.cancelTask(I)}}runGuarded(r,a,c){return this._inner.runGuarded(r,a,c)}runOutsideAngular(r){return this._outer.run(r)}}const RI={};function Zv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Gv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function yw(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function _w(n){n._nesting--,Zv(n)}class NI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ih,this.onMicrotaskEmpty=new Ih,this.onStable=new Ih,this.onError=new Ih}run(r,a,c){return r.apply(a,c)}runGuarded(r,a,c){return r.apply(a,c)}runOutsideAngular(r){return r()}runTask(r,a,c,f){return r.apply(a,c)}}let vw=(()=>{class n{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{xd.assertNotInAngularZone(),$v(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())$v(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,f){let y=-1;c&&c>0&&(y=setTimeout(()=>{this._callbacks=this._callbacks.filter(I=>I.timeoutId!==y),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:y,updateCb:f})}whenStable(a,c,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,c,f){return[]}}return n.\u0275fac=function(a){return new(a||n)(Zt(xd))},n.\u0275prov=$t({token:n,factory:n.\u0275fac}),n})(),OI=(()=>{class n{constructor(){this._applications=new Map,qv.addToWindow(this)}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return qv.findTestabilityInTree(this,a,c)}}return n.\u0275fac=function(a){return new(a||n)},n.\u0275prov=$t({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();class kI{addToWindow(r){}findTestabilityInTree(r,a,c){return null}}function FI(n){qv=n}let qv=new kI,$g=null;const ww=new kn("AllowMultipleToken"),Ew=new kn("PlatformOnDestroy");class BI{constructor(r,a){this.name=r,this.token=a}}function Iw(n,r,a=[]){const c=`Platform: ${r}`,f=new kn(c);return(y=[])=>{let I=Wv();if(!I||I.injector.get(ww,!1)){const x=[...a,...y,{provide:f,useValue:!0}];n?n(x):function VI(n){if($g&&!$g.get(ww,!1))throw new at(400,"");$g=n;const r=n.get(bw),a=n.get(gw,null);a&&a.forEach(c=>c())}(function HI(n=[],r){return Ja.create({name:r,providers:[{provide:ef,useValue:"platform"},{provide:Ew,useValue:()=>$g=null},...n]})}(x,c))}return function jI(n){const r=Wv();if(!r)throw new at(401,"");return r}()}}function Wv(){var n;return null!==(n=null==$g?void 0:$g.get(bw))&&void 0!==n?n:null}let bw=(()=>{class n{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const x=function $I(n,r){let a;return a="noop"===n?new NI:("zone.js"===n?void 0:n)||new xd({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)}),a}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),O=[{provide:xd,useValue:x}];return x.run(()=>{const Z=Ja.create({providers:O,parent:this.injector,name:a.moduleType.name}),W=a.create(Z),ie=W.injector.get(Tl,null);if(!ie)throw new at(402,"");return x.runOutsideAngular(()=>{const _e=x.onError.subscribe({next:Be=>{ie.handleError(Be)}});W.onDestroy(()=>{Kv(this._modules,W),_e.unsubscribe()})}),function ZI(n,r,a){try{const c=a();return Ng(c)?c.catch(f=>{throw r.runOutsideAngular(()=>n.handleError(f)),f}):c}catch(c){throw r.runOutsideAngular(()=>n.handleError(c)),c}}(ie,x,()=>{const _e=W.injector.get(Vv);return _e.runInitializers(),_e.donePromise.then(()=>(function Wy(n){Lt(n,"Expected localeId to be defined"),"string"==typeof n&&(Eh=n.toLowerCase().replace(/_/g,"-"))}(W.injector.get(Hv,wh)||wh),this._moduleDoBootstrap(W),W))})})}bootstrapModule(a,c=[]){const f=Cw({},c);return function LI(n,r,a){const c=new Dv(a);return Promise.resolve(c)}(0,0,a).then(y=>this.bootstrapModuleFactory(y,f))}_moduleDoBootstrap(a){const c=a.injector.get(zv);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(f=>c.bootstrap(f));else{if(!a.instance.ngDoBootstrap)throw new at(403,"");a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new at(404,"");this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(Ew,null);null==a||a(),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(a){return new(a||n)(Zt(Ja))},n.\u0275prov=$t({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function Cw(n,r){return Array.isArray(r)?r.reduce(Cw,n):Object.assign(Object.assign({},n),r)}let zv=(()=>{class n{constructor(a,c,f,y){this._zone=a,this._injector=c,this._exceptionHandler=f,this._initStatus=y,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const I=new J.y(O=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{O.next(this._stable),O.complete()})}),x=new J.y(O=>{let Z;this._zone.runOutsideAngular(()=>{Z=this._zone.onStable.subscribe(()=>{xd.assertNotInAngularZone(),$v(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,O.next(!0))})})});const W=this._zone.onUnstable.subscribe(()=>{xd.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{O.next(!1)}))});return()=>{Z.unsubscribe(),W.unsubscribe()}});this.isStable=(0,Ce.T)(I,x.pipe((0,Ee.B)()))}bootstrap(a,c){if(!this._initStatus.done)throw new at(405,"");let f;f=a instanceof I0?a:this._injector.get(F_).resolveComponentFactory(a),this.componentTypes.push(f.componentType);const y=function UI(n){return n.isBoundToModule}(f)?void 0:this._injector.get(ry),x=f.create(Ja.NULL,[],c||f.selector,y),O=x.location.nativeElement,Z=x.injector.get(vw,null),W=Z&&x.injector.get(OI);return Z&&W&&W.registerApplication(O,Z),x.onDestroy(()=>{this.detachView(x.hostView),Kv(this.components,x),W&&W.unregisterApplication(O)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new at(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;Kv(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(mw,[]).concat(this._bootstrapListeners).forEach(f=>f(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(a){return new(a||n)(Zt(xd),Zt(Ja),Zt(Tl),Zt(Vv))},n.\u0275prov=$t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Kv(n,r){const a=n.indexOf(r);a>-1&&n.splice(a,1)}let Dw=!0,Sw=!1;function qI(){return Sw=!0,Dw}function WI(){if(Sw)throw new Error("Cannot enable prod mode after platform setup.");Dw=!1}let zI=(()=>{class n{}return n.__NG_ELEMENT_ID__=KI,n})();function KI(n){return function YI(n,r,a){if(Na(n)&&!a){const c=En(n.index,r);return new Qy(c,c)}return 47&n.type?new Qy(r[16],r):null}(Ur(),gt(),16==(16&n))}class Mw{constructor(){}supports(r){return Rc(r)}create(r){return new nb(r)}}const tb=(n,r)=>r;class nb{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||tb}forEachItem(r){let a;for(a=this._itHead;null!==a;a=a._next)r(a)}forEachOperation(r){let a=this._itHead,c=this._removalsHead,f=0,y=null;for(;a||c;){const I=!c||a&&a.currentIndex<Nw(c,f,y)?a:c,x=Nw(I,f,y),O=I.currentIndex;if(I===c)f--,c=c._nextRemoved;else if(a=a._next,null==I.previousIndex)f++;else{y||(y=[]);const Z=x-f,W=O-f;if(Z!=W){for(let _e=0;_e<Z;_e++){const Be=_e<y.length?y[_e]:y[_e]=0,lt=Be+_e;W<=lt&&lt<Z&&(y[_e]=Be+1)}y[I.previousIndex]=W-Z}}x!==O&&r(I,x,O)}}forEachPreviousItem(r){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)r(a)}forEachAddedItem(r){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)r(a)}forEachMovedItem(r){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)r(a)}forEachRemovedItem(r){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)r(a)}forEachIdentityChange(r){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)r(a)}diff(r){if(null==r&&(r=[]),!Rc(r))throw new at(900,"");return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let f,y,I,a=this._itHead,c=!1;if(Array.isArray(r)){this.length=r.length;for(let x=0;x<this.length;x++)y=r[x],I=this._trackByFn(x,y),null!==a&&Object.is(a.trackById,I)?(c&&(a=this._verifyReinsertion(a,y,I,x)),Object.is(a.item,y)||this._addIdentityChange(a,y)):(a=this._mismatch(a,y,I,x),c=!0),a=a._next}else f=0,function gp(n,r){if(Array.isArray(n))for(let a=0;a<n.length;a++)r(n[a]);else{const a=n[wu()]();let c;for(;!(c=a.next()).done;)r(c.value)}}(r,x=>{I=this._trackByFn(f,x),null!==a&&Object.is(a.trackById,I)?(c&&(a=this._verifyReinsertion(a,x,I,f)),Object.is(a.item,x)||this._addIdentityChange(a,x)):(a=this._mismatch(a,x,I,f),c=!0),a=a._next,f++}),this.length=f;return this._truncate(a),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,a,c,f){let y;return null===r?y=this._itTail:(y=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(r.item,a)||this._addIdentityChange(r,a),this._reinsertAfter(r,y,f)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(c,f))?(Object.is(r.item,a)||this._addIdentityChange(r,a),this._moveAfter(r,y,f)):r=this._addAfter(new rb(a,c),y,f),r}_verifyReinsertion(r,a,c,f){let y=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==y?r=this._reinsertAfter(y,r._prev,f):r.currentIndex!=f&&(r.currentIndex=f,this._addToMoves(r,f)),r}_truncate(r){for(;null!==r;){const a=r._next;this._addToRemovals(this._unlink(r)),r=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const f=r._prevRemoved,y=r._nextRemoved;return null===f?this._removalsHead=y:f._nextRemoved=y,null===y?this._removalsTail=f:y._prevRemoved=f,this._insertAfter(r,a,c),this._addToMoves(r,c),r}_moveAfter(r,a,c){return this._unlink(r),this._insertAfter(r,a,c),this._addToMoves(r,c),r}_addAfter(r,a,c){return this._insertAfter(r,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,a,c){const f=null===a?this._itHead:a._next;return r._next=f,r._prev=a,null===f?this._itTail=r:f._prev=r,null===a?this._itHead=r:a._next=r,null===this._linkedRecords&&(this._linkedRecords=new Pw),this._linkedRecords.put(r),r.currentIndex=c,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const a=r._prev,c=r._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,r}_addToMoves(r,a){return r.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Pw),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,a){return r.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class rb{constructor(r,a){this.item=r,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ib{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,r))return c;return null}remove(r){const a=r._prevDup,c=r._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class Pw{constructor(){this.map=new Map}put(r){const a=r.trackById;let c=this.map.get(a);c||(c=new ib,this.map.set(a,c)),c.add(r)}get(r,a){const f=this.map.get(r);return f?f.get(r,a):null}remove(r){const a=r.trackById;return this.map.get(a).remove(r)&&this.map.delete(a),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Nw(n,r,a){const c=n.previousIndex;if(null===c)return c;let f=0;return a&&c<a.length&&(f=a[c]),c+r+f}class Ow{constructor(){}supports(r){return r instanceof Map||ju(r)}create(){return new sb}}class sb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let a;for(a=this._mapHead;null!==a;a=a._next)r(a)}forEachPreviousItem(r){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)r(a)}forEachChangedItem(r){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)r(a)}forEachAddedItem(r){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)r(a)}forEachRemovedItem(r){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)r(a)}diff(r){if(r){if(!(r instanceof Map||ju(r)))throw new at(900,"")}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(r,(c,f)=>{if(a&&a.key===f)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const y=this._getOrCreateRecordForKey(f,c);a=this._insertBeforeOrAppend(a,y)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,a){if(r){const c=r._prev;return a._next=r,a._prev=c,r._prev=a,c&&(c._next=a),r===this._mapHead&&(this._mapHead=a),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(r,a){if(this._records.has(r)){const f=this._records.get(r);this._maybeAddToChanges(f,a);const y=f._prev,I=f._next;return y&&(y._next=I),I&&(I._prev=y),f._next=null,f._prev=null,f}const c=new ob(r);return this._records.set(r,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,a){Object.is(a,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=a,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,a){r instanceof Map?r.forEach(a):Object.keys(r).forEach(c=>a(r[c],c))}}class ob{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function kw(){return new e0([new Mw])}let e0=(()=>{class n{constructor(a){this.factories=a}static create(a,c){if(null!=c){const f=c.factories.slice();a=a.concat(f)}return new n(a)}static extend(a){return{provide:n,useFactory:c=>n.create(a,c||kw()),deps:[[n,new xo,new _a]]}}find(a){const c=this.factories.find(f=>f.supports(a));if(null!=c)return c;throw new at(901,"")}}return n.\u0275prov=$t({token:n,providedIn:"root",factory:kw}),n})();function Fw(){return new t0([new Ow])}let t0=(()=>{class n{constructor(a){this.factories=a}static create(a,c){if(c){const f=c.factories.slice();a=a.concat(f)}return new n(a)}static extend(a){return{provide:n,useFactory:c=>n.create(a,c||Fw()),deps:[[n,new xo,new _a]]}}find(a){const c=this.factories.find(y=>y.supports(a));if(c)return c;throw new at(901,"")}}return n.\u0275prov=$t({token:n,providedIn:"root",factory:Fw}),n})();const lb=Iw(null,"core",[]);let cb=(()=>{class n{constructor(a){}}return n.\u0275fac=function(a){return new(a||n)(Zt(zv))},n.\u0275mod=Hr({type:n}),n.\u0275inj=sn({}),n})()},3809:(Rt,Ve,V)=>{V.d(Ve,{F0:()=>Zn,yS:()=>mo,Bz:()=>$a,lC:()=>ho});var S=V(5e3),v=V(7579);class J extends v.x{constructor(T){super(),this._value=T}get value(){return this.getValue()}_subscribe(T){const C=super._subscribe(T);return!C.closed&&T.next(this._value),C}getValue(){const{hasError:T,thrownError:C,_value:P}=this;if(T)throw C;return this._throwIfClosed(),P}next(T){super.next(this._value=T)}}var Ce=V(8306),Ee=V(4742),ve=V(8996),Me=V(4671),xe=V(3268),Oe=V(7669),le=V(1810),ae=V(5403),De=V(9672);function at(A,T,C){A?(0,De.f)(C,A,T):T()}var bt=V(576);function Ze(A,T){const C=(0,bt.m)(A)?A:()=>A,P=N=>N.error(C());return new Ce.y(T?N=>T.schedule(P,0,N):P)}var rt=V(8421);function Ie(A){return new Ce.y(T=>{(0,rt.Xf)(A()).subscribe(T)})}var At=V(727),Xe=V(4482);function Ke(){return(0,Xe.e)((A,T)=>{let C=null;A._refCount++;const P=(0,ae.x)(T,void 0,void 0,void 0,()=>{if(!A||A._refCount<=0||0<--A._refCount)return void(C=null);const N=A._connection,j=C;C=null,N&&(!j||N===j)&&N.unsubscribe(),T.unsubscribe()});A.subscribe(P),P.closed||(C=A.connect())})}class je extends Ce.y{constructor(T,C){super(),this.source=T,this.subjectFactory=C,this._subject=null,this._refCount=0,this._connection=null,(0,Xe.A)(T)&&(this.lift=T.lift)}_subscribe(T){return this.getSubject().subscribe(T)}getSubject(){const T=this._subject;return(!T||T.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:T}=this;this._subject=this._connection=null,null==T||T.unsubscribe()}connect(){let T=this._connection;if(!T){T=this._connection=new At.w0;const C=this.getSubject();T.add(this.source.subscribe((0,ae.x)(C,void 0,()=>{this._teardown(),C.complete()},P=>{this._teardown(),C.error(P)},()=>this._teardown()))),T.closed&&(this._connection=null,T=At.w0.EMPTY)}return T}refCount(){return Ke()(this)}}var Je=V(9646),yt=V(6805),X=V(7272),ze=V(515);function ue(A){return(0,Xe.e)((T,C)=>{let j,P=null,N=!1;P=T.subscribe((0,ae.x)(C,void 0,void 0,re=>{j=(0,rt.Xf)(A(re,ue(A)(T))),P?(P.unsubscribe(),P=null,j.subscribe(C)):N=!0})),N&&(P.unsubscribe(),P=null,j.subscribe(C))})}var Se=V(9300);function Ae(A){return A<=0?()=>ze.E:(0,Xe.e)((T,C)=>{let P=[];T.subscribe((0,ae.x)(C,N=>{P.push(N),A<P.length&&P.shift()},()=>{for(const N of P)C.next(N);C.complete()},void 0,()=>{P=null}))})}var Ge=V(8068),$e=V(6590),xt=V(4004),Lt=V(3900),ut=V(5698),cn=V(8675),Yt=V(5026),Wt=V(4351),$t=V(590),mn=V(5577),sn=V(8505),_n=V(8189),mr=V(9808);class er{constructor(T,C){this.id=T,this.url=C}}class cr extends er{constructor(T,C,P="imperative",N=null){super(T,C),this.navigationTrigger=P,this.restoredState=N}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class zn extends er{constructor(T,C,P){super(T,C),this.urlAfterRedirects=P}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Mr extends er{constructor(T,C,P){super(T,C),this.reason=P}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Kn extends er{constructor(T,C,P){super(T,C),this.error=P}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class wr extends er{constructor(T,C,P,N){super(T,C),this.urlAfterRedirects=P,this.state=N}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yn extends er{constructor(T,C,P,N){super(T,C),this.urlAfterRedirects=P,this.state=N}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qt extends er{constructor(T,C,P,N,j){super(T,C),this.urlAfterRedirects=P,this.state=N,this.shouldActivate=j}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class xn extends er{constructor(T,C,P,N){super(T,C),this.urlAfterRedirects=P,this.state=N}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mn extends er{constructor(T,C,P,N){super(T,C),this.urlAfterRedirects=P,this.state=N}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pn{constructor(T){this.route=T}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Yi{constructor(T){this.route=T}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class mi{constructor(T){this.snapshot=T}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tt{constructor(T){this.snapshot=T}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class me{constructor(T){this.snapshot=T}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class we{constructor(T){this.snapshot=T}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dt{constructor(T,C,P){this.routerEvent=T,this.position=C,this.anchor=P}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const ke="primary";class ft{constructor(T){this.params=T||{}}has(T){return Object.prototype.hasOwnProperty.call(this.params,T)}get(T){if(this.has(T)){const C=this.params[T];return Array.isArray(C)?C[0]:C}return null}getAll(T){if(this.has(T)){const C=this.params[T];return Array.isArray(C)?C:[C]}return[]}get keys(){return Object.keys(this.params)}}function Dt(A){return new ft(A)}const Sn="ngNavigationCancelingError";function on(A){const T=Error("NavigationCancelingError: "+A);return T[Sn]=!0,T}function zr(A,T,C){const P=C.path.split("/");if(P.length>A.length||"full"===C.pathMatch&&(T.hasChildren()||P.length<A.length))return null;const N={};for(let j=0;j<P.length;j++){const re=P[j],ge=A[j];if(re.startsWith(":"))N[re.substring(1)]=ge;else if(re!==ge.path)return null}return{consumed:A.slice(0,P.length),posParams:N}}function Nn(A,T){const C=A?Object.keys(A):void 0,P=T?Object.keys(T):void 0;if(!C||!P||C.length!=P.length)return!1;let N;for(let j=0;j<C.length;j++)if(N=C[j],!se(A[N],T[N]))return!1;return!0}function se(A,T){if(Array.isArray(A)&&Array.isArray(T)){if(A.length!==T.length)return!1;const C=[...A].sort(),P=[...T].sort();return C.every((N,j)=>P[j]===N)}return A===T}function he(A){return Array.prototype.concat.apply([],A)}function ye(A){return A.length>0?A[A.length-1]:null}function ce(A,T){for(const C in A)A.hasOwnProperty(C)&&T(A[C],C)}function Re(A){return(0,S.CqO)(A)?A:(0,S.QGY)(A)?(0,ve.D)(Promise.resolve(A)):(0,Je.of)(A)}const Ot={exact:function dn(A,T,C){if(!_i(A.segments,T.segments)||!yi(A.segments,T.segments,C)||A.numberOfChildren!==T.numberOfChildren)return!1;for(const P in T.children)if(!A.children[P]||!dn(A.children[P],T.children[P],C))return!1;return!0},subset:Hr},Jt={exact:function yr(A,T){return Nn(A,T)},subset:function Fr(A,T){return Object.keys(T).length<=Object.keys(A).length&&Object.keys(T).every(C=>se(A[C],T[C]))},ignored:()=>!0};function tn(A,T,C){return Ot[C.paths](A.root,T.root,C.matrixParams)&&Jt[C.queryParams](A.queryParams,T.queryParams)&&!("exact"===C.fragment&&A.fragment!==T.fragment)}function Hr(A,T,C){return Ms(A,T,T.segments,C)}function Ms(A,T,C,P){if(A.segments.length>C.length){const N=A.segments.slice(0,C.length);return!(!_i(N,C)||T.hasChildren()||!yi(N,C,P))}if(A.segments.length===C.length){if(!_i(A.segments,C)||!yi(A.segments,C,P))return!1;for(const N in T.children)if(!A.children[N]||!Hr(A.children[N],T.children[N],P))return!1;return!0}{const N=C.slice(0,A.segments.length),j=C.slice(A.segments.length);return!!(_i(A.segments,N)&&yi(A.segments,N,P)&&A.children[ke])&&Ms(A.children[ke],T,j,P)}}function yi(A,T,C){return T.every((P,N)=>Jt[C](A[N].parameters,P.parameters))}class Qi{constructor(T,C,P){this.root=T,this.queryParams=C,this.fragment=P}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Dt(this.queryParams)),this._queryParamMap}toString(){return Ps.serialize(this)}}class vn{constructor(T,C){this.segments=T,this.children=C,this.parent=null,ce(C,(P,N)=>P.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ls(this)}}class br{constructor(T,C){this.path=T,this.parameters=C}get parameterMap(){return this._parameterMap||(this._parameterMap=Dt(this.parameters)),this._parameterMap}toString(){return Kr(this)}}function _i(A,T){return A.length===T.length&&A.every((C,P)=>C.path===T[P].path)}class vi{}class Bo{parse(T){const C=new Xi(T);return new Qi(C.parseRootSegment(),C.parseQueryParams(),C.parseFragment())}serialize(T){const C=`/${wi(T.root,!0)}`,P=function Cr(A){const T=Object.keys(A).map(C=>{const P=A[C];return Array.isArray(P)?P.map(N=>`${Si(C)}=${Si(N)}`).join("&"):`${Si(C)}=${Si(P)}`}).filter(C=>!!C);return T.length?`?${T.join("&")}`:""}(T.queryParams);return`${C}${P}${"string"==typeof T.fragment?`#${function Tn(A){return encodeURI(A)}(T.fragment)}`:""}`}}const Ps=new Bo;function ls(A){return A.segments.map(T=>Kr(T)).join("/")}function wi(A,T){if(!A.hasChildren())return ls(A);if(T){const C=A.children[ke]?wi(A.children[ke],!1):"",P=[];return ce(A.children,(N,j)=>{j!==ke&&P.push(`${j}:${wi(N,!1)}`)}),P.length>0?`${C}(${P.join("//")})`:C}{const C=function $r(A,T){let C=[];return ce(A.children,(P,N)=>{N===ke&&(C=C.concat(T(P,N)))}),ce(A.children,(P,N)=>{N!==ke&&(C=C.concat(T(P,N)))}),C}(A,(P,N)=>N===ke?[wi(A.children[ke],!1)]:[`${N}:${wi(P,!1)}`]);return 1===Object.keys(A.children).length&&null!=A.children[ke]?`${ls(A)}/${C[0]}`:`${ls(A)}/(${C.join("//")})`}}function Lr(A){return encodeURIComponent(A).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Si(A){return Lr(A).replace(/%3B/gi,";")}function _t(A){return Lr(A).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ht(A){return decodeURIComponent(A)}function Bn(A){return Ht(A.replace(/\+/g,"%20"))}function Kr(A){return`${_t(A.path)}${function Ji(A){return Object.keys(A).map(T=>`;${_t(T)}=${_t(A[T])}`).join("")}(A.parameters)}`}const Ai=/^[^\/()?;=#]+/;function dr(A){const T=A.match(Ai);return T?T[0]:""}const Zr=/^[^=?&#]+/,Xt=/^[^&#]+/;class Xi{constructor(T){this.url=T,this.remaining=T}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new vn([],{}):new vn([],this.parseChildren())}parseQueryParams(){const T={};if(this.consumeOptional("?"))do{this.parseQueryParam(T)}while(this.consumeOptional("&"));return T}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const T=[];for(this.peekStartsWith("(")||T.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),T.push(this.parseSegment());let C={};this.peekStartsWith("/(")&&(this.capture("/"),C=this.parseParens(!0));let P={};return this.peekStartsWith("(")&&(P=this.parseParens(!1)),(T.length>0||Object.keys(C).length>0)&&(P[ke]=new vn(T,C)),P}parseSegment(){const T=dr(this.remaining);if(""===T&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(T),new br(Ht(T),this.parseMatrixParams())}parseMatrixParams(){const T={};for(;this.consumeOptional(";");)this.parseParam(T);return T}parseParam(T){const C=dr(this.remaining);if(!C)return;this.capture(C);let P="";if(this.consumeOptional("=")){const N=dr(this.remaining);N&&(P=N,this.capture(P))}T[Ht(C)]=Ht(P)}parseQueryParam(T){const C=function Tr(A){const T=A.match(Zr);return T?T[0]:""}(this.remaining);if(!C)return;this.capture(C);let P="";if(this.consumeOptional("=")){const re=function ws(A){const T=A.match(Xt);return T?T[0]:""}(this.remaining);re&&(P=re,this.capture(P))}const N=Bn(C),j=Bn(P);if(T.hasOwnProperty(N)){let re=T[N];Array.isArray(re)||(re=[re],T[N]=re),re.push(j)}else T[N]=j}parseParens(T){const C={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const P=dr(this.remaining),N=this.remaining[P.length];if("/"!==N&&")"!==N&&";"!==N)throw new Error(`Cannot parse url '${this.url}'`);let j;P.indexOf(":")>-1?(j=P.substr(0,P.indexOf(":")),this.capture(j),this.capture(":")):T&&(j=ke);const re=this.parseChildren();C[j]=1===Object.keys(re).length?re[ke]:new vn([],re),this.consumeOptional("//")}return C}peekStartsWith(T){return this.remaining.startsWith(T)}consumeOptional(T){return!!this.peekStartsWith(T)&&(this.remaining=this.remaining.substring(T.length),!0)}capture(T){if(!this.consumeOptional(T))throw new Error(`Expected "${T}".`)}}class es{constructor(T){this._root=T}get root(){return this._root.value}parent(T){const C=this.pathFromRoot(T);return C.length>1?C[C.length-2]:null}children(T){const C=te(T,this._root);return C?C.children.map(P=>P.value):[]}firstChild(T){const C=te(T,this._root);return C&&C.children.length>0?C.children[0].value:null}siblings(T){const C=hr(T,this._root);return C.length<2?[]:C[C.length-2].children.map(N=>N.value).filter(N=>N!==T)}pathFromRoot(T){return hr(T,this._root).map(C=>C.value)}}function te(A,T){if(A===T.value)return T;for(const C of T.children){const P=te(A,C);if(P)return P}return null}function hr(A,T){if(A===T.value)return[T];for(const C of T.children){const P=hr(A,C);if(P.length)return P.unshift(T),P}return[]}class Gr{constructor(T,C){this.value=T,this.children=C}toString(){return`TreeNode(${this.value})`}}function ii(A){const T={};return A&&A.children.forEach(C=>T[C.value.outlet]=C),T}class Yr extends es{constructor(T,C){super(T),this.snapshot=C,ui(this,T)}toString(){return this.snapshot.toString()}}function Qn(A,T){const C=function sr(A,T){const re=new uo([],{},{},"",{},ke,T,null,A.root,-1,{});return new Na("",new Gr(re,[]))}(A,T),P=new J([new br("",{})]),N=new J({}),j=new J({}),re=new J({}),ge=new J(""),et=new ts(P,N,re,ge,j,ke,T,C.root);return et.snapshot=C.root,new Yr(new Gr(et,[]),C)}class ts{constructor(T,C,P,N,j,re,ge,et){this.url=T,this.params=C,this.queryParams=P,this.fragment=N,this.data=j,this.outlet=re,this.component=ge,this._futureSnapshot=et}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,xt.U)(T=>Dt(T)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,xt.U)(T=>Dt(T)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function si(A,T="emptyOnly"){const C=A.pathFromRoot;let P=0;if("always"!==T)for(P=C.length-1;P>=1;){const N=C[P],j=C[P-1];if(N.routeConfig&&""===N.routeConfig.path)P--;else{if(j.component)break;P--}}return function ns(A){return A.reduce((T,C)=>({params:Object.assign(Object.assign({},T.params),C.params),data:Object.assign(Object.assign({},T.data),C.data),resolve:Object.assign(Object.assign({},T.resolve),C._resolvedData)}),{params:{},data:{},resolve:{}})}(C.slice(P))}class uo{constructor(T,C,P,N,j,re,ge,et,Ft,In,qt){this.url=T,this.params=C,this.queryParams=P,this.fragment=N,this.data=j,this.outlet=re,this.component=ge,this.routeConfig=et,this._urlSegment=Ft,this._lastPathIndex=In,this._resolve=qt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Dt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Dt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(P=>P.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Na extends es{constructor(T,C){super(C),this.url=T,ui(this,C)}toString(){return Es(this._root)}}function ui(A,T){T.value._routerState=A,T.children.forEach(C=>ui(A,C))}function Es(A){const T=A.children.length>0?` { ${A.children.map(Es).join(", ")} } `:"";return`${A.value}${T}`}function Io(A){if(A.snapshot){const T=A.snapshot,C=A._futureSnapshot;A.snapshot=C,Nn(T.queryParams,C.queryParams)||A.queryParams.next(C.queryParams),T.fragment!==C.fragment&&A.fragment.next(C.fragment),Nn(T.params,C.params)||A.params.next(C.params),function Er(A,T){if(A.length!==T.length)return!1;for(let C=0;C<A.length;++C)if(!Nn(A[C],T[C]))return!1;return!0}(T.url,C.url)||A.url.next(C.url),Nn(T.data,C.data)||A.data.next(C.data)}else A.snapshot=A._futureSnapshot,A.data.next(A._futureSnapshot.data)}function Ks(A,T){const C=Nn(A.params,T.params)&&function ai(A,T){return _i(A,T)&&A.every((C,P)=>Nn(C.parameters,T[P].parameters))}(A.url,T.url);return C&&!(!A.parent!=!T.parent)&&(!A.parent||Ks(A.parent,T.parent))}function Pr(A,T,C){if(C&&A.shouldReuseRoute(T.value,C.value.snapshot)){const P=C.value;P._futureSnapshot=T.value;const N=function Ys(A,T,C){return T.children.map(P=>{for(const N of C.children)if(A.shouldReuseRoute(P.value,N.value.snapshot))return Pr(A,P,N);return Pr(A,P)})}(A,T,C);return new Gr(P,N)}{if(A.shouldAttach(T.value)){const j=A.retrieve(T.value);if(null!==j){const re=j.route;return re.value._futureSnapshot=T.value,re.children=T.children.map(ge=>Pr(A,ge)),re}}const P=function bo(A){return new ts(new J(A.url),new J(A.params),new J(A.queryParams),new J(A.fragment),new J(A.data),A.outlet,A.component,A)}(T.value),N=T.children.map(j=>Pr(A,j));return new Gr(P,N)}}function pe(A){return"object"==typeof A&&null!=A&&!A.outlets&&!A.segmentPath}function He(A){return"object"==typeof A&&null!=A&&A.outlets}function ot(A,T,C,P,N){let j={};if(P&&ce(P,(ge,et)=>{j[et]=Array.isArray(ge)?ge.map(Ft=>`${Ft}`):`${ge}`}),A===T)return new Qi(C,j,N);const re=Ct(A,T,C);return new Qi(re,j,N)}function Ct(A,T,C){const P={};return ce(A.children,(N,j)=>{P[j]=N===T?C:Ct(N,T,C)}),new vn(A.segments,P)}class Pt{constructor(T,C,P){if(this.isAbsolute=T,this.numberOfDoubleDots=C,this.commands=P,T&&P.length>0&&pe(P[0]))throw new Error("Root segment cannot have matrix parameters");const N=P.find(He);if(N&&N!==ye(P))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Vn{constructor(T,C,P){this.segmentGroup=T,this.processChildren=C,this.index=P}}function Ns(A,T,C){if(A||(A=new vn([],{})),0===A.segments.length&&A.hasChildren())return co(A,T,C);const P=function Vi(A,T,C){let P=0,N=T;const j={match:!1,pathIndex:0,commandIndex:0};for(;N<A.segments.length;){if(P>=C.length)return j;const re=A.segments[N],ge=C[P];if(He(ge))break;const et=`${ge}`,Ft=P<C.length-1?C[P+1]:null;if(N>0&&void 0===et)break;if(et&&Ft&&"object"==typeof Ft&&void 0===Ft.outlets){if(!Qr(et,Ft,re))return j;P+=2}else{if(!Qr(et,{},re))return j;P++}N++}return{match:!0,pathIndex:N,commandIndex:P}}(A,T,C),N=C.slice(P.commandIndex);if(P.match&&P.pathIndex<A.segments.length){const j=new vn(A.segments.slice(0,P.pathIndex),{});return j.children[ke]=new vn(A.segments.slice(P.pathIndex),A.children),co(j,0,N)}return P.match&&0===N.length?new vn(A.segments,{}):P.match&&!A.hasChildren()?cs(A,T,C):P.match?co(A,0,N):cs(A,T,C)}function co(A,T,C){if(0===C.length)return new vn(A.segments,{});{const P=function lo(A){return He(A[0])?A[0].outlets:{[ke]:A}}(C),N={};return ce(P,(j,re)=>{"string"==typeof j&&(j=[j]),null!==j&&(N[re]=Ns(A.children[re],T,j))}),ce(A.children,(j,re)=>{void 0===P[re]&&(N[re]=j)}),new vn(A.segments,N)}}function cs(A,T,C){const P=A.segments.slice(0,T);let N=0;for(;N<C.length;){const j=C[N];if(He(j)){const et=tu(j.outlets);return new vn(P,et)}if(0===N&&pe(C[0])){P.push(new br(A.segments[T].path,Oa(C[0]))),N++;continue}const re=He(j)?j.outlets[ke]:`${j}`,ge=N<C.length-1?C[N+1]:null;re&&ge&&pe(ge)?(P.push(new br(re,Oa(ge))),N+=2):(P.push(new br(re,{})),N++)}return new vn(P,{})}function tu(A){const T={};return ce(A,(C,P)=>{"string"==typeof C&&(C=[C]),null!==C&&(T[P]=cs(new vn([],{}),0,C))}),T}function Oa(A){const T={};return ce(A,(C,P)=>T[P]=`${C}`),T}function Qr(A,T,C){return A==C.path&&Nn(T,C.parameters)}class ds{constructor(T,C,P,N){this.routeReuseStrategy=T,this.futureState=C,this.currState=P,this.forwardEvent=N}activate(T){const C=this.futureState._root,P=this.currState?this.currState._root:null;this.deactivateChildRoutes(C,P,T),Io(this.futureState.root),this.activateChildRoutes(C,P,T)}deactivateChildRoutes(T,C,P){const N=ii(C);T.children.forEach(j=>{const re=j.value.outlet;this.deactivateRoutes(j,N[re],P),delete N[re]}),ce(N,(j,re)=>{this.deactivateRouteAndItsChildren(j,P)})}deactivateRoutes(T,C,P){const N=T.value,j=C?C.value:null;if(N===j)if(N.component){const re=P.getContext(N.outlet);re&&this.deactivateChildRoutes(T,C,re.children)}else this.deactivateChildRoutes(T,C,P);else j&&this.deactivateRouteAndItsChildren(C,P)}deactivateRouteAndItsChildren(T,C){T.value.component&&this.routeReuseStrategy.shouldDetach(T.value.snapshot)?this.detachAndStoreRouteSubtree(T,C):this.deactivateRouteAndOutlet(T,C)}detachAndStoreRouteSubtree(T,C){const P=C.getContext(T.value.outlet),N=P&&T.value.component?P.children:C,j=ii(T);for(const re of Object.keys(j))this.deactivateRouteAndItsChildren(j[re],N);if(P&&P.outlet){const re=P.outlet.detach(),ge=P.children.onOutletDeactivated();this.routeReuseStrategy.store(T.value.snapshot,{componentRef:re,route:T,contexts:ge})}}deactivateRouteAndOutlet(T,C){const P=C.getContext(T.value.outlet),N=P&&T.value.component?P.children:C,j=ii(T);for(const re of Object.keys(j))this.deactivateRouteAndItsChildren(j[re],N);P&&P.outlet&&(P.outlet.deactivate(),P.children.onOutletDeactivated(),P.attachRef=null,P.resolver=null,P.route=null)}activateChildRoutes(T,C,P){const N=ii(C);T.children.forEach(j=>{this.activateRoutes(j,N[j.value.outlet],P),this.forwardEvent(new we(j.value.snapshot))}),T.children.length&&this.forwardEvent(new tt(T.value.snapshot))}activateRoutes(T,C,P){const N=T.value,j=C?C.value:null;if(Io(N),N===j)if(N.component){const re=P.getOrCreateContext(N.outlet);this.activateChildRoutes(T,C,re.children)}else this.activateChildRoutes(T,C,P);else if(N.component){const re=P.getOrCreateContext(N.outlet);if(this.routeReuseStrategy.shouldAttach(N.snapshot)){const ge=this.routeReuseStrategy.retrieve(N.snapshot);this.routeReuseStrategy.store(N.snapshot,null),re.children.onOutletReAttached(ge.contexts),re.attachRef=ge.componentRef,re.route=ge.route.value,re.outlet&&re.outlet.attach(ge.componentRef,ge.route.value),Io(ge.route.value),this.activateChildRoutes(T,null,re.children)}else{const ge=function rs(A){for(let T=A.parent;T;T=T.parent){const C=T.routeConfig;if(C&&C._loadedConfig)return C._loadedConfig;if(C&&C.component)return null}return null}(N.snapshot),et=ge?ge.module.componentFactoryResolver:null;re.attachRef=null,re.route=N,re.resolver=et,re.outlet&&re.outlet.activateWith(N,et),this.activateChildRoutes(T,null,re.children)}}else this.activateChildRoutes(T,null,P)}}class ka{constructor(T,C){this.routes=T,this.module=C}}function Is(A){return"function"==typeof A}function Ei(A){return A instanceof Qi}const Os=Symbol("INITIAL_VALUE");function xi(){return(0,Lt.w)(A=>function It(...A){const T=(0,Oe.yG)(A),C=(0,Oe.jO)(A),{args:P,keys:N}=(0,Ee.D)(A);if(0===P.length)return(0,ve.D)([],T);const j=new Ce.y(function nt(A,T,C=Me.y){return P=>{at(T,()=>{const{length:N}=A,j=new Array(N);let re=N,ge=N;for(let et=0;et<N;et++)at(T,()=>{const Ft=(0,ve.D)(A[et],T);let In=!1;Ft.subscribe((0,ae.x)(P,qt=>{j[et]=qt,In||(In=!0,ge--),ge||P.next(C(j.slice()))},()=>{--re||P.complete()}))},P)},P)}}(P,T,N?re=>(0,le.n)(N,re):Me.y));return C?j.pipe((0,xe.Z)(C)):j}(A.map(T=>T.pipe((0,ut.q)(1),(0,cn.O)(Os)))).pipe((0,Yt.R)((T,C)=>{let P=!1;return C.reduce((N,j,re)=>N!==Os?N:(j===Os&&(P=!0),P||!1!==j&&re!==C.length-1&&!Ei(j)?N:j),T)},Os),(0,Se.h)(T=>T!==Os),(0,xt.U)(T=>Ei(T)?T:!0===T),(0,ut.q)(1)))}class Fa{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Nr,this.attachRef=null}}class Nr{constructor(){this.contexts=new Map}onChildOutletCreated(T,C){const P=this.getOrCreateContext(T);P.outlet=C,this.contexts.set(T,P)}onChildOutletDestroyed(T){const C=this.getContext(T);C&&(C.outlet=null,C.attachRef=null)}onOutletDeactivated(){const T=this.contexts;return this.contexts=new Map,T}onOutletReAttached(T){this.contexts=T}getOrCreateContext(T){let C=this.getContext(T);return C||(C=new Fa,this.contexts.set(T,C)),C}getContext(T){return this.contexts.get(T)||null}}let ho=(()=>{class A{constructor(C,P,N,j,re){this.parentContexts=C,this.location=P,this.resolver=N,this.changeDetector=re,this.activated=null,this._activatedRoute=null,this.activateEvents=new S.vpe,this.deactivateEvents=new S.vpe,this.attachEvents=new S.vpe,this.detachEvents=new S.vpe,this.name=j||ke,C.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const C=this.parentContexts.getContext(this.name);C&&C.route&&(C.attachRef?this.attach(C.attachRef,C.route):this.activateWith(C.route,C.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const C=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(C.instance),C}attach(C,P){this.activated=C,this._activatedRoute=P,this.location.insert(C.hostView),this.attachEvents.emit(C.instance)}deactivate(){if(this.activated){const C=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(C)}}activateWith(C,P){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=C;const re=(P=P||this.resolver).resolveComponentFactory(C._futureSnapshot.routeConfig.component),ge=this.parentContexts.getOrCreateContext(this.name).children,et=new is(C,ge,this.location.injector);this.activated=this.location.createComponent(re,this.location.length,et),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return A.\u0275fac=function(C){return new(C||A)(S.Y36(Nr),S.Y36(S.s_b),S.Y36(S._Vd),S.$8M("name"),S.Y36(S.sBO))},A.\u0275dir=S.lG2({type:A,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),A})();class is{constructor(T,C,P){this.route=T,this.childContexts=C,this.parent=P}get(T,C){return T===ts?this.route:T===Nr?this.childContexts:this.parent.get(T,C)}}let na=(()=>{class A{}return A.\u0275fac=function(C){return new(C||A)},A.\u0275cmp=S.Xpm({type:A,selectors:[["ng-component"]],decls:1,vars:0,template:function(C,P){1&C&&S._UZ(0,"router-outlet")},directives:[ho],encapsulation:2}),A})();function ks(A,T=""){for(let C=0;C<A.length;C++){const P=A[C];Co(P,jn(T,P))}}function Co(A,T){A.children&&ks(A.children,T)}function jn(A,T){return T?A||T.path?A&&!T.path?`${A}/`:!A&&T.path?T.path:`${A}/${T.path}`:"":A}function L(A){const T=A.children&&A.children.map(L),C=T?Object.assign(Object.assign({},A),{children:T}):Object.assign({},A);return!C.component&&(T||C.loadChildren)&&C.outlet&&C.outlet!==ke&&(C.component=na),C}function q(A){return A.outlet||ke}function F(A,T){const C=A.filter(P=>q(P)===T);return C.push(...A.filter(P=>q(P)!==T)),C}const Q={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function de(A,T,C){var P;if(""===T.path)return"full"===T.pathMatch&&(A.hasChildren()||C.length>0)?Object.assign({},Q):{matched:!0,consumedSegments:[],remainingSegments:C,parameters:{},positionalParamSegments:{}};const j=(T.matcher||zr)(C,A,T);if(!j)return Object.assign({},Q);const re={};ce(j.posParams,(et,Ft)=>{re[Ft]=et.path});const ge=j.consumed.length>0?Object.assign(Object.assign({},re),j.consumed[j.consumed.length-1].parameters):re;return{matched:!0,consumedSegments:j.consumed,remainingSegments:C.slice(j.consumed.length),parameters:ge,positionalParamSegments:null!==(P=j.posParams)&&void 0!==P?P:{}}}function We(A,T,C,P,N="corrected"){if(C.length>0&&function hn(A,T,C){return C.some(P=>En(A,T,P)&&q(P)!==ke)}(A,C,P)){const re=new vn(T,function Gt(A,T,C,P){const N={};N[ke]=P,P._sourceSegment=A,P._segmentIndexShift=T.length;for(const j of C)if(""===j.path&&q(j)!==ke){const re=new vn([],{});re._sourceSegment=A,re._segmentIndexShift=T.length,N[q(j)]=re}return N}(A,T,P,new vn(C,A.children)));return re._sourceSegment=A,re._segmentIndexShift=T.length,{segmentGroup:re,slicedSegments:[]}}if(0===C.length&&function fn(A,T,C){return C.some(P=>En(A,T,P))}(A,C,P)){const re=new vn(A.segments,function ht(A,T,C,P,N,j){const re={};for(const ge of P)if(En(A,C,ge)&&!N[q(ge)]){const et=new vn([],{});et._sourceSegment=A,et._segmentIndexShift="legacy"===j?A.segments.length:T.length,re[q(ge)]=et}return Object.assign(Object.assign({},N),re)}(A,T,C,P,A.children,N));return re._sourceSegment=A,re._segmentIndexShift=T.length,{segmentGroup:re,slicedSegments:C}}const j=new vn(A.segments,A.children);return j._sourceSegment=A,j._segmentIndexShift=T.length,{segmentGroup:j,slicedSegments:C}}function En(A,T,C){return(!(A.hasChildren()||T.length>0)||"full"!==C.pathMatch)&&""===C.path}function On(A,T,C,P){return!!(q(A)===P||P!==ke&&En(T,C,A))&&("**"===A.path||de(T,A,C).matched)}function Ir(A,T,C){return 0===T.length&&!A.children[C]}class lr{constructor(T){this.segmentGroup=T||null}}class Dr{constructor(T){this.urlTree=T}}function ji(A){return Ze(new lr(A))}function Ri(A){return Ze(new Dr(A))}class jo{constructor(T,C,P,N,j){this.configLoader=C,this.urlSerializer=P,this.urlTree=N,this.config=j,this.allowRedirects=!0,this.ngModule=T.get(S.h0i)}apply(){const T=We(this.urlTree.root,[],[],this.config).segmentGroup,C=new vn(T.segments,T.children);return this.expandSegmentGroup(this.ngModule,this.config,C,ke).pipe((0,xt.U)(j=>this.createUrlTree(fs(j),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ue(j=>{if(j instanceof Dr)return this.allowRedirects=!1,this.match(j.urlTree);throw j instanceof lr?this.noMatchError(j):j}))}match(T){return this.expandSegmentGroup(this.ngModule,this.config,T.root,ke).pipe((0,xt.U)(N=>this.createUrlTree(fs(N),T.queryParams,T.fragment))).pipe(ue(N=>{throw N instanceof lr?this.noMatchError(N):N}))}noMatchError(T){return new Error(`Cannot match any routes. URL Segment: '${T.segmentGroup}'`)}createUrlTree(T,C,P){const N=T.segments.length>0?new vn([],{[ke]:T}):T;return new Qi(N,C,P)}expandSegmentGroup(T,C,P,N){return 0===P.segments.length&&P.hasChildren()?this.expandChildren(T,C,P).pipe((0,xt.U)(j=>new vn([],j))):this.expandSegment(T,P,C,P.segments,N,!0)}expandChildren(T,C,P){const N=[];for(const j of Object.keys(P.children))"primary"===j?N.unshift(j):N.push(j);return(0,ve.D)(N).pipe((0,Wt.b)(j=>{const re=P.children[j],ge=F(C,j);return this.expandSegmentGroup(T,ge,re,j).pipe((0,xt.U)(et=>({segment:et,outlet:j})))}),(0,Yt.R)((j,re)=>(j[re.outlet]=re.segment,j),{}),function mt(A,T){const C=arguments.length>=2;return P=>P.pipe(A?(0,Se.h)((N,j)=>A(N,j,P)):Me.y,Ae(1),C?(0,$e.d)(T):(0,Ge.T)(()=>new yt.K))}())}expandSegment(T,C,P,N,j,re){return(0,ve.D)(P).pipe((0,Wt.b)(ge=>this.expandSegmentAgainstRoute(T,C,P,ge,N,j,re).pipe(ue(Ft=>{if(Ft instanceof lr)return(0,Je.of)(null);throw Ft}))),(0,$t.P)(ge=>!!ge),ue((ge,et)=>{if(ge instanceof yt.K||"EmptyError"===ge.name)return Ir(C,N,j)?(0,Je.of)(new vn([],{})):ji(C);throw ge}))}expandSegmentAgainstRoute(T,C,P,N,j,re,ge){return On(N,C,j,re)?void 0===N.redirectTo?this.matchSegmentAgainstRoute(T,C,N,j,re):ge&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(T,C,P,N,j,re):ji(C):ji(C)}expandSegmentAgainstRouteUsingRedirect(T,C,P,N,j,re){return"**"===N.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(T,P,N,re):this.expandRegularSegmentAgainstRouteUsingRedirect(T,C,P,N,j,re)}expandWildCardWithParamsAgainstRouteUsingRedirect(T,C,P,N){const j=this.applyRedirectCommands([],P.redirectTo,{});return P.redirectTo.startsWith("/")?Ri(j):this.lineralizeSegments(P,j).pipe((0,mn.z)(re=>{const ge=new vn(re,{});return this.expandSegment(T,ge,C,re,N,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(T,C,P,N,j,re){const{matched:ge,consumedSegments:et,remainingSegments:Ft,positionalParamSegments:In}=de(C,N,j);if(!ge)return ji(C);const qt=this.applyRedirectCommands(et,N.redirectTo,In);return N.redirectTo.startsWith("/")?Ri(qt):this.lineralizeSegments(N,qt).pipe((0,mn.z)(ar=>this.expandSegment(T,C,P,ar.concat(Ft),re,!1)))}matchSegmentAgainstRoute(T,C,P,N,j){if("**"===P.path)return P.loadChildren?(P._loadedConfig?(0,Je.of)(P._loadedConfig):this.configLoader.load(T.injector,P)).pipe((0,xt.U)(qt=>(P._loadedConfig=qt,new vn(N,{})))):(0,Je.of)(new vn(N,{}));const{matched:re,consumedSegments:ge,remainingSegments:et}=de(C,P,N);return re?this.getChildConfig(T,P,N).pipe((0,mn.z)(In=>{const qt=In.module,ar=In.routes,{segmentGroup:ur,slicedSegments:$i}=We(C,ge,et,ar),Yo=new vn(ur.segments,ur.children);if(0===$i.length&&Yo.hasChildren())return this.expandChildren(qt,ar,Yo).pipe((0,xt.U)(yo=>new vn(ge,yo)));if(0===ar.length&&0===$i.length)return(0,Je.of)(new vn(ge,{}));const uu=q(P)===j;return this.expandSegment(qt,Yo,ar,$i,uu?ke:j,!0).pipe((0,xt.U)(ln=>new vn(ge.concat(ln.segments),ln.children)))})):ji(C)}getChildConfig(T,C,P){return C.children?(0,Je.of)(new ka(C.children,T)):C.loadChildren?void 0!==C._loadedConfig?(0,Je.of)(C._loadedConfig):this.runCanLoadGuards(T.injector,C,P).pipe((0,mn.z)(N=>N?this.configLoader.load(T.injector,C).pipe((0,xt.U)(j=>(C._loadedConfig=j,j))):function hs(A){return Ze(on(`Cannot load children because the guard of the route "path: '${A.path}'" returned false`))}(C))):(0,Je.of)(new ka([],T))}runCanLoadGuards(T,C,P){const N=C.canLoad;if(!N||0===N.length)return(0,Je.of)(!0);const j=N.map(re=>{const ge=T.get(re);let et;if(function Vo(A){return A&&Is(A.canLoad)}(ge))et=ge.canLoad(C,P);else{if(!Is(ge))throw new Error("Invalid CanLoad guard");et=ge(C,P)}return Re(et)});return(0,Je.of)(j).pipe(xi(),(0,sn.b)(re=>{if(!Ei(re))return;const ge=on(`Redirecting to "${this.urlSerializer.serialize(re)}"`);throw ge.url=re,ge}),(0,xt.U)(re=>!0===re))}lineralizeSegments(T,C){let P=[],N=C.root;for(;;){if(P=P.concat(N.segments),0===N.numberOfChildren)return(0,Je.of)(P);if(N.numberOfChildren>1||!N.children[ke])return Ze(new Error(`Only absolute redirects can have named outlets. redirectTo: '${T.redirectTo}'`));N=N.children[ke]}}applyRedirectCommands(T,C,P){return this.applyRedirectCreatreUrlTree(C,this.urlSerializer.parse(C),T,P)}applyRedirectCreatreUrlTree(T,C,P,N){const j=this.createSegmentGroup(T,C.root,P,N);return new Qi(j,this.createQueryParams(C.queryParams,this.urlTree.queryParams),C.fragment)}createQueryParams(T,C){const P={};return ce(T,(N,j)=>{if("string"==typeof N&&N.startsWith(":")){const ge=N.substring(1);P[j]=C[ge]}else P[j]=N}),P}createSegmentGroup(T,C,P,N){const j=this.createSegments(T,C.segments,P,N);let re={};return ce(C.children,(ge,et)=>{re[et]=this.createSegmentGroup(T,ge,P,N)}),new vn(j,re)}createSegments(T,C,P,N){return C.map(j=>j.path.startsWith(":")?this.findPosParam(T,j,N):this.findOrReturn(j,P))}findPosParam(T,C,P){const N=P[C.path.substring(1)];if(!N)throw new Error(`Cannot redirect to '${T}'. Cannot find '${C.path}'.`);return N}findOrReturn(T,C){let P=0;for(const N of C){if(N.path===T.path)return C.splice(P),N;P++}return T}}function fs(A){const T={};for(const P of Object.keys(A.children)){const j=fs(A.children[P]);(j.segments.length>0||j.hasChildren())&&(T[P]=j)}return function fo(A){if(1===A.numberOfChildren&&A.children[ke]){const T=A.children[ke];return new vn(A.segments.concat(T.segments),T.children)}return A}(new vn(A.segments,T))}class ra{constructor(T){this.path=T,this.route=this.path[this.path.length-1]}}class nu{constructor(T,C){this.component=T,this.route=C}}function gt(A,T,C){const P=A._root;return Ho(P,T?T._root:null,C,[P.value])}function Qs(A,T,C){const P=function Ur(A){if(!A)return null;for(let T=A.parent;T;T=T.parent){const C=T.routeConfig;if(C&&C._loadedConfig)return C._loadedConfig}return null}(T);return(P?P.module.injector:C).get(A)}function Ho(A,T,C,P,N={canDeactivateChecks:[],canActivateChecks:[]}){const j=ii(T);return A.children.forEach(re=>{(function ia(A,T,C,P,N={canDeactivateChecks:[],canActivateChecks:[]}){const j=A.value,re=T?T.value:null,ge=C?C.getContext(A.value.outlet):null;if(re&&j.routeConfig===re.routeConfig){const et=function bs(A,T,C){if("function"==typeof C)return C(A,T);switch(C){case"pathParamsChange":return!_i(A.url,T.url);case"pathParamsOrQueryParamsChange":return!_i(A.url,T.url)||!Nn(A.queryParams,T.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ks(A,T)||!Nn(A.queryParams,T.queryParams);default:return!Ks(A,T)}}(re,j,j.routeConfig.runGuardsAndResolvers);et?N.canActivateChecks.push(new ra(P)):(j.data=re.data,j._resolvedData=re._resolvedData),Ho(A,T,j.component?ge?ge.children:null:C,P,N),et&&ge&&ge.outlet&&ge.outlet.isActivated&&N.canDeactivateChecks.push(new nu(ge.outlet.component,re))}else re&&Ua(T,ge,N),N.canActivateChecks.push(new ra(P)),Ho(A,null,j.component?ge?ge.children:null:C,P,N)})(re,j[re.value.outlet],C,P.concat([re.value]),N),delete j[re.value.outlet]}),ce(j,(re,ge)=>Ua(re,C.getContext(ge),N)),N}function Ua(A,T,C){const P=ii(A),N=A.value;ce(P,(j,re)=>{Ua(j,N.component?T?T.children.getContext(re):null:T,C)}),C.canDeactivateChecks.push(new nu(N.component&&T&&T.outlet&&T.outlet.isActivated?T.outlet.component:null,N))}class Us{}function Js(A){return new Ce.y(T=>T.error(A))}class Ci{constructor(T,C,P,N,j,re){this.rootComponentType=T,this.config=C,this.urlTree=P,this.url=N,this.paramsInheritanceStrategy=j,this.relativeLinkResolution=re}recognize(){const T=We(this.urlTree.root,[],[],this.config.filter(re=>void 0===re.redirectTo),this.relativeLinkResolution).segmentGroup,C=this.processSegmentGroup(this.config,T,ke);if(null===C)return null;const P=new uo([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},ke,this.rootComponentType,null,this.urlTree.root,-1,{}),N=new Gr(P,C),j=new Na(this.url,N);return this.inheritParamsAndData(j._root),j}inheritParamsAndData(T){const C=T.value,P=si(C,this.paramsInheritanceStrategy);C.params=Object.freeze(P.params),C.data=Object.freeze(P.data),T.children.forEach(N=>this.inheritParamsAndData(N))}processSegmentGroup(T,C,P){return 0===C.segments.length&&C.hasChildren()?this.processChildren(T,C):this.processSegment(T,C,C.segments,P)}processChildren(T,C){const P=[];for(const j of Object.keys(C.children)){const re=C.children[j],ge=F(T,j),et=this.processSegmentGroup(ge,re,j);if(null===et)return null;P.push(...et)}const N=Ba(P);return function iu(A){A.sort((T,C)=>T.value.outlet===ke?-1:C.value.outlet===ke?1:T.value.outlet.localeCompare(C.value.outlet))}(N),N}processSegment(T,C,P,N){for(const j of T){const re=this.processSegmentAgainstRoute(j,C,P,N);if(null!==re)return re}return Ir(C,P,N)?[]:null}processSegmentAgainstRoute(T,C,P,N){if(T.redirectTo||!On(T,C,P,N))return null;let j,re=[],ge=[];if("**"===T.path){const ur=P.length>0?ye(P).parameters:{};j=new uo(P,ur,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,oa(T),q(T),T.component,T,bu(C),ps(C)+P.length,$o(T))}else{const ur=de(C,T,P);if(!ur.matched)return null;re=ur.consumedSegments,ge=ur.remainingSegments,j=new uo(re,ur.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,oa(T),q(T),T.component,T,bu(C),ps(C)+re.length,$o(T))}const et=function gl(A){return A.children?A.children:A.loadChildren?A._loadedConfig.routes:[]}(T),{segmentGroup:Ft,slicedSegments:In}=We(C,re,ge,et.filter(ur=>void 0===ur.redirectTo),this.relativeLinkResolution);if(0===In.length&&Ft.hasChildren()){const ur=this.processChildren(et,Ft);return null===ur?null:[new Gr(j,ur)]}if(0===et.length&&0===In.length)return[new Gr(j,[])];const qt=q(T)===N,ar=this.processSegment(et,Ft,In,qt?ke:N);return null===ar?null:[new Gr(j,ar)]}}function To(A){const T=A.value.routeConfig;return T&&""===T.path&&void 0===T.redirectTo}function Ba(A){const T=[],C=new Set;for(const P of A){if(!To(P)){T.push(P);continue}const N=T.find(j=>P.value.routeConfig===j.value.routeConfig);void 0!==N?(N.children.push(...P.children),C.add(N)):T.push(P)}for(const P of C){const N=Ba(P.children);T.push(new Gr(P.value,N))}return T.filter(P=>!C.has(P))}function bu(A){let T=A;for(;T._sourceSegment;)T=T._sourceSegment;return T}function ps(A){let T=A,C=T._segmentIndexShift?T._segmentIndexShift:0;for(;T._sourceSegment;)T=T._sourceSegment,C+=T._segmentIndexShift?T._segmentIndexShift:0;return C-1}function oa(A){return A.data||{}}function $o(A){return A.resolve||{}}function go(A){return[...Object.keys(A),...Object.getOwnPropertySymbols(A)]}function ua(A){return(0,Lt.w)(T=>{const C=A(T);return C?(0,ve.D)(C).pipe((0,xt.U)(()=>T)):(0,Je.of)(T)})}class ei extends class Va{shouldDetach(T){return!1}store(T,C){}shouldAttach(T){return!1}retrieve(T){return null}shouldReuseRoute(T,C){return T.routeConfig===C.routeConfig}}{}const Zo=new S.OlP("ROUTES");class $l{constructor(T,C,P,N){this.injector=T,this.compiler=C,this.onLoadStartListener=P,this.onLoadEndListener=N}load(T,C){if(C._loader$)return C._loader$;this.onLoadStartListener&&this.onLoadStartListener(C);const N=this.loadModuleFactory(C.loadChildren).pipe((0,xt.U)(j=>{this.onLoadEndListener&&this.onLoadEndListener(C);const re=j.create(T);return new ka(he(re.injector.get(Zo,void 0,S.XFs.Self|S.XFs.Optional)).map(L),re)}),ue(j=>{throw C._loader$=void 0,j}));return C._loader$=new je(N,()=>new v.x).pipe(Ke()),C._loader$}loadModuleFactory(T){return Re(T()).pipe((0,mn.z)(C=>C instanceof S.YKP?(0,Je.of)(C):(0,ve.D)(this.compiler.compileModuleAsync(C))))}}class ja{shouldProcessUrl(T){return!0}extract(T){return T}merge(T,C){return T}}function Fc(A){throw A}function Lc(A,T,C){return T.parse("/")}function Go(A,T){return(0,Je.of)(null)}const Bs={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},la={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Zn=(()=>{class A{constructor(C,P,N,j,re,ge,et){this.rootComponentType=C,this.urlSerializer=P,this.rootContexts=N,this.location=j,this.config=et,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new v.x,this.errorHandler=Fc,this.malformedUriErrorHandler=Lc,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Go,afterPreactivation:Go},this.urlHandlingStrategy=new ja,this.routeReuseStrategy=new ei,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=re.get(S.h0i),this.console=re.get(S.c2e);const qt=re.get(S.R0b);this.isNgZoneEnabled=qt instanceof S.R0b&&S.R0b.isInAngularZone(),this.resetConfig(et),this.currentUrlTree=function it(){return new Qi(new vn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new $l(re,ge,ar=>this.triggerEvent(new Pn(ar)),ar=>this.triggerEvent(new Yi(ar))),this.routerState=Qn(this.currentUrlTree,this.rootComponentType),this.transitions=new J({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var C;return null===(C=this.location.getState())||void 0===C?void 0:C.\u0275routerPageId}setupNavigations(C){const P=this.events;return C.pipe((0,Se.h)(N=>0!==N.id),(0,xt.U)(N=>Object.assign(Object.assign({},N),{extractedUrl:this.urlHandlingStrategy.extract(N.rawUrl)})),(0,Lt.w)(N=>{let j=!1,re=!1;return(0,Je.of)(N).pipe((0,sn.b)(ge=>{this.currentNavigation={id:ge.id,initialUrl:ge.currentRawUrl,extractedUrl:ge.extractedUrl,trigger:ge.source,extras:ge.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Lt.w)(ge=>{const et=this.browserUrlTree.toString(),Ft=!this.navigated||ge.extractedUrl.toString()!==et||et!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Ft)&&this.urlHandlingStrategy.shouldProcessUrl(ge.rawUrl))return ml(ge.source)&&(this.browserUrlTree=ge.extractedUrl),(0,Je.of)(ge).pipe((0,Lt.w)(qt=>{const ar=this.transitions.getValue();return P.next(new cr(qt.id,this.serializeUrl(qt.extractedUrl),qt.source,qt.restoredState)),ar!==this.transitions.getValue()?ze.E:Promise.resolve(qt)}),function Fs(A,T,C,P){return(0,Lt.w)(N=>function La(A,T,C,P,N){return new jo(A,T,C,P,N).apply()}(A,T,C,N.extractedUrl,P).pipe((0,xt.U)(j=>Object.assign(Object.assign({},N),{urlAfterRedirects:j}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,sn.b)(qt=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:qt.urlAfterRedirects})}),function Do(A,T,C,P,N){return(0,mn.z)(j=>function Xr(A,T,C,P,N="emptyOnly",j="legacy"){try{const re=new Ci(A,T,C,P,N,j).recognize();return null===re?Js(new Us):(0,Je.of)(re)}catch(re){return Js(re)}}(A,T,j.urlAfterRedirects,C(j.urlAfterRedirects),P,N).pipe((0,xt.U)(re=>Object.assign(Object.assign({},j),{targetSnapshot:re}))))}(this.rootComponentType,this.config,qt=>this.serializeUrl(qt),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,sn.b)(qt=>{if("eager"===this.urlUpdateStrategy){if(!qt.extras.skipLocationChange){const ur=this.urlHandlingStrategy.merge(qt.urlAfterRedirects,qt.rawUrl);this.setBrowserUrl(ur,qt)}this.browserUrlTree=qt.urlAfterRedirects}const ar=new wr(qt.id,this.serializeUrl(qt.extractedUrl),this.serializeUrl(qt.urlAfterRedirects),qt.targetSnapshot);P.next(ar)}));if(Ft&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:ar,extractedUrl:ur,source:$i,restoredState:Yo,extras:uu}=ge,lu=new cr(ar,this.serializeUrl(ur),$i,Yo);P.next(lu);const ln=Qn(ur,this.rootComponentType).snapshot;return(0,Je.of)(Object.assign(Object.assign({},ge),{targetSnapshot:ln,urlAfterRedirects:ur,extras:Object.assign(Object.assign({},uu),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=ge.rawUrl,ge.resolve(null),ze.E}),ua(ge=>{const{targetSnapshot:et,id:Ft,extractedUrl:In,rawUrl:qt,extras:{skipLocationChange:ar,replaceUrl:ur}}=ge;return this.hooks.beforePreactivation(et,{navigationId:Ft,appliedUrlTree:In,rawUrlTree:qt,skipLocationChange:!!ar,replaceUrl:!!ur})}),(0,sn.b)(ge=>{const et=new Yn(ge.id,this.serializeUrl(ge.extractedUrl),this.serializeUrl(ge.urlAfterRedirects),ge.targetSnapshot);this.triggerEvent(et)}),(0,xt.U)(ge=>Object.assign(Object.assign({},ge),{guards:gt(ge.targetSnapshot,ge.currentSnapshot,this.rootContexts)})),function pl(A,T){return(0,mn.z)(C=>{const{targetSnapshot:P,currentSnapshot:N,guards:{canActivateChecks:j,canDeactivateChecks:re}}=C;return 0===re.length&&0===j.length?(0,Je.of)(Object.assign(Object.assign({},C),{guardsResult:!0})):function jl(A,T,C,P){return(0,ve.D)(A).pipe((0,mn.z)(N=>function sa(A,T,C,P,N){const j=T&&T.routeConfig?T.routeConfig.canDeactivate:null;if(!j||0===j.length)return(0,Je.of)(!0);const re=j.map(ge=>{const et=Qs(ge,T,N);let Ft;if(function Jr(A){return A&&Is(A.canDeactivate)}(et))Ft=Re(et.canDeactivate(A,T,C,P));else{if(!Is(et))throw new Error("Invalid CanDeactivate guard");Ft=Re(et(A,T,C,P))}return Ft.pipe((0,$t.P)())});return(0,Je.of)(re).pipe(xi())}(N.component,N.route,C,T,P)),(0,$t.P)(N=>!0!==N,!0))}(re,P,N,A).pipe((0,mn.z)(ge=>ge&&function Zu(A){return"boolean"==typeof A}(ge)?function ru(A,T,C,P){return(0,ve.D)(T).pipe((0,Wt.b)(N=>(0,X.z)(function Cs(A,T){return null!==A&&T&&T(new mi(A)),(0,Je.of)(!0)}(N.route.parent,P),function Iu(A,T){return null!==A&&T&&T(new me(A)),(0,Je.of)(!0)}(N.route,P),function Ls(A,T,C){const P=T[T.length-1],j=T.slice(0,T.length-1).reverse().map(re=>function Dn(A){const T=A.routeConfig?A.routeConfig.canActivateChild:null;return T&&0!==T.length?{node:A,guards:T}:null}(re)).filter(re=>null!==re).map(re=>Ie(()=>{const ge=re.guards.map(et=>{const Ft=Qs(et,re.node,C);let In;if(function ta(A){return A&&Is(A.canActivateChild)}(Ft))In=Re(Ft.canActivateChild(P,A));else{if(!Is(Ft))throw new Error("Invalid CanActivateChild guard");In=Re(Ft(P,A))}return In.pipe((0,$t.P)())});return(0,Je.of)(ge).pipe(xi())}));return(0,Je.of)(j).pipe(xi())}(A,N.path,C),function bi(A,T,C){const P=T.routeConfig?T.routeConfig.canActivate:null;if(!P||0===P.length)return(0,Je.of)(!0);const N=P.map(j=>Ie(()=>{const re=Qs(j,T,C);let ge;if(function Ii(A){return A&&Is(A.canActivate)}(re))ge=Re(re.canActivate(T,A));else{if(!Is(re))throw new Error("Invalid CanActivate guard");ge=Re(re(T,A))}return ge.pipe((0,$t.P)())}));return(0,Je.of)(N).pipe(xi())}(A,N.route,C))),(0,$t.P)(N=>!0!==N,!0))}(P,j,A,T):(0,Je.of)(ge)),(0,xt.U)(ge=>Object.assign(Object.assign({},C),{guardsResult:ge})))})}(this.ngModule.injector,ge=>this.triggerEvent(ge)),(0,sn.b)(ge=>{if(Ei(ge.guardsResult)){const Ft=on(`Redirecting to "${this.serializeUrl(ge.guardsResult)}"`);throw Ft.url=ge.guardsResult,Ft}const et=new Qt(ge.id,this.serializeUrl(ge.extractedUrl),this.serializeUrl(ge.urlAfterRedirects),ge.targetSnapshot,!!ge.guardsResult);this.triggerEvent(et)}),(0,Se.h)(ge=>!!ge.guardsResult||(this.restoreHistory(ge),this.cancelNavigationTransition(ge,""),!1)),ua(ge=>{if(ge.guards.canActivateChecks.length)return(0,Je.of)(ge).pipe((0,sn.b)(et=>{const Ft=new xn(et.id,this.serializeUrl(et.extractedUrl),this.serializeUrl(et.urlAfterRedirects),et.targetSnapshot);this.triggerEvent(Ft)}),(0,Lt.w)(et=>{let Ft=!1;return(0,Je.of)(et).pipe(function aa(A,T){return(0,mn.z)(C=>{const{targetSnapshot:P,guards:{canActivateChecks:N}}=C;if(!N.length)return(0,Je.of)(C);let j=0;return(0,ve.D)(N).pipe((0,Wt.b)(re=>function qu(A,T,C,P){return function po(A,T,C,P){const N=go(A);if(0===N.length)return(0,Je.of)({});const j={};return(0,ve.D)(N).pipe((0,mn.z)(re=>function Hl(A,T,C,P){const N=Qs(A,T,P);return Re(N.resolve?N.resolve(T,C):N(T,C))}(A[re],T,C,P).pipe((0,sn.b)(ge=>{j[re]=ge}))),Ae(1),(0,mn.z)(()=>go(j).length===N.length?(0,Je.of)(j):ze.E))}(A._resolve,A,T,P).pipe((0,xt.U)(j=>(A._resolvedData=j,A.data=Object.assign(Object.assign({},A.data),si(A,C).resolve),null)))}(re.route,P,A,T)),(0,sn.b)(()=>j++),Ae(1),(0,mn.z)(re=>j===N.length?(0,Je.of)(C):ze.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,sn.b)({next:()=>Ft=!0,complete:()=>{Ft||(this.restoreHistory(et),this.cancelNavigationTransition(et,"At least one route resolver didn't emit any value."))}}))}),(0,sn.b)(et=>{const Ft=new Mn(et.id,this.serializeUrl(et.extractedUrl),this.serializeUrl(et.urlAfterRedirects),et.targetSnapshot);this.triggerEvent(Ft)}))}),ua(ge=>{const{targetSnapshot:et,id:Ft,extractedUrl:In,rawUrl:qt,extras:{skipLocationChange:ar,replaceUrl:ur}}=ge;return this.hooks.afterPreactivation(et,{navigationId:Ft,appliedUrlTree:In,rawUrlTree:qt,skipLocationChange:!!ar,replaceUrl:!!ur})}),(0,xt.U)(ge=>{const et=function eu(A,T,C){const P=Pr(A,T._root,C?C._root:void 0);return new Yr(P,T)}(this.routeReuseStrategy,ge.targetSnapshot,ge.currentRouterState);return Object.assign(Object.assign({},ge),{targetRouterState:et})}),(0,sn.b)(ge=>{this.currentUrlTree=ge.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(ge.urlAfterRedirects,ge.rawUrl),this.routerState=ge.targetRouterState,"deferred"===this.urlUpdateStrategy&&(ge.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,ge),this.browserUrlTree=ge.urlAfterRedirects)}),((A,T,C)=>(0,xt.U)(P=>(new ds(T,P.targetRouterState,P.currentRouterState,C).activate(A),P)))(this.rootContexts,this.routeReuseStrategy,ge=>this.triggerEvent(ge)),(0,sn.b)({next(){j=!0},complete(){j=!0}}),function Tt(A){return(0,Xe.e)((T,C)=>{try{T.subscribe(C)}finally{C.add(A)}})}(()=>{var ge;j||re||this.cancelNavigationTransition(N,`Navigation ID ${N.id} is not equal to the current navigation id ${this.navigationId}`),(null===(ge=this.currentNavigation)||void 0===ge?void 0:ge.id)===N.id&&(this.currentNavigation=null)}),ue(ge=>{if(re=!0,function en(A){return A&&A[Sn]}(ge)){const et=Ei(ge.url);et||(this.navigated=!0,this.restoreHistory(N,!0));const Ft=new Mr(N.id,this.serializeUrl(N.extractedUrl),ge.message);P.next(Ft),et?setTimeout(()=>{const In=this.urlHandlingStrategy.merge(ge.url,this.rawUrlTree),qt={skipLocationChange:N.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ml(N.source)};this.scheduleNavigation(In,"imperative",null,qt,{resolve:N.resolve,reject:N.reject,promise:N.promise})},0):N.resolve(!1)}else{this.restoreHistory(N,!0);const et=new Kn(N.id,this.serializeUrl(N.extractedUrl),ge);P.next(et);try{N.resolve(this.errorHandler(ge))}catch(Ft){N.reject(Ft)}}return ze.E}))}))}resetRootComponentType(C){this.rootComponentType=C,this.routerState.root.component=this.rootComponentType}setTransition(C){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),C))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(C=>{const P="popstate"===C.type?"popstate":"hashchange";"popstate"===P&&setTimeout(()=>{var N;const j={replaceUrl:!0},re=(null===(N=C.state)||void 0===N?void 0:N.navigationId)?C.state:null;if(re){const et=Object.assign({},re);delete et.navigationId,delete et.\u0275routerPageId,0!==Object.keys(et).length&&(j.state=et)}const ge=this.parseUrl(C.url);this.scheduleNavigation(ge,P,re,j)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(C){this.events.next(C)}resetConfig(C){ks(C),this.config=C.map(L),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(C,P={}){const{relativeTo:N,queryParams:j,fragment:re,queryParamsHandling:ge,preserveFragment:et}=P,Ft=N||this.routerState.root,In=et?this.currentUrlTree.fragment:re;let qt=null;switch(ge){case"merge":qt=Object.assign(Object.assign({},this.currentUrlTree.queryParams),j);break;case"preserve":qt=this.currentUrlTree.queryParams;break;default:qt=j||null}return null!==qt&&(qt=this.removeEmptyProps(qt)),function Te(A,T,C,P,N){if(0===C.length)return ot(T.root,T.root,T.root,P,N);const j=function or(A){if("string"==typeof A[0]&&1===A.length&&"/"===A[0])return new Pt(!0,0,A);let T=0,C=!1;const P=A.reduce((N,j,re)=>{if("object"==typeof j&&null!=j){if(j.outlets){const ge={};return ce(j.outlets,(et,Ft)=>{ge[Ft]="string"==typeof et?et.split("/"):et}),[...N,{outlets:ge}]}if(j.segmentPath)return[...N,j.segmentPath]}return"string"!=typeof j?[...N,j]:0===re?(j.split("/").forEach((ge,et)=>{0==et&&"."===ge||(0==et&&""===ge?C=!0:".."===ge?T++:""!=ge&&N.push(ge))}),N):[...N,j]},[]);return new Pt(C,T,P)}(C);if(j.toRoot())return ot(T.root,T.root,new vn([],{}),P,N);const re=function tr(A,T,C){if(A.isAbsolute)return new Vn(T.root,!0,0);if(-1===C.snapshot._lastPathIndex){const j=C.snapshot._urlSegment;return new Vn(j,j===T.root,0)}const P=pe(A.commands[0])?0:1;return function Bi(A,T,C){let P=A,N=T,j=C;for(;j>N;){if(j-=N,P=P.parent,!P)throw new Error("Invalid number of '../'");N=P.segments.length}return new Vn(P,!1,N-j)}(C.snapshot._urlSegment,C.snapshot._lastPathIndex+P,A.numberOfDoubleDots)}(j,T,A),ge=re.processChildren?co(re.segmentGroup,re.index,j.commands):Ns(re.segmentGroup,re.index,j.commands);return ot(T.root,re.segmentGroup,ge,P,N)}(Ft,this.currentUrlTree,C,qt,null!=In?In:null)}navigateByUrl(C,P={skipLocationChange:!1}){const N=Ei(C)?C:this.parseUrl(C),j=this.urlHandlingStrategy.merge(N,this.rawUrlTree);return this.scheduleNavigation(j,"imperative",null,P)}navigate(C,P={skipLocationChange:!1}){return function Cu(A){for(let T=0;T<A.length;T++){const C=A[T];if(null==C)throw new Error(`The requested path contains ${C} segment at index ${T}`)}}(C),this.navigateByUrl(this.createUrlTree(C,P),P)}serializeUrl(C){return this.urlSerializer.serialize(C)}parseUrl(C){let P;try{P=this.urlSerializer.parse(C)}catch(N){P=this.malformedUriErrorHandler(N,this.urlSerializer,C)}return P}isActive(C,P){let N;if(N=!0===P?Object.assign({},Bs):!1===P?Object.assign({},la):P,Ei(C))return tn(this.currentUrlTree,C,N);const j=this.parseUrl(C);return tn(this.currentUrlTree,j,N)}removeEmptyProps(C){return Object.keys(C).reduce((P,N)=>{const j=C[N];return null!=j&&(P[N]=j),P},{})}processNavigations(){this.navigations.subscribe(C=>{this.navigated=!0,this.lastSuccessfulId=C.id,this.currentPageId=C.targetPageId,this.events.next(new zn(C.id,this.serializeUrl(C.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,C.resolve(!0)},C=>{this.console.warn(`Unhandled Navigation Error: ${C}`)})}scheduleNavigation(C,P,N,j,re){var ge,et;if(this.disposed)return Promise.resolve(!1);let Ft,In,qt;re?(Ft=re.resolve,In=re.reject,qt=re.promise):qt=new Promise(($i,Yo)=>{Ft=$i,In=Yo});const ar=++this.navigationId;let ur;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(N=this.location.getState()),ur=N&&N.\u0275routerPageId?N.\u0275routerPageId:j.replaceUrl||j.skipLocationChange?null!==(ge=this.browserPageId)&&void 0!==ge?ge:0:(null!==(et=this.browserPageId)&&void 0!==et?et:0)+1):ur=0,this.setTransition({id:ar,targetPageId:ur,source:P,restoredState:N,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:C,extras:j,resolve:Ft,reject:In,promise:qt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),qt.catch($i=>Promise.reject($i))}setBrowserUrl(C,P){const N=this.urlSerializer.serialize(C),j=Object.assign(Object.assign({},P.extras.state),this.generateNgRouterState(P.id,P.targetPageId));this.location.isCurrentPathEqualTo(N)||P.extras.replaceUrl?this.location.replaceState(N,"",j):this.location.go(N,"",j)}restoreHistory(C,P=!1){var N,j;if("computed"===this.canceledNavigationResolution){const re=this.currentPageId-C.targetPageId;"popstate"!==C.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(N=this.currentNavigation)||void 0===N?void 0:N.finalUrl)||0===re?this.currentUrlTree===(null===(j=this.currentNavigation)||void 0===j?void 0:j.finalUrl)&&0===re&&(this.resetState(C),this.browserUrlTree=C.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(re)}else"replace"===this.canceledNavigationResolution&&(P&&this.resetState(C),this.resetUrlToCurrentUrlTree())}resetState(C){this.routerState=C.currentRouterState,this.currentUrlTree=C.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,C.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(C,P){const N=new Mr(C.id,this.serializeUrl(C.extractedUrl),P);this.triggerEvent(N),C.resolve(!1)}generateNgRouterState(C,P){return"computed"===this.canceledNavigationResolution?{navigationId:C,\u0275routerPageId:P}:{navigationId:C}}}return A.\u0275fac=function(C){S.$Z()},A.\u0275prov=S.Yz7({token:A,factory:A.\u0275fac}),A})();function ml(A){return"imperative"!==A}let mo=(()=>{class A{constructor(C,P,N){this.router=C,this.route=P,this.locationStrategy=N,this.commands=null,this.href=null,this.onChanges=new v.x,this.subscription=C.events.subscribe(j=>{j instanceof zn&&this.updateTargetUrlAndHref()})}set routerLink(C){this.commands=null!=C?Array.isArray(C)?C:[C]:null}ngOnChanges(C){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(C,P,N,j,re){if(0!==C||P||N||j||re||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const ge={skipLocationChange:Vs(this.skipLocationChange),replaceUrl:Vs(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,ge),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Vs(this.preserveFragment)})}}return A.\u0275fac=function(C){return new(C||A)(S.Y36(Zn),S.Y36(ts),S.Y36(mr.S$))},A.\u0275dir=S.lG2({type:A,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(C,P){1&C&&S.NdJ("click",function(j){return P.onClick(j.button,j.ctrlKey,j.shiftKey,j.altKey,j.metaKey)}),2&C&&S.uIk("target",P.target)("href",P.href,S.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[S.TTD]}),A})();function Vs(A){return""===A||!!A}class qo{}class Gl{preload(T,C){return(0,Je.of)(null)}}let Uc=(()=>{class A{constructor(C,P,N,j){this.router=C,this.injector=N,this.preloadingStrategy=j,this.loader=new $l(N,P,et=>C.triggerEvent(new Pn(et)),et=>C.triggerEvent(new Yi(et)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Se.h)(C=>C instanceof zn),(0,Wt.b)(()=>this.preload())).subscribe(()=>{})}preload(){const C=this.injector.get(S.h0i);return this.processRoutes(C,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(C,P){const N=[];for(const j of P)if(j.loadChildren&&!j.canLoad&&j._loadedConfig){const re=j._loadedConfig;N.push(this.processRoutes(re.module,re.routes))}else j.loadChildren&&!j.canLoad?N.push(this.preloadConfig(C,j)):j.children&&N.push(this.processRoutes(C,j.children));return(0,ve.D)(N).pipe((0,_n.J)(),(0,xt.U)(j=>{}))}preloadConfig(C,P){return this.preloadingStrategy.preload(P,()=>(P._loadedConfig?(0,Je.of)(P._loadedConfig):this.loader.load(C.injector,P)).pipe((0,mn.z)(j=>(P._loadedConfig=j,this.processRoutes(j.module,j.routes)))))}}return A.\u0275fac=function(C){return new(C||A)(S.LFG(Zn),S.LFG(S.Sil),S.LFG(S.zs3),S.LFG(qo))},A.\u0275prov=S.Yz7({token:A,factory:A.\u0275fac}),A})(),Pi=(()=>{class A{constructor(C,P,N={}){this.router=C,this.viewportScroller=P,this.options=N,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},N.scrollPositionRestoration=N.scrollPositionRestoration||"disabled",N.anchorScrolling=N.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(C=>{C instanceof cr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=C.navigationTrigger,this.restoredId=C.restoredState?C.restoredState.navigationId:0):C instanceof zn&&(this.lastId=C.id,this.scheduleScrollEvent(C,this.router.parseUrl(C.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(C=>{C instanceof dt&&(C.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(C.position):C.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(C.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(C,P){this.router.triggerEvent(new dt(C,"popstate"===this.lastSource?this.store[this.restoredId]:null,P))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return A.\u0275fac=function(C){S.$Z()},A.\u0275prov=S.Yz7({token:A,factory:A.\u0275fac}),A})();const Ha=new S.OlP("ROUTER_CONFIGURATION"),js=new S.OlP("ROUTER_FORROOT_GUARD"),Tu=[mr.Ye,{provide:vi,useClass:Bo},{provide:Zn,useFactory:function ni(A,T,C,P,N,j,re={},ge,et){const Ft=new Zn(null,A,T,C,P,N,he(j));return ge&&(Ft.urlHandlingStrategy=ge),et&&(Ft.routeReuseStrategy=et),function ou(A,T){A.errorHandler&&(T.errorHandler=A.errorHandler),A.malformedUriErrorHandler&&(T.malformedUriErrorHandler=A.malformedUriErrorHandler),A.onSameUrlNavigation&&(T.onSameUrlNavigation=A.onSameUrlNavigation),A.paramsInheritanceStrategy&&(T.paramsInheritanceStrategy=A.paramsInheritanceStrategy),A.relativeLinkResolution&&(T.relativeLinkResolution=A.relativeLinkResolution),A.urlUpdateStrategy&&(T.urlUpdateStrategy=A.urlUpdateStrategy),A.canceledNavigationResolution&&(T.canceledNavigationResolution=A.canceledNavigationResolution)}(re,Ft),re.enableTracing&&Ft.events.subscribe(In=>{var qt,ar;null===(qt=console.group)||void 0===qt||qt.call(console,`Router Event: ${In.constructor.name}`),console.log(In.toString()),console.log(In),null===(ar=console.groupEnd)||void 0===ar||ar.call(console)}),Ft},deps:[vi,Nr,mr.Ye,S.zs3,S.Sil,Zo,Ha,[class Zl{},new S.FiY],[class Mi{},new S.FiY]]},Nr,{provide:ts,useFactory:function zo(A){return A.routerState.root},deps:[Zn]},Uc,Gl,class eo{preload(T,C){return C().pipe(ue(()=>(0,Je.of)(null)))}},{provide:Ha,useValue:{enableTracing:!1}}];function ql(){return new S.PXZ("Router",Zn)}let $a=(()=>{class A{constructor(C,P){}static forRoot(C,P){return{ngModule:A,providers:[Tu,ca(C),{provide:js,useFactory:Za,deps:[[Zn,new S.FiY,new S.tp0]]},{provide:Ha,useValue:P||{}},{provide:mr.S$,useFactory:ti,deps:[mr.lw,[new S.tBr(mr.mr),new S.FiY],Ha]},{provide:Pi,useFactory:Wo,deps:[Zn,mr.EM,Ha]},{provide:qo,useExisting:P&&P.preloadingStrategy?P.preloadingStrategy:Gl},{provide:S.PXZ,multi:!0,useFactory:ql},[au,{provide:S.ip1,multi:!0,useFactory:Du,deps:[au]},{provide:_r,useFactory:wt,deps:[au]},{provide:S.tb,multi:!0,useExisting:_r}]]}}static forChild(C){return{ngModule:A,providers:[ca(C)]}}}return A.\u0275fac=function(C){return new(C||A)(S.LFG(js,8),S.LFG(Zn,8))},A.\u0275mod=S.oAB({type:A}),A.\u0275inj=S.cJS({}),A})();function Wo(A,T,C){return C.scrollOffset&&T.setOffset(C.scrollOffset),new Pi(A,T,C)}function ti(A,T,C={}){return C.useHash?new mr.Do(A,T):new mr.b0(A,T)}function Za(A){return"guarded"}function ca(A){return[{provide:S.deG,multi:!0,useValue:A},{provide:Zo,multi:!0,useValue:A}]}let au=(()=>{class A{constructor(C){this.injector=C,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new v.x}appInitializer(){return this.injector.get(mr.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let P=null;const N=new Promise(ge=>P=ge),j=this.injector.get(Zn),re=this.injector.get(Ha);return"disabled"===re.initialNavigation?(j.setUpLocationChangeListener(),P(!0)):"enabled"===re.initialNavigation||"enabledBlocking"===re.initialNavigation?(j.hooks.afterPreactivation=()=>this.initNavigation?(0,Je.of)(null):(this.initNavigation=!0,P(!0),this.resultOfPreactivationDone),j.initialNavigation()):P(!0),N})}bootstrapListener(C){const P=this.injector.get(Ha),N=this.injector.get(Uc),j=this.injector.get(Pi),re=this.injector.get(Zn),ge=this.injector.get(S.z2F);C===ge.components[0]&&(("enabledNonBlocking"===P.initialNavigation||void 0===P.initialNavigation)&&re.initialNavigation(),N.setUpPreloading(),j.init(),re.resetRootComponentType(ge.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return A.\u0275fac=function(C){return new(C||A)(S.LFG(S.zs3))},A.\u0275prov=S.Yz7({token:A,factory:A.\u0275fac}),A})();function Du(A){return A.appInitializer.bind(A)}function wt(A){return A.bootstrapListener.bind(A)}const _r=new S.OlP("Router Initializer")},3942:(Rt,Ve,V)=>{V.d(Ve,{Z:()=>at});var S=V(2090),v=V(4859),J=V(9681),Ce=V(1877);class Ee{constructor(Ze,rt){this._delegate=Ze,this.firebase=rt,(0,J._addComponent)(Ze,new v.wA("app-compat",()=>this,"PUBLIC")),this.container=Ze.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ze){this._delegate.automaticDataCollectionEnabled=Ze}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ze=>{this._delegate.checkDestroyed(),Ze()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,J.deleteApp)(this._delegate)))}_getService(Ze,rt=J._DEFAULT_ENTRY_NAME){var Ie;this._delegate.checkDestroyed();const At=this._delegate.container.getProvider(Ze);return!At.isInitialized()&&"EXPLICIT"===(null===(Ie=At.getComponent())||void 0===Ie?void 0:Ie.instantiationMode)&&At.initialize(),At.getImmediate({identifier:rt})}_removeServiceInstance(Ze,rt=J._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ze).clearInstance(rt)}_addComponent(Ze){(0,J._addComponent)(this._delegate,Ze)}_addOrOverwriteComponent(Ze){(0,J._addOrOverwriteComponent)(this._delegate,Ze)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Me=new S.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),le=function Oe(){const bt=function xe(bt){const Ze={},rt={__esModule:!0,initializeApp:function Xe(yt,X={}){const ze=J.initializeApp(yt,X);if((0,S.r3)(Ze,ze.name))return Ze[ze.name];const ue=new bt(ze,rt);return Ze[ze.name]=ue,ue},app:At,registerVersion:J.registerVersion,setLogLevel:J.setLogLevel,onLog:J.onLog,apps:null,SDK_VERSION:J.SDK_VERSION,INTERNAL:{registerComponent:function je(yt){const X=yt.name,ze=X.replace("-compat","");if(J._registerComponent(yt)&&"PUBLIC"===yt.type){const ue=(Se=At())=>{if("function"!=typeof Se[ze])throw Me.create("invalid-app-argument",{appName:X});return Se[ze]()};void 0!==yt.serviceProps&&(0,S.ZB)(ue,yt.serviceProps),rt[ze]=ue,bt.prototype[ze]=function(...Se){return this._getService.bind(this,X).apply(this,yt.multipleInstances?Se:[])}}return"PUBLIC"===yt.type?rt[ze]:null},removeApp:function Ie(yt){delete Ze[yt]},useAsService:function Je(yt,X){return"serverAuth"===X?null:X},modularAPIs:J}};function At(yt){if(!(0,S.r3)(Ze,yt=yt||J._DEFAULT_ENTRY_NAME))throw Me.create("no-app",{appName:yt});return Ze[yt]}return rt.default=rt,Object.defineProperty(rt,"apps",{get:function Ke(){return Object.keys(Ze).map(yt=>Ze[yt])}}),At.App=bt,rt}(Ee);return bt.INTERNAL=Object.assign(Object.assign({},bt.INTERNAL),{createFirebaseNamespace:Oe,extendNamespace:function Ze(rt){(0,S.ZB)(bt,rt)},createSubscribe:S.ne,ErrorFactory:S.LL,deepExtend:S.ZB}),bt}(),ae=new Ce.Yd("@firebase/app-compat");if((0,S.jU)()&&void 0!==self.firebase){ae.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const bt=self.firebase.SDK_VERSION;bt&&bt.indexOf("LITE")>=0&&ae.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const at=le;!function nt(bt){(0,J.registerVersion)("@firebase/app-compat","0.1.27",bt)}()},9681:(Rt,Ve,V)=>{V.r(Ve),V.d(Ve,{FirebaseError:()=>Ce.ZR,SDK_VERSION:()=>Mr,_DEFAULT_ENTRY_NAME:()=>Lt,_addComponent:()=>Wt,_addOrOverwriteComponent:()=>$t,_apps:()=>cn,_clearComponents:()=>mr,_components:()=>Yt,_getProvider:()=>sn,_registerComponent:()=>mn,_removeServiceInstance:()=>_n,deleteApp:()=>Qt,getApp:()=>wr,getApps:()=>Yn,initializeApp:()=>Kn,onLog:()=>Pn,registerVersion:()=>Mn,setLogLevel:()=>Yi});var S=V(5861),v=V(4859),J=V(1877),Ce=V(2090),Ee=V(8766);class ve{constructor(Re){this.container=Re}getPlatformInfoString(){return this.container.getProviders().map(it=>{if(function Me(ce){const Re=ce.getComponent();return"VERSION"===(null==Re?void 0:Re.type)}(it)){const Ot=it.getImmediate();return`${Ot.library}/${Ot.version}`}return null}).filter(it=>it).join(" ")}}const xe="@firebase/app",le=new J.Yd("@firebase/app"),Lt="[DEFAULT]",ut={[xe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},cn=new Map,Yt=new Map;function Wt(ce,Re){try{ce.container.addComponent(Re)}catch(it){le.debug(`Component ${Re.name} failed to register with FirebaseApp ${ce.name}`,it)}}function $t(ce,Re){ce.container.addOrOverwriteComponent(Re)}function mn(ce){const Re=ce.name;if(Yt.has(Re))return le.debug(`There were multiple attempts to register component ${Re}.`),!1;Yt.set(Re,ce);for(const it of cn.values())Wt(it,ce);return!0}function sn(ce,Re){const it=ce.container.getProvider("heartbeat").getImmediate({optional:!0});return it&&it.triggerHeartbeat(),ce.container.getProvider(Re)}function _n(ce,Re,it=Lt){sn(ce,Re).clearInstance(it)}function mr(){Yt.clear()}const cr=new Ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class zn{constructor(Re,it,Ot){this._isDeleted=!1,this._options=Object.assign({},Re),this._config=Object.assign({},it),this._name=it.name,this._automaticDataCollectionEnabled=it.automaticDataCollectionEnabled,this._container=Ot,this.container.addComponent(new v.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Re){this.checkDestroyed(),this._automaticDataCollectionEnabled=Re}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Re){this._isDeleted=Re}checkDestroyed(){if(this.isDeleted)throw cr.create("app-deleted",{appName:this._name})}}const Mr="9.8.3";function Kn(ce,Re={}){"object"!=typeof Re&&(Re={name:Re});const it=Object.assign({name:Lt,automaticDataCollectionEnabled:!1},Re),Ot=it.name;if("string"!=typeof Ot||!Ot)throw cr.create("bad-app-name",{appName:String(Ot)});const Jt=cn.get(Ot);if(Jt){if((0,Ce.vZ)(ce,Jt.options)&&(0,Ce.vZ)(it,Jt.config))return Jt;throw cr.create("duplicate-app",{appName:Ot})}const tn=new v.H0(Ot);for(const dn of Yt.values())tn.addComponent(dn);const yr=new zn(ce,it,tn);return cn.set(Ot,yr),yr}function wr(ce=Lt){const Re=cn.get(ce);if(!Re)throw cr.create("no-app",{appName:ce});return Re}function Yn(){return Array.from(cn.values())}function Qt(ce){return xn.apply(this,arguments)}function xn(){return(xn=(0,S.Z)(function*(ce){const Re=ce.name;cn.has(Re)&&(cn.delete(Re),yield Promise.all(ce.container.getProviders().map(it=>it.delete())),ce.isDeleted=!0)})).apply(this,arguments)}function Mn(ce,Re,it){var Ot;let Jt=null!==(Ot=ut[ce])&&void 0!==Ot?Ot:ce;it&&(Jt+=`-${it}`);const tn=Jt.match(/\s|\//),yr=Re.match(/\s|\//);if(tn||yr){const dn=[`Unable to register library "${Jt}" with version "${Re}":`];return tn&&dn.push(`library name "${Jt}" contains illegal characters (whitespace or "/")`),tn&&yr&&dn.push("and"),yr&&dn.push(`version name "${Re}" contains illegal characters (whitespace or "/")`),void le.warn(dn.join(" "))}mn(new v.wA(`${Jt}-version`,()=>({library:Jt,version:Re}),"VERSION"))}function Pn(ce,Re){if(null!==ce&&"function"!=typeof ce)throw cr.create("invalid-log-argument");(0,J.Am)(ce,Re)}function Yi(ce){(0,J.Ub)(ce)}const me="firebase-heartbeat-store";let we=null;function dt(){return we||(we=(0,Ee.X3)("firebase-heartbeat-database",1,{upgrade:(ce,Re)=>{0===Re&&ce.createObjectStore(me)}}).catch(ce=>{throw cr.create("storage-open",{originalErrorMessage:ce.message})})),we}function ft(){return(ft=(0,S.Z)(function*(ce){var Re;try{return(yield dt()).transaction(me).objectStore(me).get(on(ce))}catch(it){throw cr.create("storage-get",{originalErrorMessage:null===(Re=it)||void 0===Re?void 0:Re.message})}})).apply(this,arguments)}function Dt(ce,Re){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,S.Z)(function*(ce,Re){var it;try{const Jt=(yield dt()).transaction(me,"readwrite");return yield Jt.objectStore(me).put(Re,on(ce)),Jt.done}catch(Ot){throw cr.create("storage-set",{originalErrorMessage:null===(it=Ot)||void 0===it?void 0:it.message})}})).apply(this,arguments)}function on(ce){return`${ce.name}!${ce.options.appId}`}class Er{constructor(Re){this.container=Re,this._heartbeatsCache=null;const it=this.container.getProvider("app").getImmediate();this._storage=new he(it),this._heartbeatsCachePromise=this._storage.read().then(Ot=>(this._heartbeatsCache=Ot,Ot))}triggerHeartbeat(){var Re=this;return(0,S.Z)(function*(){const Ot=Re.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Jt=Nn();if(null===Re._heartbeatsCache&&(Re._heartbeatsCache=yield Re._heartbeatsCachePromise),Re._heartbeatsCache.lastSentHeartbeatDate!==Jt&&!Re._heartbeatsCache.heartbeats.some(tn=>tn.date===Jt))return Re._heartbeatsCache.heartbeats.push({date:Jt,agent:Ot}),Re._heartbeatsCache.heartbeats=Re._heartbeatsCache.heartbeats.filter(tn=>{const yr=new Date(tn.date).valueOf();return Date.now()-yr<=2592e6}),Re._storage.overwrite(Re._heartbeatsCache)})()}getHeartbeatsHeader(){var Re=this;return(0,S.Z)(function*(){if(null===Re._heartbeatsCache&&(yield Re._heartbeatsCachePromise),null===Re._heartbeatsCache||0===Re._heartbeatsCache.heartbeats.length)return"";const it=Nn(),{heartbeatsToSend:Ot,unsentEntries:Jt}=function se(ce,Re=1024){const it=[];let Ot=ce.slice();for(const Jt of ce){const tn=it.find(yr=>yr.agent===Jt.agent);if(tn){if(tn.dates.push(Jt.date),ye(it)>Re){tn.dates.pop();break}}else if(it.push({agent:Jt.agent,dates:[Jt.date]}),ye(it)>Re){it.pop();break}Ot=Ot.slice(1)}return{heartbeatsToSend:it,unsentEntries:Ot}}(Re._heartbeatsCache.heartbeats),tn=(0,Ce.L)(JSON.stringify({version:2,heartbeats:Ot}));return Re._heartbeatsCache.lastSentHeartbeatDate=it,Jt.length>0?(Re._heartbeatsCache.heartbeats=Jt,yield Re._storage.overwrite(Re._heartbeatsCache)):(Re._heartbeatsCache.heartbeats=[],Re._storage.overwrite(Re._heartbeatsCache)),tn})()}}function Nn(){return(new Date).toISOString().substring(0,10)}class he{constructor(Re){this.app=Re,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,S.Z)(function*(){return!!(0,Ce.hl)()&&(0,Ce.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Re=this;return(0,S.Z)(function*(){return(yield Re._canUseIndexedDBPromise)&&(yield function ke(ce){return ft.apply(this,arguments)}(Re.app))||{heartbeats:[]}})()}overwrite(Re){var it=this;return(0,S.Z)(function*(){var Ot;if(yield it._canUseIndexedDBPromise){const tn=yield it.read();return Dt(it.app,{lastSentHeartbeatDate:null!==(Ot=Re.lastSentHeartbeatDate)&&void 0!==Ot?Ot:tn.lastSentHeartbeatDate,heartbeats:Re.heartbeats})}})()}add(Re){var it=this;return(0,S.Z)(function*(){var Ot;if(yield it._canUseIndexedDBPromise){const tn=yield it.read();return Dt(it.app,{lastSentHeartbeatDate:null!==(Ot=Re.lastSentHeartbeatDate)&&void 0!==Ot?Ot:tn.lastSentHeartbeatDate,heartbeats:[...tn.heartbeats,...Re.heartbeats]})}})()}}function ye(ce){return(0,Ce.L)(JSON.stringify({version:2,heartbeats:ce})).length}!function st(ce){mn(new v.wA("platform-logger",Re=>new ve(Re),"PRIVATE")),mn(new v.wA("heartbeat",Re=>new Er(Re),"PRIVATE")),Mn(xe,"0.7.26",ce),Mn(xe,"0.7.26","esm2017"),Mn("fire-js","")}("")},4859:(Rt,Ve,V)=>{V.d(Ve,{H0:()=>xe,wA:()=>J,zt:()=>Ee});var S=V(5861),v=V(2090);class J{constructor(le,ae,De){this.name=le,this.instanceFactory=ae,this.type=De,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(le){return this.instantiationMode=le,this}setMultipleInstances(le){return this.multipleInstances=le,this}setServiceProps(le){return this.serviceProps=le,this}setInstanceCreatedCallback(le){return this.onInstanceCreated=le,this}}const Ce="[DEFAULT]";class Ee{constructor(le,ae){this.name=le,this.container=ae,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(le){const ae=this.normalizeInstanceIdentifier(le);if(!this.instancesDeferred.has(ae)){const De=new v.BH;if(this.instancesDeferred.set(ae,De),this.isInitialized(ae)||this.shouldAutoInitialize())try{const It=this.getOrInitializeService({instanceIdentifier:ae});It&&De.resolve(It)}catch(It){}}return this.instancesDeferred.get(ae).promise}getImmediate(le){var ae;const De=this.normalizeInstanceIdentifier(null==le?void 0:le.identifier),It=null!==(ae=null==le?void 0:le.optional)&&void 0!==ae&&ae;if(!this.isInitialized(De)&&!this.shouldAutoInitialize()){if(It)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:De})}catch(nt){if(It)return null;throw nt}}getComponent(){return this.component}setComponent(le){if(le.name!==this.name)throw Error(`Mismatching Component ${le.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=le,this.shouldAutoInitialize()){if(function Me(Oe){return"EAGER"===Oe.instantiationMode}(le))try{this.getOrInitializeService({instanceIdentifier:Ce})}catch(ae){}for(const[ae,De]of this.instancesDeferred.entries()){const It=this.normalizeInstanceIdentifier(ae);try{const nt=this.getOrInitializeService({instanceIdentifier:It});De.resolve(nt)}catch(nt){}}}}clearInstance(le=Ce){this.instancesDeferred.delete(le),this.instancesOptions.delete(le),this.instances.delete(le)}delete(){var le=this;return(0,S.Z)(function*(){const ae=Array.from(le.instances.values());yield Promise.all([...ae.filter(De=>"INTERNAL"in De).map(De=>De.INTERNAL.delete()),...ae.filter(De=>"_delete"in De).map(De=>De._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(le=Ce){return this.instances.has(le)}getOptions(le=Ce){return this.instancesOptions.get(le)||{}}initialize(le={}){const{options:ae={}}=le,De=this.normalizeInstanceIdentifier(le.instanceIdentifier);if(this.isInitialized(De))throw Error(`${this.name}(${De}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const It=this.getOrInitializeService({instanceIdentifier:De,options:ae});for(const[nt,at]of this.instancesDeferred.entries())De===this.normalizeInstanceIdentifier(nt)&&at.resolve(It);return It}onInit(le,ae){var De;const It=this.normalizeInstanceIdentifier(ae),nt=null!==(De=this.onInitCallbacks.get(It))&&void 0!==De?De:new Set;nt.add(le),this.onInitCallbacks.set(It,nt);const at=this.instances.get(It);return at&&le(at,It),()=>{nt.delete(le)}}invokeOnInitCallbacks(le,ae){const De=this.onInitCallbacks.get(ae);if(De)for(const It of De)try{It(le,ae)}catch(nt){}}getOrInitializeService({instanceIdentifier:le,options:ae={}}){let De=this.instances.get(le);if(!De&&this.component&&(De=this.component.instanceFactory(this.container,{instanceIdentifier:(Oe=le,Oe===Ce?void 0:Oe),options:ae}),this.instances.set(le,De),this.instancesOptions.set(le,ae),this.invokeOnInitCallbacks(De,le),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,le,De)}catch(It){}var Oe;return De||null}normalizeInstanceIdentifier(le=Ce){return this.component?this.component.multipleInstances?le:Ce:le}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class xe{constructor(le){this.name=le,this.providers=new Map}addComponent(le){const ae=this.getProvider(le.name);if(ae.isComponentSet())throw new Error(`Component ${le.name} has already been registered with ${this.name}`);ae.setComponent(le)}addOrOverwriteComponent(le){this.getProvider(le.name).isComponentSet()&&this.providers.delete(le.name),this.addComponent(le)}getProvider(le){if(this.providers.has(le))return this.providers.get(le);const ae=new Ee(le,this);return this.providers.set(le,ae),ae}getProviders(){return Array.from(this.providers.values())}}},1877:(Rt,Ve,V)=>{V.d(Ve,{Am:()=>Oe,Ub:()=>xe,Yd:()=>Me,in:()=>v});const S=[];var v=(()=>{return(le=v||(v={}))[le.DEBUG=0]="DEBUG",le[le.VERBOSE=1]="VERBOSE",le[le.INFO=2]="INFO",le[le.WARN=3]="WARN",le[le.ERROR=4]="ERROR",le[le.SILENT=5]="SILENT",v;var le})();const J={debug:v.DEBUG,verbose:v.VERBOSE,info:v.INFO,warn:v.WARN,error:v.ERROR,silent:v.SILENT},Ce=v.INFO,Ee={[v.DEBUG]:"log",[v.VERBOSE]:"log",[v.INFO]:"info",[v.WARN]:"warn",[v.ERROR]:"error"},ve=(le,ae,...De)=>{if(ae<le.logLevel)return;const It=(new Date).toISOString(),nt=Ee[ae];if(!nt)throw new Error(`Attempted to log a message with an invalid logType (value: ${ae})`);console[nt](`[${It}]  ${le.name}:`,...De)};class Me{constructor(ae){this.name=ae,this._logLevel=Ce,this._logHandler=ve,this._userLogHandler=null,S.push(this)}get logLevel(){return this._logLevel}set logLevel(ae){if(!(ae in v))throw new TypeError(`Invalid value "${ae}" assigned to \`logLevel\``);this._logLevel=ae}setLogLevel(ae){this._logLevel="string"==typeof ae?J[ae]:ae}get logHandler(){return this._logHandler}set logHandler(ae){if("function"!=typeof ae)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ae}get userLogHandler(){return this._userLogHandler}set userLogHandler(ae){this._userLogHandler=ae}debug(...ae){this._userLogHandler&&this._userLogHandler(this,v.DEBUG,...ae),this._logHandler(this,v.DEBUG,...ae)}log(...ae){this._userLogHandler&&this._userLogHandler(this,v.VERBOSE,...ae),this._logHandler(this,v.VERBOSE,...ae)}info(...ae){this._userLogHandler&&this._userLogHandler(this,v.INFO,...ae),this._logHandler(this,v.INFO,...ae)}warn(...ae){this._userLogHandler&&this._userLogHandler(this,v.WARN,...ae),this._logHandler(this,v.WARN,...ae)}error(...ae){this._userLogHandler&&this._userLogHandler(this,v.ERROR,...ae),this._logHandler(this,v.ERROR,...ae)}}function xe(le){S.forEach(ae=>{ae.setLogLevel(le)})}function Oe(le,ae){for(const De of S){let It=null;ae&&ae.level&&(It=J[ae.level]),De.userLogHandler=null===le?null:(nt,at,...bt)=>{const Ze=bt.map(rt=>{if(null==rt)return null;if("string"==typeof rt)return rt;if("number"==typeof rt||"boolean"==typeof rt)return rt.toString();if(rt instanceof Error)return rt.message;try{return JSON.stringify(rt)}catch(Ie){return null}}).filter(rt=>rt).join(" ");at>=(null!=It?It:nt.logLevel)&&le({level:v[at].toLowerCase(),message:Ze,args:bt,type:nt.name})}}}},8766:(Rt,Ve,V)=>{V.d(Ve,{Lj:()=>Xe,X3:()=>At});var S=V(5861);let J,Ce;const Me=new WeakMap,xe=new WeakMap,Oe=new WeakMap,le=new WeakMap,ae=new WeakMap;let nt={get(X,ze,ue){if(X instanceof IDBTransaction){if("done"===ze)return xe.get(X);if("objectStoreNames"===ze)return X.objectStoreNames||Oe.get(X);if("store"===ze)return ue.objectStoreNames[1]?void 0:ue.objectStore(ue.objectStoreNames[0])}return rt(X[ze])},set:(X,ze,ue)=>(X[ze]=ue,!0),has:(X,ze)=>X instanceof IDBTransaction&&("done"===ze||"store"===ze)||ze in X};function Ze(X){return"function"==typeof X?function bt(X){return X!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ve(){return Ce||(Ce=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(X)?function(...ze){return X.apply(Ie(this),ze),rt(Me.get(this))}:function(...ze){return rt(X.apply(Ie(this),ze))}:function(ze,...ue){const Se=X.call(Ie(this),ze,...ue);return Oe.set(Se,ze.sort?ze.sort():[ze]),rt(Se)}}(X):(X instanceof IDBTransaction&&function It(X){if(xe.has(X))return;const ze=new Promise((ue,Se)=>{const Ae=()=>{X.removeEventListener("complete",Ge),X.removeEventListener("error",$e),X.removeEventListener("abort",$e)},Ge=()=>{ue(),Ae()},$e=()=>{Se(X.error||new DOMException("AbortError","AbortError")),Ae()};X.addEventListener("complete",Ge),X.addEventListener("error",$e),X.addEventListener("abort",$e)});xe.set(X,ze)}(X),((X,ze)=>ze.some(ue=>X instanceof ue))(X,function Ee(){return J||(J=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(X,nt):X)}function rt(X){if(X instanceof IDBRequest)return function De(X){const ze=new Promise((ue,Se)=>{const Ae=()=>{X.removeEventListener("success",Ge),X.removeEventListener("error",$e)},Ge=()=>{ue(rt(X.result)),Ae()},$e=()=>{Se(X.error),Ae()};X.addEventListener("success",Ge),X.addEventListener("error",$e)});return ze.then(ue=>{ue instanceof IDBCursor&&Me.set(ue,X)}).catch(()=>{}),ae.set(ze,X),ze}(X);if(le.has(X))return le.get(X);const ze=Ze(X);return ze!==X&&(le.set(X,ze),ae.set(ze,X)),ze}const Ie=X=>ae.get(X);function At(X,ze,{blocked:ue,upgrade:Se,blocking:Ae,terminated:Ge}={}){const $e=indexedDB.open(X,ze),mt=rt($e);return Se&&$e.addEventListener("upgradeneeded",Tt=>{Se(rt($e.result),Tt.oldVersion,Tt.newVersion,rt($e.transaction))}),ue&&$e.addEventListener("blocked",()=>ue()),mt.then(Tt=>{Ge&&Tt.addEventListener("close",()=>Ge()),Ae&&Tt.addEventListener("versionchange",()=>Ae())}).catch(()=>{}),mt}function Xe(X,{blocked:ze}={}){const ue=indexedDB.deleteDatabase(X);return ze&&ue.addEventListener("blocked",()=>ze()),rt(ue).then(()=>{})}const Ke=["get","getKey","getAll","getAllKeys","count"],je=["put","add","delete","clear"],Je=new Map;function yt(X,ze){if(!(X instanceof IDBDatabase)||ze in X||"string"!=typeof ze)return;if(Je.get(ze))return Je.get(ze);const ue=ze.replace(/FromIndex$/,""),Se=ze!==ue,Ae=je.includes(ue);if(!(ue in(Se?IDBIndex:IDBObjectStore).prototype)||!Ae&&!Ke.includes(ue))return;const Ge=function(){var $e=(0,S.Z)(function*(mt,...Tt){const xt=this.transaction(mt,Ae?"readwrite":"readonly");let Lt=xt.store;return Se&&(Lt=Lt.index(Tt.shift())),(yield Promise.all([Lt[ue](...Tt),Ae&&xt.done]))[0]});return function(Tt){return $e.apply(this,arguments)}}();return Je.set(ze,Ge),Ge}!function at(X){nt=X(nt)}(X=>Vw(Bw({},X),{get:(ze,ue,Se)=>yt(ze,ue)||X.get(ze,ue,Se),has:(ze,ue)=>!!yt(ze,ue)||X.has(ze,ue)}))},5861:(Rt,Ve,V)=>{function S(J,Ce,Ee,ve,Me,xe,Oe){try{var le=J[xe](Oe),ae=le.value}catch(De){return void Ee(De)}le.done?Ce(ae):Promise.resolve(ae).then(ve,Me)}function v(J){return function(){var Ce=this,Ee=arguments;return new Promise(function(ve,Me){var xe=J.apply(Ce,Ee);function Oe(ae){S(xe,ve,Me,Oe,le,"next",ae)}function le(ae){S(xe,ve,Me,Oe,le,"throw",ae)}Oe(void 0)})}}V.d(Ve,{Z:()=>v})}},Rt=>{Rt(Rt.s=5389)}]);